import{F as xe}from"./chunk-PWCSEZZ4-BF2VnWKa.js";import{s as He}from"./chunk-VSLJSFIP-HXIVpEg-.js";import{c as Ve}from"./chunk-4KE642ED-CQo95axk.js";import{p as Be}from"./gitGraph-YCYPL57B-MEVJTYR7-CjZIpWK-.js";import{m as T,n as We,v as je,J as Me,q as $e,bm as qe,bb as ve,Q as le,bn as fe,bo as Ze,a8 as Je,b7 as Ke,a0 as me,L as Qe,A as ti,w as ei,B as ii,F as ri,M as ni,b as oi}from"./mermaid.esm.min-CX2QOtl_.js";import"./chunk-5ZJXQJOJ-Bx_alONK.js";import"./app-6Pxy8Dwq.js";var _e=me((w,H)=>{T(function(C,F){typeof w=="object"&&typeof H=="object"?H.exports=F():typeof define=="function"&&define.amd?define([],F):typeof w=="object"?w.layoutBase=F():C.layoutBase=F()},"webpackUniversalModuleDefinition")(w,function(){return function(C){var F={};function A(g){if(F[g])return F[g].exports;var s=F[g]={i:g,l:!1,exports:{}};return C[g].call(s.exports,s,s.exports,A),s.l=!0,s.exports}return T(A,"__webpack_require__"),A.m=C,A.c=F,A.i=function(g){return g},A.d=function(g,s,r){A.o(g,s)||Object.defineProperty(g,s,{configurable:!1,enumerable:!0,get:r})},A.n=function(g){var s=g&&g.__esModule?T(function(){return g.default},"getDefault"):T(function(){return g},"getModuleExports");return A.d(s,"a",s),s},A.o=function(g,s){return Object.prototype.hasOwnProperty.call(g,s)},A.p="",A(A.s=28)}([function(C,F,A){function g(){}T(g,"LayoutConstants"),g.QUALITY=1,g.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,g.DEFAULT_INCREMENTAL=!1,g.DEFAULT_ANIMATION_ON_LAYOUT=!0,g.DEFAULT_ANIMATION_DURING_LAYOUT=!1,g.DEFAULT_ANIMATION_PERIOD=50,g.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,g.DEFAULT_GRAPH_MARGIN=15,g.NODE_DIMENSIONS_INCLUDE_LABELS=!1,g.SIMPLE_NODE_SIZE=40,g.SIMPLE_NODE_HALF_SIZE=g.SIMPLE_NODE_SIZE/2,g.EMPTY_COMPOUND_NODE_SIZE=40,g.MIN_EDGE_LENGTH=1,g.WORLD_BOUNDARY=1e6,g.INITIAL_WORLD_BOUNDARY=g.WORLD_BOUNDARY/1e3,g.WORLD_CENTER_X=1200,g.WORLD_CENTER_Y=900,C.exports=g},function(C,F,A){var g=A(2),s=A(8),r=A(9);function i(h,n,v){g.call(this,v),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=v,this.bendpoints=[],this.source=h,this.target=n}T(i,"LEdge"),i.prototype=Object.create(g.prototype);for(var t in g)i[t]=g[t];i.prototype.getSource=function(){return this.source},i.prototype.getTarget=function(){return this.target},i.prototype.isInterGraph=function(){return this.isInterGraph},i.prototype.getLength=function(){return this.length},i.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},i.prototype.getBendpoints=function(){return this.bendpoints},i.prototype.getLca=function(){return this.lca},i.prototype.getSourceInLca=function(){return this.sourceInLca},i.prototype.getTargetInLca=function(){return this.targetInLca},i.prototype.getOtherEnd=function(h){if(this.source===h)return this.target;if(this.target===h)return this.source;throw"Node is not incident with this edge"},i.prototype.getOtherEndInGraph=function(h,n){for(var v=this.getOtherEnd(h),o=n.getGraphManager().getRoot();;){if(v.getOwner()==n)return v;if(v.getOwner()==o)break;v=v.getOwner().getParent()}return null},i.prototype.updateLength=function(){var h=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),h),this.isOverlapingSourceAndTarget||(this.lengthX=h[0]-h[2],this.lengthY=h[1]-h[3],Math.abs(this.lengthX)<1&&(this.lengthX=r.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=r.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},i.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=r.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=r.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},C.exports=i},function(C,F,A){function g(s){this.vGraphObject=s}T(g,"LGraphObject"),C.exports=g},function(C,F,A){var g=A(2),s=A(10),r=A(13),i=A(0),t=A(16),h=A(5);function n(o,e,d,f){d==null&&f==null&&(f=e),g.call(this,f),o.graphManager!=null&&(o=o.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=f,this.edges=[],this.graphManager=o,d!=null&&e!=null?this.rect=new r(e.x,e.y,d.width,d.height):this.rect=new r}T(n,"LNode"),n.prototype=Object.create(g.prototype);for(var v in g)n[v]=g[v];n.prototype.getEdges=function(){return this.edges},n.prototype.getChild=function(){return this.child},n.prototype.getOwner=function(){return this.owner},n.prototype.getWidth=function(){return this.rect.width},n.prototype.setWidth=function(o){this.rect.width=o},n.prototype.getHeight=function(){return this.rect.height},n.prototype.setHeight=function(o){this.rect.height=o},n.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},n.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},n.prototype.getCenter=function(){return new h(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},n.prototype.getLocation=function(){return new h(this.rect.x,this.rect.y)},n.prototype.getRect=function(){return this.rect},n.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},n.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},n.prototype.setRect=function(o,e){this.rect.x=o.x,this.rect.y=o.y,this.rect.width=e.width,this.rect.height=e.height},n.prototype.setCenter=function(o,e){this.rect.x=o-this.rect.width/2,this.rect.y=e-this.rect.height/2},n.prototype.setLocation=function(o,e){this.rect.x=o,this.rect.y=e},n.prototype.moveBy=function(o,e){this.rect.x+=o,this.rect.y+=e},n.prototype.getEdgeListToNode=function(o){var e=[],d=this;return d.edges.forEach(function(f){if(f.target==o){if(f.source!=d)throw"Incorrect edge source!";e.push(f)}}),e},n.prototype.getEdgesBetween=function(o){var e=[],d=this;return d.edges.forEach(function(f){if(!(f.source==d||f.target==d))throw"Incorrect edge source and/or target";(f.target==o||f.source==o)&&e.push(f)}),e},n.prototype.getNeighborsList=function(){var o=new Set,e=this;return e.edges.forEach(function(d){if(d.source==e)o.add(d.target);else{if(d.target!=e)throw"Incorrect incidency!";o.add(d.source)}}),o},n.prototype.withChildren=function(){var o=new Set,e,d;if(o.add(this),this.child!=null)for(var f=this.child.getNodes(),l=0;l<f.length;l++)e=f[l],d=e.withChildren(),d.forEach(function(N){o.add(N)});return o},n.prototype.getNoOfChildren=function(){var o=0,e;if(this.child==null)o=1;else for(var d=this.child.getNodes(),f=0;f<d.length;f++)e=d[f],o+=e.getNoOfChildren();return o==0&&(o=1),o},n.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},n.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},n.prototype.scatter=function(){var o,e,d=-i.INITIAL_WORLD_BOUNDARY,f=i.INITIAL_WORLD_BOUNDARY;o=i.WORLD_CENTER_X+t.nextDouble()*(f-d)+d;var l=-i.INITIAL_WORLD_BOUNDARY,N=i.INITIAL_WORLD_BOUNDARY;e=i.WORLD_CENTER_Y+t.nextDouble()*(N-l)+l,this.rect.x=o,this.rect.y=e},n.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var o=this.getChild();if(o.updateBounds(!0),this.rect.x=o.getLeft(),this.rect.y=o.getTop(),this.setWidth(o.getRight()-o.getLeft()),this.setHeight(o.getBottom()-o.getTop()),i.NODE_DIMENSIONS_INCLUDE_LABELS){var e=o.getRight()-o.getLeft(),d=o.getBottom()-o.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(e+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>e?(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(e+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(d+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>d?(this.rect.y-=(this.labelHeight-d)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(d+this.labelHeight))}}},n.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},n.prototype.transform=function(o){var e=this.rect.x;e>i.WORLD_BOUNDARY?e=i.WORLD_BOUNDARY:e<-i.WORLD_BOUNDARY&&(e=-i.WORLD_BOUNDARY);var d=this.rect.y;d>i.WORLD_BOUNDARY?d=i.WORLD_BOUNDARY:d<-i.WORLD_BOUNDARY&&(d=-i.WORLD_BOUNDARY);var f=new h(e,d),l=o.inverseTransformPoint(f);this.setLocation(l.x,l.y)},n.prototype.getLeft=function(){return this.rect.x},n.prototype.getRight=function(){return this.rect.x+this.rect.width},n.prototype.getTop=function(){return this.rect.y},n.prototype.getBottom=function(){return this.rect.y+this.rect.height},n.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},C.exports=n},function(C,F,A){var g=A(0);function s(){}T(s,"FDLayoutConstants");for(var r in g)s[r]=g[r];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,C.exports=s},function(C,F,A){function g(s,r){s==null&&r==null?(this.x=0,this.y=0):(this.x=s,this.y=r)}T(g,"PointD"),g.prototype.getX=function(){return this.x},g.prototype.getY=function(){return this.y},g.prototype.setX=function(s){this.x=s},g.prototype.setY=function(s){this.y=s},g.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},g.prototype.getCopy=function(){return new g(this.x,this.y)},g.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},C.exports=g},function(C,F,A){var g=A(2),s=A(10),r=A(0),i=A(7),t=A(3),h=A(1),n=A(13),v=A(12),o=A(11);function e(f,l,N){g.call(this,N),this.estimatedSize=s.MIN_VALUE,this.margin=r.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=f,l!=null&&l instanceof i?this.graphManager=l:l!=null&&l instanceof Layout&&(this.graphManager=l.graphManager)}T(e,"LGraph"),e.prototype=Object.create(g.prototype);for(var d in g)e[d]=g[d];e.prototype.getNodes=function(){return this.nodes},e.prototype.getEdges=function(){return this.edges},e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getParent=function(){return this.parent},e.prototype.getLeft=function(){return this.left},e.prototype.getRight=function(){return this.right},e.prototype.getTop=function(){return this.top},e.prototype.getBottom=function(){return this.bottom},e.prototype.isConnected=function(){return this.isConnected},e.prototype.add=function(f,l,N){if(l==null&&N==null){var c=f;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(c)>-1)throw"Node already in graph!";return c.owner=this,this.getNodes().push(c),c}else{var E=f;if(!(this.getNodes().indexOf(l)>-1&&this.getNodes().indexOf(N)>-1))throw"Source or target not in graph!";if(!(l.owner==N.owner&&l.owner==this))throw"Both owners must be this graph!";return l.owner!=N.owner?null:(E.source=l,E.target=N,E.isInterGraph=!1,this.getEdges().push(E),l.edges.push(E),N!=l&&N.edges.push(E),E)}},e.prototype.remove=function(f){var l=f;if(f instanceof t){if(l==null)throw"Node is null!";if(!(l.owner!=null&&l.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var N=l.edges.slice(),c,E=N.length,_=0;_<E;_++)c=N[_],c.isInterGraph?this.graphManager.remove(c):c.source.owner.remove(c);var L=this.nodes.indexOf(l);if(L==-1)throw"Node not in owner node list!";this.nodes.splice(L,1)}else if(f instanceof h){var c=f;if(c==null)throw"Edge is null!";if(!(c.source!=null&&c.target!=null))throw"Source and/or target is null!";if(!(c.source.owner!=null&&c.target.owner!=null&&c.source.owner==this&&c.target.owner==this))throw"Source and/or target owner is invalid!";var X=c.source.edges.indexOf(c),z=c.target.edges.indexOf(c);if(!(X>-1&&z>-1))throw"Source and/or target doesn't know this edge!";c.source.edges.splice(X,1),c.target!=c.source&&c.target.edges.splice(z,1);var L=c.source.owner.getEdges().indexOf(c);if(L==-1)throw"Not in owner's edge list!";c.source.owner.getEdges().splice(L,1)}},e.prototype.updateLeftTop=function(){for(var f=s.MAX_VALUE,l=s.MAX_VALUE,N,c,E,_=this.getNodes(),L=_.length,X=0;X<L;X++){var z=_[X];N=z.getTop(),c=z.getLeft(),f>N&&(f=N),l>c&&(l=c)}return f==s.MAX_VALUE?null:(_[0].getParent().paddingLeft!=null?E=_[0].getParent().paddingLeft:E=this.margin,this.left=l-E,this.top=f-E,new v(this.left,this.top))},e.prototype.updateBounds=function(f){for(var l=s.MAX_VALUE,N=-s.MAX_VALUE,c=s.MAX_VALUE,E=-s.MAX_VALUE,_,L,X,z,V,B=this.nodes,q=B.length,x=0;x<q;x++){var nt=B[x];f&&nt.child!=null&&nt.updateBounds(),_=nt.getLeft(),L=nt.getRight(),X=nt.getTop(),z=nt.getBottom(),l>_&&(l=_),N<L&&(N=L),c>X&&(c=X),E<z&&(E=z)}var a=new n(l,c,N-l,E-c);l==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),B[0].getParent().paddingLeft!=null?V=B[0].getParent().paddingLeft:V=this.margin,this.left=a.x-V,this.right=a.x+a.width+V,this.top=a.y-V,this.bottom=a.y+a.height+V},e.calculateBounds=function(f){for(var l=s.MAX_VALUE,N=-s.MAX_VALUE,c=s.MAX_VALUE,E=-s.MAX_VALUE,_,L,X,z,V=f.length,B=0;B<V;B++){var q=f[B];_=q.getLeft(),L=q.getRight(),X=q.getTop(),z=q.getBottom(),l>_&&(l=_),N<L&&(N=L),c>X&&(c=X),E<z&&(E=z)}var x=new n(l,c,N-l,E-c);return x},e.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){for(var f=0,l=this.nodes,N=l.length,c=0;c<N;c++){var E=l[c];f+=E.calcEstimatedSize()}return f==0?this.estimatedSize=r.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=f/Math.sqrt(this.nodes.length),this.estimatedSize},e.prototype.updateConnected=function(){var f=this;if(this.nodes.length==0){this.isConnected=!0;return}var l=new o,N=new Set,c=this.nodes[0],E,_,L=c.withChildren();for(L.forEach(function(x){l.push(x),N.add(x)});l.length!==0;){c=l.shift(),E=c.getEdges();for(var X=E.length,z=0;z<X;z++){var V=E[z];if(_=V.getOtherEndInGraph(c,this),_!=null&&!N.has(_)){var B=_.withChildren();B.forEach(function(x){l.push(x),N.add(x)})}}}if(this.isConnected=!1,N.size>=this.nodes.length){var q=0;N.forEach(function(x){x.owner==f&&q++}),q==this.nodes.length&&(this.isConnected=!0)}},C.exports=e},function(C,F,A){var g,s=A(1);function r(i){g=A(6),this.layout=i,this.graphs=[],this.edges=[]}T(r,"LGraphManager"),r.prototype.addRoot=function(){var i=this.layout.newGraph(),t=this.layout.newNode(null),h=this.add(i,t);return this.setRootGraph(h),this.rootGraph},r.prototype.add=function(i,t,h,n,v){if(h==null&&n==null&&v==null){if(i==null)throw"Graph is null!";if(t==null)throw"Parent node is null!";if(this.graphs.indexOf(i)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(i),i.parent!=null)throw"Already has a parent!";if(t.child!=null)throw"Already has a child!";return i.parent=t,t.child=i,i}else{v=h,n=t,h=i;var o=n.getOwner(),e=v.getOwner();if(!(o!=null&&o.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(e!=null&&e.getGraphManager()==this))throw"Target not in this graph mgr!";if(o==e)return h.isInterGraph=!1,o.add(h,n,v);if(h.isInterGraph=!0,h.source=n,h.target=v,this.edges.indexOf(h)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(h),!(h.source!=null&&h.target!=null))throw"Edge source and/or target is null!";if(!(h.source.edges.indexOf(h)==-1&&h.target.edges.indexOf(h)==-1))throw"Edge already in source and/or target incidency list!";return h.source.edges.push(h),h.target.edges.push(h),h}},r.prototype.remove=function(i){if(i instanceof g){var t=i;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(t==this.rootGraph||t.parent!=null&&t.parent.graphManager==this))throw"Invalid parent node!";var h=[];h=h.concat(t.getEdges());for(var n,v=h.length,o=0;o<v;o++)n=h[o],t.remove(n);var e=[];e=e.concat(t.getNodes());var d;v=e.length;for(var o=0;o<v;o++)d=e[o],t.remove(d);t==this.rootGraph&&this.setRootGraph(null);var f=this.graphs.indexOf(t);this.graphs.splice(f,1),t.parent=null}else if(i instanceof s){if(n=i,n==null)throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(!(n.source!=null&&n.target!=null))throw"Source and/or target is null!";if(!(n.source.edges.indexOf(n)!=-1&&n.target.edges.indexOf(n)!=-1))throw"Source and/or target doesn't know this edge!";var f=n.source.edges.indexOf(n);if(n.source.edges.splice(f,1),f=n.target.edges.indexOf(n),n.target.edges.splice(f,1),!(n.source.owner!=null&&n.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(n.source.owner.getGraphManager().edges.indexOf(n)==-1)throw"Not in owner graph manager's edge list!";var f=n.source.owner.getGraphManager().edges.indexOf(n);n.source.owner.getGraphManager().edges.splice(f,1)}},r.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},r.prototype.getGraphs=function(){return this.graphs},r.prototype.getAllNodes=function(){if(this.allNodes==null){for(var i=[],t=this.getGraphs(),h=t.length,n=0;n<h;n++)i=i.concat(t[n].getNodes());this.allNodes=i}return this.allNodes},r.prototype.resetAllNodes=function(){this.allNodes=null},r.prototype.resetAllEdges=function(){this.allEdges=null},r.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},r.prototype.getAllEdges=function(){if(this.allEdges==null){for(var i=[],t=this.getGraphs(),h=t.length,n=0;n<t.length;n++)i=i.concat(t[n].getEdges());i=i.concat(this.edges),this.allEdges=i}return this.allEdges},r.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},r.prototype.setAllNodesToApplyGravitation=function(i){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=i},r.prototype.getRoot=function(){return this.rootGraph},r.prototype.setRootGraph=function(i){if(i.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=i,i.parent==null&&(i.parent=this.layout.newNode("Root node"))},r.prototype.getLayout=function(){return this.layout},r.prototype.isOneAncestorOfOther=function(i,t){if(!(i!=null&&t!=null))throw"assert failed";if(i==t)return!0;var h=i.getOwner(),n;do{if(n=h.getParent(),n==null)break;if(n==t)return!0;if(h=n.getOwner(),h==null)break}while(!0);h=t.getOwner();do{if(n=h.getParent(),n==null)break;if(n==i)return!0;if(h=n.getOwner(),h==null)break}while(!0);return!1},r.prototype.calcLowestCommonAncestors=function(){for(var i,t,h,n,v,o=this.getAllEdges(),e=o.length,d=0;d<e;d++){if(i=o[d],t=i.source,h=i.target,i.lca=null,i.sourceInLca=t,i.targetInLca=h,t==h){i.lca=t.getOwner();continue}for(n=t.getOwner();i.lca==null;){for(i.targetInLca=h,v=h.getOwner();i.lca==null;){if(v==n){i.lca=v;break}if(v==this.rootGraph)break;if(i.lca!=null)throw"assert failed";i.targetInLca=v.getParent(),v=i.targetInLca.getOwner()}if(n==this.rootGraph)break;i.lca==null&&(i.sourceInLca=n.getParent(),n=i.sourceInLca.getOwner())}if(i.lca==null)throw"assert failed"}},r.prototype.calcLowestCommonAncestor=function(i,t){if(i==t)return i.getOwner();var h=i.getOwner();do{if(h==null)break;var n=t.getOwner();do{if(n==null)break;if(n==h)return n;n=n.getParent().getOwner()}while(!0);h=h.getParent().getOwner()}while(!0);return h},r.prototype.calcInclusionTreeDepths=function(i,t){i==null&&t==null&&(i=this.rootGraph,t=1);for(var h,n=i.getNodes(),v=n.length,o=0;o<v;o++)h=n[o],h.inclusionTreeDepth=t,h.child!=null&&this.calcInclusionTreeDepths(h.child,t+1)},r.prototype.includesInvalidEdge=function(){for(var i,t=[],h=this.edges.length,n=0;n<h;n++)i=this.edges[n],this.isOneAncestorOfOther(i.source,i.target)&&t.push(i);for(var n=0;n<t.length;n++)this.remove(t[n]);return!1},C.exports=r},function(C,F,A){var g=A(12);function s(){}T(s,"IGeometry"),s.calcSeparationAmount=function(r,i,t,h){if(!r.intersects(i))throw"assert failed";var n=new Array(2);this.decideDirectionsForOverlappingNodes(r,i,n),t[0]=Math.min(r.getRight(),i.getRight())-Math.max(r.x,i.x),t[1]=Math.min(r.getBottom(),i.getBottom())-Math.max(r.y,i.y),r.getX()<=i.getX()&&r.getRight()>=i.getRight()?t[0]+=Math.min(i.getX()-r.getX(),r.getRight()-i.getRight()):i.getX()<=r.getX()&&i.getRight()>=r.getRight()&&(t[0]+=Math.min(r.getX()-i.getX(),i.getRight()-r.getRight())),r.getY()<=i.getY()&&r.getBottom()>=i.getBottom()?t[1]+=Math.min(i.getY()-r.getY(),r.getBottom()-i.getBottom()):i.getY()<=r.getY()&&i.getBottom()>=r.getBottom()&&(t[1]+=Math.min(r.getY()-i.getY(),i.getBottom()-r.getBottom()));var v=Math.abs((i.getCenterY()-r.getCenterY())/(i.getCenterX()-r.getCenterX()));i.getCenterY()===r.getCenterY()&&i.getCenterX()===r.getCenterX()&&(v=1);var o=v*t[0],e=t[1]/v;t[0]<e?e=t[0]:o=t[1],t[0]=-1*n[0]*(e/2+h),t[1]=-1*n[1]*(o/2+h)},s.decideDirectionsForOverlappingNodes=function(r,i,t){r.getCenterX()<i.getCenterX()?t[0]=-1:t[0]=1,r.getCenterY()<i.getCenterY()?t[1]=-1:t[1]=1},s.getIntersection2=function(r,i,t){var h=r.getCenterX(),n=r.getCenterY(),v=i.getCenterX(),o=i.getCenterY();if(r.intersects(i))return t[0]=h,t[1]=n,t[2]=v,t[3]=o,!0;var e=r.getX(),d=r.getY(),f=r.getRight(),l=r.getX(),N=r.getBottom(),c=r.getRight(),E=r.getWidthHalf(),_=r.getHeightHalf(),L=i.getX(),X=i.getY(),z=i.getRight(),V=i.getX(),B=i.getBottom(),q=i.getRight(),x=i.getWidthHalf(),nt=i.getHeightHalf(),a=!1,y=!1;if(h===v){if(n>o)return t[0]=h,t[1]=d,t[2]=v,t[3]=B,!1;if(n<o)return t[0]=h,t[1]=N,t[2]=v,t[3]=X,!1}else if(n===o){if(h>v)return t[0]=e,t[1]=n,t[2]=z,t[3]=o,!1;if(h<v)return t[0]=f,t[1]=n,t[2]=L,t[3]=o,!1}else{var p=r.height/r.width,m=i.height/i.width,u=(o-n)/(v-h),D=void 0,O=void 0,M=void 0,k=void 0,U=void 0,W=void 0;if(-p===u?h>v?(t[0]=l,t[1]=N,a=!0):(t[0]=f,t[1]=d,a=!0):p===u&&(h>v?(t[0]=e,t[1]=d,a=!0):(t[0]=c,t[1]=N,a=!0)),-m===u?v>h?(t[2]=V,t[3]=B,y=!0):(t[2]=z,t[3]=X,y=!0):m===u&&(v>h?(t[2]=L,t[3]=X,y=!0):(t[2]=q,t[3]=B,y=!0)),a&&y)return!1;if(h>v?n>o?(D=this.getCardinalDirection(p,u,4),O=this.getCardinalDirection(m,u,2)):(D=this.getCardinalDirection(-p,u,3),O=this.getCardinalDirection(-m,u,1)):n>o?(D=this.getCardinalDirection(-p,u,1),O=this.getCardinalDirection(-m,u,3)):(D=this.getCardinalDirection(p,u,2),O=this.getCardinalDirection(m,u,4)),!a)switch(D){case 1:k=d,M=h+-_/u,t[0]=M,t[1]=k;break;case 2:M=c,k=n+E*u,t[0]=M,t[1]=k;break;case 3:k=N,M=h+_/u,t[0]=M,t[1]=k;break;case 4:M=l,k=n+-E*u,t[0]=M,t[1]=k;break}if(!y)switch(O){case 1:W=X,U=v+-nt/u,t[2]=U,t[3]=W;break;case 2:U=q,W=o+x*u,t[2]=U,t[3]=W;break;case 3:W=B,U=v+nt/u,t[2]=U,t[3]=W;break;case 4:U=V,W=o+-x*u,t[2]=U,t[3]=W;break}}return!1},s.getCardinalDirection=function(r,i,t){return r>i?t:1+t%4},s.getIntersection=function(r,i,t,h){if(h==null)return this.getIntersection2(r,i,t);var n=r.x,v=r.y,o=i.x,e=i.y,d=t.x,f=t.y,l=h.x,N=h.y,c=void 0,E=void 0,_=void 0,L=void 0,X=void 0,z=void 0,V=void 0,B=void 0,q=void 0;return _=e-v,X=n-o,V=o*v-n*e,L=N-f,z=d-l,B=l*f-d*N,q=_*z-L*X,q===0?null:(c=(X*B-z*V)/q,E=(L*V-_*B)/q,new g(c,E))},s.angleOfVector=function(r,i,t,h){var n=void 0;return r!==t?(n=Math.atan((h-i)/(t-r)),t<r?n+=Math.PI:h<i&&(n+=this.TWO_PI)):h<i?n=this.ONE_AND_HALF_PI:n=this.HALF_PI,n},s.doIntersect=function(r,i,t,h){var n=r.x,v=r.y,o=i.x,e=i.y,d=t.x,f=t.y,l=h.x,N=h.y,c=(o-n)*(N-f)-(l-d)*(e-v);if(c===0)return!1;var E=((N-f)*(l-n)+(d-l)*(N-v))/c,_=((v-e)*(l-n)+(o-n)*(N-v))/c;return 0<E&&E<1&&0<_&&_<1},s.findCircleLineIntersections=function(r,i,t,h,n,v,o){var e=(t-r)*(t-r)+(h-i)*(h-i),d=2*((r-n)*(t-r)+(i-v)*(h-i)),f=(r-n)*(r-n)+(i-v)*(i-v)-o*o,l=d*d-4*e*f;if(l>=0){var N=(-d+Math.sqrt(d*d-4*e*f))/(2*e),c=(-d-Math.sqrt(d*d-4*e*f))/(2*e),E=null;return N>=0&&N<=1?[N]:c>=0&&c<=1?[c]:E}else return null},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,C.exports=s},function(C,F,A){function g(){}T(g,"IMath"),g.sign=function(s){return s>0?1:s<0?-1:0},g.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},g.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},C.exports=g},function(C,F,A){function g(){}T(g,"Integer"),g.MAX_VALUE=2147483647,g.MIN_VALUE=-2147483648,C.exports=g},function(C,F,A){var g=function(){function n(v,o){for(var e=0;e<o.length;e++){var d=o[e];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return T(n,"defineProperties"),function(v,o,e){return o&&n(v.prototype,o),e&&n(v,e),v}}();function s(n,v){if(!(n instanceof v))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var r=T(function(n){return{value:n,next:null,prev:null}},"nodeFrom"),i=T(function(n,v,o,e){return n!==null?n.next=v:e.head=v,o!==null?o.prev=v:e.tail=v,v.prev=n,v.next=o,e.length++,v},"add"),t=T(function(n,v){var o=n.prev,e=n.next;return o!==null?o.next=e:v.head=e,e!==null?e.prev=o:v.tail=o,n.prev=n.next=null,v.length--,n},"_remove"),h=function(){function n(v){var o=this;s(this,n),this.length=0,this.head=null,this.tail=null,v==null||v.forEach(function(e){return o.push(e)})}return T(n,"LinkedList"),g(n,[{key:"size",value:T(function(){return this.length},"size")},{key:"insertBefore",value:T(function(v,o){return i(o.prev,r(v),o,this)},"insertBefore")},{key:"insertAfter",value:T(function(v,o){return i(o,r(v),o.next,this)},"insertAfter")},{key:"insertNodeBefore",value:T(function(v,o){return i(o.prev,v,o,this)},"insertNodeBefore")},{key:"insertNodeAfter",value:T(function(v,o){return i(o,v,o.next,this)},"insertNodeAfter")},{key:"push",value:T(function(v){return i(this.tail,r(v),null,this)},"push")},{key:"unshift",value:T(function(v){return i(null,r(v),this.head,this)},"unshift")},{key:"remove",value:T(function(v){return t(v,this)},"remove")},{key:"pop",value:T(function(){return t(this.tail,this).value},"pop")},{key:"popNode",value:T(function(){return t(this.tail,this)},"popNode")},{key:"shift",value:T(function(){return t(this.head,this).value},"shift")},{key:"shiftNode",value:T(function(){return t(this.head,this)},"shiftNode")},{key:"get_object_at",value:T(function(v){if(v<=this.length()){for(var o=1,e=this.head;o<v;)e=e.next,o++;return e.value}},"get_object_at")},{key:"set_object_at",value:T(function(v,o){if(v<=this.length()){for(var e=1,d=this.head;e<v;)d=d.next,e++;d.value=o}},"set_object_at")}]),n}();C.exports=h},function(C,F,A){function g(s,r,i){this.x=null,this.y=null,s==null&&r==null&&i==null?(this.x=0,this.y=0):typeof s=="number"&&typeof r=="number"&&i==null?(this.x=s,this.y=r):s.constructor.name=="Point"&&r==null&&i==null&&(i=s,this.x=i.x,this.y=i.y)}T(g,"Point"),g.prototype.getX=function(){return this.x},g.prototype.getY=function(){return this.y},g.prototype.getLocation=function(){return new g(this.x,this.y)},g.prototype.setLocation=function(s,r,i){s.constructor.name=="Point"&&r==null&&i==null?(i=s,this.setLocation(i.x,i.y)):typeof s=="number"&&typeof r=="number"&&i==null&&(parseInt(s)==s&&parseInt(r)==r?this.move(s,r):(this.x=Math.floor(s+.5),this.y=Math.floor(r+.5)))},g.prototype.move=function(s,r){this.x=s,this.y=r},g.prototype.translate=function(s,r){this.x+=s,this.y+=r},g.prototype.equals=function(s){if(s.constructor.name=="Point"){var r=s;return this.x==r.x&&this.y==r.y}return this==s},g.prototype.toString=function(){return new g().constructor.name+"[x="+this.x+",y="+this.y+"]"},C.exports=g},function(C,F,A){function g(s,r,i,t){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&r!=null&&i!=null&&t!=null&&(this.x=s,this.y=r,this.width=i,this.height=t)}T(g,"RectangleD"),g.prototype.getX=function(){return this.x},g.prototype.setX=function(s){this.x=s},g.prototype.getY=function(){return this.y},g.prototype.setY=function(s){this.y=s},g.prototype.getWidth=function(){return this.width},g.prototype.setWidth=function(s){this.width=s},g.prototype.getHeight=function(){return this.height},g.prototype.setHeight=function(s){this.height=s},g.prototype.getRight=function(){return this.x+this.width},g.prototype.getBottom=function(){return this.y+this.height},g.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},g.prototype.getCenterX=function(){return this.x+this.width/2},g.prototype.getMinX=function(){return this.getX()},g.prototype.getMaxX=function(){return this.getX()+this.width},g.prototype.getCenterY=function(){return this.y+this.height/2},g.prototype.getMinY=function(){return this.getY()},g.prototype.getMaxY=function(){return this.getY()+this.height},g.prototype.getWidthHalf=function(){return this.width/2},g.prototype.getHeightHalf=function(){return this.height/2},C.exports=g},function(C,F,A){var g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function s(){}T(s,"UniqueIDGeneretor"),s.lastID=0,s.createID=function(r){return s.isPrimitive(r)?r:(r.uniqueID!=null||(r.uniqueID=s.getString(),s.lastID++),r.uniqueID)},s.getString=function(r){return r==null&&(r=s.lastID),"Object#"+r},s.isPrimitive=function(r){var i=typeof r>"u"?"undefined":g(r);return r==null||i!="object"&&i!="function"},C.exports=s},function(C,F,A){function g(d){if(Array.isArray(d)){for(var f=0,l=Array(d.length);f<d.length;f++)l[f]=d[f];return l}else return Array.from(d)}T(g,"_toConsumableArray");var s=A(0),r=A(7),i=A(3),t=A(1),h=A(6),n=A(5),v=A(17),o=A(29);function e(d){o.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new r(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,d!=null&&(this.isRemoteUse=d)}T(e,"Layout"),e.RANDOM_SEED=1,e.prototype=Object.create(o.prototype),e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},e.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},e.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},e.prototype.newGraphManager=function(){var d=new r(this);return this.graphManager=d,d},e.prototype.newGraph=function(d){return new h(null,this.graphManager,d)},e.prototype.newNode=function(d){return new i(this.graphManager,d)},e.prototype.newEdge=function(d){return new t(null,null,d)},e.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},e.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var d;return this.checkLayoutSuccess()?d=!1:d=this.layout(),s.ANIMATE==="during"?!1:(d&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,d)},e.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},e.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var d,f=this.graphManager.getAllEdges(),l=0;l<f.length;l++)d=f[l];for(var N,c=this.graphManager.getRoot().getNodes(),l=0;l<c.length;l++)N=c[l];this.update(this.graphManager.getRoot())}},e.prototype.update=function(d){if(d==null)this.update2();else if(d instanceof i){var f=d;if(f.getChild()!=null)for(var l=f.getChild().getNodes(),N=0;N<l.length;N++)update(l[N]);if(f.vGraphObject!=null){var c=f.vGraphObject;c.update(f)}}else if(d instanceof t){var E=d;if(E.vGraphObject!=null){var _=E.vGraphObject;_.update(E)}}else if(d instanceof h){var L=d;if(L.vGraphObject!=null){var X=L.vGraphObject;X.update(L)}}},e.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},e.prototype.transform=function(d){if(d==null)this.transform(new n(0,0));else{var f=new v,l=this.graphManager.getRoot().updateLeftTop();if(l!=null){f.setWorldOrgX(d.x),f.setWorldOrgY(d.y),f.setDeviceOrgX(l.x),f.setDeviceOrgY(l.y);for(var N=this.getAllNodes(),c,E=0;E<N.length;E++)c=N[E],c.transform(f)}}},e.prototype.positionNodesRandomly=function(d){if(d==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var f,l,N=d.getNodes(),c=0;c<N.length;c++)f=N[c],l=f.getChild(),l==null||l.getNodes().length==0?f.scatter():(this.positionNodesRandomly(l),f.updateBounds())},e.prototype.getFlatForest=function(){for(var d=[],f=!0,l=this.graphManager.getRoot().getNodes(),N=!0,c=0;c<l.length;c++)l[c].getChild()!=null&&(N=!1);if(!N)return d;var E=new Set,_=[],L=new Map,X=[];for(X=X.concat(l);X.length>0&&f;){for(_.push(X[0]);_.length>0&&f;){var z=_[0];_.splice(0,1),E.add(z);for(var V=z.getEdges(),c=0;c<V.length;c++){var B=V[c].getOtherEnd(z);if(L.get(z)!=B)if(!E.has(B))_.push(B),L.set(B,z);else{f=!1;break}}}if(!f)d=[];else{var q=[].concat(g(E));d.push(q);for(var c=0;c<q.length;c++){var x=q[c],nt=X.indexOf(x);nt>-1&&X.splice(nt,1)}E=new Set,L=new Map}}return d},e.prototype.createDummyNodesForBendpoints=function(d){for(var f=[],l=d.source,N=this.graphManager.calcLowestCommonAncestor(d.source,d.target),c=0;c<d.bendpoints.length;c++){var E=this.newNode(null);E.setRect(new Point(0,0),new Dimension(1,1)),N.add(E);var _=this.newEdge(null);this.graphManager.add(_,l,E),f.add(E),l=E}var _=this.newEdge(null);return this.graphManager.add(_,l,d.target),this.edgeToDummyNodes.set(d,f),d.isInterGraph()?this.graphManager.remove(d):N.remove(d),f},e.prototype.createBendpointsFromDummyNodes=function(){var d=[];d=d.concat(this.graphManager.getAllEdges()),d=[].concat(g(this.edgeToDummyNodes.keys())).concat(d);for(var f=0;f<d.length;f++){var l=d[f];if(l.bendpoints.length>0){for(var N=this.edgeToDummyNodes.get(l),c=0;c<N.length;c++){var E=N[c],_=new n(E.getCenterX(),E.getCenterY()),L=l.bendpoints.get(c);L.x=_.x,L.y=_.y,E.getOwner().remove(E)}this.graphManager.add(l,l.source,l.target)}}},e.transform=function(d,f,l,N){if(l!=null&&N!=null){var c=f;if(d<=50){var E=f/l;c-=(f-E)/50*(50-d)}else{var _=f*N;c+=(_-f)/50*(d-50)}return c}else{var L,X;return d<=50?(L=9*f/500,X=f/10):(L=9*f/50,X=-8*f),L*d+X}},e.findCenterOfTree=function(d){var f=[];f=f.concat(d);var l=[],N=new Map,c=!1,E=null;(f.length==1||f.length==2)&&(c=!0,E=f[0]);for(var _=0;_<f.length;_++){var L=f[_],X=L.getNeighborsList().size;N.set(L,L.getNeighborsList().size),X==1&&l.push(L)}var z=[];for(z=z.concat(l);!c;){var V=[];V=V.concat(z),z=[];for(var _=0;_<f.length;_++){var L=f[_],B=f.indexOf(L);B>=0&&f.splice(B,1);var q=L.getNeighborsList();q.forEach(function(a){if(l.indexOf(a)<0){var y=N.get(a),p=y-1;p==1&&z.push(a),N.set(a,p)}})}l=l.concat(z),(f.length==1||f.length==2)&&(c=!0,E=f[0])}return E},e.prototype.setGraphManager=function(d){this.graphManager=d},C.exports=e},function(C,F,A){function g(){}T(g,"RandomSeed"),g.seed=1,g.x=0,g.nextDouble=function(){return g.x=Math.sin(g.seed++)*1e4,g.x-Math.floor(g.x)},C.exports=g},function(C,F,A){var g=A(5);function s(r,i){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}T(s,"Transform"),s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(r){this.lworldOrgX=r},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(r){this.lworldOrgY=r},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(r){this.lworldExtX=r},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(r){this.lworldExtY=r},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(r){this.ldeviceOrgX=r},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(r){this.ldeviceOrgY=r},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(r){this.ldeviceExtX=r},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(r){this.ldeviceExtY=r},s.prototype.transformX=function(r){var i=0,t=this.lworldExtX;return t!=0&&(i=this.ldeviceOrgX+(r-this.lworldOrgX)*this.ldeviceExtX/t),i},s.prototype.transformY=function(r){var i=0,t=this.lworldExtY;return t!=0&&(i=this.ldeviceOrgY+(r-this.lworldOrgY)*this.ldeviceExtY/t),i},s.prototype.inverseTransformX=function(r){var i=0,t=this.ldeviceExtX;return t!=0&&(i=this.lworldOrgX+(r-this.ldeviceOrgX)*this.lworldExtX/t),i},s.prototype.inverseTransformY=function(r){var i=0,t=this.ldeviceExtY;return t!=0&&(i=this.lworldOrgY+(r-this.ldeviceOrgY)*this.lworldExtY/t),i},s.prototype.inverseTransformPoint=function(r){var i=new g(this.inverseTransformX(r.x),this.inverseTransformY(r.y));return i},C.exports=s},function(C,F,A){function g(o){if(Array.isArray(o)){for(var e=0,d=Array(o.length);e<o.length;e++)d[e]=o[e];return d}else return Array.from(o)}T(g,"_toConsumableArray");var s=A(15),r=A(4),i=A(0),t=A(8),h=A(9);function n(){s.call(this),this.useSmartIdealEdgeLengthCalculation=r.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=r.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=r.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=r.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=r.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*r.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=r.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=r.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=r.MAX_ITERATIONS}T(n,"FDLayout"),n.prototype=Object.create(s.prototype);for(var v in s)n[v]=s[v];n.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=r.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},n.prototype.calcIdealEdgeLengths=function(){for(var o,e,d,f,l,N,c,E=this.getGraphManager().getAllEdges(),_=0;_<E.length;_++)o=E[_],e=o.idealLength,o.isInterGraph&&(f=o.getSource(),l=o.getTarget(),N=o.getSourceInLca().getEstimatedSize(),c=o.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(o.idealLength+=N+c-2*i.SIMPLE_NODE_SIZE),d=o.getLca().getInclusionTreeDepth(),o.idealLength+=e*r.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(f.getInclusionTreeDepth()+l.getInclusionTreeDepth()-2*d))},n.prototype.initSpringEmbedder=function(){var o=this.getAllNodes().length;this.incremental?(o>r.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*r.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(o-r.ADAPTATION_LOWER_NODE_LIMIT)/(r.ADAPTATION_UPPER_NODE_LIMIT-r.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-r.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=r.MAX_NODE_DISPLACEMENT_INCREMENTAL):(o>r.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(r.COOLING_ADAPTATION_FACTOR,1-(o-r.ADAPTATION_LOWER_NODE_LIMIT)/(r.ADAPTATION_UPPER_NODE_LIMIT-r.ADAPTATION_LOWER_NODE_LIMIT)*(1-r.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=r.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*r.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},n.prototype.calcSpringForces=function(){for(var o=this.getAllEdges(),e,d=0;d<o.length;d++)e=o[d],this.calcSpringForce(e,e.idealLength)},n.prototype.calcRepulsionForces=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d,f,l,N,c=this.getAllNodes(),E;if(this.useFRGridVariant)for(this.totalIterations%r.GRID_CALCULATION_CHECK_PERIOD==1&&o&&this.updateGrid(),E=new Set,d=0;d<c.length;d++)l=c[d],this.calculateRepulsionForceOfANode(l,E,o,e),E.add(l);else for(d=0;d<c.length;d++)for(l=c[d],f=d+1;f<c.length;f++)N=c[f],l.getOwner()==N.getOwner()&&this.calcRepulsionForce(l,N)},n.prototype.calcGravitationalForces=function(){for(var o,e=this.getAllNodesToApplyGravitation(),d=0;d<e.length;d++)o=e[d],this.calcGravitationalForce(o)},n.prototype.moveNodes=function(){for(var o=this.getAllNodes(),e,d=0;d<o.length;d++)e=o[d],e.move()},n.prototype.calcSpringForce=function(o,e){var d=o.getSource(),f=o.getTarget(),l,N,c,E;if(this.uniformLeafNodeSizes&&d.getChild()==null&&f.getChild()==null)o.updateLengthSimple();else if(o.updateLength(),o.isOverlapingSourceAndTarget)return;l=o.getLength(),l!=0&&(N=o.edgeElasticity*(l-e),c=N*(o.lengthX/l),E=N*(o.lengthY/l),d.springForceX+=c,d.springForceY+=E,f.springForceX-=c,f.springForceY-=E)},n.prototype.calcRepulsionForce=function(o,e){var d=o.getRect(),f=e.getRect(),l=new Array(2),N=new Array(4),c,E,_,L,X,z,V;if(d.intersects(f)){t.calcSeparationAmount(d,f,l,r.DEFAULT_EDGE_LENGTH/2),z=2*l[0],V=2*l[1];var B=o.noOfChildren*e.noOfChildren/(o.noOfChildren+e.noOfChildren);o.repulsionForceX-=B*z,o.repulsionForceY-=B*V,e.repulsionForceX+=B*z,e.repulsionForceY+=B*V}else this.uniformLeafNodeSizes&&o.getChild()==null&&e.getChild()==null?(c=f.getCenterX()-d.getCenterX(),E=f.getCenterY()-d.getCenterY()):(t.getIntersection(d,f,N),c=N[2]-N[0],E=N[3]-N[1]),Math.abs(c)<r.MIN_REPULSION_DIST&&(c=h.sign(c)*r.MIN_REPULSION_DIST),Math.abs(E)<r.MIN_REPULSION_DIST&&(E=h.sign(E)*r.MIN_REPULSION_DIST),_=c*c+E*E,L=Math.sqrt(_),X=(o.nodeRepulsion/2+e.nodeRepulsion/2)*o.noOfChildren*e.noOfChildren/_,z=X*c/L,V=X*E/L,o.repulsionForceX-=z,o.repulsionForceY-=V,e.repulsionForceX+=z,e.repulsionForceY+=V},n.prototype.calcGravitationalForce=function(o){var e,d,f,l,N,c,E,_;e=o.getOwner(),d=(e.getRight()+e.getLeft())/2,f=(e.getTop()+e.getBottom())/2,l=o.getCenterX()-d,N=o.getCenterY()-f,c=Math.abs(l)+o.getWidth()/2,E=Math.abs(N)+o.getHeight()/2,o.getOwner()==this.graphManager.getRoot()?(_=e.getEstimatedSize()*this.gravityRangeFactor,(c>_||E>_)&&(o.gravitationForceX=-this.gravityConstant*l,o.gravitationForceY=-this.gravityConstant*N)):(_=e.getEstimatedSize()*this.compoundGravityRangeFactor,(c>_||E>_)&&(o.gravitationForceX=-this.gravityConstant*l*this.compoundGravityConstant,o.gravitationForceY=-this.gravityConstant*N*this.compoundGravityConstant))},n.prototype.isConverged=function(){var o,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),o=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,o||e},n.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},n.prototype.calcNoOfChildrenForAllNodes=function(){for(var o,e=this.graphManager.getAllNodes(),d=0;d<e.length;d++)o=e[d],o.noOfChildren=o.getNoOfChildren()},n.prototype.calcGrid=function(o){var e=0,d=0;e=parseInt(Math.ceil((o.getRight()-o.getLeft())/this.repulsionRange)),d=parseInt(Math.ceil((o.getBottom()-o.getTop())/this.repulsionRange));for(var f=new Array(e),l=0;l<e;l++)f[l]=new Array(d);for(var l=0;l<e;l++)for(var N=0;N<d;N++)f[l][N]=new Array;return f},n.prototype.addNodeToGrid=function(o,e,d){var f=0,l=0,N=0,c=0;f=parseInt(Math.floor((o.getRect().x-e)/this.repulsionRange)),l=parseInt(Math.floor((o.getRect().width+o.getRect().x-e)/this.repulsionRange)),N=parseInt(Math.floor((o.getRect().y-d)/this.repulsionRange)),c=parseInt(Math.floor((o.getRect().height+o.getRect().y-d)/this.repulsionRange));for(var E=f;E<=l;E++)for(var _=N;_<=c;_++)this.grid[E][_].push(o),o.setGridCoordinates(f,l,N,c)},n.prototype.updateGrid=function(){var o,e,d=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),o=0;o<d.length;o++)e=d[o],this.addNodeToGrid(e,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},n.prototype.calculateRepulsionForceOfANode=function(o,e,d,f){if(this.totalIterations%r.GRID_CALCULATION_CHECK_PERIOD==1&&d||f){var l=new Set;o.surrounding=new Array;for(var N,c=this.grid,E=o.startX-1;E<o.finishX+2;E++)for(var _=o.startY-1;_<o.finishY+2;_++)if(!(E<0||_<0||E>=c.length||_>=c[0].length)){for(var L=0;L<c[E][_].length;L++)if(N=c[E][_][L],!(o.getOwner()!=N.getOwner()||o==N)&&!e.has(N)&&!l.has(N)){var X=Math.abs(o.getCenterX()-N.getCenterX())-(o.getWidth()/2+N.getWidth()/2),z=Math.abs(o.getCenterY()-N.getCenterY())-(o.getHeight()/2+N.getHeight()/2);X<=this.repulsionRange&&z<=this.repulsionRange&&l.add(N)}}o.surrounding=[].concat(g(l))}for(E=0;E<o.surrounding.length;E++)this.calcRepulsionForce(o,o.surrounding[E])},n.prototype.calcRepulsionRange=function(){return 0},C.exports=n},function(C,F,A){var g=A(1),s=A(4);function r(t,h,n){g.call(this,t,h,n),this.idealLength=s.DEFAULT_EDGE_LENGTH,this.edgeElasticity=s.DEFAULT_SPRING_STRENGTH}T(r,"FDLayoutEdge"),r.prototype=Object.create(g.prototype);for(var i in g)r[i]=g[i];C.exports=r},function(C,F,A){var g=A(3),s=A(4);function r(t,h,n,v){g.call(this,t,h,n,v),this.nodeRepulsion=s.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}T(r,"FDLayoutNode"),r.prototype=Object.create(g.prototype);for(var i in g)r[i]=g[i];r.prototype.setGridCoordinates=function(t,h,n,v){this.startX=t,this.finishX=h,this.startY=n,this.finishY=v},C.exports=r},function(C,F,A){function g(s,r){this.width=0,this.height=0,s!==null&&r!==null&&(this.height=r,this.width=s)}T(g,"DimensionD"),g.prototype.getWidth=function(){return this.width},g.prototype.setWidth=function(s){this.width=s},g.prototype.getHeight=function(){return this.height},g.prototype.setHeight=function(s){this.height=s},C.exports=g},function(C,F,A){var g=A(14);function s(){this.map={},this.keys=[]}T(s,"HashMap"),s.prototype.put=function(r,i){var t=g.createID(r);this.contains(t)||(this.map[t]=i,this.keys.push(r))},s.prototype.contains=function(r){return g.createID(r),this.map[r]!=null},s.prototype.get=function(r){var i=g.createID(r);return this.map[i]},s.prototype.keySet=function(){return this.keys},C.exports=s},function(C,F,A){var g=A(14);function s(){this.set={}}T(s,"HashSet"),s.prototype.add=function(r){var i=g.createID(r);this.contains(i)||(this.set[i]=r)},s.prototype.remove=function(r){delete this.set[g.createID(r)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(r){return this.set[g.createID(r)]==r},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(r){for(var i=Object.keys(this.set),t=i.length,h=0;h<t;h++)r.push(this.set[i[h]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(r){for(var i=r.length,t=0;t<i;t++){var h=r[t];this.add(h)}},C.exports=s},function(C,F,A){function g(){}T(g,"Matrix"),g.multMat=function(s,r){for(var i=[],t=0;t<s.length;t++){i[t]=[];for(var h=0;h<r[0].length;h++){i[t][h]=0;for(var n=0;n<s[0].length;n++)i[t][h]+=s[t][n]*r[n][h]}}return i},g.transpose=function(s){for(var r=[],i=0;i<s[0].length;i++){r[i]=[];for(var t=0;t<s.length;t++)r[i][t]=s[t][i]}return r},g.multCons=function(s,r){for(var i=[],t=0;t<s.length;t++)i[t]=s[t]*r;return i},g.minusOp=function(s,r){for(var i=[],t=0;t<s.length;t++)i[t]=s[t]-r[t];return i},g.dotProduct=function(s,r){for(var i=0,t=0;t<s.length;t++)i+=s[t]*r[t];return i},g.mag=function(s){return Math.sqrt(this.dotProduct(s,s))},g.normalize=function(s){for(var r=[],i=this.mag(s),t=0;t<s.length;t++)r[t]=s[t]/i;return r},g.multGamma=function(s){for(var r=[],i=0,t=0;t<s.length;t++)i+=s[t];i*=-1/s.length;for(var h=0;h<s.length;h++)r[h]=i+s[h];return r},g.multL=function(s,r,i){for(var t=[],h=[],n=[],v=0;v<r[0].length;v++){for(var o=0,e=0;e<r.length;e++)o+=-.5*r[e][v]*s[e];h[v]=o}for(var d=0;d<i.length;d++){for(var f=0,l=0;l<i.length;l++)f+=i[d][l]*h[l];n[d]=f}for(var N=0;N<r.length;N++){for(var c=0,E=0;E<r[0].length;E++)c+=r[N][E]*n[E];t[N]=c}return t},C.exports=g},function(C,F,A){var g=function(){function t(h,n){for(var v=0;v<n.length;v++){var o=n[v];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(h,o.key,o)}}return T(t,"defineProperties"),function(h,n,v){return n&&t(h.prototype,n),v&&t(h,v),h}}();function s(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var r=A(11),i=function(){function t(h,n){s(this,t),(n!==null||n!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var v=void 0;h instanceof r?v=h.size():v=h.length,this._quicksort(h,0,v-1)}return T(t,"Quicksort"),g(t,[{key:"_quicksort",value:T(function(h,n,v){if(n<v){var o=this._partition(h,n,v);this._quicksort(h,n,o),this._quicksort(h,o+1,v)}},"_quicksort")},{key:"_partition",value:T(function(h,n,v){for(var o=this._get(h,n),e=n,d=v;;){for(;this.compareFunction(o,this._get(h,d));)d--;for(;this.compareFunction(this._get(h,e),o);)e++;if(e<d)this._swap(h,e,d),e++,d--;else return d}},"_partition")},{key:"_get",value:T(function(h,n){return h instanceof r?h.get_object_at(n):h[n]},"_get")},{key:"_set",value:T(function(h,n,v){h instanceof r?h.set_object_at(n,v):h[n]=v},"_set")},{key:"_swap",value:T(function(h,n,v){var o=this._get(h,n);this._set(h,n,this._get(h,v)),this._set(h,v,o)},"_swap")},{key:"_defaultCompareFunction",value:T(function(h,n){return n>h},"_defaultCompareFunction")}]),t}();C.exports=i},function(C,F,A){function g(){}T(g,"SVD"),g.svd=function(s){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=s.length,this.n=s[0].length;var r=Math.min(this.m,this.n);this.s=function(At){for(var wt=[];At-- >0;)wt.push(0);return wt}(Math.min(this.m+1,this.n)),this.U=function(At){var wt=T(function Gt(Pt){if(Pt.length==0)return 0;for(var Bt=[],qt=0;qt<Pt[0];qt++)Bt.push(Gt(Pt.slice(1)));return Bt},"allocate");return wt(At)}([this.m,r]),this.V=function(At){var wt=T(function Gt(Pt){if(Pt.length==0)return 0;for(var Bt=[],qt=0;qt<Pt[0];qt++)Bt.push(Gt(Pt.slice(1)));return Bt},"allocate");return wt(At)}([this.n,this.n]);for(var i=function(At){for(var wt=[];At-- >0;)wt.push(0);return wt}(this.n),t=function(At){for(var wt=[];At-- >0;)wt.push(0);return wt}(this.m),h=!0,n=!0,v=Math.min(this.m-1,this.n),o=Math.max(0,Math.min(this.n-2,this.m)),e=0;e<Math.max(v,o);e++){if(e<v){this.s[e]=0;for(var d=e;d<this.m;d++)this.s[e]=g.hypot(this.s[e],s[d][e]);if(this.s[e]!==0){s[e][e]<0&&(this.s[e]=-this.s[e]);for(var f=e;f<this.m;f++)s[f][e]/=this.s[e];s[e][e]+=1}this.s[e]=-this.s[e]}for(var l=e+1;l<this.n;l++){if(function(At,wt){return At&&wt}(e<v,this.s[e]!==0)){for(var N=0,c=e;c<this.m;c++)N+=s[c][e]*s[c][l];N=-N/s[e][e];for(var E=e;E<this.m;E++)s[E][l]+=N*s[E][e]}i[l]=s[e][l]}if(function(At,wt){return At&&wt}(h,e<v))for(var _=e;_<this.m;_++)this.U[_][e]=s[_][e];if(e<o){i[e]=0;for(var L=e+1;L<this.n;L++)i[e]=g.hypot(i[e],i[L]);if(i[e]!==0){i[e+1]<0&&(i[e]=-i[e]);for(var X=e+1;X<this.n;X++)i[X]/=i[e];i[e+1]+=1}if(i[e]=-i[e],function(At,wt){return At&&wt}(e+1<this.m,i[e]!==0)){for(var z=e+1;z<this.m;z++)t[z]=0;for(var V=e+1;V<this.n;V++)for(var B=e+1;B<this.m;B++)t[B]+=i[V]*s[B][V];for(var q=e+1;q<this.n;q++)for(var x=-i[q]/i[e+1],nt=e+1;nt<this.m;nt++)s[nt][q]+=x*t[nt]}if(n)for(var a=e+1;a<this.n;a++)this.V[a][e]=i[a]}}var y=Math.min(this.n,this.m+1);if(v<this.n&&(this.s[v]=s[v][v]),this.m<y&&(this.s[y-1]=0),o+1<y&&(i[o]=s[o][y-1]),i[y-1]=0,h){for(var p=v;p<r;p++){for(var m=0;m<this.m;m++)this.U[m][p]=0;this.U[p][p]=1}for(var u=v-1;u>=0;u--)if(this.s[u]!==0){for(var D=u+1;D<r;D++){for(var O=0,M=u;M<this.m;M++)O+=this.U[M][u]*this.U[M][D];O=-O/this.U[u][u];for(var k=u;k<this.m;k++)this.U[k][D]+=O*this.U[k][u]}for(var U=u;U<this.m;U++)this.U[U][u]=-this.U[U][u];this.U[u][u]=1+this.U[u][u];for(var W=0;W<u-1;W++)this.U[W][u]=0}else{for(var j=0;j<this.m;j++)this.U[j][u]=0;this.U[u][u]=1}}if(n)for(var Y=this.n-1;Y>=0;Y--){if(function(At,wt){return At&&wt}(Y<o,i[Y]!==0))for(var K=Y+1;K<r;K++){for(var P=0,b=Y+1;b<this.n;b++)P+=this.V[b][Y]*this.V[b][K];P=-P/this.V[Y+1][Y];for(var G=Y+1;G<this.n;G++)this.V[G][K]+=P*this.V[G][Y]}for(var Z=0;Z<this.n;Z++)this.V[Z][Y]=0;this.V[Y][Y]=1}for(var it=y-1,ut=0,It=Math.pow(2,-52),Dt=Math.pow(2,-966);y>0;){var S=void 0,rt=void 0;for(S=y-2;S>=-1&&S!==-1;S--)if(Math.abs(i[S])<=Dt+It*(Math.abs(this.s[S])+Math.abs(this.s[S+1]))){i[S]=0;break}if(S===y-2)rt=4;else{var ht=void 0;for(ht=y-1;ht>=S&&ht!==S;ht--){var mt=(ht!==y?Math.abs(i[ht]):0)+(ht!==S+1?Math.abs(i[ht-1]):0);if(Math.abs(this.s[ht])<=Dt+It*mt){this.s[ht]=0;break}}ht===S?rt=3:ht===y-1?rt=1:(rt=2,S=ht)}switch(S++,rt){case 1:{var Ct=i[y-2];i[y-2]=0;for(var yt=y-2;yt>=S;yt--){var Et=g.hypot(this.s[yt],Ct),xt=this.s[yt]/Et,Vt=Ct/Et;if(this.s[yt]=Et,yt!==S&&(Ct=-Vt*i[yt-1],i[yt-1]=xt*i[yt-1]),n)for(var Ut=0;Ut<this.n;Ut++)Et=xt*this.V[Ut][yt]+Vt*this.V[Ut][y-1],this.V[Ut][y-1]=-Vt*this.V[Ut][yt]+xt*this.V[Ut][y-1],this.V[Ut][yt]=Et}}break;case 2:{var kt=i[S-1];i[S-1]=0;for(var Mt=S;Mt<y;Mt++){var Xt=g.hypot(this.s[Mt],kt),Yt=this.s[Mt]/Xt,$t=kt/Xt;if(this.s[Mt]=Xt,kt=-$t*i[Mt],i[Mt]=Yt*i[Mt],h)for(var lt=0;lt<this.m;lt++)Xt=Yt*this.U[lt][Mt]+$t*this.U[lt][S-1],this.U[lt][S-1]=-$t*this.U[lt][Mt]+Yt*this.U[lt][S-1],this.U[lt][Mt]=Xt}}break;case 3:{var I=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[y-1]),Math.abs(this.s[y-2])),Math.abs(i[y-2])),Math.abs(this.s[S])),Math.abs(i[S])),R=this.s[y-1]/I,$=this.s[y-2]/I,J=i[y-2]/I,Q=this.s[S]/I,pt=i[S]/I,dt=(($+R)*($-R)+J*J)/2,tt=R*J*(R*J),gt=0;(function(At,wt){return At||wt})(dt!==0,tt!==0)&&(gt=Math.sqrt(dt*dt+tt),dt<0&&(gt=-gt),gt=tt/(dt+gt));for(var Nt=(Q+R)*(Q-R)+gt,_t=Q*pt,et=S;et<y-1;et++){var Ot=g.hypot(Nt,_t),ot=Nt/Ot,st=_t/Ot;if(et!==S&&(i[et-1]=Ot),Nt=ot*this.s[et]+st*i[et],i[et]=ot*i[et]-st*this.s[et],_t=st*this.s[et+1],this.s[et+1]=ot*this.s[et+1],n)for(var at=0;at<this.n;at++)Ot=ot*this.V[at][et]+st*this.V[at][et+1],this.V[at][et+1]=-st*this.V[at][et]+ot*this.V[at][et+1],this.V[at][et]=Ot;if(Ot=g.hypot(Nt,_t),ot=Nt/Ot,st=_t/Ot,this.s[et]=Ot,Nt=ot*i[et]+st*this.s[et+1],this.s[et+1]=-st*i[et]+ot*this.s[et+1],_t=st*i[et+1],i[et+1]=ot*i[et+1],h&&et<this.m-1)for(var Tt=0;Tt<this.m;Tt++)Ot=ot*this.U[Tt][et]+st*this.U[Tt][et+1],this.U[Tt][et+1]=-st*this.U[Tt][et]+ot*this.U[Tt][et+1],this.U[Tt][et]=Ot}i[y-2]=Nt,ut=ut+1}break;case 4:{if(this.s[S]<=0&&(this.s[S]=this.s[S]<0?-this.s[S]:0,n))for(var ft=0;ft<=it;ft++)this.V[ft][S]=-this.V[ft][S];for(;S<it&&!(this.s[S]>=this.s[S+1]);){var bt=this.s[S];if(this.s[S]=this.s[S+1],this.s[S+1]=bt,n&&S<this.n-1)for(var Rt=0;Rt<this.n;Rt++)bt=this.V[Rt][S+1],this.V[Rt][S+1]=this.V[Rt][S],this.V[Rt][S]=bt;if(h&&S<this.m-1)for(var Ft=0;Ft<this.m;Ft++)bt=this.U[Ft][S+1],this.U[Ft][S+1]=this.U[Ft][S],this.U[Ft][S]=bt;S++}ut=0,y--}break}}var jt={U:this.U,V:this.V,S:this.s};return jt},g.hypot=function(s,r){var i=void 0;return Math.abs(s)>Math.abs(r)?(i=r/s,i=Math.abs(s)*Math.sqrt(1+i*i)):r!=0?(i=s/r,i=Math.abs(r)*Math.sqrt(1+i*i)):i=0,i},C.exports=g},function(C,F,A){var g=function(){function i(t,h){for(var n=0;n<h.length;n++){var v=h[n];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(t,v.key,v)}}return T(i,"defineProperties"),function(t,h,n){return h&&i(t.prototype,h),n&&i(t,n),t}}();function s(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var r=function(){function i(t,h){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,i),this.sequence1=t,this.sequence2=h,this.match_score=n,this.mismatch_penalty=v,this.gap_penalty=o,this.iMax=t.length+1,this.jMax=h.length+1,this.grid=new Array(this.iMax);for(var e=0;e<this.iMax;e++){this.grid[e]=new Array(this.jMax);for(var d=0;d<this.jMax;d++)this.grid[e][d]=0}this.tracebackGrid=new Array(this.iMax);for(var f=0;f<this.iMax;f++){this.tracebackGrid[f]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.tracebackGrid[f][l]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return T(i,"NeedlemanWunsch"),g(i,[{key:"getScore",value:T(function(){return this.score},"getScore")},{key:"getAlignments",value:T(function(){return this.alignments},"getAlignments")},{key:"computeGrids",value:T(function(){for(var t=1;t<this.jMax;t++)this.grid[0][t]=this.grid[0][t-1]+this.gap_penalty,this.tracebackGrid[0][t]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var v=1;v<this.jMax;v++){var o=void 0;this.sequence1[n-1]===this.sequence2[v-1]?o=this.grid[n-1][v-1]+this.match_score:o=this.grid[n-1][v-1]+this.mismatch_penalty;var e=this.grid[n-1][v]+this.gap_penalty,d=this.grid[n][v-1]+this.gap_penalty,f=[o,e,d],l=this.arrayAllMaxIndexes(f);this.grid[n][v]=f[l[0]],this.tracebackGrid[n][v]=[l.includes(0),l.includes(1),l.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]},"computeGrids")},{key:"alignmentTraceback",value:T(function(){var t=[];for(t.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});t[0];){var h=t[0],n=this.tracebackGrid[h.pos[0]][h.pos[1]];n[0]&&t.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),n[1]&&t.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),n[2]&&t.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),t.shift()}return this.alignments},"alignmentTraceback")},{key:"getAllIndexes",value:T(function(t,h){for(var n=[],v=-1;(v=t.indexOf(h,v+1))!==-1;)n.push(v);return n},"getAllIndexes")},{key:"arrayAllMaxIndexes",value:T(function(t){return this.getAllIndexes(t,Math.max.apply(null,t))},"arrayAllMaxIndexes")}]),i}();C.exports=r},function(C,F,A){var g=T(function(){},"layoutBase");g.FDLayout=A(18),g.FDLayoutConstants=A(4),g.FDLayoutEdge=A(19),g.FDLayoutNode=A(20),g.DimensionD=A(21),g.HashMap=A(22),g.HashSet=A(23),g.IGeometry=A(8),g.IMath=A(9),g.Integer=A(10),g.Point=A(12),g.PointD=A(5),g.RandomSeed=A(16),g.RectangleD=A(13),g.Transform=A(17),g.UniqueIDGeneretor=A(14),g.Quicksort=A(25),g.LinkedList=A(11),g.LGraphObject=A(2),g.LGraph=A(6),g.LEdge=A(1),g.LGraphManager=A(7),g.LNode=A(3),g.Layout=A(15),g.LayoutConstants=A(0),g.NeedlemanWunsch=A(27),g.Matrix=A(24),g.SVD=A(26),C.exports=g},function(C,F,A){function g(){this.listeners=[]}T(g,"Emitter");var s=g.prototype;s.addListener=function(r,i){this.listeners.push({event:r,callback:i})},s.removeListener=function(r,i){for(var t=this.listeners.length;t>=0;t--){var h=this.listeners[t];h.event===r&&h.callback===i&&this.listeners.splice(t,1)}},s.emit=function(r,i){for(var t=0;t<this.listeners.length;t++){var h=this.listeners[t];r===h.event&&h.callback(i)}},C.exports=g}])})}),Le=me((w,H)=>{T(function(C,F){typeof w=="object"&&typeof H=="object"?H.exports=F(_e()):typeof define=="function"&&define.amd?define(["layout-base"],F):typeof w=="object"?w.coseBase=F(_e()):C.coseBase=F(C.layoutBase)},"webpackUniversalModuleDefinition")(w,function(C){return(()=>{var F={45:(r,i,t)=>{var h={};h.layoutBase=t(551),h.CoSEConstants=t(806),h.CoSEEdge=t(767),h.CoSEGraph=t(880),h.CoSEGraphManager=t(578),h.CoSELayout=t(765),h.CoSENode=t(991),h.ConstraintHandler=t(902),r.exports=h},806:(r,i,t)=>{var h=t(551).FDLayoutConstants;function n(){}T(n,"CoSEConstants");for(var v in h)n[v]=h[v];n.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,n.DEFAULT_RADIAL_SEPARATION=h.DEFAULT_EDGE_LENGTH,n.DEFAULT_COMPONENT_SEPERATION=60,n.TILE=!0,n.TILING_PADDING_VERTICAL=10,n.TILING_PADDING_HORIZONTAL=10,n.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,n.ENFORCE_CONSTRAINTS=!0,n.APPLY_LAYOUT=!0,n.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,n.TREE_REDUCTION_ON_INCREMENTAL=!0,n.PURE_INCREMENTAL=n.DEFAULT_INCREMENTAL,r.exports=n},767:(r,i,t)=>{var h=t(551).FDLayoutEdge;function n(o,e,d){h.call(this,o,e,d)}T(n,"CoSEEdge"),n.prototype=Object.create(h.prototype);for(var v in h)n[v]=h[v];r.exports=n},880:(r,i,t)=>{var h=t(551).LGraph;function n(o,e,d){h.call(this,o,e,d)}T(n,"CoSEGraph"),n.prototype=Object.create(h.prototype);for(var v in h)n[v]=h[v];r.exports=n},578:(r,i,t)=>{var h=t(551).LGraphManager;function n(o){h.call(this,o)}T(n,"CoSEGraphManager"),n.prototype=Object.create(h.prototype);for(var v in h)n[v]=h[v];r.exports=n},765:(r,i,t)=>{var h=t(551).FDLayout,n=t(578),v=t(880),o=t(991),e=t(767),d=t(806),f=t(902),l=t(551).FDLayoutConstants,N=t(551).LayoutConstants,c=t(551).Point,E=t(551).PointD,_=t(551).DimensionD,L=t(551).Layout,X=t(551).Integer,z=t(551).IGeometry,V=t(551).LGraph,B=t(551).Transform,q=t(551).LinkedList;function x(){h.call(this),this.toBeTiled={},this.constraints={}}T(x,"CoSELayout"),x.prototype=Object.create(h.prototype);for(var nt in h)x[nt]=h[nt];x.prototype.newGraphManager=function(){var a=new n(this);return this.graphManager=a,a},x.prototype.newGraph=function(a){return new v(null,this.graphManager,a)},x.prototype.newNode=function(a){return new o(this.graphManager,a)},x.prototype.newEdge=function(a){return new e(null,null,a)},x.prototype.initParameters=function(){h.prototype.initParameters.call(this,arguments),this.isSubLayout||(d.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=d.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=d.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},x.prototype.initSpringEmbedder=function(){h.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/l.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},x.prototype.layout=function(){var a=N.DEFAULT_CREATE_BENDS_AS_NEEDED;return a&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(d.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),y=this.nodesWithGravity.filter(function(m){return a.has(m)});this.graphManager.setAllNodesToApplyGravitation(y)}}else{var p=this.getFlatForest();if(p.length>0)this.positionNodesRadially(p);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),y=this.nodesWithGravity.filter(function(D){return a.has(D)});this.graphManager.setAllNodesToApplyGravitation(y),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(f.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),d.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%l.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),y=this.nodesWithGravity.filter(function(u){return a.has(u)});this.graphManager.setAllNodesToApplyGravitation(y),this.graphManager.updateBounds(),this.updateGrid(),d.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),d.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var p=!this.isTreeGrowing&&!this.isGrowthFinished,m=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(p,m),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var a=this.graphManager.getAllNodes(),y={},p=0;p<a.length;p++){var m=a[p].rect,u=a[p].id;y[u]={id:u,x:m.getCenterX(),y:m.getCenterY(),w:m.width,h:m.height}}return y},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var a=!1;if(l.ANIMATE==="during")this.emit("layoutstarted");else{for(;!a;)a=this.tick();this.graphManager.updateBounds()}},x.prototype.moveNodes=function(){for(var a=this.getAllNodes(),y,p=0;p<a.length;p++)y=a[p],y.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var p=0;p<a.length;p++)y=a[p],y.move()},x.prototype.initConstraintVariables=function(){var a=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var y=this.graphManager.getAllNodes(),p=0;p<y.length;p++){var m=y[p];this.idToNodeMap.set(m.id,m)}var u=T(function b(G){for(var Z=G.getChild().getNodes(),it,ut=0,It=0;It<Z.length;It++)it=Z[It],it.getChild()==null?a.fixedNodeSet.has(it.id)&&(ut+=100):ut+=b(it);return ut},"calculateCompoundWeight");if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(b){a.fixedNodeSet.add(b.nodeId)});for(var y=this.graphManager.getAllNodes(),m,p=0;p<y.length;p++)if(m=y[p],m.getChild()!=null){var D=u(m);D>0&&(m.fixedNodeWeight=D)}}if(this.constraints.relativePlacementConstraint){var O=new Map,M=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(b){a.fixedNodesOnHorizontal.add(b),a.fixedNodesOnVertical.add(b)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var k=this.constraints.alignmentConstraint.vertical,p=0;p<k.length;p++)this.dummyToNodeForVerticalAlignment.set("dummy"+p,[]),k[p].forEach(function(G){O.set(G,"dummy"+p),a.dummyToNodeForVerticalAlignment.get("dummy"+p).push(G),a.fixedNodeSet.has(G)&&a.fixedNodesOnHorizontal.add("dummy"+p)});if(this.constraints.alignmentConstraint.horizontal)for(var U=this.constraints.alignmentConstraint.horizontal,p=0;p<U.length;p++)this.dummyToNodeForHorizontalAlignment.set("dummy"+p,[]),U[p].forEach(function(G){M.set(G,"dummy"+p),a.dummyToNodeForHorizontalAlignment.get("dummy"+p).push(G),a.fixedNodeSet.has(G)&&a.fixedNodesOnVertical.add("dummy"+p)})}if(d.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(b){var G,Z,it;for(it=b.length-1;it>=2*b.length/3;it--)G=Math.floor(Math.random()*(it+1)),Z=b[it],b[it]=b[G],b[G]=Z;return b},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(b){if(b.left){var G=O.has(b.left)?O.get(b.left):b.left,Z=O.has(b.right)?O.get(b.right):b.right;a.nodesInRelativeHorizontal.includes(G)||(a.nodesInRelativeHorizontal.push(G),a.nodeToRelativeConstraintMapHorizontal.set(G,[]),a.dummyToNodeForVerticalAlignment.has(G)?a.nodeToTempPositionMapHorizontal.set(G,a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(G)[0]).getCenterX()):a.nodeToTempPositionMapHorizontal.set(G,a.idToNodeMap.get(G).getCenterX())),a.nodesInRelativeHorizontal.includes(Z)||(a.nodesInRelativeHorizontal.push(Z),a.nodeToRelativeConstraintMapHorizontal.set(Z,[]),a.dummyToNodeForVerticalAlignment.has(Z)?a.nodeToTempPositionMapHorizontal.set(Z,a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(Z)[0]).getCenterX()):a.nodeToTempPositionMapHorizontal.set(Z,a.idToNodeMap.get(Z).getCenterX())),a.nodeToRelativeConstraintMapHorizontal.get(G).push({right:Z,gap:b.gap}),a.nodeToRelativeConstraintMapHorizontal.get(Z).push({left:G,gap:b.gap})}else{var it=M.has(b.top)?M.get(b.top):b.top,ut=M.has(b.bottom)?M.get(b.bottom):b.bottom;a.nodesInRelativeVertical.includes(it)||(a.nodesInRelativeVertical.push(it),a.nodeToRelativeConstraintMapVertical.set(it,[]),a.dummyToNodeForHorizontalAlignment.has(it)?a.nodeToTempPositionMapVertical.set(it,a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(it)[0]).getCenterY()):a.nodeToTempPositionMapVertical.set(it,a.idToNodeMap.get(it).getCenterY())),a.nodesInRelativeVertical.includes(ut)||(a.nodesInRelativeVertical.push(ut),a.nodeToRelativeConstraintMapVertical.set(ut,[]),a.dummyToNodeForHorizontalAlignment.has(ut)?a.nodeToTempPositionMapVertical.set(ut,a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(ut)[0]).getCenterY()):a.nodeToTempPositionMapVertical.set(ut,a.idToNodeMap.get(ut).getCenterY())),a.nodeToRelativeConstraintMapVertical.get(it).push({bottom:ut,gap:b.gap}),a.nodeToRelativeConstraintMapVertical.get(ut).push({top:it,gap:b.gap})}});else{var W=new Map,j=new Map;this.constraints.relativePlacementConstraint.forEach(function(b){if(b.left){var G=O.has(b.left)?O.get(b.left):b.left,Z=O.has(b.right)?O.get(b.right):b.right;W.has(G)?W.get(G).push(Z):W.set(G,[Z]),W.has(Z)?W.get(Z).push(G):W.set(Z,[G])}else{var it=M.has(b.top)?M.get(b.top):b.top,ut=M.has(b.bottom)?M.get(b.bottom):b.bottom;j.has(it)?j.get(it).push(ut):j.set(it,[ut]),j.has(ut)?j.get(ut).push(it):j.set(ut,[it])}});var Y=T(function(b,G){var Z=[],it=[],ut=new q,It=new Set,Dt=0;return b.forEach(function(S,rt){if(!It.has(rt)){Z[Dt]=[],it[Dt]=!1;var ht=rt;for(ut.push(ht),It.add(ht),Z[Dt].push(ht);ut.length!=0;){ht=ut.shift(),G.has(ht)&&(it[Dt]=!0);var mt=b.get(ht);mt.forEach(function(Ct){It.has(Ct)||(ut.push(Ct),It.add(Ct),Z[Dt].push(Ct))})}Dt++}}),{components:Z,isFixed:it}},"constructComponents"),K=Y(W,a.fixedNodesOnHorizontal);this.componentsOnHorizontal=K.components,this.fixedComponentsOnHorizontal=K.isFixed;var P=Y(j,a.fixedNodesOnVertical);this.componentsOnVertical=P.components,this.fixedComponentsOnVertical=P.isFixed}}},x.prototype.updateDisplacements=function(){var a=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(P){var b=a.idToNodeMap.get(P.nodeId);b.displacementX=0,b.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var y=this.constraints.alignmentConstraint.vertical,p=0;p<y.length;p++){for(var m=0,u=0;u<y[p].length;u++){if(this.fixedNodeSet.has(y[p][u])){m=0;break}m+=this.idToNodeMap.get(y[p][u]).displacementX}for(var D=m/y[p].length,u=0;u<y[p].length;u++)this.idToNodeMap.get(y[p][u]).displacementX=D}if(this.constraints.alignmentConstraint.horizontal)for(var O=this.constraints.alignmentConstraint.horizontal,p=0;p<O.length;p++){for(var M=0,u=0;u<O[p].length;u++){if(this.fixedNodeSet.has(O[p][u])){M=0;break}M+=this.idToNodeMap.get(O[p][u]).displacementY}for(var k=M/O[p].length,u=0;u<O[p].length;u++)this.idToNodeMap.get(O[p][u]).displacementY=k}}if(this.constraints.relativePlacementConstraint)if(d.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(P){if(!a.fixedNodesOnHorizontal.has(P)){var b=0;a.dummyToNodeForVerticalAlignment.has(P)?b=a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(P)[0]).displacementX:b=a.idToNodeMap.get(P).displacementX,a.nodeToRelativeConstraintMapHorizontal.get(P).forEach(function(G){if(G.right){var Z=a.nodeToTempPositionMapHorizontal.get(G.right)-a.nodeToTempPositionMapHorizontal.get(P)-b;Z<G.gap&&(b-=G.gap-Z)}else{var Z=a.nodeToTempPositionMapHorizontal.get(P)-a.nodeToTempPositionMapHorizontal.get(G.left)+b;Z<G.gap&&(b+=G.gap-Z)}}),a.nodeToTempPositionMapHorizontal.set(P,a.nodeToTempPositionMapHorizontal.get(P)+b),a.dummyToNodeForVerticalAlignment.has(P)?a.dummyToNodeForVerticalAlignment.get(P).forEach(function(G){a.idToNodeMap.get(G).displacementX=b}):a.idToNodeMap.get(P).displacementX=b}}),this.nodesInRelativeVertical.forEach(function(P){if(!a.fixedNodesOnHorizontal.has(P)){var b=0;a.dummyToNodeForHorizontalAlignment.has(P)?b=a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(P)[0]).displacementY:b=a.idToNodeMap.get(P).displacementY,a.nodeToRelativeConstraintMapVertical.get(P).forEach(function(G){if(G.bottom){var Z=a.nodeToTempPositionMapVertical.get(G.bottom)-a.nodeToTempPositionMapVertical.get(P)-b;Z<G.gap&&(b-=G.gap-Z)}else{var Z=a.nodeToTempPositionMapVertical.get(P)-a.nodeToTempPositionMapVertical.get(G.top)+b;Z<G.gap&&(b+=G.gap-Z)}}),a.nodeToTempPositionMapVertical.set(P,a.nodeToTempPositionMapVertical.get(P)+b),a.dummyToNodeForHorizontalAlignment.has(P)?a.dummyToNodeForHorizontalAlignment.get(P).forEach(function(G){a.idToNodeMap.get(G).displacementY=b}):a.idToNodeMap.get(P).displacementY=b}});else{for(var p=0;p<this.componentsOnHorizontal.length;p++){var U=this.componentsOnHorizontal[p];if(this.fixedComponentsOnHorizontal[p])for(var u=0;u<U.length;u++)this.dummyToNodeForVerticalAlignment.has(U[u])?this.dummyToNodeForVerticalAlignment.get(U[u]).forEach(function(G){a.idToNodeMap.get(G).displacementX=0}):this.idToNodeMap.get(U[u]).displacementX=0;else{for(var W=0,j=0,u=0;u<U.length;u++)if(this.dummyToNodeForVerticalAlignment.has(U[u])){var Y=this.dummyToNodeForVerticalAlignment.get(U[u]);W+=Y.length*this.idToNodeMap.get(Y[0]).displacementX,j+=Y.length}else W+=this.idToNodeMap.get(U[u]).displacementX,j++;for(var K=W/j,u=0;u<U.length;u++)this.dummyToNodeForVerticalAlignment.has(U[u])?this.dummyToNodeForVerticalAlignment.get(U[u]).forEach(function(G){a.idToNodeMap.get(G).displacementX=K}):this.idToNodeMap.get(U[u]).displacementX=K}}for(var p=0;p<this.componentsOnVertical.length;p++){var U=this.componentsOnVertical[p];if(this.fixedComponentsOnVertical[p])for(var u=0;u<U.length;u++)this.dummyToNodeForHorizontalAlignment.has(U[u])?this.dummyToNodeForHorizontalAlignment.get(U[u]).forEach(function(Z){a.idToNodeMap.get(Z).displacementY=0}):this.idToNodeMap.get(U[u]).displacementY=0;else{for(var W=0,j=0,u=0;u<U.length;u++)if(this.dummyToNodeForHorizontalAlignment.has(U[u])){var Y=this.dummyToNodeForHorizontalAlignment.get(U[u]);W+=Y.length*this.idToNodeMap.get(Y[0]).displacementY,j+=Y.length}else W+=this.idToNodeMap.get(U[u]).displacementY,j++;for(var K=W/j,u=0;u<U.length;u++)this.dummyToNodeForHorizontalAlignment.has(U[u])?this.dummyToNodeForHorizontalAlignment.get(U[u]).forEach(function(it){a.idToNodeMap.get(it).displacementY=K}):this.idToNodeMap.get(U[u]).displacementY=K}}}},x.prototype.calculateNodesToApplyGravitationTo=function(){var a=[],y,p=this.graphManager.getGraphs(),m=p.length,u;for(u=0;u<m;u++)y=p[u],y.updateConnected(),y.isConnected||(a=a.concat(y.getNodes()));return a},x.prototype.createBendpoints=function(){var a=[];a=a.concat(this.graphManager.getAllEdges());var y=new Set,p;for(p=0;p<a.length;p++){var m=a[p];if(!y.has(m)){var u=m.getSource(),D=m.getTarget();if(u==D)m.getBendpoints().push(new E),m.getBendpoints().push(new E),this.createDummyNodesForBendpoints(m),y.add(m);else{var O=[];if(O=O.concat(u.getEdgeListToNode(D)),O=O.concat(D.getEdgeListToNode(u)),!y.has(O[0])){if(O.length>1){var M;for(M=0;M<O.length;M++){var k=O[M];k.getBendpoints().push(new E),this.createDummyNodesForBendpoints(k)}}O.forEach(function(U){y.add(U)})}}}if(y.size==a.length)break}},x.prototype.positionNodesRadially=function(a){for(var y=new c(0,0),p=Math.ceil(Math.sqrt(a.length)),m=0,u=0,D=0,O=new E(0,0),M=0;M<a.length;M++){M%p==0&&(D=0,u=m,M!=0&&(u+=d.DEFAULT_COMPONENT_SEPERATION),m=0);var k=a[M],U=L.findCenterOfTree(k);y.x=D,y.y=u,O=x.radialLayout(k,U,y),O.y>m&&(m=Math.floor(O.y)),D=Math.floor(O.x+d.DEFAULT_COMPONENT_SEPERATION)}this.transform(new E(N.WORLD_CENTER_X-O.x/2,N.WORLD_CENTER_Y-O.y/2))},x.radialLayout=function(a,y,p){var m=Math.max(this.maxDiagonalInTree(a),d.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(y,null,0,359,0,m);var u=V.calculateBounds(a),D=new B;D.setDeviceOrgX(u.getMinX()),D.setDeviceOrgY(u.getMinY()),D.setWorldOrgX(p.x),D.setWorldOrgY(p.y);for(var O=0;O<a.length;O++){var M=a[O];M.transform(D)}var k=new E(u.getMaxX(),u.getMaxY());return D.inverseTransformPoint(k)},x.branchRadialLayout=function(a,y,p,m,u,D){var O=(m-p+1)/2;O<0&&(O+=180);var M=(O+p)%360,k=M*z.TWO_PI/360,U=u*Math.cos(k),W=u*Math.sin(k);a.setCenter(U,W);var j=[];j=j.concat(a.getEdges());var Y=j.length;y!=null&&Y--;for(var K=0,P=j.length,b,G=a.getEdgesBetween(y);G.length>1;){var Z=G[0];G.splice(0,1);var it=j.indexOf(Z);it>=0&&j.splice(it,1),P--,Y--}y!=null?b=(j.indexOf(G[0])+1)%P:b=0;for(var ut=Math.abs(m-p)/Y,It=b;K!=Y;It=++It%P){var Dt=j[It].getOtherEnd(a);if(Dt!=y){var S=(p+K*ut)%360,rt=(S+ut)%360;x.branchRadialLayout(Dt,a,S,rt,u+D,D),K++}}},x.maxDiagonalInTree=function(a){for(var y=X.MIN_VALUE,p=0;p<a.length;p++){var m=a[p],u=m.getDiagonal();u>y&&(y=u)}return y},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var a=this,y={};this.memberGroups={},this.idToDummyNode={};for(var p=[],m=this.graphManager.getAllNodes(),u=0;u<m.length;u++){var D=m[u],O=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(O.id==null||!this.getToBeTiled(O))&&p.push(D)}for(var u=0;u<p.length;u++){var D=p[u],M=D.getParent().id;typeof y[M]>"u"&&(y[M]=[]),y[M]=y[M].concat(D)}Object.keys(y).forEach(function(k){if(y[k].length>1){var U="DummyCompound_"+k;a.memberGroups[U]=y[k];var W=y[k][0].getParent(),j=new o(a.graphManager);j.id=U,j.paddingLeft=W.paddingLeft||0,j.paddingRight=W.paddingRight||0,j.paddingBottom=W.paddingBottom||0,j.paddingTop=W.paddingTop||0,a.idToDummyNode[U]=j;var Y=a.getGraphManager().add(a.newGraph(),j),K=W.getChild();K.add(j);for(var P=0;P<y[k].length;P++){var b=y[k][P];K.remove(b),Y.add(b)}}})},x.prototype.clearCompounds=function(){var a={},y={};this.performDFSOnCompounds();for(var p=0;p<this.compoundOrder.length;p++)y[this.compoundOrder[p].id]=this.compoundOrder[p],a[this.compoundOrder[p].id]=[].concat(this.compoundOrder[p].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[p].getChild()),this.compoundOrder[p].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(a,y)},x.prototype.clearZeroDegreeMembers=function(){var a=this,y=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(p){var m=a.idToDummyNode[p];if(y[p]=a.tileNodes(a.memberGroups[p],m.paddingLeft+m.paddingRight),m.rect.width=y[p].width,m.rect.height=y[p].height,m.setCenter(y[p].centerX,y[p].centerY),m.labelMarginLeft=0,m.labelMarginTop=0,d.NODE_DIMENSIONS_INCLUDE_LABELS){var u=m.rect.width,D=m.rect.height;m.labelWidth&&(m.labelPosHorizontal=="left"?(m.rect.x-=m.labelWidth,m.setWidth(u+m.labelWidth),m.labelMarginLeft=m.labelWidth):m.labelPosHorizontal=="center"&&m.labelWidth>u?(m.rect.x-=(m.labelWidth-u)/2,m.setWidth(m.labelWidth),m.labelMarginLeft=(m.labelWidth-u)/2):m.labelPosHorizontal=="right"&&m.setWidth(u+m.labelWidth)),m.labelHeight&&(m.labelPosVertical=="top"?(m.rect.y-=m.labelHeight,m.setHeight(D+m.labelHeight),m.labelMarginTop=m.labelHeight):m.labelPosVertical=="center"&&m.labelHeight>D?(m.rect.y-=(m.labelHeight-D)/2,m.setHeight(m.labelHeight),m.labelMarginTop=(m.labelHeight-D)/2):m.labelPosVertical=="bottom"&&m.setHeight(D+m.labelHeight))}})},x.prototype.repopulateCompounds=function(){for(var a=this.compoundOrder.length-1;a>=0;a--){var y=this.compoundOrder[a],p=y.id,m=y.paddingLeft,u=y.paddingTop,D=y.labelMarginLeft,O=y.labelMarginTop;this.adjustLocations(this.tiledMemberPack[p],y.rect.x,y.rect.y,m,u,D,O)}},x.prototype.repopulateZeroDegreeMembers=function(){var a=this,y=this.tiledZeroDegreePack;Object.keys(y).forEach(function(p){var m=a.idToDummyNode[p],u=m.paddingLeft,D=m.paddingTop,O=m.labelMarginLeft,M=m.labelMarginTop;a.adjustLocations(y[p],m.rect.x,m.rect.y,u,D,O,M)})},x.prototype.getToBeTiled=function(a){var y=a.id;if(this.toBeTiled[y]!=null)return this.toBeTiled[y];var p=a.getChild();if(p==null)return this.toBeTiled[y]=!1,!1;for(var m=p.getNodes(),u=0;u<m.length;u++){var D=m[u];if(this.getNodeDegree(D)>0)return this.toBeTiled[y]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[y]=!1,!1}return this.toBeTiled[y]=!0,!0},x.prototype.getNodeDegree=function(a){for(var y=a.id,p=a.getEdges(),m=0,u=0;u<p.length;u++){var D=p[u];D.getSource().id!==D.getTarget().id&&(m=m+1)}return m},x.prototype.getNodeDegreeWithChildren=function(a){var y=this.getNodeDegree(a);if(a.getChild()==null)return y;for(var p=a.getChild().getNodes(),m=0;m<p.length;m++){var u=p[m];y+=this.getNodeDegreeWithChildren(u)}return y},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(a){for(var y=0;y<a.length;y++){var p=a[y];p.getChild()!=null&&this.fillCompexOrderByDFS(p.getChild().getNodes()),this.getToBeTiled(p)&&this.compoundOrder.push(p)}},x.prototype.adjustLocations=function(a,y,p,m,u,D,O){y+=m+D,p+=u+O;for(var M=y,k=0;k<a.rows.length;k++){var U=a.rows[k];y=M;for(var W=0,j=0;j<U.length;j++){var Y=U[j];Y.rect.x=y,Y.rect.y=p,y+=Y.rect.width+a.horizontalPadding,Y.rect.height>W&&(W=Y.rect.height)}p+=W+a.verticalPadding}},x.prototype.tileCompoundMembers=function(a,y){var p=this;this.tiledMemberPack=[],Object.keys(a).forEach(function(m){var u=y[m];if(p.tiledMemberPack[m]=p.tileNodes(a[m],u.paddingLeft+u.paddingRight),u.rect.width=p.tiledMemberPack[m].width,u.rect.height=p.tiledMemberPack[m].height,u.setCenter(p.tiledMemberPack[m].centerX,p.tiledMemberPack[m].centerY),u.labelMarginLeft=0,u.labelMarginTop=0,d.NODE_DIMENSIONS_INCLUDE_LABELS){var D=u.rect.width,O=u.rect.height;u.labelWidth&&(u.labelPosHorizontal=="left"?(u.rect.x-=u.labelWidth,u.setWidth(D+u.labelWidth),u.labelMarginLeft=u.labelWidth):u.labelPosHorizontal=="center"&&u.labelWidth>D?(u.rect.x-=(u.labelWidth-D)/2,u.setWidth(u.labelWidth),u.labelMarginLeft=(u.labelWidth-D)/2):u.labelPosHorizontal=="right"&&u.setWidth(D+u.labelWidth)),u.labelHeight&&(u.labelPosVertical=="top"?(u.rect.y-=u.labelHeight,u.setHeight(O+u.labelHeight),u.labelMarginTop=u.labelHeight):u.labelPosVertical=="center"&&u.labelHeight>O?(u.rect.y-=(u.labelHeight-O)/2,u.setHeight(u.labelHeight),u.labelMarginTop=(u.labelHeight-O)/2):u.labelPosVertical=="bottom"&&u.setHeight(O+u.labelHeight))}})},x.prototype.tileNodes=function(a,y){var p=this.tileNodesByFavoringDim(a,y,!0),m=this.tileNodesByFavoringDim(a,y,!1),u=this.getOrgRatio(p),D=this.getOrgRatio(m),O;return D<u?O=m:O=p,O},x.prototype.getOrgRatio=function(a){var y=a.width,p=a.height,m=y/p;return m<1&&(m=1/m),m},x.prototype.calcIdealRowWidth=function(a,y){var p=d.TILING_PADDING_VERTICAL,m=d.TILING_PADDING_HORIZONTAL,u=a.length,D=0,O=0,M=0;a.forEach(function(P){D+=P.getWidth(),O+=P.getHeight(),P.getWidth()>M&&(M=P.getWidth())});var k=D/u,U=O/u,W=Math.pow(p-m,2)+4*(k+m)*(U+p)*u,j=(m-p+Math.sqrt(W))/(2*(k+m)),Y;y?(Y=Math.ceil(j),Y==j&&Y++):Y=Math.floor(j);var K=Y*(k+m)-m;return M>K&&(K=M),K+=m*2,K},x.prototype.tileNodesByFavoringDim=function(a,y,p){var m=d.TILING_PADDING_VERTICAL,u=d.TILING_PADDING_HORIZONTAL,D=d.TILING_COMPARE_BY,O={rows:[],rowWidth:[],rowHeight:[],width:0,height:y,verticalPadding:m,horizontalPadding:u,centerX:0,centerY:0};D&&(O.idealRowWidth=this.calcIdealRowWidth(a,p));var M=T(function(P){return P.rect.width*P.rect.height},"getNodeArea"),k=T(function(P,b){return M(b)-M(P)},"areaCompareFcn");a.sort(function(P,b){var G=k;return O.idealRowWidth?(G=D,G(P.id,b.id)):G(P,b)});for(var U=0,W=0,j=0;j<a.length;j++){var Y=a[j];U+=Y.getCenterX(),W+=Y.getCenterY()}O.centerX=U/a.length,O.centerY=W/a.length;for(var j=0;j<a.length;j++){var Y=a[j];if(O.rows.length==0)this.insertNodeToRow(O,Y,0,y);else if(this.canAddHorizontal(O,Y.rect.width,Y.rect.height)){var K=O.rows.length-1;O.idealRowWidth||(K=this.getShortestRowIndex(O)),this.insertNodeToRow(O,Y,K,y)}else this.insertNodeToRow(O,Y,O.rows.length,y);this.shiftToLastRow(O)}return O},x.prototype.insertNodeToRow=function(a,y,p,m){var u=m;if(p==a.rows.length){var D=[];a.rows.push(D),a.rowWidth.push(u),a.rowHeight.push(0)}var O=a.rowWidth[p]+y.rect.width;a.rows[p].length>0&&(O+=a.horizontalPadding),a.rowWidth[p]=O,a.width<O&&(a.width=O);var M=y.rect.height;p>0&&(M+=a.verticalPadding);var k=0;M>a.rowHeight[p]&&(k=a.rowHeight[p],a.rowHeight[p]=M,k=a.rowHeight[p]-k),a.height+=k,a.rows[p].push(y)},x.prototype.getShortestRowIndex=function(a){for(var y=-1,p=Number.MAX_VALUE,m=0;m<a.rows.length;m++)a.rowWidth[m]<p&&(y=m,p=a.rowWidth[m]);return y},x.prototype.getLongestRowIndex=function(a){for(var y=-1,p=Number.MIN_VALUE,m=0;m<a.rows.length;m++)a.rowWidth[m]>p&&(y=m,p=a.rowWidth[m]);return y},x.prototype.canAddHorizontal=function(a,y,p){if(a.idealRowWidth){var m=a.rows.length-1,u=a.rowWidth[m];return u+y+a.horizontalPadding<=a.idealRowWidth}var D=this.getShortestRowIndex(a);if(D<0)return!0;var O=a.rowWidth[D];if(O+a.horizontalPadding+y<=a.width)return!0;var M=0;a.rowHeight[D]<p&&D>0&&(M=p+a.verticalPadding-a.rowHeight[D]);var k;a.width-O>=y+a.horizontalPadding?k=(a.height+M)/(O+y+a.horizontalPadding):k=(a.height+M)/a.width,M=p+a.verticalPadding;var U;return a.width<y?U=(a.height+M)/y:U=(a.height+M)/a.width,U<1&&(U=1/U),k<1&&(k=1/k),k<U},x.prototype.shiftToLastRow=function(a){var y=this.getLongestRowIndex(a),p=a.rowWidth.length-1,m=a.rows[y],u=m[m.length-1],D=u.width+a.horizontalPadding;if(a.width-a.rowWidth[p]>D&&y!=p){m.splice(-1,1),a.rows[p].push(u),a.rowWidth[y]=a.rowWidth[y]-D,a.rowWidth[p]=a.rowWidth[p]+D,a.width=a.rowWidth[instance.getLongestRowIndex(a)];for(var O=Number.MIN_VALUE,M=0;M<m.length;M++)m[M].height>O&&(O=m[M].height);y>0&&(O+=a.verticalPadding);var k=a.rowHeight[y]+a.rowHeight[p];a.rowHeight[y]=O,a.rowHeight[p]<u.height+a.verticalPadding&&(a.rowHeight[p]=u.height+a.verticalPadding);var U=a.rowHeight[y]+a.rowHeight[p];a.height+=U-k,this.shiftToLastRow(a)}},x.prototype.tilingPreLayout=function(){d.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){d.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var a=[],y=!0,p;y;){var m=this.graphManager.getAllNodes(),u=[];y=!1;for(var D=0;D<m.length;D++)if(p=m[D],p.getEdges().length==1&&!p.getEdges()[0].isInterGraph&&p.getChild()==null){if(d.PURE_INCREMENTAL){var O=p.getEdges()[0].getOtherEnd(p),M=new _(p.getCenterX()-O.getCenterX(),p.getCenterY()-O.getCenterY());u.push([p,p.getEdges()[0],p.getOwner(),M])}else u.push([p,p.getEdges()[0],p.getOwner()]);y=!0}if(y==!0){for(var k=[],U=0;U<u.length;U++)u[U][0].getEdges().length==1&&(k.push(u[U]),u[U][0].getOwner().remove(u[U][0]));a.push(k),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=a},x.prototype.growTree=function(a){for(var y=a.length,p=a[y-1],m,u=0;u<p.length;u++)m=p[u],this.findPlaceforPrunedNode(m),m[2].add(m[0]),m[2].add(m[1],m[1].source,m[1].target);a.splice(a.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(a){var y,p,m=a[0];if(m==a[1].source?p=a[1].target:p=a[1].source,d.PURE_INCREMENTAL)m.setCenter(p.getCenterX()+a[3].getWidth(),p.getCenterY()+a[3].getHeight());else{var u=p.startX,D=p.finishX,O=p.startY,M=p.finishY,k=0,U=0,W=0,j=0,Y=[k,W,U,j];if(O>0)for(var K=u;K<=D;K++)Y[0]+=this.grid[K][O-1].length+this.grid[K][O].length-1;if(D<this.grid.length-1)for(var K=O;K<=M;K++)Y[1]+=this.grid[D+1][K].length+this.grid[D][K].length-1;if(M<this.grid[0].length-1)for(var K=u;K<=D;K++)Y[2]+=this.grid[K][M+1].length+this.grid[K][M].length-1;if(u>0)for(var K=O;K<=M;K++)Y[3]+=this.grid[u-1][K].length+this.grid[u][K].length-1;for(var P=X.MAX_VALUE,b,G,Z=0;Z<Y.length;Z++)Y[Z]<P?(P=Y[Z],b=1,G=Z):Y[Z]==P&&b++;if(b==3&&P==0)Y[0]==0&&Y[1]==0&&Y[2]==0?y=1:Y[0]==0&&Y[1]==0&&Y[3]==0?y=0:Y[0]==0&&Y[2]==0&&Y[3]==0?y=3:Y[1]==0&&Y[2]==0&&Y[3]==0&&(y=2);else if(b==2&&P==0){var it=Math.floor(Math.random()*2);Y[0]==0&&Y[1]==0?it==0?y=0:y=1:Y[0]==0&&Y[2]==0?it==0?y=0:y=2:Y[0]==0&&Y[3]==0?it==0?y=0:y=3:Y[1]==0&&Y[2]==0?it==0?y=1:y=2:Y[1]==0&&Y[3]==0?it==0?y=1:y=3:it==0?y=2:y=3}else if(b==4&&P==0){var it=Math.floor(Math.random()*4);y=it}else y=G;y==0?m.setCenter(p.getCenterX(),p.getCenterY()-p.getHeight()/2-l.DEFAULT_EDGE_LENGTH-m.getHeight()/2):y==1?m.setCenter(p.getCenterX()+p.getWidth()/2+l.DEFAULT_EDGE_LENGTH+m.getWidth()/2,p.getCenterY()):y==2?m.setCenter(p.getCenterX(),p.getCenterY()+p.getHeight()/2+l.DEFAULT_EDGE_LENGTH+m.getHeight()/2):m.setCenter(p.getCenterX()-p.getWidth()/2-l.DEFAULT_EDGE_LENGTH-m.getWidth()/2,p.getCenterY())}},r.exports=x},991:(r,i,t)=>{var h=t(551).FDLayoutNode,n=t(551).IMath;function v(e,d,f,l){h.call(this,e,d,f,l)}T(v,"CoSENode"),v.prototype=Object.create(h.prototype);for(var o in h)v[o]=h[o];v.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*n.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*n.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},v.prototype.propogateDisplacementToChildren=function(e,d){for(var f=this.getChild().getNodes(),l,N=0;N<f.length;N++)l=f[N],l.getChild()==null?(l.displacementX+=e,l.displacementY+=d):l.propogateDisplacementToChildren(e,d)},v.prototype.move=function(){var e=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},v.prototype.setPred1=function(e){this.pred1=e},v.prototype.getPred1=function(){return pred1},v.prototype.getPred2=function(){return pred2},v.prototype.setNext=function(e){this.next=e},v.prototype.getNext=function(){return next},v.prototype.setProcessed=function(e){this.processed=e},v.prototype.isProcessed=function(){return processed},r.exports=v},902:(r,i,t)=>{function h(f){if(Array.isArray(f)){for(var l=0,N=Array(f.length);l<f.length;l++)N[l]=f[l];return N}else return Array.from(f)}T(h,"_toConsumableArray");var n=t(806),v=t(551).LinkedList,o=t(551).Matrix,e=t(551).SVD;function d(){}T(d,"ConstraintHandler"),d.handleConstraints=function(f){var l={};l.fixedNodeConstraint=f.constraints.fixedNodeConstraint,l.alignmentConstraint=f.constraints.alignmentConstraint,l.relativePlacementConstraint=f.constraints.relativePlacementConstraint;for(var N=new Map,c=new Map,E=[],_=[],L=f.getAllNodes(),X=0,z=0;z<L.length;z++){var V=L[z];V.getChild()==null&&(c.set(V.id,X++),E.push(V.getCenterX()),_.push(V.getCenterY()),N.set(V.id,V))}l.relativePlacementConstraint&&l.relativePlacementConstraint.forEach(function(I){!I.gap&&I.gap!=0&&(I.left?I.gap=n.DEFAULT_EDGE_LENGTH+N.get(I.left).getWidth()/2+N.get(I.right).getWidth()/2:I.gap=n.DEFAULT_EDGE_LENGTH+N.get(I.top).getHeight()/2+N.get(I.bottom).getHeight()/2)});var B=T(function(I,R){return{x:I.x-R.x,y:I.y-R.y}},"calculatePositionDiff"),q=T(function(I){var R=0,$=0;return I.forEach(function(J){R+=E[c.get(J)],$+=_[c.get(J)]}),{x:R/I.size,y:$/I.size}},"calculateAvgPosition"),x=T(function(I,R,$,J,Q){function pt(ot,st){var at=new Set(ot),Tt=!0,ft=!1,bt=void 0;try{for(var Rt=st[Symbol.iterator](),Ft;!(Tt=(Ft=Rt.next()).done);Tt=!0){var jt=Ft.value;at.add(jt)}}catch(At){ft=!0,bt=At}finally{try{!Tt&&Rt.return&&Rt.return()}finally{if(ft)throw bt}}return at}T(pt,"setUnion");var dt=new Map;I.forEach(function(ot,st){dt.set(st,0)}),I.forEach(function(ot,st){ot.forEach(function(at){dt.set(at.id,dt.get(at.id)+1)})});var tt=new Map,gt=new Map,Nt=new v;dt.forEach(function(ot,st){ot==0?(Nt.push(st),$||(R=="horizontal"?tt.set(st,c.has(st)?E[c.get(st)]:J.get(st)):tt.set(st,c.has(st)?_[c.get(st)]:J.get(st)))):tt.set(st,Number.NEGATIVE_INFINITY),$&&gt.set(st,new Set([st]))}),$&&Q.forEach(function(ot){var st=[];if(ot.forEach(function(ft){$.has(ft)&&st.push(ft)}),st.length>0){var at=0;st.forEach(function(ft){R=="horizontal"?(tt.set(ft,c.has(ft)?E[c.get(ft)]:J.get(ft)),at+=tt.get(ft)):(tt.set(ft,c.has(ft)?_[c.get(ft)]:J.get(ft)),at+=tt.get(ft))}),at=at/st.length,ot.forEach(function(ft){$.has(ft)||tt.set(ft,at)})}else{var Tt=0;ot.forEach(function(ft){R=="horizontal"?Tt+=c.has(ft)?E[c.get(ft)]:J.get(ft):Tt+=c.has(ft)?_[c.get(ft)]:J.get(ft)}),Tt=Tt/ot.length,ot.forEach(function(ft){tt.set(ft,Tt)})}});for(var _t=T(function(){var ot=Nt.shift(),st=I.get(ot);st.forEach(function(at){if(tt.get(at.id)<tt.get(ot)+at.gap)if($&&$.has(at.id)){var Tt=void 0;if(R=="horizontal"?Tt=c.has(at.id)?E[c.get(at.id)]:J.get(at.id):Tt=c.has(at.id)?_[c.get(at.id)]:J.get(at.id),tt.set(at.id,Tt),Tt<tt.get(ot)+at.gap){var ft=tt.get(ot)+at.gap-Tt;gt.get(ot).forEach(function(bt){tt.set(bt,tt.get(bt)-ft)})}}else tt.set(at.id,tt.get(ot)+at.gap);dt.set(at.id,dt.get(at.id)-1),dt.get(at.id)==0&&Nt.push(at.id),$&&gt.set(at.id,pt(gt.get(ot),gt.get(at.id)))})},"_loop");Nt.length!=0;)_t();if($){var et=new Set;I.forEach(function(ot,st){ot.length==0&&et.add(st)});var Ot=[];gt.forEach(function(ot,st){if(et.has(st)){var at=!1,Tt=!0,ft=!1,bt=void 0;try{for(var Rt=ot[Symbol.iterator](),Ft;!(Tt=(Ft=Rt.next()).done);Tt=!0){var jt=Ft.value;$.has(jt)&&(at=!0)}}catch(Gt){ft=!0,bt=Gt}finally{try{!Tt&&Rt.return&&Rt.return()}finally{if(ft)throw bt}}if(!at){var At=!1,wt=void 0;Ot.forEach(function(Gt,Pt){Gt.has([].concat(h(ot))[0])&&(At=!0,wt=Pt)}),At?ot.forEach(function(Gt){Ot[wt].add(Gt)}):Ot.push(new Set(ot))}}}),Ot.forEach(function(ot,st){var at=Number.POSITIVE_INFINITY,Tt=Number.POSITIVE_INFINITY,ft=Number.NEGATIVE_INFINITY,bt=Number.NEGATIVE_INFINITY,Rt=!0,Ft=!1,jt=void 0;try{for(var At=ot[Symbol.iterator](),wt;!(Rt=(wt=At.next()).done);Rt=!0){var Gt=wt.value,Pt=void 0;R=="horizontal"?Pt=c.has(Gt)?E[c.get(Gt)]:J.get(Gt):Pt=c.has(Gt)?_[c.get(Gt)]:J.get(Gt);var Bt=tt.get(Gt);Pt<at&&(at=Pt),Pt>ft&&(ft=Pt),Bt<Tt&&(Tt=Bt),Bt>bt&&(bt=Bt)}}catch(Kt){Ft=!0,jt=Kt}finally{try{!Rt&&At.return&&At.return()}finally{if(Ft)throw jt}}var qt=(at+ft)/2-(Tt+bt)/2,ne=!0,Qt=!1,te=void 0;try{for(var Jt=ot[Symbol.iterator](),ee;!(ne=(ee=Jt.next()).done);ne=!0){var ae=ee.value;tt.set(ae,tt.get(ae)+qt)}}catch(Kt){Qt=!0,te=Kt}finally{try{!ne&&Jt.return&&Jt.return()}finally{if(Qt)throw te}}})}return tt},"findAppropriatePositionForRelativePlacement"),nt=T(function(I){var R=0,$=0,J=0,Q=0;if(I.forEach(function(gt){gt.left?E[c.get(gt.left)]-E[c.get(gt.right)]>=0?R++:$++:_[c.get(gt.top)]-_[c.get(gt.bottom)]>=0?J++:Q++}),R>$&&J>Q)for(var pt=0;pt<c.size;pt++)E[pt]=-1*E[pt],_[pt]=-1*_[pt];else if(R>$)for(var dt=0;dt<c.size;dt++)E[dt]=-1*E[dt];else if(J>Q)for(var tt=0;tt<c.size;tt++)_[tt]=-1*_[tt]},"applyReflectionForRelativePlacement"),a=T(function(I){var R=[],$=new v,J=new Set,Q=0;return I.forEach(function(pt,dt){if(!J.has(dt)){R[Q]=[];var tt=dt;for($.push(tt),J.add(tt),R[Q].push(tt);$.length!=0;){tt=$.shift();var gt=I.get(tt);gt.forEach(function(Nt){J.has(Nt.id)||($.push(Nt.id),J.add(Nt.id),R[Q].push(Nt.id))})}Q++}}),R},"findComponents"),y=T(function(I){var R=new Map;return I.forEach(function($,J){R.set(J,[])}),I.forEach(function($,J){$.forEach(function(Q){R.get(J).push(Q),R.get(Q.id).push({id:J,gap:Q.gap,direction:Q.direction})})}),R},"dagToUndirected"),p=T(function(I){var R=new Map;return I.forEach(function($,J){R.set(J,[])}),I.forEach(function($,J){$.forEach(function(Q){R.get(Q.id).push({id:J,gap:Q.gap,direction:Q.direction})})}),R},"dagToReversed"),m=[],u=[],D=!1,O=!1,M=new Set,k=new Map,U=new Map,W=[];if(l.fixedNodeConstraint&&l.fixedNodeConstraint.forEach(function(I){M.add(I.nodeId)}),l.relativePlacementConstraint&&(l.relativePlacementConstraint.forEach(function(I){I.left?(k.has(I.left)?k.get(I.left).push({id:I.right,gap:I.gap,direction:"horizontal"}):k.set(I.left,[{id:I.right,gap:I.gap,direction:"horizontal"}]),k.has(I.right)||k.set(I.right,[])):(k.has(I.top)?k.get(I.top).push({id:I.bottom,gap:I.gap,direction:"vertical"}):k.set(I.top,[{id:I.bottom,gap:I.gap,direction:"vertical"}]),k.has(I.bottom)||k.set(I.bottom,[]))}),U=y(k),W=a(U)),n.TRANSFORM_ON_CONSTRAINT_HANDLING){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>1)l.fixedNodeConstraint.forEach(function(I,R){m[R]=[I.position.x,I.position.y],u[R]=[E[c.get(I.nodeId)],_[c.get(I.nodeId)]]}),D=!0;else if(l.alignmentConstraint)(function(){var I=0;if(l.alignmentConstraint.vertical){for(var R=l.alignmentConstraint.vertical,$=T(function(tt){var gt=new Set;R[tt].forEach(function(et){gt.add(et)});var Nt=new Set([].concat(h(gt)).filter(function(et){return M.has(et)})),_t=void 0;Nt.size>0?_t=E[c.get(Nt.values().next().value)]:_t=q(gt).x,R[tt].forEach(function(et){m[I]=[_t,_[c.get(et)]],u[I]=[E[c.get(et)],_[c.get(et)]],I++})},"_loop2"),J=0;J<R.length;J++)$(J);D=!0}if(l.alignmentConstraint.horizontal){for(var Q=l.alignmentConstraint.horizontal,pt=T(function(tt){var gt=new Set;Q[tt].forEach(function(et){gt.add(et)});var Nt=new Set([].concat(h(gt)).filter(function(et){return M.has(et)})),_t=void 0;Nt.size>0?_t=E[c.get(Nt.values().next().value)]:_t=q(gt).y,Q[tt].forEach(function(et){m[I]=[E[c.get(et)],_t],u[I]=[E[c.get(et)],_[c.get(et)]],I++})},"_loop3"),dt=0;dt<Q.length;dt++)pt(dt);D=!0}l.relativePlacementConstraint&&(O=!0)})();else if(l.relativePlacementConstraint){for(var j=0,Y=0,K=0;K<W.length;K++)W[K].length>j&&(j=W[K].length,Y=K);if(j<U.size/2)nt(l.relativePlacementConstraint),D=!1,O=!1;else{var P=new Map,b=new Map,G=[];W[Y].forEach(function(I){k.get(I).forEach(function(R){R.direction=="horizontal"?(P.has(I)?P.get(I).push(R):P.set(I,[R]),P.has(R.id)||P.set(R.id,[]),G.push({left:I,right:R.id})):(b.has(I)?b.get(I).push(R):b.set(I,[R]),b.has(R.id)||b.set(R.id,[]),G.push({top:I,bottom:R.id}))})}),nt(G),O=!1;var Z=x(P,"horizontal"),it=x(b,"vertical");W[Y].forEach(function(I,R){u[R]=[E[c.get(I)],_[c.get(I)]],m[R]=[],Z.has(I)?m[R][0]=Z.get(I):m[R][0]=E[c.get(I)],it.has(I)?m[R][1]=it.get(I):m[R][1]=_[c.get(I)]}),D=!0}}if(D){for(var ut=void 0,It=o.transpose(m),Dt=o.transpose(u),S=0;S<It.length;S++)It[S]=o.multGamma(It[S]),Dt[S]=o.multGamma(Dt[S]);var rt=o.multMat(It,o.transpose(Dt)),ht=e.svd(rt);ut=o.multMat(ht.V,o.transpose(ht.U));for(var mt=0;mt<c.size;mt++){var Ct=[E[mt],_[mt]],yt=[ut[0][0],ut[1][0]],Et=[ut[0][1],ut[1][1]];E[mt]=o.dotProduct(Ct,yt),_[mt]=o.dotProduct(Ct,Et)}O&&nt(l.relativePlacementConstraint)}}if(n.ENFORCE_CONSTRAINTS){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>0){var xt={x:0,y:0};l.fixedNodeConstraint.forEach(function(I,R){var $={x:E[c.get(I.nodeId)],y:_[c.get(I.nodeId)]},J=I.position,Q=B(J,$);xt.x+=Q.x,xt.y+=Q.y}),xt.x/=l.fixedNodeConstraint.length,xt.y/=l.fixedNodeConstraint.length,E.forEach(function(I,R){E[R]+=xt.x}),_.forEach(function(I,R){_[R]+=xt.y}),l.fixedNodeConstraint.forEach(function(I){E[c.get(I.nodeId)]=I.position.x,_[c.get(I.nodeId)]=I.position.y})}if(l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var Vt=l.alignmentConstraint.vertical,Ut=T(function(I){var R=new Set;Vt[I].forEach(function(Q){R.add(Q)});var $=new Set([].concat(h(R)).filter(function(Q){return M.has(Q)})),J=void 0;$.size>0?J=E[c.get($.values().next().value)]:J=q(R).x,R.forEach(function(Q){M.has(Q)||(E[c.get(Q)]=J)})},"_loop4"),kt=0;kt<Vt.length;kt++)Ut(kt);if(l.alignmentConstraint.horizontal)for(var Mt=l.alignmentConstraint.horizontal,Xt=T(function(I){var R=new Set;Mt[I].forEach(function(Q){R.add(Q)});var $=new Set([].concat(h(R)).filter(function(Q){return M.has(Q)})),J=void 0;$.size>0?J=_[c.get($.values().next().value)]:J=q(R).y,R.forEach(function(Q){M.has(Q)||(_[c.get(Q)]=J)})},"_loop5"),Yt=0;Yt<Mt.length;Yt++)Xt(Yt)}l.relativePlacementConstraint&&function(){var I=new Map,R=new Map,$=new Map,J=new Map,Q=new Map,pt=new Map,dt=new Set,tt=new Set;if(M.forEach(function(ct){dt.add(ct),tt.add(ct)}),l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var gt=l.alignmentConstraint.vertical,Nt=T(function(ct){$.set("dummy"+ct,[]),gt[ct].forEach(function(Lt){I.set(Lt,"dummy"+ct),$.get("dummy"+ct).push(Lt),M.has(Lt)&&dt.add("dummy"+ct)}),Q.set("dummy"+ct,E[c.get(gt[ct][0])])},"_loop6"),_t=0;_t<gt.length;_t++)Nt(_t);if(l.alignmentConstraint.horizontal)for(var et=l.alignmentConstraint.horizontal,Ot=T(function(ct){J.set("dummy"+ct,[]),et[ct].forEach(function(Lt){R.set(Lt,"dummy"+ct),J.get("dummy"+ct).push(Lt),M.has(Lt)&&tt.add("dummy"+ct)}),pt.set("dummy"+ct,_[c.get(et[ct][0])])},"_loop7"),ot=0;ot<et.length;ot++)Ot(ot)}var st=new Map,at=new Map,Tt=T(function(ct){k.get(ct).forEach(function(Lt){var zt=void 0,Wt=void 0;Lt.direction=="horizontal"?(zt=I.get(ct)?I.get(ct):ct,I.get(Lt.id)?Wt={id:I.get(Lt.id),gap:Lt.gap,direction:Lt.direction}:Wt=Lt,st.has(zt)?st.get(zt).push(Wt):st.set(zt,[Wt]),st.has(Wt.id)||st.set(Wt.id,[])):(zt=R.get(ct)?R.get(ct):ct,R.get(Lt.id)?Wt={id:R.get(Lt.id),gap:Lt.gap,direction:Lt.direction}:Wt=Lt,at.has(zt)?at.get(zt).push(Wt):at.set(zt,[Wt]),at.has(Wt.id)||at.set(Wt.id,[]))})},"_loop8"),ft=!0,bt=!1,Rt=void 0;try{for(var Ft=k.keys()[Symbol.iterator](),jt;!(ft=(jt=Ft.next()).done);ft=!0){var At=jt.value;Tt(At)}}catch(ct){bt=!0,Rt=ct}finally{try{!ft&&Ft.return&&Ft.return()}finally{if(bt)throw Rt}}var wt=y(st),Gt=y(at),Pt=a(wt),Bt=a(Gt),qt=p(st),ne=p(at),Qt=[],te=[];Pt.forEach(function(ct,Lt){Qt[Lt]=[],ct.forEach(function(zt){qt.get(zt).length==0&&Qt[Lt].push(zt)})}),Bt.forEach(function(ct,Lt){te[Lt]=[],ct.forEach(function(zt){ne.get(zt).length==0&&te[Lt].push(zt)})});var Jt=x(st,"horizontal",dt,Q,Qt),ee=x(at,"vertical",tt,pt,te),ae=T(function(ct){$.get(ct)?$.get(ct).forEach(function(Lt){E[c.get(Lt)]=Jt.get(ct)}):E[c.get(ct)]=Jt.get(ct)},"_loop9"),Kt=!0,ye=!1,Ee=void 0;try{for(var de=Jt.keys()[Symbol.iterator](),Ne;!(Kt=(Ne=de.next()).done);Kt=!0){var ce=Ne.value;ae(ce)}}catch(ct){ye=!0,Ee=ct}finally{try{!Kt&&de.return&&de.return()}finally{if(ye)throw Ee}}var ze=T(function(ct){J.get(ct)?J.get(ct).forEach(function(Lt){_[c.get(Lt)]=ee.get(ct)}):_[c.get(ct)]=ee.get(ct)},"_loop10"),ge=!0,Te=!1,Ae=void 0;try{for(var ue=ee.keys()[Symbol.iterator](),we;!(ge=(we=ue.next()).done);ge=!0){var ce=we.value;ze(ce)}}catch(ct){Te=!0,Ae=ct}finally{try{!ge&&ue.return&&ue.return()}finally{if(Te)throw Ae}}}()}for(var $t=0;$t<L.length;$t++){var lt=L[$t];lt.getChild()==null&&lt.setCenter(E[c.get(lt.id)],_[c.get(lt.id)])}},r.exports=d},551:r=>{r.exports=C}},A={};function g(r){var i=A[r];if(i!==void 0)return i.exports;var t=A[r]={exports:{}};return F[r](t,t.exports,g),t.exports}T(g,"__webpack_require__");var s=g(45);return s})()})}),ai=me((w,H)=>{T(function(C,F){typeof w=="object"&&typeof H=="object"?H.exports=F(Le()):typeof define=="function"&&define.amd?define(["cose-base"],F):typeof w=="object"?w.cytoscapeFcose=F(Le()):C.cytoscapeFcose=F(C.coseBase)},"webpackUniversalModuleDefinition")(w,function(C){return(()=>{var F={658:r=>{r.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var t=arguments.length,h=Array(t>1?t-1:0),n=1;n<t;n++)h[n-1]=arguments[n];return h.forEach(function(v){Object.keys(v).forEach(function(o){return i[o]=v[o]})}),i}},548:(r,i,t)=>{var h=function(){function o(e,d){var f=[],l=!0,N=!1,c=void 0;try{for(var E=e[Symbol.iterator](),_;!(l=(_=E.next()).done)&&(f.push(_.value),!(d&&f.length===d));l=!0);}catch(L){N=!0,c=L}finally{try{!l&&E.return&&E.return()}finally{if(N)throw c}}return f}return T(o,"sliceIterator"),function(e,d){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return o(e,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=t(140).layoutBase.LinkedList,v={};v.getTopMostNodes=function(o){for(var e={},d=0;d<o.length;d++)e[o[d].id()]=!0;var f=o.filter(function(l,N){typeof l=="number"&&(l=N);for(var c=l.parent()[0];c!=null;){if(e[c.id()])return!1;c=c.parent()[0]}return!0});return f},v.connectComponents=function(o,e,d,f){var l=new n,N=new Set,c=[],E=void 0,_=void 0,L=void 0,X=!1,z=1,V=[],B=[],q=T(function(){var x=o.collection();B.push(x);var nt=d[0],a=o.collection();a.merge(nt).merge(nt.descendants().intersection(e)),c.push(nt),a.forEach(function(m){l.push(m),N.add(m),x.merge(m)});for(var y=T(function(){nt=l.shift();var m=o.collection();nt.neighborhood().nodes().forEach(function(M){e.intersection(nt.edgesWith(M)).length>0&&m.merge(M)});for(var u=0;u<m.length;u++){var D=m[u];if(E=d.intersection(D.union(D.ancestors())),E!=null&&!N.has(E[0])){var O=E.union(E.descendants());O.forEach(function(M){l.push(M),N.add(M),x.merge(M),d.has(M)&&c.push(M)})}}},"_loop2");l.length!=0;)y();if(x.forEach(function(m){e.intersection(m.connectedEdges()).forEach(function(u){x.has(u.source())&&x.has(u.target())&&x.merge(u)})}),c.length==d.length&&(X=!0),!X||X&&z>1){_=c[0],L=_.connectedEdges().length,c.forEach(function(m){m.connectedEdges().length<L&&(L=m.connectedEdges().length,_=m)}),V.push(_.id());var p=o.collection();p.merge(c[0]),c.forEach(function(m){p.merge(m)}),c=[],d=d.difference(p),z++}},"_loop");do q();while(!X);return f&&V.length>0&&f.set("dummy"+(f.size+1),V),B},v.relocateComponent=function(o,e,d){if(!d.fixedNodeConstraint){var f=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(d.quality=="draft"){var E=!0,_=!1,L=void 0;try{for(var X=e.nodeIndexes[Symbol.iterator](),z;!(E=(z=X.next()).done);E=!0){var V=z.value,B=h(V,2),q=B[0],x=B[1],nt=d.cy.getElementById(q);if(nt){var a=nt.boundingBox(),y=e.xCoords[x]-a.w/2,p=e.xCoords[x]+a.w/2,m=e.yCoords[x]-a.h/2,u=e.yCoords[x]+a.h/2;y<f&&(f=y),p>l&&(l=p),m<N&&(N=m),u>c&&(c=u)}}}catch(U){_=!0,L=U}finally{try{!E&&X.return&&X.return()}finally{if(_)throw L}}var D=o.x-(l+f)/2,O=o.y-(c+N)/2;e.xCoords=e.xCoords.map(function(U){return U+D}),e.yCoords=e.yCoords.map(function(U){return U+O})}else{Object.keys(e).forEach(function(U){var W=e[U],j=W.getRect().x,Y=W.getRect().x+W.getRect().width,K=W.getRect().y,P=W.getRect().y+W.getRect().height;j<f&&(f=j),Y>l&&(l=Y),K<N&&(N=K),P>c&&(c=P)});var M=o.x-(l+f)/2,k=o.y-(c+N)/2;Object.keys(e).forEach(function(U){var W=e[U];W.setCenter(W.getCenterX()+M,W.getCenterY()+k)})}}},v.calcBoundingBox=function(o,e,d,f){for(var l=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER,_=void 0,L=void 0,X=void 0,z=void 0,V=o.descendants().not(":parent"),B=V.length,q=0;q<B;q++){var x=V[q];_=e[f.get(x.id())]-x.width()/2,L=e[f.get(x.id())]+x.width()/2,X=d[f.get(x.id())]-x.height()/2,z=d[f.get(x.id())]+x.height()/2,l>_&&(l=_),N<L&&(N=L),c>X&&(c=X),E<z&&(E=z)}var nt={};return nt.topLeftX=l,nt.topLeftY=c,nt.width=N-l,nt.height=E-c,nt},v.calcParentsWithoutChildren=function(o,e){var d=o.collection();return e.nodes(":parent").forEach(function(f){var l=!1;f.children().forEach(function(N){N.css("display")!="none"&&(l=!0)}),l||d.merge(f)}),d},r.exports=v},816:(r,i,t)=>{var h=t(548),n=t(140).CoSELayout,v=t(140).CoSENode,o=t(140).layoutBase.PointD,e=t(140).layoutBase.DimensionD,d=t(140).layoutBase.LayoutConstants,f=t(140).layoutBase.FDLayoutConstants,l=t(140).CoSEConstants,N=T(function(c,E){var _=c.cy,L=c.eles,X=L.nodes(),z=L.edges(),V=void 0,B=void 0,q=void 0,x={};c.randomize&&(V=E.nodeIndexes,B=E.xCoords,q=E.yCoords);var nt=T(function(M){return typeof M=="function"},"isFn"),a=T(function(M,k){return nt(M)?M(k):M},"optFn"),y=h.calcParentsWithoutChildren(_,L),p=T(function M(k,U,W,j){for(var Y=U.length,K=0;K<Y;K++){var P=U[K],b=null;P.intersection(y).length==0&&(b=P.children());var G=void 0,Z=P.layoutDimensions({nodeDimensionsIncludeLabels:j.nodeDimensionsIncludeLabels});if(P.outerWidth()!=null&&P.outerHeight()!=null)if(j.randomize)if(!P.isParent())G=k.add(new v(W.graphManager,new o(B[V.get(P.id())]-Z.w/2,q[V.get(P.id())]-Z.h/2),new e(parseFloat(Z.w),parseFloat(Z.h))));else{var it=h.calcBoundingBox(P,B,q,V);P.intersection(y).length==0?G=k.add(new v(W.graphManager,new o(it.topLeftX,it.topLeftY),new e(it.width,it.height))):G=k.add(new v(W.graphManager,new o(it.topLeftX,it.topLeftY),new e(parseFloat(Z.w),parseFloat(Z.h))))}else G=k.add(new v(W.graphManager,new o(P.position("x")-Z.w/2,P.position("y")-Z.h/2),new e(parseFloat(Z.w),parseFloat(Z.h))));else G=k.add(new v(this.graphManager));if(G.id=P.data("id"),G.nodeRepulsion=a(j.nodeRepulsion,P),G.paddingLeft=parseInt(P.css("padding")),G.paddingTop=parseInt(P.css("padding")),G.paddingRight=parseInt(P.css("padding")),G.paddingBottom=parseInt(P.css("padding")),j.nodeDimensionsIncludeLabels&&(G.labelWidth=P.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,G.labelHeight=P.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,G.labelPosVertical=P.css("text-valign"),G.labelPosHorizontal=P.css("text-halign")),x[P.data("id")]=G,isNaN(G.rect.x)&&(G.rect.x=0),isNaN(G.rect.y)&&(G.rect.y=0),b!=null&&b.length>0){var ut=void 0;ut=W.getGraphManager().add(W.newGraph(),G),M(ut,b,W,j)}}},"processChildrenList"),m=T(function(M,k,U){for(var W=0,j=0,Y=0;Y<U.length;Y++){var K=U[Y],P=x[K.data("source")],b=x[K.data("target")];if(P&&b&&P!==b&&P.getEdgesBetween(b).length==0){var G=k.add(M.newEdge(),P,b);G.id=K.id(),G.idealLength=a(c.idealEdgeLength,K),G.edgeElasticity=a(c.edgeElasticity,K),W+=G.idealLength,j++}}c.idealEdgeLength!=null&&(j>0?l.DEFAULT_EDGE_LENGTH=f.DEFAULT_EDGE_LENGTH=W/j:nt(c.idealEdgeLength)?l.DEFAULT_EDGE_LENGTH=f.DEFAULT_EDGE_LENGTH=50:l.DEFAULT_EDGE_LENGTH=f.DEFAULT_EDGE_LENGTH=c.idealEdgeLength,l.MIN_REPULSION_DIST=f.MIN_REPULSION_DIST=f.DEFAULT_EDGE_LENGTH/10,l.DEFAULT_RADIAL_SEPARATION=f.DEFAULT_EDGE_LENGTH)},"processEdges"),u=T(function(M,k){k.fixedNodeConstraint&&(M.constraints.fixedNodeConstraint=k.fixedNodeConstraint),k.alignmentConstraint&&(M.constraints.alignmentConstraint=k.alignmentConstraint),k.relativePlacementConstraint&&(M.constraints.relativePlacementConstraint=k.relativePlacementConstraint)},"processConstraints");c.nestingFactor!=null&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=f.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.nestingFactor),c.gravity!=null&&(l.DEFAULT_GRAVITY_STRENGTH=f.DEFAULT_GRAVITY_STRENGTH=c.gravity),c.numIter!=null&&(l.MAX_ITERATIONS=f.MAX_ITERATIONS=c.numIter),c.gravityRange!=null&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=f.DEFAULT_GRAVITY_RANGE_FACTOR=c.gravityRange),c.gravityCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=f.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.gravityCompound),c.gravityRangeCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=f.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.gravityRangeCompound),c.initialEnergyOnIncremental!=null&&(l.DEFAULT_COOLING_FACTOR_INCREMENTAL=f.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.initialEnergyOnIncremental),c.tilingCompareBy!=null&&(l.TILING_COMPARE_BY=c.tilingCompareBy),c.quality=="proof"?d.QUALITY=2:d.QUALITY=0,l.NODE_DIMENSIONS_INCLUDE_LABELS=f.NODE_DIMENSIONS_INCLUDE_LABELS=d.NODE_DIMENSIONS_INCLUDE_LABELS=c.nodeDimensionsIncludeLabels,l.DEFAULT_INCREMENTAL=f.DEFAULT_INCREMENTAL=d.DEFAULT_INCREMENTAL=!c.randomize,l.ANIMATE=f.ANIMATE=d.ANIMATE=c.animate,l.TILE=c.tile,l.TILING_PADDING_VERTICAL=typeof c.tilingPaddingVertical=="function"?c.tilingPaddingVertical.call():c.tilingPaddingVertical,l.TILING_PADDING_HORIZONTAL=typeof c.tilingPaddingHorizontal=="function"?c.tilingPaddingHorizontal.call():c.tilingPaddingHorizontal,l.DEFAULT_INCREMENTAL=f.DEFAULT_INCREMENTAL=d.DEFAULT_INCREMENTAL=!0,l.PURE_INCREMENTAL=!c.randomize,d.DEFAULT_UNIFORM_LEAF_NODE_SIZES=c.uniformNodeDimensions,c.step=="transformed"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!1),c.step=="enforced"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!1),c.step=="cose"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!0),c.step=="all"&&(c.randomize?l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!0),c.fixedNodeConstraint||c.alignmentConstraint||c.relativePlacementConstraint?l.TREE_REDUCTION_ON_INCREMENTAL=!1:l.TREE_REDUCTION_ON_INCREMENTAL=!0;var D=new n,O=D.newGraphManager();return p(O.addRoot(),h.getTopMostNodes(X),D,c),m(D,O,z),u(D,c),D.runLayout(),x},"coseLayout");r.exports={coseLayout:N}},212:(r,i,t)=>{var h=function(){function E(_,L){for(var X=0;X<L.length;X++){var z=L[X];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(_,z.key,z)}}return T(E,"defineProperties"),function(_,L,X){return L&&E(_.prototype,L),X&&E(_,X),_}}();function n(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}T(n,"_classCallCheck");var v=t(658),o=t(548),e=t(657),d=e.spectralLayout,f=t(816),l=f.coseLayout,N=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:T(function(E){return 4500},"nodeRepulsion"),idealEdgeLength:T(function(E){return 50},"idealEdgeLength"),edgeElasticity:T(function(E){return .45},"edgeElasticity"),nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:T(function(){},"ready"),stop:T(function(){},"stop")}),c=function(){function E(_){n(this,E),this.options=v({},N,_)}return T(E,"Layout"),h(E,[{key:"run",value:T(function(){var _=this,L=this.options,X=L.cy,z=L.eles,V=[],B=[],q=void 0,x=[];L.fixedNodeConstraint&&(!Array.isArray(L.fixedNodeConstraint)||L.fixedNodeConstraint.length==0)&&(L.fixedNodeConstraint=void 0),L.alignmentConstraint&&(L.alignmentConstraint.vertical&&(!Array.isArray(L.alignmentConstraint.vertical)||L.alignmentConstraint.vertical.length==0)&&(L.alignmentConstraint.vertical=void 0),L.alignmentConstraint.horizontal&&(!Array.isArray(L.alignmentConstraint.horizontal)||L.alignmentConstraint.horizontal.length==0)&&(L.alignmentConstraint.horizontal=void 0)),L.relativePlacementConstraint&&(!Array.isArray(L.relativePlacementConstraint)||L.relativePlacementConstraint.length==0)&&(L.relativePlacementConstraint=void 0);var nt=L.fixedNodeConstraint||L.alignmentConstraint||L.relativePlacementConstraint;nt&&(L.tile=!1,L.packComponents=!1);var a=void 0,y=!1;if(X.layoutUtilities&&L.packComponents&&(a=X.layoutUtilities("get"),a||(a=X.layoutUtilities()),y=!0),z.nodes().length>0)if(y){var p=o.getTopMostNodes(L.eles.nodes());if(q=o.connectComponents(X,L.eles,p),q.forEach(function(S){var rt=S.boundingBox();x.push({x:rt.x1+rt.w/2,y:rt.y1+rt.h/2})}),L.randomize&&q.forEach(function(S){L.eles=S,V.push(d(L))}),L.quality=="default"||L.quality=="proof"){var m=X.collection();if(L.tile){var u=new Map,D=[],O=[],M=0,k={nodeIndexes:u,xCoords:D,yCoords:O},U=[];if(q.forEach(function(S,rt){S.edges().length==0&&(S.nodes().forEach(function(ht,mt){m.merge(S.nodes()[mt]),ht.isParent()||(k.nodeIndexes.set(S.nodes()[mt].id(),M++),k.xCoords.push(S.nodes()[0].position().x),k.yCoords.push(S.nodes()[0].position().y))}),U.push(rt))}),m.length>1){var W=m.boundingBox();x.push({x:W.x1+W.w/2,y:W.y1+W.h/2}),q.push(m),V.push(k);for(var j=U.length-1;j>=0;j--)q.splice(U[j],1),V.splice(U[j],1),x.splice(U[j],1)}}q.forEach(function(S,rt){L.eles=S,B.push(l(L,V[rt])),o.relocateComponent(x[rt],B[rt],L)})}else q.forEach(function(S,rt){o.relocateComponent(x[rt],V[rt],L)});var Y=new Set;if(q.length>1){var K=[],P=z.filter(function(S){return S.css("display")=="none"});q.forEach(function(S,rt){var ht=void 0;if(L.quality=="draft"&&(ht=V[rt].nodeIndexes),S.nodes().not(P).length>0){var mt={};mt.edges=[],mt.nodes=[];var Ct=void 0;S.nodes().not(P).forEach(function(yt){if(L.quality=="draft")if(!yt.isParent())Ct=ht.get(yt.id()),mt.nodes.push({x:V[rt].xCoords[Ct]-yt.boundingbox().w/2,y:V[rt].yCoords[Ct]-yt.boundingbox().h/2,width:yt.boundingbox().w,height:yt.boundingbox().h});else{var Et=o.calcBoundingBox(yt,V[rt].xCoords,V[rt].yCoords,ht);mt.nodes.push({x:Et.topLeftX,y:Et.topLeftY,width:Et.width,height:Et.height})}else B[rt][yt.id()]&&mt.nodes.push({x:B[rt][yt.id()].getLeft(),y:B[rt][yt.id()].getTop(),width:B[rt][yt.id()].getWidth(),height:B[rt][yt.id()].getHeight()})}),S.edges().forEach(function(yt){var Et=yt.source(),xt=yt.target();if(Et.css("display")!="none"&&xt.css("display")!="none")if(L.quality=="draft"){var Vt=ht.get(Et.id()),Ut=ht.get(xt.id()),kt=[],Mt=[];if(Et.isParent()){var Xt=o.calcBoundingBox(Et,V[rt].xCoords,V[rt].yCoords,ht);kt.push(Xt.topLeftX+Xt.width/2),kt.push(Xt.topLeftY+Xt.height/2)}else kt.push(V[rt].xCoords[Vt]),kt.push(V[rt].yCoords[Vt]);if(xt.isParent()){var Yt=o.calcBoundingBox(xt,V[rt].xCoords,V[rt].yCoords,ht);Mt.push(Yt.topLeftX+Yt.width/2),Mt.push(Yt.topLeftY+Yt.height/2)}else Mt.push(V[rt].xCoords[Ut]),Mt.push(V[rt].yCoords[Ut]);mt.edges.push({startX:kt[0],startY:kt[1],endX:Mt[0],endY:Mt[1]})}else B[rt][Et.id()]&&B[rt][xt.id()]&&mt.edges.push({startX:B[rt][Et.id()].getCenterX(),startY:B[rt][Et.id()].getCenterY(),endX:B[rt][xt.id()].getCenterX(),endY:B[rt][xt.id()].getCenterY()})}),mt.nodes.length>0&&(K.push(mt),Y.add(rt))}});var b=a.packComponents(K,L.randomize).shifts;if(L.quality=="draft")V.forEach(function(S,rt){var ht=S.xCoords.map(function(Ct){return Ct+b[rt].dx}),mt=S.yCoords.map(function(Ct){return Ct+b[rt].dy});S.xCoords=ht,S.yCoords=mt});else{var G=0;Y.forEach(function(S){Object.keys(B[S]).forEach(function(rt){var ht=B[S][rt];ht.setCenter(ht.getCenterX()+b[G].dx,ht.getCenterY()+b[G].dy)}),G++})}}}else{var Z=L.eles.boundingBox();if(x.push({x:Z.x1+Z.w/2,y:Z.y1+Z.h/2}),L.randomize){var it=d(L);V.push(it)}L.quality=="default"||L.quality=="proof"?(B.push(l(L,V[0])),o.relocateComponent(x[0],B[0],L)):o.relocateComponent(x[0],V[0],L)}var ut=T(function(S,rt){if(L.quality=="default"||L.quality=="proof"){typeof S=="number"&&(S=rt);var ht=void 0,mt=void 0,Ct=S.data("id");return B.forEach(function(Et){Ct in Et&&(ht={x:Et[Ct].getRect().getCenterX(),y:Et[Ct].getRect().getCenterY()},mt=Et[Ct])}),L.nodeDimensionsIncludeLabels&&(mt.labelWidth&&(mt.labelPosHorizontal=="left"?ht.x+=mt.labelWidth/2:mt.labelPosHorizontal=="right"&&(ht.x-=mt.labelWidth/2)),mt.labelHeight&&(mt.labelPosVertical=="top"?ht.y+=mt.labelHeight/2:mt.labelPosVertical=="bottom"&&(ht.y-=mt.labelHeight/2))),ht==null&&(ht={x:S.position("x"),y:S.position("y")}),{x:ht.x,y:ht.y}}else{var yt=void 0;return V.forEach(function(Et){var xt=Et.nodeIndexes.get(S.id());xt!=null&&(yt={x:Et.xCoords[xt],y:Et.yCoords[xt]})}),yt==null&&(yt={x:S.position("x"),y:S.position("y")}),{x:yt.x,y:yt.y}}},"getPositions");if(L.quality=="default"||L.quality=="proof"||L.randomize){var It=o.calcParentsWithoutChildren(X,z),Dt=z.filter(function(S){return S.css("display")=="none"});L.eles=z.not(Dt),z.nodes().not(":parent").not(Dt).layoutPositions(_,L,ut),It.length>0&&It.forEach(function(S){S.position(ut(S))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")},"run")}]),E}();r.exports=c},657:(r,i,t)=>{var h=t(548),n=t(140).layoutBase.Matrix,v=t(140).layoutBase.SVD,o=T(function(e){var d=e.cy,f=e.eles,l=f.nodes(),N=f.nodes(":parent"),c=new Map,E=new Map,_=new Map,L=[],X=[],z=[],V=[],B=[],q=[],x=[],nt=[],a=void 0,y=1e8,p=1e-9,m=e.piTol,u=e.samplingType,D=e.nodeSeparation,O=void 0,M=T(function(){for(var lt=0,I=0,R=!1;I<O;){lt=Math.floor(Math.random()*a),R=!1;for(var $=0;$<I;$++)if(V[$]==lt){R=!0;break}if(!R)V[I]=lt,I++;else continue}},"randomSampleCR"),k=T(function(lt,I,R){for(var $=[],J=0,Q=0,pt=0,dt=void 0,tt=[],gt=0,Nt=1,_t=0;_t<a;_t++)tt[_t]=y;for($[Q]=lt,tt[lt]=0;Q>=J;){pt=$[J++];for(var et=L[pt],Ot=0;Ot<et.length;Ot++)dt=E.get(et[Ot]),tt[dt]==y&&(tt[dt]=tt[pt]+1,$[++Q]=dt);q[pt][I]=tt[pt]*D}if(R){for(var ot=0;ot<a;ot++)q[ot][I]<B[ot]&&(B[ot]=q[ot][I]);for(var st=0;st<a;st++)B[st]>gt&&(gt=B[st],Nt=st)}return Nt},"BFS"),U=T(function(lt){var I=void 0;if(lt){I=Math.floor(Math.random()*a);for(var R=0;R<a;R++)B[R]=y;for(var $=0;$<O;$++)V[$]=I,I=k(I,$,lt)}else{M();for(var J=0;J<O;J++)k(V[J],J,lt,!1)}for(var Q=0;Q<a;Q++)for(var pt=0;pt<O;pt++)q[Q][pt]*=q[Q][pt];for(var dt=0;dt<O;dt++)x[dt]=[];for(var tt=0;tt<O;tt++)for(var gt=0;gt<O;gt++)x[tt][gt]=q[V[gt]][tt]},"allBFS"),W=T(function(){for(var lt=v.svd(x),I=lt.S,R=lt.U,$=lt.V,J=I[0]*I[0]*I[0],Q=[],pt=0;pt<O;pt++){Q[pt]=[];for(var dt=0;dt<O;dt++)Q[pt][dt]=0,pt==dt&&(Q[pt][dt]=I[pt]/(I[pt]*I[pt]+J/(I[pt]*I[pt])))}nt=n.multMat(n.multMat($,Q),n.transpose(R))},"sample"),j=T(function(){for(var lt=void 0,I=void 0,R=[],$=[],J=[],Q=[],pt=0;pt<a;pt++)R[pt]=Math.random(),$[pt]=Math.random();R=n.normalize(R),$=n.normalize($);for(var dt=0,tt=p,gt=p,Nt=void 0;;){dt++;for(var _t=0;_t<a;_t++)J[_t]=R[_t];if(R=n.multGamma(n.multL(n.multGamma(J),q,nt)),lt=n.dotProduct(J,R),R=n.normalize(R),tt=n.dotProduct(J,R),Nt=Math.abs(tt/gt),Nt<=1+m&&Nt>=1)break;gt=tt}for(var et=0;et<a;et++)J[et]=R[et];for(dt=0,gt=p;;){dt++;for(var Ot=0;Ot<a;Ot++)Q[Ot]=$[Ot];if(Q=n.minusOp(Q,n.multCons(J,n.dotProduct(J,Q))),$=n.multGamma(n.multL(n.multGamma(Q),q,nt)),I=n.dotProduct(Q,$),$=n.normalize($),tt=n.dotProduct(Q,$),Nt=Math.abs(tt/gt),Nt<=1+m&&Nt>=1)break;gt=tt}for(var ot=0;ot<a;ot++)Q[ot]=$[ot];X=n.multCons(J,Math.sqrt(Math.abs(lt))),z=n.multCons(Q,Math.sqrt(Math.abs(I)))},"powerIteration");h.connectComponents(d,f,h.getTopMostNodes(l),c),N.forEach(function(lt){h.connectComponents(d,f,h.getTopMostNodes(lt.descendants().intersection(f)),c)});for(var Y=0,K=0;K<l.length;K++)l[K].isParent()||E.set(l[K].id(),Y++);var P=!0,b=!1,G=void 0;try{for(var Z=c.keys()[Symbol.iterator](),it;!(P=(it=Z.next()).done);P=!0){var ut=it.value;E.set(ut,Y++)}}catch(lt){b=!0,G=lt}finally{try{!P&&Z.return&&Z.return()}finally{if(b)throw G}}for(var It=0;It<E.size;It++)L[It]=[];N.forEach(function(lt){for(var I=lt.children().intersection(f);I.nodes(":childless").length==0;)I=I.nodes()[0].children().intersection(f);var R=0,$=I.nodes(":childless")[0].connectedEdges().length;I.nodes(":childless").forEach(function(J,Q){J.connectedEdges().length<$&&($=J.connectedEdges().length,R=Q)}),_.set(lt.id(),I.nodes(":childless")[R].id())}),l.forEach(function(lt){var I=void 0;lt.isParent()?I=E.get(_.get(lt.id())):I=E.get(lt.id()),lt.neighborhood().nodes().forEach(function(R){f.intersection(lt.edgesWith(R)).length>0&&(R.isParent()?L[I].push(_.get(R.id())):L[I].push(R.id()))})});var Dt=T(function(lt){var I=E.get(lt),R=void 0;c.get(lt).forEach(function($){d.getElementById($).isParent()?R=_.get($):R=$,L[I].push(R),L[E.get(R)].push(lt)})},"_loop"),S=!0,rt=!1,ht=void 0;try{for(var mt=c.keys()[Symbol.iterator](),Ct;!(S=(Ct=mt.next()).done);S=!0){var yt=Ct.value;Dt(yt)}}catch(lt){rt=!0,ht=lt}finally{try{!S&&mt.return&&mt.return()}finally{if(rt)throw ht}}a=E.size;var Et=void 0;if(a>2){O=a<e.sampleSize?a:e.sampleSize;for(var xt=0;xt<a;xt++)q[xt]=[];for(var Vt=0;Vt<O;Vt++)nt[Vt]=[];return e.quality=="draft"||e.step=="all"?(U(u),W(),j(),Et={nodeIndexes:E,xCoords:X,yCoords:z}):(E.forEach(function(lt,I){X.push(d.getElementById(I).position("x")),z.push(d.getElementById(I).position("y"))}),Et={nodeIndexes:E,xCoords:X,yCoords:z}),Et}else{var Ut=E.keys(),kt=d.getElementById(Ut.next().value),Mt=kt.position(),Xt=kt.outerWidth();if(X.push(Mt.x),z.push(Mt.y),a==2){var Yt=d.getElementById(Ut.next().value),$t=Yt.outerWidth();X.push(Mt.x+Xt/2+$t/2+e.idealEdgeLength),z.push(Mt.y)}return Et={nodeIndexes:E,xCoords:X,yCoords:z},Et}},"spectralLayout");r.exports={spectralLayout:o}},579:(r,i,t)=>{var h=t(212),n=T(function(v){v&&v("layout","fcose",h)},"register");typeof cytoscape<"u"&&n(cytoscape),r.exports=n},140:r=>{r.exports=C}},A={};function g(r){var i=A[r];if(i!==void 0)return i.exports;var t=A[r]={exports:{}};return F[r](t,t.exports,g),t.exports}T(g,"__webpack_require__");var s=g(579);return s})()})}),Ie={L:"left",R:"right",T:"top",B:"bottom"},Ce={L:T(w=>`${w},${w/2} 0,${w} 0,0`,"L"),R:T(w=>`0,${w/2} ${w},0 ${w},${w}`,"R"),T:T(w=>`0,0 ${w},0 ${w/2},${w}`,"T"),B:T(w=>`${w/2},0 ${w},${w} 0,${w}`,"B")},se={L:T((w,H)=>w-H+2,"L"),R:T((w,H)=>w-2,"R"),T:T((w,H)=>w-H+2,"T"),B:T((w,H)=>w-2,"B")},si=T(function(w){return Ht(w)?w==="L"?"R":"L":w==="T"?"B":"T"},"getOppositeArchitectureDirection"),Oe=T(function(w){let H=w;return H==="L"||H==="R"||H==="T"||H==="B"},"isArchitectureDirection"),Ht=T(function(w){let H=w;return H==="L"||H==="R"},"isArchitectureDirectionX"),Zt=T(function(w){let H=w;return H==="T"||H==="B"},"isArchitectureDirectionY"),De=T(function(w,H){let C=Ht(w)&&Zt(H),F=Zt(w)&&Ht(H);return C||F},"isArchitectureDirectionXY"),hi=T(function(w){let H=w[0],C=w[1],F=Ht(H)&&Zt(C),A=Zt(H)&&Ht(C);return F||A},"isArchitecturePairXY"),li=T(function(w){return w!=="LL"&&w!=="RR"&&w!=="TT"&&w!=="BB"},"isValidArchitectureDirectionPair"),pe=T(function(w,H){let C=`${w}${H}`;return li(C)?C:void 0},"getArchitectureDirectionPair"),di=T(function([w,H],C){let F=C[0],A=C[1];return Ht(F)?Zt(A)?[w+(F==="L"?-1:1),H+(A==="T"?1:-1)]:[w+(F==="L"?-1:1),H]:Ht(A)?[w+(A==="L"?1:-1),H+(F==="T"?1:-1)]:[w,H+(F==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),ci=T(function(w){return w==="LT"||w==="TL"?[1,1]:w==="BL"||w==="LB"?[1,-1]:w==="BR"||w==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),gi=T(function(w){return w.type==="service"},"isArchitectureService"),ui=T(function(w){return w.type==="junction"},"isArchitectureJunction"),be=T(w=>w.data(),"edgeData"),re=T(w=>w.data(),"nodeData"),Re=We.architecture,vt=new He(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:Re,dataStructures:void 0,elements:{}})),fi=T(()=>{vt.reset(),je()},"clear"),pi=T(function({id:w,icon:H,in:C,title:F,iconText:A}){if(vt.records.registeredIds[w]!==void 0)throw new Error(`The service id [${w}] is already in use by another ${vt.records.registeredIds[w]}`);if(C!==void 0){if(w===C)throw new Error(`The service [${w}] cannot be placed within itself`);if(vt.records.registeredIds[C]===void 0)throw new Error(`The service [${w}]'s parent does not exist. Please make sure the parent is created before this service`);if(vt.records.registeredIds[C]==="node")throw new Error(`The service [${w}]'s parent is not a group`)}vt.records.registeredIds[w]="node",vt.records.nodes[w]={id:w,type:"service",icon:H,iconText:A,title:F,edges:[],in:C}},"addService"),vi=T(()=>Object.values(vt.records.nodes).filter(gi),"getServices"),mi=T(function({id:w,in:H}){vt.records.registeredIds[w]="node",vt.records.nodes[w]={id:w,type:"junction",edges:[],in:H}},"addJunction"),yi=T(()=>Object.values(vt.records.nodes).filter(ui),"getJunctions"),Ei=T(()=>Object.values(vt.records.nodes),"getNodes"),Ni=T(w=>vt.records.nodes[w],"getNode"),Ti=T(function({id:w,icon:H,in:C,title:F}){if(vt.records.registeredIds[w]!==void 0)throw new Error(`The group id [${w}] is already in use by another ${vt.records.registeredIds[w]}`);if(C!==void 0){if(w===C)throw new Error(`The group [${w}] cannot be placed within itself`);if(vt.records.registeredIds[C]===void 0)throw new Error(`The group [${w}]'s parent does not exist. Please make sure the parent is created before this group`);if(vt.records.registeredIds[C]==="node")throw new Error(`The group [${w}]'s parent is not a group`)}vt.records.registeredIds[w]="group",vt.records.groups[w]={id:w,icon:H,title:F,in:C}},"addGroup"),Ai=T(()=>Object.values(vt.records.groups),"getGroups"),wi=T(function({lhsId:w,rhsId:H,lhsDir:C,rhsDir:F,lhsInto:A,rhsInto:g,lhsGroup:s,rhsGroup:r,title:i}){if(!Oe(C))throw new Error(`Invalid direction given for left hand side of edge ${w}--${H}. Expected (L,R,T,B) got ${C}`);if(!Oe(F))throw new Error(`Invalid direction given for right hand side of edge ${w}--${H}. Expected (L,R,T,B) got ${F}`);if(vt.records.nodes[w]===void 0&&vt.records.groups[w]===void 0)throw new Error(`The left-hand id [${w}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(vt.records.nodes[H]===void 0&&vt.records.groups[w]===void 0)throw new Error(`The right-hand id [${H}] does not yet exist. Please create the service/group before declaring an edge to it.`);let t=vt.records.nodes[w].in,h=vt.records.nodes[H].in;if(s&&t&&h&&t==h)throw new Error(`The left-hand id [${w}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(r&&t&&h&&t==h)throw new Error(`The right-hand id [${H}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let n={lhsId:w,lhsDir:C,lhsInto:A,lhsGroup:s,rhsId:H,rhsDir:F,rhsInto:g,rhsGroup:r,title:i};vt.records.edges.push(n),vt.records.nodes[w]&&vt.records.nodes[H]&&(vt.records.nodes[w].edges.push(vt.records.edges[vt.records.edges.length-1]),vt.records.nodes[H].edges.push(vt.records.edges[vt.records.edges.length-1]))},"addEdge"),_i=T(()=>vt.records.edges,"getEdges"),Li=T(()=>{if(vt.records.dataStructures===void 0){let w=Object.entries(vt.records.nodes).reduce((s,[r,i])=>(s[r]=i.edges.reduce((t,h)=>{if(h.lhsId===r){let n=pe(h.lhsDir,h.rhsDir);n&&(t[n]=h.rhsId)}else{let n=pe(h.rhsDir,h.lhsDir);n&&(t[n]=h.lhsId)}return t},{}),s),{}),H=Object.keys(w)[0],C={[H]:1},F=Object.keys(w).reduce((s,r)=>r===H?s:{...s,[r]:1},{}),A=T(s=>{let r={[s]:[0,0]},i=[s];for(;i.length>0;){let t=i.shift();if(t){C[t]=1,delete F[t];let h=w[t],[n,v]=r[t];Object.entries(h).forEach(([o,e])=>{C[e]||(r[e]=di([n,v],o),i.push(e))})}}return r},"BFS"),g=[A(H)];for(;Object.keys(F).length>0;)g.push(A(Object.keys(F)[0]));vt.records.dataStructures={adjList:w,spatialMaps:g}}return vt.records.dataStructures},"getDataStructures"),Ii=T((w,H)=>{vt.records.elements[w]=H},"setElementForId"),Ci=T(w=>vt.records.elements[w],"getElementById"),he={clear:fi,setDiagramTitle:Qe,getDiagramTitle:ti,setAccTitle:ei,getAccTitle:ii,setAccDescription:ri,getAccDescription:ni,addService:pi,getServices:vi,addJunction:mi,getJunctions:yi,getNodes:Ei,getNode:Ni,addGroup:Ti,getGroups:Ai,addEdge:wi,getEdges:_i,setElementForId:Ii,getElementById:Ci,getDataStructures:Li};function St(w){let H=le().architecture;return H!=null&&H[w]?H[w]:Re[w]}T(St,"getConfigField");var Oi=T((w,H)=>{Ve(w,H),w.groups.map(H.addGroup),w.services.map(C=>H.addService({...C,type:"service"})),w.junctions.map(C=>H.addJunction({...C,type:"junction"})),w.edges.map(H.addEdge)},"populateDb"),xi={parse:T(async w=>{let H=await Be("architecture",w);Me.debug(H),Oi(H,he)},"parse")},Mi=T(w=>`
  .edge {
    stroke-width: ${w.archEdgeWidth};
    stroke: ${w.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${w.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${w.archGroupBorderColor};
    stroke-width: ${w.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),Di=Mi,bi=$e(ai()),ie=T(w=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${w}</g>`,"wrapIcon"),oe={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:ie('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:ie('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:ie('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:ie('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:ie('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:qe,blank:{body:ie("")}}},Ri=T(async function(w,H){let C=St("padding"),F=St("iconSize"),A=F/2,g=F/6,s=g/2;await Promise.all(H.edges().map(async r=>{var z,V;let{source:i,sourceDir:t,sourceArrow:h,sourceGroup:n,target:v,targetDir:o,targetArrow:e,targetGroup:d,label:f}=be(r),{x:l,y:N}=r[0].sourceEndpoint(),{x:c,y:E}=r[0].midpoint(),{x:_,y:L}=r[0].targetEndpoint(),X=C+4;if(n&&(Ht(t)?l+=t==="L"?-X:X:N+=t==="T"?-X:X+18),d&&(Ht(o)?_+=o==="L"?-X:X:L+=o==="T"?-X:X+18),!n&&((z=he.getNode(i))==null?void 0:z.type)==="junction"&&(Ht(t)?l+=t==="L"?A:-A:N+=t==="T"?A:-A),!d&&((V=he.getNode(v))==null?void 0:V.type)==="junction"&&(Ht(o)?_+=o==="L"?A:-A:L+=o==="T"?A:-A),r[0]._private.rscratch){let B=w.insert("g");if(B.insert("path").attr("d",`M ${l},${N} L ${c},${E} L${_},${L} `).attr("class","edge"),h){let q=Ht(t)?se[t](l,g):l-s,x=Zt(t)?se[t](N,g):N-s;B.insert("polygon").attr("points",Ce[t](g)).attr("transform",`translate(${q},${x})`).attr("class","arrow")}if(e){let q=Ht(o)?se[o](_,g):_-s,x=Zt(o)?se[o](L,g):L-s;B.insert("polygon").attr("points",Ce[o](g)).attr("transform",`translate(${q},${x})`).attr("class","arrow")}if(f){let q=De(t,o)?"XY":Ht(t)?"X":"Y",x=0;q==="X"?x=Math.abs(l-_):q==="Y"?x=Math.abs(N-L)/1.5:x=Math.abs(l-_)/2;let nt=B.append("g");if(await ve(nt,f,{useHtmlLabels:!1,width:x,classes:"architecture-service-label"},le()),nt.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),q==="X")nt.attr("transform","translate("+c+", "+E+")");else if(q==="Y")nt.attr("transform","translate("+c+", "+E+") rotate(-90)");else if(q==="XY"){let a=pe(t,o);if(a&&hi(a)){let y=nt.node().getBoundingClientRect(),[p,m]=ci(a);nt.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*p*m*45})`);let u=nt.node().getBoundingClientRect();nt.attr("transform",`
                translate(${c}, ${E-y.height/2})
                translate(${p*u.width/2}, ${m*u.height/2})
                rotate(${-1*p*m*45}, 0, ${y.height/2})
              `)}}}}}))},"drawEdges"),Fi=T(async function(w,H){let C=St("padding")*.75,F=St("fontSize"),A=St("iconSize")/2;await Promise.all(H.nodes().map(async g=>{let s=re(g);if(s.type==="group"){let{h:r,w:i,x1:t,y1:h}=g.boundingBox();w.append("rect").attr("x",t+A).attr("y",h+A).attr("width",i).attr("height",r).attr("class","node-bkg");let n=w.append("g"),v=t,o=h;if(s.icon){let e=n.append("g");e.html(`<g>${await fe(s.icon,{height:C,width:C,fallbackPrefix:oe.prefix})}</g>`),e.attr("transform","translate("+(v+A+1)+", "+(o+A+1)+")"),v+=C,o+=F/2-1-2}if(s.label){let e=n.append("g");await ve(e,s.label,{useHtmlLabels:!1,width:i,classes:"architecture-service-label"},le()),e.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),e.attr("transform","translate("+(v+A+4)+", "+(o+A+2)+")")}}}))},"drawGroups"),Gi=T(async function(w,H,C){for(let F of C){let A=H.append("g"),g=St("iconSize");if(F.title){let t=A.append("g");await ve(t,F.title,{useHtmlLabels:!1,width:g*1.5,classes:"architecture-service-label"},le()),t.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),t.attr("transform","translate("+g/2+", "+g+")")}let s=A.append("g");if(F.icon)s.html(`<g>${await fe(F.icon,{height:g,width:g,fallbackPrefix:oe.prefix})}</g>`);else if(F.iconText){s.html(`<g>${await fe("blank",{height:g,width:g,fallbackPrefix:oe.prefix})}</g>`);let t=s.append("g").append("foreignObject").attr("width",g).attr("height",g).append("div").attr("class","node-icon-text").attr("style",`height: ${g}px;`).append("div").html(F.iconText),h=parseInt(window.getComputedStyle(t.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;t.attr("style",`-webkit-line-clamp: ${Math.floor((g-2)/h)};`)}else s.append("path").attr("class","node-bkg").attr("id","node-"+F.id).attr("d",`M0 ${g} v${-g} q0,-5 5,-5 h${g} q5,0 5,5 v${g} H0 Z`);A.attr("class","architecture-service");let{width:r,height:i}=A._groups[0][0].getBBox();F.width=r,F.height=i,w.setElementForId(F.id,A)}return 0},"drawServices"),Si=T(function(w,H,C){C.forEach(F=>{let A=H.append("g"),g=St("iconSize");A.append("g").append("rect").attr("id","node-"+F.id).attr("fill-opacity","0").attr("width",g).attr("height",g),A.attr("class","architecture-junction");let{width:s,height:r}=A._groups[0][0].getBBox();A.width=s,A.height=r,w.setElementForId(F.id,A)})},"drawJunctions");Ze([{name:oe.prefix,icons:oe}]);xe.use(bi.default);function Fe(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"service",id:C.id,icon:C.icon,label:C.title,parent:C.in,width:St("iconSize"),height:St("iconSize")},classes:"node-service"})})}T(Fe,"addServices");function Ge(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"junction",id:C.id,parent:C.in,width:St("iconSize"),height:St("iconSize")},classes:"node-junction"})})}T(Ge,"addJunctions");function Se(w,H){H.nodes().map(C=>{let F=re(C);F.type!=="group"&&(F.x=C.position().x,F.y=C.position().y,w.getElementById(F.id).attr("transform","translate("+(F.x||0)+","+(F.y||0)+")"))})}T(Se,"positionNodes");function Pe(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"group",id:C.id,icon:C.icon,label:C.title,parent:C.in},classes:"node-group"})})}T(Pe,"addGroups");function ke(w,H){w.forEach(C=>{let{lhsId:F,rhsId:A,lhsInto:g,lhsGroup:s,rhsInto:r,lhsDir:i,rhsDir:t,rhsGroup:h,title:n}=C,v=De(C.lhsDir,C.rhsDir)?"segments":"straight",o={id:`${F}-${A}`,label:n,source:F,sourceDir:i,sourceArrow:g,sourceGroup:s,sourceEndpoint:i==="L"?"0 50%":i==="R"?"100% 50%":i==="T"?"50% 0":"50% 100%",target:A,targetDir:t,targetArrow:r,targetGroup:h,targetEndpoint:t==="L"?"0 50%":t==="R"?"100% 50%":t==="T"?"50% 0":"50% 100%"};H.add({group:"edges",data:o,classes:v})})}T(ke,"addEdges");function Ue(w){let H=w.map(A=>{let g={},s={};return Object.entries(A).forEach(([r,[i,t]])=>{g[t]||(g[t]=[]),s[i]||(s[i]=[]),g[t].push(r),s[i].push(r)}),{horiz:Object.values(g).filter(r=>r.length>1),vert:Object.values(s).filter(r=>r.length>1)}}),[C,F]=H.reduce(([A,g],{horiz:s,vert:r})=>[[...A,...s],[...g,...r]],[[],[]]);return{horizontal:C,vertical:F}}T(Ue,"getAlignments");function Xe(w){let H=[],C=T(A=>`${A[0]},${A[1]}`,"posToStr"),F=T(A=>A.split(",").map(g=>parseInt(g)),"strToPos");return w.forEach(A=>{let g=Object.fromEntries(Object.entries(A).map(([t,h])=>[C(h),t])),s=[C([0,0])],r={},i={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;s.length>0;){let t=s.shift();if(t){r[t]=1;let h=g[t];if(h){let n=F(t);Object.entries(i).forEach(([v,o])=>{let e=C([n[0]+o[0],n[1]+o[1]]),d=g[e];d&&!r[e]&&(s.push(e),H.push({[Ie[v]]:d,[Ie[si(v)]]:h,gap:1.5*St("iconSize")}))})}}}}),H}T(Xe,"getRelativeConstraints");function Ye(w,H,C,F,{spatialMaps:A}){return new Promise(g=>{let s=oi("body").append("div").attr("id","cy").attr("style","display:none"),r=xe({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${St("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${St("padding")}px`}}]});s.remove(),Pe(C,r),Fe(w,r),Ge(H,r),ke(F,r);let i=Ue(A),t=Xe(A),h=r.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(n){let[v,o]=n.connectedNodes(),{parent:e}=re(v),{parent:d}=re(o);return e===d?1.5*St("iconSize"):.5*St("iconSize")},edgeElasticity(n){let[v,o]=n.connectedNodes(),{parent:e}=re(v),{parent:d}=re(o);return e===d?.45:.001},alignmentConstraint:i,relativePlacementConstraint:t});h.one("layoutstop",()=>{var v;function n(o,e,d,f){let l,N,{x:c,y:E}=o,{x:_,y:L}=e;N=(f-E+(c-d)*(E-L)/(c-_))/Math.sqrt(1+Math.pow((E-L)/(c-_),2)),l=Math.sqrt(Math.pow(f-E,2)+Math.pow(d-c,2)-Math.pow(N,2));let X=Math.sqrt(Math.pow(_-c,2)+Math.pow(L-E,2));l=l/X;let z=(_-c)*(f-E)-(L-E)*(d-c);switch(!0){case z>=0:z=1;break;case z<0:z=-1;break}let V=(_-c)*(d-c)+(L-E)*(f-E);switch(!0){case V>=0:V=1;break;case V<0:V=-1;break}return N=Math.abs(N)*z,l=l*V,{distances:N,weights:l}}T(n,"getSegmentWeights"),r.startBatch();for(let o of Object.values(r.edges()))if((v=o.data)!=null&&v.call(o)){let{x:e,y:d}=o.source().position(),{x:f,y:l}=o.target().position();if(e!==f&&d!==l){let N=o.sourceEndpoint(),c=o.targetEndpoint(),{sourceDir:E}=be(o),[_,L]=Zt(E)?[N.x,c.y]:[c.x,N.y],{weights:X,distances:z}=n(N,c,_,L);o.style("segment-distances",z),o.style("segment-weights",X)}}r.endBatch(),h.run()}),h.run(),r.ready(n=>{Me.info("Ready",n),g(r)})})}T(Ye,"layoutArchitecture");var Pi=T(async(w,H,C,F)=>{let A=F.db,g=A.getServices(),s=A.getJunctions(),r=A.getGroups(),i=A.getEdges(),t=A.getDataStructures(),h=Je(H),n=h.append("g");n.attr("class","architecture-edges");let v=h.append("g");v.attr("class","architecture-services");let o=h.append("g");o.attr("class","architecture-groups"),await Gi(A,v,g),Si(A,v,s);let e=await Ye(g,s,r,i,t);await Ri(n,e),await Fi(o,e),Se(A,e),Ke(void 0,h,St("padding"),St("useMaxWidth"))},"draw"),ki={draw:Pi},Wi={parser:xi,db:he,renderer:ki,styles:Di};export{Wi as diagram};
