import{m as u}from"./mermaid.esm.min-CX2QOtl_.js";function Ve(e){"@babel/helpers - typeof";return Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(e)}u(Ve,"_typeof");function va(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}u(va,"_classCallCheck");function Ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u(Ga,"_defineProperties");function ya(e,t,n){return t&&Ga(e.prototype,t),n&&Ga(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}u(ya,"_createClass");function wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}u(wi,"_defineProperty$1");function mt(e,t){return hs(e)||ps(e,t)||Ei(e,t)||fs()}u(mt,"_slicedToArray");function hs(e){if(Array.isArray(e))return e}u(hs,"_arrayWithHoles");function ps(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,i,c;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(l){o=!0,c=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw c}}return r}}u(ps,"_iterableToArrayLimit");function Ei(e,t){if(e){if(typeof e=="string")return Ka(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ka(e,t)}}u(Ei,"_unsupportedIterableToArray");function Ka(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}u(Ka,"_arrayLikeToArray");function fs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}u(fs,"_nonIterableRest");function ki(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ei(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=u(function(){},"F");return{s:a,n:u(function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},"n"),e:u(function(l){throw l},"e"),f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,i=!1,c;return{s:u(function(){n=n.call(e)},"s"),n:u(function(){var l=n.next();return o=l.done,l},"n"),e:u(function(l){i=!0,c=l},"e"),f:u(function(){try{!o&&n.return!=null&&n.return()}finally{if(i)throw c}},"f")}}u(ki,"_createForOfIteratorHelper");var Ye=typeof window>"u"?null:window,lo=Ye?Ye.navigator:null;Ye&&Ye.document;var Qu=Ve(""),gs=Ve({}),Ju=Ve(function(){}),ec=typeof HTMLElement>"u"?"undefined":Ve(HTMLElement),xr=u(function(e){return e&&e.instanceString&&ze(e.instanceString)?e.instanceString():null},"instanceStr"),pe=u(function(e){return e!=null&&Ve(e)==Qu},"string"),ze=u(function(e){return e!=null&&Ve(e)===Ju},"fn"),Me=u(function(e){return!gt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},"array"),Ce=u(function(e){return e!=null&&Ve(e)===gs&&!Me(e)&&e.constructor===Object},"plainObject"),tc=u(function(e){return e!=null&&Ve(e)===gs},"object"),re=u(function(e){return e!=null&&Ve(e)===Ve(1)&&!isNaN(e)},"number"),nc=u(function(e){return re(e)&&Math.floor(e)===e},"integer"),ia=u(function(e){if(ec!=="undefined")return e!=null&&e instanceof HTMLElement},"htmlElement"),gt=u(function(e){return wr(e)||vs(e)},"elementOrCollection"),wr=u(function(e){return xr(e)==="collection"&&e._private.single},"element"),vs=u(function(e){return xr(e)==="collection"&&!e._private.single},"collection"),Ci=u(function(e){return xr(e)==="core"},"core"),ys=u(function(e){return xr(e)==="stylesheet"},"stylesheet"),rc=u(function(e){return xr(e)==="event"},"event"),$t=u(function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},"emptyString"),ac=u(function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},"domElement"),ic=u(function(e){return Ce(e)&&re(e.x1)&&re(e.x2)&&re(e.y1)&&re(e.y2)},"boundingBox"),oc=u(function(e){return tc(e)&&ze(e.then)},"promise"),sc=u(function(){return lo&&lo.userAgent.match(/msie|trident|edge/i)},"ms"),ur=u(function(e,t){t||(t=u(function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var r=[],a=0;a<arguments.length;a++)r.push(arguments[a]);return r.join("$")},"keyFn"));var n=u(function r(){var a=this,o=arguments,i,c=t.apply(a,o),l=r.cache;return(i=l[c])||(i=l[c]=e.apply(a,o)),i},"memoizedFn");return n.cache={},n},"memoize"),Si=ur(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),ma=ur(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),ms=ur(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),uo=u(function(e){return $t(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},"capitalize"),He="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",lc="rgb[a]?\\(("+He+"[%]?)\\s*,\\s*("+He+"[%]?)\\s*,\\s*("+He+"[%]?)(?:\\s*,\\s*("+He+"))?\\)",uc="rgb[a]?\\((?:"+He+"[%]?)\\s*,\\s*(?:"+He+"[%]?)\\s*,\\s*(?:"+He+"[%]?)(?:\\s*,\\s*(?:"+He+"))?\\)",cc="hsl[a]?\\(("+He+")\\s*,\\s*("+He+"[%])\\s*,\\s*("+He+"[%])(?:\\s*,\\s*("+He+"))?\\)",dc="hsl[a]?\\((?:"+He+")\\s*,\\s*(?:"+He+"[%])\\s*,\\s*(?:"+He+"[%])(?:\\s*,\\s*(?:"+He+"))?\\)",hc="\\#[0-9a-fA-F]{3}",pc="\\#[0-9a-fA-F]{6}",bs=u(function(e,t){return e<t?-1:e>t?1:0},"ascending"),fc=u(function(e,t){return-1*bs(e,t)},"descending"),ve=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(r!=null)for(var a=Object.keys(r),o=0;o<a.length;o++){var i=a[o];e[i]=r[i]}}return e},gc=u(function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,r,a,o=16;return t?(n=parseInt(e[1]+e[1],o),r=parseInt(e[2]+e[2],o),a=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),r=parseInt(e[3]+e[4],o),a=parseInt(e[5]+e[6],o)),[n,r,a]}},"hex2tuple"),vc=u(function(e){var t,n,r,a,o,i,c,l;function s(f,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?f+(g-f)*6*y:y<1/2?g:y<2/3?f+(g-f)*(2/3-y)*6:f}u(s,"hue2rgb");var d=new RegExp("^"+cc+"$").exec(e);if(d){if(n=parseInt(d[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,r=parseFloat(d[2]),r<0||r>100||(r=r/100,a=parseFloat(d[3]),a<0||a>100)||(a=a/100,o=d[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(r===0)i=c=l=Math.round(a*255);else{var h=a<.5?a*(1+r):a+r-a*r,p=2*a-h;i=Math.round(255*s(p,h,n+1/3)),c=Math.round(255*s(p,h,n)),l=Math.round(255*s(p,h,n-1/3))}t=[i,c,l,o]}return t},"hsl2tuple"),yc=u(function(e){var t,n=new RegExp("^"+lc+"$").exec(e);if(n){t=[];for(var r=[],a=1;a<=3;a++){var o=n[a];if(o[o.length-1]==="%"&&(r[a]=!0),o=parseFloat(o),r[a]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var i=r[1]||r[2]||r[3],c=r[1]&&r[2]&&r[3];if(i&&!c)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},"rgb2tuple"),mc=u(function(e){return xc[e.toLowerCase()]},"colorname2tuple"),bc=u(function(e){return(Me(e)?e:null)||mc(e)||gc(e)||yc(e)||vc(e)},"color2tuple"),xc={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},xs=u(function(e){for(var t=e.map,n=e.keys,r=n.length,a=0;a<r;a++){var o=n[a];if(Ce(o))throw Error("Tried to set map with object key");a<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},"setMap"),ws=u(function(e){for(var t=e.map,n=e.keys,r=n.length,a=0;a<r;a++){var o=n[a];if(Ce(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},"getMap");function Es(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}u(Es,"isObject");var fn=Es,tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ks(e,t){return t={exports:{}},e(t,t.exports),t.exports}u(ks,"createCommonjsModule");var wc=typeof tr=="object"&&tr&&tr.Object===Object&&tr,Ec=wc,kc=typeof self=="object"&&self&&self.Object===Object&&self,Cc=Ec||kc||Function("return this")(),ba=Cc,Sc=u(function(){return ba.Date.now()},"now"),Ra=Sc,Pc=/\s/;function Cs(e){for(var t=e.length;t--&&Pc.test(e.charAt(t)););return t}u(Cs,"trimmedEndIndex");var Tc=Cs,_c=/^\s+/;function Ss(e){return e&&e.slice(0,Tc(e)+1).replace(_c,"")}u(Ss,"baseTrim");var Dc=Ss,Bc=ba.Symbol,Fn=Bc,Ps=Object.prototype,Ic=Ps.hasOwnProperty,Mc=Ps.toString,Qn=Fn?Fn.toStringTag:void 0;function Ts(e){var t=Ic.call(e,Qn),n=e[Qn];try{e[Qn]=void 0;var r=!0}catch{}var a=Mc.call(e);return r&&(t?e[Qn]=n:delete e[Qn]),a}u(Ts,"getRawTag");var Ac=Ts,Nc=Object.prototype,Oc=Nc.toString;function _s(e){return Oc.call(e)}u(_s,"objectToString");var Lc=_s,zc="[object Null]",Rc="[object Undefined]",co=Fn?Fn.toStringTag:void 0;function Ds(e){return e==null?e===void 0?Rc:zc:co&&co in Object(e)?Ac(e):Lc(e)}u(Ds,"baseGetTag");var Bs=Ds;function Is(e){return e!=null&&typeof e=="object"}u(Is,"isObjectLike");var Fc=Is,Vc="[object Symbol]";function Ms(e){return typeof e=="symbol"||Fc(e)&&Bs(e)==Vc}u(Ms,"isSymbol");var Er=Ms,ho=NaN,jc=/^[-+]0x[0-9a-f]+$/i,qc=/^0b[01]+$/i,Xc=/^0o[0-7]+$/i,Yc=parseInt;function As(e){if(typeof e=="number")return e;if(Er(e))return ho;if(fn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=fn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Dc(e);var n=qc.test(e);return n||Xc.test(e)?Yc(e.slice(2),n?2:8):jc.test(e)?ho:+e}u(As,"toNumber");var po=As,Hc="Expected a function",Wc=Math.max,Uc=Math.min;function Ns(e,t,n){var r,a,o,i,c,l,s=0,d=!1,h=!1,p=!0;if(typeof e!="function")throw new TypeError(Hc);t=po(t)||0,fn(n)&&(d=!!n.leading,h="maxWait"in n,o=h?Wc(po(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p);function f(C){var w=r,S=a;return r=a=void 0,s=C,i=e.apply(S,w),i}u(f,"invokeFunc");function g(C){return s=C,c=setTimeout(v,t),d?f(C):i}u(g,"leadingEdge");function y(C){var w=C-l,S=C-s,I=t-w;return h?Uc(I,o-S):I}u(y,"remainingWait");function b(C){var w=C-l,S=C-s;return l===void 0||w>=t||w<0||h&&S>=o}u(b,"shouldInvoke");function v(){var C=Ra();if(b(C))return m(C);c=setTimeout(v,y(C))}u(v,"timerExpired");function m(C){return c=void 0,p&&r?f(C):(r=a=void 0,i)}u(m,"trailingEdge");function x(){c!==void 0&&clearTimeout(c),s=0,r=l=a=c=void 0}u(x,"cancel");function E(){return c===void 0?i:m(Ra())}u(E,"flush");function P(){var C=Ra(),w=b(C);if(r=arguments,a=this,l=C,w){if(c===void 0)return g(l);if(h)return clearTimeout(c),c=setTimeout(v,t),f(l)}return c===void 0&&(c=setTimeout(v,t)),i}return u(P,"debounced"),P.cancel=x,P.flush=E,P}u(Ns,"debounce");var xa=Ns,Fa=Ye?Ye.performance:null,Os=Fa&&Fa.now?function(){return Fa.now()}:function(){return Date.now()},Gc=function(){if(Ye){if(Ye.requestAnimationFrame)return function(e){Ye.requestAnimationFrame(e)};if(Ye.mozRequestAnimationFrame)return function(e){Ye.mozRequestAnimationFrame(e)};if(Ye.webkitRequestAnimationFrame)return function(e){Ye.webkitRequestAnimationFrame(e)};if(Ye.msRequestAnimationFrame)return function(e){Ye.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(Os())},1e3/60)}}(),oa=u(function(e){return Gc(e)},"requestAnimationFrame"),Vt=Os,Mn=9261,Ls=65599,nr=5381,zs=u(function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mn,n=t,r;r=e.next(),!r.done;)n=n*Ls+r.value|0;return n},"hashIterableInts"),cr=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mn;return t*Ls+e|0},"hashInt"),dr=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nr;return(t<<5)+t+e|0},"hashIntAlt"),Kc=u(function(e,t){return e*2097152+t},"combineHashes"),Ht=u(function(e){return e[0]*2097152+e[1]},"combineHashesArray"),Lr=u(function(e,t){return[cr(e[0],t[0]),dr(e[1],t[1])]},"hashArrays"),Zc=u(function(e,t){var n={value:0,done:!1},r=0,a=e.length,o={next:u(function(){return r<a?n.value=e[r++]:n.done=!0,n},"next")};return zs(o,t)},"hashIntsArray"),gn=u(function(e,t){var n={value:0,done:!1},r=0,a=e.length,o={next:u(function(){return r<a?n.value=e.charCodeAt(r++):n.done=!0,n},"next")};return zs(o,t)},"hashString"),Rs=u(function(){return $c(arguments)},"hashStrings"),$c=u(function(e){for(var t,n=0;n<e.length;n++){var r=e[n];n===0?t=gn(r):t=gn(r,t)}return t},"hashStringsArray"),fo=!0,Qc=console.warn!=null,Jc=console.trace!=null,Pi=Number.MAX_SAFE_INTEGER||9007199254740991,Fs=u(function(){return!0},"trueify"),sa=u(function(){return!1},"falsify"),go=u(function(){return 0},"zeroify"),Ti=u(function(){},"noop"),Re=u(function(e){throw new Error(e)},"error"),Vs=u(function(e){if(e!==void 0)fo=!!e;else return fo},"warnings"),De=u(function(e){Vs()&&(Qc?console.warn(e):(console.log(e),Jc&&console.trace()))},"warn"),ed=u(function(e){return ve({},e)},"clone"),At=u(function(e){return e==null?e:Me(e)?e.slice():Ce(e)?ed(e):e},"copy"),td=u(function(e){return e.slice()},"copyArray"),js=u(function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},"uuid"),nd={},qs=u(function(){return nd},"staticEmptyObject"),et=u(function(e){var t=Object.keys(e);return function(n){for(var r={},a=0;a<t.length;a++){var o=t[a],i=n==null?void 0:n[o];r[o]=i===void 0?e[o]:i}return r}},"defaults"),Qt=u(function(e,t,n){for(var r=e.length-1;r>=0&&!(e[r]===t&&(e.splice(r,1),n));r--);},"removeFromArray"),_i=u(function(e){e.splice(0,e.length)},"clearArray"),rd=u(function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},"push"),Tt=u(function(e,t,n){return n&&(t=ms(n,t)),e[t]},"getPrefixedProperty"),Ut=u(function(e,t,n,r){n&&(t=ms(n,t)),e[t]=r},"setPrefixedProperty"),ad=function(){function e(){va(this,e),this._obj={}}return u(e,"ObjectMap"),ya(e,[{key:"set",value:u(function(t,n){return this._obj[t]=n,this},"set")},{key:"delete",value:u(function(t){return this._obj[t]=void 0,this},"_delete")},{key:"clear",value:u(function(){this._obj={}},"clear")},{key:"has",value:u(function(t){return this._obj[t]!==void 0},"has")},{key:"get",value:u(function(t){return this._obj[t]},"get")}]),e}(),Nt=typeof Map<"u"?Map:ad,id="undefined",od=function(){function e(t){if(va(this,e),this._obj=Object.create(null),this.size=0,t!=null){var n;t.instanceString!=null&&t.instanceString()===this.instanceString()?n=t.toArray():n=t;for(var r=0;r<n.length;r++)this.add(n[r])}}return u(e,"ObjectSet"),ya(e,[{key:"instanceString",value:u(function(){return"set"},"instanceString")},{key:"add",value:u(function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)},"add")},{key:"delete",value:u(function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)},"_delete")},{key:"clear",value:u(function(){this._obj=Object.create(null)},"clear")},{key:"has",value:u(function(t){return this._obj[t]===1},"has")},{key:"toArray",value:u(function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})},"toArray")},{key:"forEach",value:u(function(t,n){return this.toArray().forEach(t,n)},"forEach")}]),e}(),Yn=(typeof Set>"u"?"undefined":Ve(Set))!==id?Set:od,wa=u(function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Ci(e)){Re("An element must have a core reference and parameters set");return}var r=t.group;if(r==null&&(t.data&&t.data.source!=null&&t.data.target!=null?r="edges":r="nodes"),r!=="nodes"&&r!=="edges"){Re("An element must be of type `nodes` or `edges`; you specified `"+r+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?r==="edges":!!t.pannable,active:!1,classes:new Yn,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var o=t.renderedPosition,i=e.pan(),c=e.zoom();a.position={x:(o.x-i.x)/c,y:(o.y-i.y)/c}}var l=[];Me(t.classes)?l=t.classes:pe(t.classes)&&(l=t.classes.split(/\s+/));for(var s=0,d=l.length;s<d;s++){var h=l[s];!h||h===""||a.classes.add(h)}this.createEmitter();var p=t.style||t.css;p&&(De("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p)),(n===void 0||n)&&this.restore()},"Element"),vo=u(function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},u(function(t,n,r){var a;Ce(t)&&!gt(t)&&(a=t,t=a.roots||a.root,n=a.visit,r=a.directed),r=arguments.length===2&&!ze(n)?n:r,n=ze(n)?n:function(){};for(var o=this._private.cy,i=t=pe(t)?this.filter(t):t,c=[],l=[],s={},d={},h={},p=0,f,g=this.byGroup(),y=g.nodes,b=g.edges,v=0;v<i.length;v++){var m=i[v],x=m.id();m.isNode()&&(c.unshift(m),e.bfs&&(h[x]=!0,l.push(m)),d[x]=0)}for(var E=u(function(){var D=e.bfs?c.shift():c.pop(),B=D.id();if(e.dfs){if(h[B])return"continue";h[B]=!0,l.push(D)}var T=d[B],M=s[B],_=M!=null?M.source():null,O=M!=null?M.target():null,L=M==null?void 0:D.same(_)?O[0]:_[0],z=void 0;if(z=n(D,M,L,p++,T),z===!0)return f=D,"break";if(z===!1)return"break";for(var A=D.connectedEdges().filter(function(W){return(!r||W.source().same(D))&&b.has(W)}),R=0;R<A.length;R++){var Y=A[R],V=Y.connectedNodes().filter(function(W){return!W.same(D)&&y.has(W)}),j=V.id();V.length!==0&&!h[j]&&(V=V[0],c.push(V),e.bfs&&(h[j]=!0,l.push(V)),s[j]=Y,d[j]=d[B]+1)}},"_loop");c.length!==0;){var P=E();if(P!=="continue"&&P==="break")break}for(var C=o.collection(),w=0;w<l.length;w++){var S=l[w],I=s[S.id()];I!=null&&C.push(I),C.push(S)}return{path:o.collection(C),found:o.collection(f)}},"searchFn")},"defineSearch"),hr={breadthFirstSearch:vo({bfs:!0}),depthFirstSearch:vo({dfs:!0})};hr.bfs=hr.breadthFirstSearch;hr.dfs=hr.depthFirstSearch;var sd=ks(function(e,t){(function(){var n,r,a,o,i,c,l,s,d,h,p,f,g,y,b;a=Math.floor,h=Math.min,r=u(function(v,m){return v<m?-1:v>m?1:0},"defaultCmp"),d=u(function(v,m,x,E,P){var C;if(x==null&&(x=0),P==null&&(P=r),x<0)throw new Error("lo must be non-negative");for(E==null&&(E=v.length);x<E;)C=a((x+E)/2),P(m,v[C])<0?E=C:x=C+1;return[].splice.apply(v,[x,x-x].concat(m)),m},"insort"),c=u(function(v,m,x){return x==null&&(x=r),v.push(m),y(v,0,v.length-1,x)},"heappush"),i=u(function(v,m){var x,E;return m==null&&(m=r),x=v.pop(),v.length?(E=v[0],v[0]=x,b(v,0,m)):E=x,E},"heappop"),s=u(function(v,m,x){var E;return x==null&&(x=r),E=v[0],v[0]=m,b(v,0,x),E},"heapreplace"),l=u(function(v,m,x){var E;return x==null&&(x=r),v.length&&x(v[0],m)<0&&(E=[v[0],m],m=E[0],v[0]=E[1],b(v,0,x)),m},"heappushpop"),o=u(function(v,m){var x,E,P,C,w,S;for(m==null&&(m=r),C=(function(){S=[];for(var I=0,D=a(v.length/2);0<=D?I<D:I>D;0<=D?I++:I--)S.push(I);return S}).apply(this).reverse(),w=[],E=0,P=C.length;E<P;E++)x=C[E],w.push(b(v,x,m));return w},"heapify"),g=u(function(v,m,x){var E;if(x==null&&(x=r),E=v.indexOf(m),E!==-1)return y(v,0,E,x),b(v,E,x)},"updateItem"),p=u(function(v,m,x){var E,P,C,w,S;if(x==null&&(x=r),P=v.slice(0,m),!P.length)return P;for(o(P,x),S=v.slice(m),C=0,w=S.length;C<w;C++)E=S[C],l(P,E,x);return P.sort(x).reverse()},"nlargest"),f=u(function(v,m,x){var E,P,C,w,S,I,D,B,T;if(x==null&&(x=r),m*10<=v.length){if(C=v.slice(0,m).sort(x),!C.length)return C;for(P=C[C.length-1],D=v.slice(m),w=0,I=D.length;w<I;w++)E=D[w],x(E,P)<0&&(d(C,E,0,null,x),C.pop(),P=C[C.length-1]);return C}for(o(v,x),T=[],S=0,B=h(m,v.length);0<=B?S<B:S>B;0<=B?++S:--S)T.push(i(v,x));return T},"nsmallest"),y=u(function(v,m,x,E){var P,C,w;for(E==null&&(E=r),P=v[x];x>m;){if(w=x-1>>1,C=v[w],E(P,C)<0){v[x]=C,x=w;continue}break}return v[x]=P},"_siftdown"),b=u(function(v,m,x){var E,P,C,w,S;for(x==null&&(x=r),P=v.length,S=m,C=v[m],E=2*m+1;E<P;)w=E+1,w<P&&!(x(v[E],v[w])<0)&&(E=w),v[m]=v[E],m=E,E=2*m+1;return v[m]=C,y(v,S,m,x)},"_siftup"),n=function(){v.push=c,v.pop=i,v.replace=s,v.pushpop=l,v.heapify=o,v.updateItem=g,v.nlargest=p,v.nsmallest=f;function v(m){this.cmp=m??r,this.nodes=[]}return u(v,"Heap"),v.prototype.push=function(m){return c(this.nodes,m,this.cmp)},v.prototype.pop=function(){return i(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},v.prototype.replace=function(m){return s(this.nodes,m,this.cmp)},v.prototype.pushpop=function(m){return l(this.nodes,m,this.cmp)},v.prototype.heapify=function(){return o(this.nodes,this.cmp)},v.prototype.updateItem=function(m){return g(this.nodes,m,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var m;return m=new v,m.nodes=this.nodes.slice(0),m},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,m){return e.exports=m()}(this,function(){return n})}).call(tr)}),kr=sd,ld=et({root:null,weight:u(function(e){return 1},"weight"),directed:!1}),ud={dijkstra:u(function(e){if(!Ce(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=ld(e),r=n.root,a=n.weight,o=n.directed,i=this,c=a,l=pe(r)?this.filter(r)[0]:r[0],s={},d={},h={},p=this.byGroup(),f=p.nodes,g=p.edges;g.unmergeBy(function(_){return _.isLoop()});for(var y=u(function(_){return s[_.id()]},"getDist"),b=u(function(_,O){s[_.id()]=O,v.updateItem(_)},"setDist"),v=new kr(function(_,O){return y(_)-y(O)}),m=0;m<f.length;m++){var x=f[m];s[x.id()]=x.same(l)?0:1/0,v.push(x)}for(var E=u(function(_,O){for(var L=(o?_.edgesTo(O):_.edgesWith(O)).intersect(g),z=1/0,A,R=0;R<L.length;R++){var Y=L[R],V=c(Y);(V<z||!A)&&(z=V,A=Y)}return{edge:A,dist:z}},"distBetween");v.size()>0;){var P=v.pop(),C=y(P),w=P.id();if(h[w]=C,C!==1/0)for(var S=P.neighborhood().intersect(f),I=0;I<S.length;I++){var D=S[I],B=D.id(),T=E(P,D),M=C+T.dist;M<y(D)&&(b(D,M),d[B]={node:P,edge:T.edge})}}return{distanceTo:u(function(_){var O=pe(_)?f.filter(_)[0]:_[0];return h[O.id()]},"distanceTo"),pathTo:u(function(_){var O=pe(_)?f.filter(_)[0]:_[0],L=[],z=O,A=z.id();if(O.length>0)for(L.unshift(O);d[A];){var R=d[A];L.unshift(R.edge),L.unshift(R.node),z=R.node,A=z.id()}return i.spawn(L)},"pathTo")}},"dijkstra")},cd={kruskal:u(function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,a=n.length,o=new Array(a),i=n,c=u(function(m){for(var x=0;x<o.length;x++){var E=o[x];if(E.has(m))return x}},"findSetIndex"),l=0;l<a;l++)o[l]=this.spawn(n[l]);for(var s=r.sort(function(m,x){return e(m)-e(x)}),d=0;d<s.length;d++){var h=s[d],p=h.source()[0],f=h.target()[0],g=c(p),y=c(f),b=o[g],v=o[y];g!==y&&(i.merge(h),b.merge(v),o.splice(y,1))}return i},"kruskal")},dd=et({root:null,goal:null,weight:u(function(e){return 1},"weight"),heuristic:u(function(e){return 0},"heuristic"),directed:!1}),hd={aStar:u(function(e){var t=this.cy(),n=dd(e),r=n.root,a=n.goal,o=n.heuristic,i=n.directed,c=n.weight;r=t.collection(r)[0],a=t.collection(a)[0];var l=r.id(),s=a.id(),d={},h={},p={},f=new kr(function(R,Y){return h[R.id()]-h[Y.id()]}),g=new Yn,y={},b={},v=u(function(R,Y){f.push(R),g.add(Y)},"addToOpenSet"),m,x,E=u(function(){m=f.pop(),x=m.id(),g.delete(x)},"popFromOpenSet"),P=u(function(R){return g.has(R)},"isInOpenSet");v(r,l),d[l]=0,h[l]=o(r);for(var C=0;f.size()>0;){if(E(),C++,x===s){for(var w=[],S=a,I=s,D=b[I];w.unshift(S),D!=null&&w.unshift(D),S=y[I],S!=null;)I=S.id(),D=b[I];return{found:!0,distance:d[x],path:this.spawn(w),steps:C}}p[x]=!0;for(var B=m._private.edges,T=0;T<B.length;T++){var M=B[T];if(this.hasElementWithId(M.id())&&!(i&&M.data("source")!==x)){var _=M.source(),O=M.target(),L=_.id()!==x?_:O,z=L.id();if(this.hasElementWithId(z)&&!p[z]){var A=d[x]+c(M);if(!P(z)){d[z]=A,h[z]=A+o(L),v(L,z),y[z]=m,b[z]=M;continue}A<d[z]&&(d[z]=A,h[z]=A+o(L),y[z]=m,b[z]=M)}}}}return{found:!1,distance:void 0,path:void 0,steps:C}},"aStar")},pd=et({weight:u(function(e){return 1},"weight"),directed:!1}),fd={floydWarshall:u(function(e){for(var t=this.cy(),n=pd(e),r=n.weight,a=n.directed,o=r,i=this.byGroup(),c=i.nodes,l=i.edges,s=c.length,d=s*s,h=u(function(V){return c.indexOf(V)},"indexOf"),p=u(function(V){return c[V]},"atIndex"),f=new Array(d),g=0;g<d;g++){var y=g%s,b=(g-y)/s;b===y?f[g]=0:f[g]=1/0}for(var v=new Array(d),m=new Array(d),x=0;x<l.length;x++){var E=l[x],P=E.source()[0],C=E.target()[0];if(P!==C){var w=h(P),S=h(C),I=w*s+S,D=o(E);if(f[I]>D&&(f[I]=D,v[I]=S,m[I]=E),!a){var B=S*s+w;!a&&f[B]>D&&(f[B]=D,v[B]=w,m[B]=E)}}}for(var T=0;T<s;T++)for(var M=0;M<s;M++)for(var _=M*s+T,O=0;O<s;O++){var L=M*s+O,z=T*s+O;f[_]+f[z]<f[L]&&(f[L]=f[_]+f[z],v[L]=v[_])}var A=u(function(V){return(pe(V)?t.filter(V):V)[0]},"getArgEle"),R=u(function(V){return h(A(V))},"indexOfArgEle"),Y={distance:u(function(V,j){var W=R(V),J=R(j);return f[W*s+J]},"distance"),path:u(function(V,j){var W=R(V),J=R(j),ae=p(W);if(W===J)return ae.collection();if(v[W*s+J]==null)return t.collection();var Z=t.collection(),$=W,N;for(Z.merge(ae);W!==J;)$=W,W=v[W*s+J],N=m[$*s+W],Z.merge(N),Z.merge(p(W));return Z},"path")};return Y},"floydWarshall")},gd=et({weight:u(function(e){return 1},"weight"),directed:!1,root:null}),vd={bellmanFord:u(function(e){var t=this,n=gd(e),r=n.weight,a=n.directed,o=n.root,i=r,c=this,l=this.cy(),s=this.byGroup(),d=s.edges,h=s.nodes,p=h.length,f=new Nt,g=!1,y=[];o=l.collection(o)[0],d.unmergeBy(function(ie){return ie.isLoop()});for(var b=d.length,v=u(function(ie){var he=f.get(ie.id());return he||(he={},f.set(ie.id(),he)),he},"getInfo"),m=u(function(ie){return(pe(ie)?l.$(ie):ie)[0]},"getNodeFromTo"),x=u(function(ie){return v(m(ie)).dist},"distanceTo"),E=u(function(ie){for(var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,ye=m(ie),xe=[],we=ye;;){if(we==null)return t.spawn();var Be=v(we),Ee=Be.edge,Se=Be.pred;if(xe.unshift(we[0]),we.same(he)&&xe.length>0)break;Ee!=null&&xe.unshift(Ee),we=Se}return c.spawn(xe)},"pathTo"),P=0;P<p;P++){var C=h[P],w=v(C);C.same(o)?w.dist=0:w.dist=1/0,w.pred=null,w.edge=null}for(var S=!1,I=u(function(ie,he,ye,xe,we,Be){var Ee=xe.dist+Be;Ee<we.dist&&!ye.same(xe.edge)&&(we.dist=Ee,we.pred=ie,we.edge=ye,S=!0)},"checkForEdgeReplacement"),D=1;D<p;D++){S=!1;for(var B=0;B<b;B++){var T=d[B],M=T.source(),_=T.target(),O=i(T),L=v(M),z=v(_);I(M,_,T,L,z,O),a||I(_,M,T,z,L,O)}if(!S)break}if(S)for(var A=[],R=0;R<b;R++){var Y=d[R],V=Y.source(),j=Y.target(),W=i(Y),J=v(V).dist,ae=v(j).dist;if(J+W<ae||!a&&ae+W<J)if(g||(De("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var Z=[];J+W<ae&&Z.push(V),!a&&ae+W<J&&Z.push(j);for(var $=Z.length,N=0;N<$;N++){var G=Z[N],U=[G];U.push(v(G).edge);for(var ne=v(G).pred;U.indexOf(ne)===-1;)U.push(ne),U.push(v(ne).edge),ne=v(ne).pred;U=U.slice(U.indexOf(ne));for(var de=U[0].id(),be=0,Q=2;Q<U.length;Q+=2)U[Q].id()<de&&(de=U[Q].id(),be=Q);U=U.slice(be).concat(U.slice(0,be)),U.push(U[0]);var se=U.map(function(ie){return ie.id()}).join(",");A.indexOf(se)===-1&&(y.push(c.spawn(U)),A.push(se))}}else break}return{distanceTo:x,pathTo:E,hasNegativeWeightCycle:g,negativeWeightCycles:y}},"bellmanFord")},yd=Math.sqrt(2),md=u(function(e,t,n){n.length===0&&Re("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],a=r[1],o=r[2],i=t[a],c=t[o],l=n,s=l.length-1;s>=0;s--){var d=l[s],h=d[1],p=d[2];(t[h]===i&&t[p]===c||t[h]===c&&t[p]===i)&&l.splice(s,1)}for(var f=0;f<l.length;f++){var g=l[f];g[1]===c?(l[f]=g.slice(),l[f][1]=i):g[2]===c&&(l[f]=g.slice(),l[f][2]=i)}for(var y=0;y<t.length;y++)t[y]===c&&(t[y]=i);return l},"collapse"),Va=u(function(e,t,n,r){for(;n>r;){var a=Math.floor(Math.random()*t.length);t=md(a,e,t),n--}return t},"contractUntil"),bd={kargerStein:u(function(){var e=this,t=this.byGroup(),n=t.nodes,r=t.edges;r.unmergeBy(function(z){return z.isLoop()});var a=n.length,o=r.length,i=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),c=Math.floor(a/yd);if(a<2){Re("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],s=0;s<o;s++){var d=r[s];l.push([s,n.indexOf(d.source()),n.indexOf(d.target())])}for(var h=1/0,p=[],f=new Array(a),g=new Array(a),y=new Array(a),b=u(function(z,A){for(var R=0;R<a;R++)A[R]=z[R]},"copyNodesMap"),v=0;v<=i;v++){for(var m=0;m<a;m++)g[m]=m;var x=Va(g,l.slice(),a,c),E=x.slice();b(g,y);var P=Va(g,x,c,2),C=Va(y,E,c,2);P.length<=C.length&&P.length<h?(h=P.length,p=P,b(g,f)):C.length<=P.length&&C.length<h&&(h=C.length,p=C,b(y,f))}for(var w=this.spawn(p.map(function(z){return r[z[0]]})),S=this.spawn(),I=this.spawn(),D=f[0],B=0;B<f.length;B++){var T=f[B],M=n[B];T===D?S.merge(M):I.merge(M)}var _=u(function(z){var A=e.spawn();return z.forEach(function(R){A.merge(R),R.connectedEdges().forEach(function(Y){e.contains(Y)&&!w.contains(Y)&&A.merge(Y)})}),A},"constructComponent"),O=[_(S),_(I)],L={cut:w,components:O,partition1:S,partition2:I};return L},"kargerStein")},xd=u(function(e){return{x:e.x,y:e.y}},"copyPosition"),Ea=u(function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},"modelToRenderedPosition"),Xs=u(function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},"renderedToModelPosition"),An=u(function(e){return{x:e[0],y:e[1]}},"array2point"),wd=u(function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(r=Math.min(o,r))}return r},"min"),Ed=u(function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=-1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(r=Math.max(o,r))}return r},"max"),kd=u(function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=0,a=0,o=t;o<n;o++){var i=e[o];isFinite(i)&&(r+=i,a++)}return r/a},"mean"),Cd=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;r?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var i=0,c=e.length-1;c>=0;c--){var l=e[c];o?isFinite(l)||(e[c]=-1/0,i++):e.splice(c,1)}a&&e.sort(function(h,p){return h-p});var s=e.length,d=Math.floor(s/2);return s%2!==0?e[d+1+i]:(e[d-1+i]+e[d+i])/2},"median"),Sd=u(function(e){return Math.PI*e/180},"deg2rad"),zr=u(function(e,t){return Math.atan2(t,e)-Math.PI/2},"getAngleFromDisp"),Di=Math.log2||function(e){return Math.log(e)/Math.log(2)},Ys=u(function(e){return e>0?1:e<0?-1:0},"signum"),vn=u(function(e,t){return Math.sqrt(sn(e,t))},"dist"),sn=u(function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},"sqdist"),Pd=u(function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},"inPlaceSumNormalize"),Ke=u(function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},"qbezierAt"),On=u(function(e,t,n,r){return{x:Ke(e.x,t.x,n.x,r),y:Ke(e.y,t.y,n.y,r)}},"qbezierPtAt"),Td=u(function(e,t,n,r){var a={x:t.x-e.x,y:t.y-e.y},o=vn(e,t),i={x:a.x/o,y:a.y/o};return n=n??0,r=r??n*o,{x:e.x+i.x*r,y:e.y+i.y*r}},"lineAt"),pr=u(function(e,t,n){return Math.max(e,Math.min(n,t))},"bound"),pt=u(function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},"makeBoundingBox"),_d=u(function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},"copyBoundingBox"),Dd=u(function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},"clearBoundingBox"),Bd=u(function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},"shiftBoundingBox"),Hs=u(function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},"updateBoundingBox"),Id=u(function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},"expandBoundingBoxByPoint"),Ur=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},"expandBoundingBox"),Gr=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,r,a,o;if(t.length===1)n=r=a=o=t[0];else if(t.length===2)n=a=t[0],o=r=t[1];else if(t.length===4){var i=mt(t,4);n=i[0],r=i[1],a=i[2],o=i[3]}return e.x1-=o,e.x2+=r,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},"expandBoundingBoxSides"),yo=u(function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},"assignBoundingBox"),Bi=u(function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},"boundingBoxesIntersect"),Vn=u(function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},"inBoundingBox"),Md=u(function(e,t){return Vn(e,t.x,t.y)},"pointInBoundingBox"),Ws=u(function(e,t){return Vn(e,t.x1,t.y1)&&Vn(e,t.x2,t.y2)},"boundingBoxInBoundingBox"),Us=u(function(e,t,n,r,a,o,i){var c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=c==="auto"?yn(a,o):c,s=a/2,d=o/2;l=Math.min(l,s,d);var h=l!==s,p=l!==d,f;if(h){var g=n-s+l-i,y=r-d-i,b=n+s-l+i,v=y;if(f=Gt(e,t,n,r,g,y,b,v,!1),f.length>0)return f}if(p){var m=n+s+i,x=r-d+l-i,E=m,P=r+d-l+i;if(f=Gt(e,t,n,r,m,x,E,P,!1),f.length>0)return f}if(h){var C=n-s+l-i,w=r+d+i,S=n+s-l+i,I=w;if(f=Gt(e,t,n,r,C,w,S,I,!1),f.length>0)return f}if(p){var D=n-s-i,B=r-d+l-i,T=D,M=r+d-l+i;if(f=Gt(e,t,n,r,D,B,T,M,!1),f.length>0)return f}var _;{var O=n-s+l,L=r-d+l;if(_=rr(e,t,n,r,O,L,l+i),_.length>0&&_[0]<=O&&_[1]<=L)return[_[0],_[1]]}{var z=n+s-l,A=r-d+l;if(_=rr(e,t,n,r,z,A,l+i),_.length>0&&_[0]>=z&&_[1]<=A)return[_[0],_[1]]}{var R=n+s-l,Y=r+d-l;if(_=rr(e,t,n,r,R,Y,l+i),_.length>0&&_[0]>=R&&_[1]>=Y)return[_[0],_[1]]}{var V=n-s+l,j=r+d-l;if(_=rr(e,t,n,r,V,j,l+i),_.length>0&&_[0]<=V&&_[1]>=j)return[_[0],_[1]]}return[]},"roundRectangleIntersectLine"),Ad=u(function(e,t,n,r,a,o,i){var c=i,l=Math.min(n,a),s=Math.max(n,a),d=Math.min(r,o),h=Math.max(r,o);return l-c<=e&&e<=s+c&&d-c<=t&&t<=h+c},"inLineVicinity"),Nd=u(function(e,t,n,r,a,o,i,c,l){var s={x1:Math.min(n,i,a)-l,x2:Math.max(n,i,a)+l,y1:Math.min(r,c,o)-l,y2:Math.max(r,c,o)+l};return!(e<s.x1||e>s.x2||t<s.y1||t>s.y2)},"inBezierVicinity"),Od=u(function(e,t,n,r){n-=r;var a=t*t-4*e*n;if(a<0)return[];var o=Math.sqrt(a),i=2*e,c=(-t+o)/i,l=(-t-o)/i;return[c,l]},"solveQuadratic"),Ld=u(function(e,t,n,r,a){var o=1e-5;e===0&&(e=o),t/=e,n/=e,r/=e;var i,c,l,s,d,h,p,f;if(c=(3*n-t*t)/9,l=-(27*r)+t*(9*n-2*(t*t)),l/=54,i=c*c*c+l*l,a[1]=0,p=t/3,i>0){d=l+Math.sqrt(i),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),h=l-Math.sqrt(i),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),a[0]=-p+d+h,p+=(d+h)/2,a[4]=a[2]=-p,p=Math.sqrt(3)*(-h+d)/2,a[3]=p,a[5]=-p;return}if(a[5]=a[3]=0,i===0){f=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),a[0]=-p+2*f,a[4]=a[2]=-(f+p);return}c=-c,s=c*c*c,s=Math.acos(l/Math.sqrt(s)),f=2*Math.sqrt(c),a[0]=-p+f*Math.cos(s/3),a[2]=-p+f*Math.cos((s+2*Math.PI)/3),a[4]=-p+f*Math.cos((s+4*Math.PI)/3)},"solveCubic"),zd=u(function(e,t,n,r,a,o,i,c){var l=1*n*n-4*n*a+2*n*i+4*a*a-4*a*i+i*i+r*r-4*r*o+2*r*c+4*o*o-4*o*c+c*c,s=1*9*n*a-3*n*n-3*n*i-6*a*a+3*a*i+9*r*o-3*r*r-3*r*c-6*o*o+3*o*c,d=1*3*n*n-6*n*a+n*i-n*e+2*a*a+2*a*e-i*e+3*r*r-6*r*o+r*c-r*t+2*o*o+2*o*t-c*t,h=1*n*a-n*n+n*e-a*e+r*o-r*r+r*t-o*t,p=[];Ld(l,s,d,h,p);for(var f=1e-7,g=[],y=0;y<6;y+=2)Math.abs(p[y+1])<f&&p[y]>=0&&p[y]<=1&&g.push(p[y]);g.push(1),g.push(0);for(var b=-1,v,m,x,E=0;E<g.length;E++)v=Math.pow(1-g[E],2)*n+2*(1-g[E])*g[E]*a+g[E]*g[E]*i,m=Math.pow(1-g[E],2)*r+2*(1-g[E])*g[E]*o+g[E]*g[E]*c,x=Math.pow(v-e,2)+Math.pow(m-t,2),b>=0?x<b&&(b=x):b=x;return b},"sqdistToQuadraticBezier"),Rd=u(function(e,t,n,r,a,o){var i=[e-n,t-r],c=[a-n,o-r],l=c[0]*c[0]+c[1]*c[1],s=i[0]*i[0]+i[1]*i[1],d=i[0]*c[0]+i[1]*c[1],h=d*d/l;return d<0?s:h>l?(e-a)*(e-a)+(t-o)*(t-o):s-h},"sqdistToFiniteLine"),ht=u(function(e,t,n){for(var r,a,o,i,c,l=0,s=0;s<n.length/2;s++)if(r=n[s*2],a=n[s*2+1],s+1<n.length/2?(o=n[(s+1)*2],i=n[(s+1)*2+1]):(o=n[(s+1-n.length/2)*2],i=n[(s+1-n.length/2)*2+1]),!(r==e&&o==e))if(r>=e&&e>=o||r<=e&&e<=o)c=(e-r)/(o-r)*(i-a)+a,c>t&&l++;else continue;return l%2!==0},"pointInsidePolygonPoints"),jt=u(function(e,t,n,r,a,o,i,c,l){var s=new Array(n.length),d;c[0]!=null?(d=Math.atan(c[1]/c[0]),c[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=c;for(var h=Math.cos(-d),p=Math.sin(-d),f=0;f<s.length/2;f++)s[f*2]=o/2*(n[f*2]*h-n[f*2+1]*p),s[f*2+1]=i/2*(n[f*2+1]*h+n[f*2]*p),s[f*2]+=r,s[f*2+1]+=a;var g;if(l>0){var y=ua(s,-l);g=la(y)}else g=s;return ht(e,t,g)},"pointInsidePolygon"),Fd=u(function(e,t,n,r,a,o,i,c){for(var l=new Array(n.length*2),s=0;s<c.length;s++){var d=c[s];l[s*4+0]=d.startX,l[s*4+1]=d.startY,l[s*4+2]=d.stopX,l[s*4+3]=d.stopY;var h=Math.pow(d.cx-e,2)+Math.pow(d.cy-t,2);if(h<=Math.pow(d.radius,2))return!0}return ht(e,t,l)},"pointInsideRoundPolygon"),la=u(function(e){for(var t=new Array(e.length/2),n,r,a,o,i,c,l,s,d=0;d<e.length/4;d++){n=e[d*4],r=e[d*4+1],a=e[d*4+2],o=e[d*4+3],d<e.length/4-1?(i=e[(d+1)*4],c=e[(d+1)*4+1],l=e[(d+1)*4+2],s=e[(d+1)*4+3]):(i=e[0],c=e[1],l=e[2],s=e[3]);var h=Gt(n,r,a,o,i,c,l,s,!0);t[d*2]=h[0],t[d*2+1]=h[1]}return t},"joinLines"),ua=u(function(e,t){for(var n=new Array(e.length*2),r,a,o,i,c=0;c<e.length/2;c++){r=e[c*2],a=e[c*2+1],c<e.length/2-1?(o=e[(c+1)*2],i=e[(c+1)*2+1]):(o=e[0],i=e[1]);var l=i-a,s=-(o-r),d=Math.sqrt(l*l+s*s),h=l/d,p=s/d;n[c*4]=r+h*t,n[c*4+1]=a+p*t,n[c*4+2]=o+h*t,n[c*4+3]=i+p*t}return n},"expandPolygon"),Vd=u(function(e,t,n,r,a,o){var i=n-e,c=r-t;i/=a,c/=o;var l=Math.sqrt(i*i+c*c),s=l-1;if(s<0)return[];var d=s/l;return[(n-e)*d+e,(r-t)*d+t]},"intersectLineEllipse"),pn=u(function(e,t,n,r,a,o,i){return e-=a,t-=o,e/=n/2+i,t/=r/2+i,e*e+t*t<=1},"checkInEllipse"),rr=u(function(e,t,n,r,a,o,i){var c=[n-e,r-t],l=[e-a,t-o],s=c[0]*c[0]+c[1]*c[1],d=2*(l[0]*c[0]+l[1]*c[1]),h=l[0]*l[0]+l[1]*l[1]-i*i,p=d*d-4*s*h;if(p<0)return[];var f=(-d+Math.sqrt(p))/(2*s),g=(-d-Math.sqrt(p))/(2*s),y=Math.min(f,g),b=Math.max(f,g),v=[];if(y>=0&&y<=1&&v.push(y),b>=0&&b<=1&&v.push(b),v.length===0)return[];var m=v[0]*c[0]+e,x=v[0]*c[1]+t;if(v.length>1){if(v[0]==v[1])return[m,x];var E=v[1]*c[0]+e,P=v[1]*c[1]+t;return[m,x,E,P]}else return[m,x]},"intersectLineCircle"),ja=u(function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},"midOfThree"),Gt=u(function(e,t,n,r,a,o,i,c,l){var s=e-a,d=n-e,h=i-a,p=t-o,f=r-t,g=c-o,y=h*p-g*s,b=d*p-f*s,v=g*d-h*f;if(v!==0){var m=y/v,x=b/v,E=.001,P=0-E,C=1+E;return P<=m&&m<=C&&P<=x&&x<=C?[e+m*d,t+m*f]:l?[e+m*d,t+m*f]:[]}else return y===0||b===0?ja(e,n,i)===i?[i,c]:ja(e,n,a)===a?[a,o]:ja(a,i,n)===n?[n,r]:[]:[]},"finiteLinesIntersect"),fr=u(function(e,t,n,r,a,o,i,c){var l=[],s,d=new Array(n.length),h=!0;o==null&&(h=!1);var p;if(h){for(var f=0;f<d.length/2;f++)d[f*2]=n[f*2]*o+r,d[f*2+1]=n[f*2+1]*i+a;if(c>0){var g=ua(d,-c);p=la(g)}else p=d}else p=n;for(var y,b,v,m,x=0;x<p.length/2;x++)y=p[x*2],b=p[x*2+1],x<p.length/2-1?(v=p[(x+1)*2],m=p[(x+1)*2+1]):(v=p[0],m=p[1]),s=Gt(e,t,r,a,y,b,v,m),s.length!==0&&l.push(s[0],s[1]);return l},"polygonIntersectLine"),jd=u(function(e,t,n,r,a,o,i,c,l){var s=[],d,h=new Array(n.length*2);l.forEach(function(v,m){m===0?(h[h.length-2]=v.startX,h[h.length-1]=v.startY):(h[m*4-2]=v.startX,h[m*4-1]=v.startY),h[m*4]=v.stopX,h[m*4+1]=v.stopY,d=rr(e,t,r,a,v.cx,v.cy,v.radius),d.length!==0&&s.push(d[0],d[1])});for(var p=0;p<h.length/4;p++)d=Gt(e,t,r,a,h[p*4],h[p*4+1],h[p*4+2],h[p*4+3],!1),d.length!==0&&s.push(d[0],d[1]);if(s.length>2){for(var f=[s[0],s[1]],g=Math.pow(f[0]-e,2)+Math.pow(f[1]-t,2),y=1;y<s.length/2;y++){var b=Math.pow(s[y*2]-e,2)+Math.pow(s[y*2+1]-t,2);b<=g&&(f[0]=s[y*2],f[1]=s[y*2+1],g=b)}return f}return s},"roundPolygonIntersectLine"),Rr=u(function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(a-n)/a;return o<0&&(o=1e-5),[t[0]+o*r[0],t[1]+o*r[1]]},"shortenIntersection"),ut=u(function(e,t){var n=Za(e,t);return n=Gs(n),n},"generateUnitNgonPointsFitToSquare"),Gs=u(function(e){for(var t,n,r=e.length/2,a=1/0,o=1/0,i=-1/0,c=-1/0,l=0;l<r;l++)t=e[2*l],n=e[2*l+1],a=Math.min(a,t),i=Math.max(i,t),o=Math.min(o,n),c=Math.max(c,n);for(var s=2/(i-a),d=2/(c-o),h=0;h<r;h++)t=e[2*h]=e[2*h]*s,n=e[2*h+1]=e[2*h+1]*d,a=Math.min(a,t),i=Math.max(i,t),o=Math.min(o,n),c=Math.max(c,n);if(o<-1)for(var p=0;p<r;p++)n=e[2*p+1]=e[2*p+1]+(-1-o);return e},"fitPolygonToSquare"),Za=u(function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var a=new Array(e*2),o,i=0;i<e;i++)o=i*n+r,a[2*i]=Math.cos(o),a[2*i+1]=Math.sin(-o);return a},"generateUnitNgonPoints"),yn=u(function(e,t){return Math.min(e/4,t/4,8)},"getRoundRectangleRadius"),Ks=u(function(e,t){return Math.min(e/10,t/10,8)},"getRoundPolygonRadius"),Ii=u(function(){return 8},"getCutRectangleCornerLength"),qd=u(function(e,t,n){return[e-2*t+n,2*(t-e),e]},"bezierPtsToQuadCoeff"),$a=u(function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},"getBarrelCurveConstants"),Xd=et({dampingFactor:.8,precision:1e-6,iterations:200,weight:u(function(e){return 1},"weight")}),Yd={pageRank:u(function(e){for(var t=Xd(e),n=t.dampingFactor,r=t.precision,a=t.iterations,o=t.weight,i=this._private.cy,c=this.byGroup(),l=c.nodes,s=c.edges,d=l.length,h=d*d,p=s.length,f=new Array(h),g=new Array(d),y=(1-n)/d,b=0;b<d;b++){for(var v=0;v<d;v++){var m=b*d+v;f[m]=0}g[b]=0}for(var x=0;x<p;x++){var E=s[x],P=E.data("source"),C=E.data("target");if(P!==C){var w=l.indexOfId(P),S=l.indexOfId(C),I=o(E),D=S*d+w;f[D]+=I,g[w]+=I}}for(var B=1/d+y,T=0;T<d;T++)if(g[T]===0)for(var M=0;M<d;M++){var _=M*d+T;f[_]=B}else for(var O=0;O<d;O++){var L=O*d+T;f[L]=f[L]/g[T]+y}for(var z=new Array(d),A=new Array(d),R,Y=0;Y<d;Y++)z[Y]=1;for(var V=0;V<a;V++){for(var j=0;j<d;j++)A[j]=0;for(var W=0;W<d;W++)for(var J=0;J<d;J++){var ae=W*d+J;A[W]+=f[ae]*z[J]}Pd(A),R=z,z=A,A=R;for(var Z=0,$=0;$<d;$++){var N=R[$]-z[$];Z+=N*N}if(Z<r)break}var G={rank:u(function(U){return U=i.collection(U)[0],z[l.indexOf(U)]},"rank")};return G},"pageRank")},mo=et({root:null,weight:u(function(e){return 1},"weight"),directed:!1,alpha:0}),Ln={degreeCentralityNormalized:u(function(e){e=mo(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var a={},o={},i=0,c=0,l=0;l<r;l++){var s=n[l],d=s.id();e.root=s;var h=this.degreeCentrality(e);i<h.indegree&&(i=h.indegree),c<h.outdegree&&(c=h.outdegree),a[d]=h.indegree,o[d]=h.outdegree}return{indegree:u(function(v){return i==0?0:(pe(v)&&(v=t.filter(v)),a[v.id()]/i)},"indegree"),outdegree:u(function(v){return c===0?0:(pe(v)&&(v=t.filter(v)),o[v.id()]/c)},"outdegree")}}else{for(var p={},f=0,g=0;g<r;g++){var y=n[g];e.root=y;var b=this.degreeCentrality(e);f<b.degree&&(f=b.degree),p[y.id()]=b.degree}return{degree:u(function(v){return f===0?0:(pe(v)&&(v=t.filter(v)),p[v.id()]/f)},"degree")}}},"degreeCentralityNormalized"),degreeCentrality:u(function(e){e=mo(e);var t=this.cy(),n=this,r=e,a=r.root,o=r.weight,i=r.directed,c=r.alpha;if(a=t.collection(a)[0],i){for(var l=a.connectedEdges(),s=l.filter(function(P){return P.target().same(a)&&n.has(P)}),d=l.filter(function(P){return P.source().same(a)&&n.has(P)}),h=s.length,p=d.length,f=0,g=0,y=0;y<s.length;y++)f+=o(s[y]);for(var b=0;b<d.length;b++)g+=o(d[b]);return{indegree:Math.pow(h,1-c)*Math.pow(f,c),outdegree:Math.pow(p,1-c)*Math.pow(g,c)}}else{for(var v=a.connectedEdges().intersection(n),m=v.length,x=0,E=0;E<v.length;E++)x+=o(v[E]);return{degree:Math.pow(m,1-c)*Math.pow(x,c)}}},"degreeCentrality")};Ln.dc=Ln.degreeCentrality;Ln.dcn=Ln.degreeCentralityNormalised=Ln.degreeCentralityNormalized;var bo=et({harmonic:!0,weight:u(function(){return 1},"weight"),directed:!1,root:null}),zn={closenessCentralityNormalized:u(function(e){for(var t=bo(e),n=t.harmonic,r=t.weight,a=t.directed,o=this.cy(),i={},c=0,l=this.nodes(),s=this.floydWarshall({weight:r,directed:a}),d=0;d<l.length;d++){for(var h=0,p=l[d],f=0;f<l.length;f++)if(d!==f){var g=s.distance(p,l[f]);n?h+=1/g:h+=g}n||(h=1/h),c<h&&(c=h),i[p.id()]=h}return{closeness:u(function(y){return c==0?0:(pe(y)?y=o.filter(y)[0].id():y=y.id(),i[y]/c)},"closeness")}},"closenessCentralityNormalized"),closenessCentrality:u(function(e){var t=bo(e),n=t.root,r=t.weight,a=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var i=this.dijkstra({root:n,weight:r,directed:a}),c=0,l=this.nodes(),s=0;s<l.length;s++){var d=l[s];if(!d.same(n)){var h=i.distanceTo(d);o?c+=1/h:c+=h}}return o?c:1/c},"closenessCentrality")};zn.cc=zn.closenessCentrality;zn.ccn=zn.closenessCentralityNormalised=zn.closenessCentralityNormalized;var Hd=et({weight:null,directed:!1}),Qa={betweennessCentrality:u(function(e){for(var t=Hd(e),n=t.directed,r=t.weight,a=r!=null,o=this.cy(),i=this.nodes(),c={},l={},s=0,d={set:u(function(v,m){l[v]=m,m>s&&(s=m)},"set"),get:u(function(v){return l[v]},"get")},h=0;h<i.length;h++){var p=i[h],f=p.id();n?c[f]=p.outgoers().nodes():c[f]=p.openNeighborhood().nodes(),d.set(f,0)}for(var g=u(function(v){for(var m=i[v].id(),x=[],E={},P={},C={},w=new kr(function(W,J){return C[W]-C[J]}),S=0;S<i.length;S++){var I=i[S].id();E[I]=[],P[I]=0,C[I]=1/0}for(P[m]=1,C[m]=0,w.push(m);!w.empty();){var D=w.pop();if(x.push(D),a)for(var B=0;B<c[D].length;B++){var T=c[D][B],M=o.getElementById(D),_=void 0;M.edgesTo(T).length>0?_=M.edgesTo(T)[0]:_=T.edgesTo(M)[0];var O=r(_);T=T.id(),C[T]>C[D]+O&&(C[T]=C[D]+O,w.nodes.indexOf(T)<0?w.push(T):w.updateItem(T),P[T]=0,E[T]=[]),C[T]==C[D]+O&&(P[T]=P[T]+P[D],E[T].push(D))}else for(var L=0;L<c[D].length;L++){var z=c[D][L].id();C[z]==1/0&&(w.push(z),C[z]=C[D]+1),C[z]==C[D]+1&&(P[z]=P[z]+P[D],E[z].push(D))}}for(var A={},R=0;R<i.length;R++)A[i[R].id()]=0;for(;x.length>0;){for(var Y=x.pop(),V=0;V<E[Y].length;V++){var j=E[Y][V];A[j]=A[j]+P[j]/P[Y]*(1+A[Y])}Y!=i[v].id()&&d.set(Y,d.get(Y)+A[Y])}},"_loop"),y=0;y<i.length;y++)g(y);var b={betweenness:u(function(v){var m=o.collection(v).id();return d.get(m)},"betweenness"),betweennessNormalized:u(function(v){if(s==0)return 0;var m=o.collection(v).id();return d.get(m)/s},"betweennessNormalized")};return b.betweennessNormalised=b.betweennessNormalized,b},"betweennessCentrality")};Qa.bc=Qa.betweennessCentrality;var Wd=et({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),Ud=u(function(e){return Wd(e)},"setOptions"),Gd=u(function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},"getSimilarity"),Kd=u(function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n},"addLoops"),Zs=u(function(e,t){for(var n,r=0;r<t;r++){n=0;for(var a=0;a<t;a++)n+=e[a*t+r];for(var o=0;o<t;o++)e[o*t+r]=e[o*t+r]/n}},"normalize"),Zd=u(function(e,t,n){for(var r=new Array(n*n),a=0;a<n;a++){for(var o=0;o<n;o++)r[a*n+o]=0;for(var i=0;i<n;i++)for(var c=0;c<n;c++)r[a*n+c]+=e[a*n+i]*t[i*n+c]}return r},"mmult"),$d=u(function(e,t,n){for(var r=e.slice(0),a=1;a<n;a++)e=Zd(e,r,t);return e},"expand"),Qd=u(function(e,t,n){for(var r=new Array(t*t),a=0;a<t*t;a++)r[a]=Math.pow(e[a],n);return Zs(r,t),r},"inflate"),Jd=u(function(e,t,n,r){for(var a=0;a<n;a++){var o=Math.round(e[a]*Math.pow(10,r))/Math.pow(10,r),i=Math.round(t[a]*Math.pow(10,r))/Math.pow(10,r);if(o!==i)return!1}return!0},"hasConverged"),eh=u(function(e,t,n,r){for(var a=[],o=0;o<t;o++){for(var i=[],c=0;c<t;c++)Math.round(e[o*t+c]*1e3)/1e3>0&&i.push(n[c]);i.length!==0&&a.push(r.collection(i))}return a},"assign"),th=u(function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},"isDuplicate"),nh=u(function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&th(e[t],e[n])&&e.splice(n,1);return e},"removeDuplicates"),xo=u(function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),a=Ud(e),o={},i=0;i<t.length;i++)o[t[i].id()]=i;for(var c=t.length,l=c*c,s=new Array(l),d,h=0;h<l;h++)s[h]=0;for(var p=0;p<n.length;p++){var f=n[p],g=o[f.source().id()],y=o[f.target().id()],b=Gd(f,a.attributes);s[g*c+y]+=b,s[y*c+g]+=b}Kd(s,c,a.multFactor),Zs(s,c);for(var v=!0,m=0;v&&m<a.maxIterations;)v=!1,d=$d(s,c,a.expandFactor),s=Qd(d,c,a.inflateFactor),Jd(s,d,l,4)||(v=!0),m++;var x=eh(s,c,t,r);return x=nh(x),x},"markovClustering"),rh={markovClustering:xo,mcl:xo},ah=u(function(e){return e},"identity"),$s=u(function(e,t){return Math.abs(t-e)},"absDiff"),wo=u(function(e,t,n){return e+$s(t,n)},"addAbsDiff"),Eo=u(function(e,t,n){return e+Math.pow(n-t,2)},"addSquaredDiff"),ih=u(function(e){return Math.sqrt(e)},"sqrt"),oh=u(function(e,t,n){return Math.max(e,$s(t,n))},"maxAbsDiff"),Jn=u(function(e,t,n,r,a){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:ah,i=r,c,l,s=0;s<e;s++)c=t(s),l=n(s),i=a(i,c,l);return o(i)},"getDistance"),jn={euclidean:u(function(e,t,n){return e>=2?Jn(e,t,n,0,Eo,ih):Jn(e,t,n,0,wo)},"euclidean"),squaredEuclidean:u(function(e,t,n){return Jn(e,t,n,0,Eo)},"squaredEuclidean"),manhattan:u(function(e,t,n){return Jn(e,t,n,0,wo)},"manhattan"),max:u(function(e,t,n){return Jn(e,t,n,-1/0,oh)},"max")};jn["squared-euclidean"]=jn.squaredEuclidean;jn.squaredeuclidean=jn.squaredEuclidean;function Cr(e,t,n,r,a,o){var i;return ze(e)?i=e:i=jn[e]||jn.euclidean,t===0&&ze(e)?i(a,o):i(t,n,r,a,o)}u(Cr,"clusteringDistance");var sh=et({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Mi=u(function(e){return sh(e)},"setOptions"),ca=u(function(e,t,n,r,a){var o=a!=="kMedoids",i=o?function(d){return n[d]}:function(d){return r[d](n)},c=u(function(d){return r[d](t)},"getQ"),l=n,s=t;return Cr(e,r.length,i,c,l,s)},"getDist"),qa=u(function(e,t,n){for(var r=n.length,a=new Array(r),o=new Array(r),i=new Array(t),c=null,l=0;l<r;l++)a[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var s=0;s<t;s++){c=[];for(var d=0;d<r;d++)c[d]=Math.random()*(o[d]-a[d])+a[d];i[s]=c}return i},"randomCentroids"),Qs=u(function(e,t,n,r,a){for(var o=1/0,i=0,c=0;c<t.length;c++){var l=ca(n,e,t[c],r,a);l<o&&(o=l,i=c)}return i},"classify"),Js=u(function(e,t,n){for(var r=[],a=null,o=0;o<t.length;o++)a=t[o],n[a.id()]===e&&r.push(a);return r},"buildCluster"),lh=u(function(e,t,n){return Math.abs(t-e)<=n},"haveValuesConverged"),uh=u(function(e,t,n){for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++){var o=Math.abs(e[r][a]-t[r][a]);if(o>n)return!1}return!0},"haveMatricesConverged"),ch=u(function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},"seenBefore"),ko=u(function(e,t){var n=new Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var a=e[Math.floor(Math.random()*e.length)];ch(a,n,r);)a=e[Math.floor(Math.random()*e.length)];n[r]=a}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},"randomMedoids"),Co=u(function(e,t,n){for(var r=0,a=0;a<t.length;a++)r+=ca("manhattan",t[a],e,n,"kMedoids");return r},"findCost"),dh=u(function(e){var t=this.cy(),n=this.nodes(),r=null,a=Mi(e),o=new Array(a.k),i={},c;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,c=qa(n,a.k,a.attributes)):Ve(a.testCentroids)==="object"?c=a.testCentroids:c=qa(n,a.k,a.attributes):c=qa(n,a.k,a.attributes);for(var l=!0,s=0;l&&s<a.maxIterations;){for(var d=0;d<n.length;d++)r=n[d],i[r.id()]=Qs(r,c,a.distance,a.attributes,"kMeans");l=!1;for(var h=0;h<a.k;h++){var p=Js(h,n,i);if(p.length!==0){for(var f=a.attributes.length,g=c[h],y=new Array(f),b=new Array(f),v=0;v<f;v++){b[v]=0;for(var m=0;m<p.length;m++)r=p[m],b[v]+=a.attributes[v](r);y[v]=b[v]/p.length,lh(y[v],g[v],a.sensitivityThreshold)||(l=!0)}c[h]=y,o[h]=t.collection(p)}}s++}return o},"kMeans"),hh=u(function(e){var t=this.cy(),n=this.nodes(),r=null,a=Mi(e),o=new Array(a.k),i,c={},l,s=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Ve(a.testCentroids)==="object"?i=a.testCentroids:i=ko(n,a.k)):i=ko(n,a.k);for(var d=!0,h=0;d&&h<a.maxIterations;){for(var p=0;p<n.length;p++)r=n[p],c[r.id()]=Qs(r,i,a.distance,a.attributes,"kMedoids");d=!1;for(var f=0;f<i.length;f++){var g=Js(f,n,c);if(g.length!==0){s[f]=Co(i[f],g,a.attributes);for(var y=0;y<g.length;y++)l=Co(g[y],g,a.attributes),l<s[f]&&(s[f]=l,i[f]=g[y],d=!0);o[f]=t.collection(g)}}h++}return o},"kMedoids"),ph=u(function(e,t,n,r,a){for(var o,i,c=0;c<t.length;c++)for(var l=0;l<e.length;l++)r[c][l]=Math.pow(n[c][l],a.m);for(var s=0;s<e.length;s++)for(var d=0;d<a.attributes.length;d++){o=0,i=0;for(var h=0;h<t.length;h++)o+=r[h][s]*a.attributes[d](t[h]),i+=r[h][s];e[s][d]=o/i}},"updateCentroids"),fh=u(function(e,t,n,r,a){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var i,c,l,s=2/(a.m-1),d=0;d<n.length;d++)for(var h=0;h<r.length;h++){i=0;for(var p=0;p<n.length;p++)c=ca(a.distance,r[h],n[d],a.attributes,"cmeans"),l=ca(a.distance,r[h],n[p],a.attributes,"cmeans"),i+=Math.pow(c/l,s);e[h][d]=1/i}},"updateMembership"),gh=u(function(e,t,n,r){for(var a=new Array(n.k),o=0;o<a.length;o++)a[o]=[];for(var i,c,l=0;l<t.length;l++){i=-1/0,c=-1;for(var s=0;s<t[0].length;s++)t[l][s]>i&&(i=t[l][s],c=s);a[c].push(e[l])}for(var d=0;d<a.length;d++)a[d]=r.collection(a[d]);return a},"assign"),So=u(function(e){var t=this.cy(),n=this.nodes(),r=Mi(e),a,o,i,c,l;c=new Array(n.length);for(var s=0;s<n.length;s++)c[s]=new Array(r.k);i=new Array(n.length);for(var d=0;d<n.length;d++)i[d]=new Array(r.k);for(var h=0;h<n.length;h++){for(var p=0,f=0;f<r.k;f++)i[h][f]=Math.random(),p+=i[h][f];for(var g=0;g<r.k;g++)i[h][g]=i[h][g]/p}o=new Array(r.k);for(var y=0;y<r.k;y++)o[y]=new Array(r.attributes.length);l=new Array(n.length);for(var b=0;b<n.length;b++)l[b]=new Array(r.k);for(var v=!0,m=0;v&&m<r.maxIterations;)v=!1,ph(o,n,i,l,r),fh(i,c,o,n,r),uh(i,c,r.sensitivityThreshold)||(v=!0),m++;return a=gh(n,i,r,t),{clusters:a,degreeOfMembership:i}},"fuzzyCMeans"),vh={kMeans:dh,kMedoids:hh,fuzzyCMeans:So,fcm:So},yh=et({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),mh={single:"min",complete:"max"},bh=u(function(e){var t=yh(e),n=mh[t.linkage];return n!=null&&(t.linkage=n),t},"setOptions"),Po=u(function(e,t,n,r,a){for(var o=0,i=1/0,c,l=a.attributes,s=u(function(w,S){return Cr(a.distance,l.length,function(I){return l[I](w)},function(I){return l[I](S)},w,S)},"getDist"),d=0;d<e.length;d++){var h=e[d].key,p=n[h][r[h]];p<i&&(o=h,i=p)}if(a.mode==="threshold"&&i>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var f=t[o],g=t[r[o]],y;a.mode==="dendrogram"?y={left:f,right:g,key:f.key}:y={value:f.value.concat(g.value),key:f.key},e[f.index]=y,e.splice(g.index,1),t[f.key]=y;for(var b=0;b<e.length;b++){var v=e[b];f.key===v.key?c=1/0:a.linkage==="min"?(c=n[f.key][v.key],n[f.key][v.key]>n[g.key][v.key]&&(c=n[g.key][v.key])):a.linkage==="max"?(c=n[f.key][v.key],n[f.key][v.key]<n[g.key][v.key]&&(c=n[g.key][v.key])):a.linkage==="mean"?c=(n[f.key][v.key]*f.size+n[g.key][v.key]*g.size)/(f.size+g.size):a.mode==="dendrogram"?c=s(v.value,f.value):c=s(v.value[0],f.value[0]),n[f.key][v.key]=n[v.key][f.key]=c}for(var m=0;m<e.length;m++){var x=e[m].key;if(r[x]===f.key||r[x]===g.key){for(var E=x,P=0;P<e.length;P++){var C=e[P].key;n[x][C]<n[x][E]&&(E=C)}r[x]=E}e[m].index=m}return f.key=g.key=f.index=g.index=null,!0},"mergeClosest"),Fr=u(function e(t,n,r){t&&(t.value?n.push(t.value):(t.left&&e(t.left,n),t.right&&e(t.right,n)))},"getAllChildren"),xh=u(function e(t,n){if(!t)return"";if(t.left&&t.right){var r=e(t.left,n),a=e(t.right,n),o=n.add({group:"nodes",data:{id:r+","+a}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:a,target:o.id()}}),o.id()}else if(t.value)return t.value.id()},"buildDendrogram"),wh=u(function e(t,n,r){if(!t)return[];var a=[],o=[],i=[];return n===0?(t.left&&Fr(t.left,a),t.right&&Fr(t.right,o),i=a.concat(o),[r.collection(i)]):n===1?t.value?[r.collection(t.value)]:(t.left&&Fr(t.left,a),t.right&&Fr(t.right,o),[r.collection(a),r.collection(o)]):t.value?[r.collection(t.value)]:(t.left&&(a=e(t.left,n-1,r)),t.right&&(o=e(t.right,n-1,r)),a.concat(o))},"buildClustersFromTree"),To=u(function(e){for(var t=this.cy(),n=this.nodes(),r=bh(e),a=r.attributes,o=u(function(v,m){return Cr(r.distance,a.length,function(x){return a[x](v)},function(x){return a[x](m)},v,m)},"getDist"),i=[],c=[],l=[],s=[],d=0;d<n.length;d++){var h={value:r.mode==="dendrogram"?n[d]:[n[d]],key:d,index:d};i[d]=h,s[d]=h,c[d]=[],l[d]=0}for(var p=0;p<i.length;p++)for(var f=0;f<=p;f++){var g=void 0;r.mode==="dendrogram"?g=p===f?1/0:o(i[p].value,i[f].value):g=p===f?1/0:o(i[p].value[0],i[f].value[0]),c[p][f]=g,c[f][p]=g,g<c[p][l[p]]&&(l[p]=f)}for(var y=Po(i,s,c,l,r);y;)y=Po(i,s,c,l,r);var b;return r.mode==="dendrogram"?(b=wh(i[0],r.dendrogramDepth,t),r.addDendrogram&&xh(i[0],t)):(b=new Array(i.length),i.forEach(function(v,m){v.key=v.index=null,b[m]=t.collection(v.value)})),b},"hierarchicalClustering"),Eh={hierarchicalClustering:To,hca:To},kh=et({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Ch=u(function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||Re("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(a){return a===n})||re(n)||Re("Preference must be one of [".concat(r.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),kh(e)},"setOptions"),Sh=u(function(e,t,n,r){var a=u(function(o,i){return r[i](o)},"attr");return-Cr(e,r.length,function(o){return a(t,o)},function(o){return a(n,o)},t,n)},"getSimilarity"),Ph=u(function(e,t){var n=null;return t==="median"?n=Cd(e):t==="mean"?n=kd(e):t==="min"?n=wd(e):t==="max"?n=Ed(e):n=t,n},"getPreference"),Th=u(function(e,t,n){for(var r=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&r.push(a);return r},"findExemplars"),_o=u(function(e,t,n){for(var r=[],a=0;a<e;a++){for(var o=-1,i=-1/0,c=0;c<n.length;c++){var l=n[c];t[a*e+l]>i&&(o=l,i=t[a*e+l])}o>0&&r.push(o)}for(var s=0;s<n.length;s++)r[n[s]]=n[s];return r},"assignClusters"),_h=u(function(e,t,n){for(var r=_o(e,t,n),a=0;a<n.length;a++){for(var o=[],i=0;i<r.length;i++)r[i]===n[a]&&o.push(i);for(var c=-1,l=-1/0,s=0;s<o.length;s++){for(var d=0,h=0;h<o.length;h++)d+=t[o[h]*e+o[s]];d>l&&(c=s,l=d)}n[a]=o[c]}return r=_o(e,t,n),r},"assign"),Do=u(function(e){for(var t=this.cy(),n=this.nodes(),r=Ch(e),a={},o=0;o<n.length;o++)a[n[o].id()]=o;var i,c,l,s,d,h;i=n.length,c=i*i,l=new Array(c);for(var p=0;p<c;p++)l[p]=-1/0;for(var f=0;f<i;f++)for(var g=0;g<i;g++)f!==g&&(l[f*i+g]=Sh(r.distance,n[f],n[g],r.attributes));s=Ph(l,r.preference);for(var y=0;y<i;y++)l[y*i+y]=s;d=new Array(c);for(var b=0;b<c;b++)d[b]=0;h=new Array(c);for(var v=0;v<c;v++)h[v]=0;for(var m=new Array(i),x=new Array(i),E=new Array(i),P=0;P<i;P++)m[P]=0,x[P]=0,E[P]=0;for(var C=new Array(i*r.minIterations),w=0;w<C.length;w++)C[w]=0;var S;for(S=0;S<r.maxIterations;S++){for(var I=0;I<i;I++){for(var D=-1/0,B=-1/0,T=-1,M=0,_=0;_<i;_++)m[_]=d[I*i+_],M=h[I*i+_]+l[I*i+_],M>=D?(B=D,D=M,T=_):M>B&&(B=M);for(var O=0;O<i;O++)d[I*i+O]=(1-r.damping)*(l[I*i+O]-D)+r.damping*m[O];d[I*i+T]=(1-r.damping)*(l[I*i+T]-B)+r.damping*m[T]}for(var L=0;L<i;L++){for(var z=0,A=0;A<i;A++)m[A]=h[A*i+L],x[A]=Math.max(0,d[A*i+L]),z+=x[A];z-=x[L],x[L]=d[L*i+L],z+=x[L];for(var R=0;R<i;R++)h[R*i+L]=(1-r.damping)*Math.min(0,z-x[R])+r.damping*m[R];h[L*i+L]=(1-r.damping)*(z-x[L])+r.damping*m[L]}for(var Y=0,V=0;V<i;V++){var j=h[V*i+V]+d[V*i+V]>0?1:0;C[S%r.minIterations*i+V]=j,Y+=j}if(Y>0&&(S>=r.minIterations-1||S==r.maxIterations-1)){for(var W=0,J=0;J<i;J++){E[J]=0;for(var ae=0;ae<r.minIterations;ae++)E[J]+=C[ae*i+J];(E[J]===0||E[J]===r.minIterations)&&W++}if(W===i)break}}for(var Z=Th(i,d,h),$=_h(i,l,Z),N={},G=0;G<Z.length;G++)N[Z[G]]=[];for(var U=0;U<n.length;U++){var ne=a[n[U].id()],de=$[ne];de!=null&&N[de].push(n[U])}for(var be=new Array(Z.length),Q=0;Q<Z.length;Q++)be[Q]=t.collection(N[Z[Q]]);return be},"affinityPropagation"),Dh={affinityPropagation:Do,ap:Do},Bh=et({root:void 0,directed:!1}),Ih={hierholzer:u(function(e){if(!Ce(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=Bh(e),r=n.root,a=n.directed,o=this,i=!1,c,l,s;r&&(s=pe(r)?this.filter(r)[0].id():r[0].id());var d={},h={};a?o.forEach(function(v){var m=v.id();if(v.isNode()){var x=v.indegree(!0),E=v.outdegree(!0),P=x-E,C=E-x;P==1?c?i=!0:c=m:C==1?l?i=!0:l=m:(C>1||P>1)&&(i=!0),d[m]=[],v.outgoers().forEach(function(w){w.isEdge()&&d[m].push(w.id())})}else h[m]=[void 0,v.target().id()]}):o.forEach(function(v){var m=v.id();if(v.isNode()){var x=v.degree(!0);x%2&&(c?l?i=!0:l=m:c=m),d[m]=[],v.connectedEdges().forEach(function(E){return d[m].push(E.id())})}else h[m]=[v.source().id(),v.target().id()]});var p={found:!1,trail:void 0};if(i)return p;if(l&&c)if(a){if(s&&l!=s)return p;s=l}else{if(s&&l!=s&&c!=s)return p;s||(s=l)}else s||(s=o[0].id());var f=u(function(v){for(var m=v,x=[v],E,P,C;d[m].length;)E=d[m].shift(),P=h[E][0],C=h[E][1],m!=C?(d[C]=d[C].filter(function(w){return w!=E}),m=C):!a&&m!=P&&(d[P]=d[P].filter(function(w){return w!=E}),m=P),x.unshift(E),x.unshift(m);return x},"walk"),g=[],y=[];for(y=f(s);y.length!=1;)d[y[0]].length==0?(g.unshift(o.getElementById(y.shift())),g.unshift(o.getElementById(y.shift()))):y=f(y.shift()).concat(y);g.unshift(o.getElementById(y.shift()));for(var b in d)if(d[b].length)return p;return p.found=!0,p.trail=this.spawn(g,!0),p},"hierholzer")},Vr=u(function(){var e=this,t={},n=0,r=0,a=[],o=[],i={},c=u(function(d,h){for(var p=o.length-1,f=[],g=e.spawn();o[p].x!=d||o[p].y!=h;)f.push(o.pop().edge),p--;f.push(o.pop().edge),f.forEach(function(y){var b=y.connectedNodes().intersection(e);g.merge(y),b.forEach(function(v){var m=v.id(),x=v.connectedEdges().intersection(e);g.merge(v),t[m].cutVertex?g.merge(x.filter(function(E){return E.isLoop()})):g.merge(x)})}),a.push(g)},"buildComponent"),l=u(function d(h,p,f){h===f&&(r+=1),t[p]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(p).connectedEdges().intersection(e);if(g.size()===0)a.push(e.spawn(e.getElementById(p)));else{var y,b,v,m;g.forEach(function(x){y=x.source().id(),b=x.target().id(),v=y===p?b:y,v!==f&&(m=x.id(),i[m]||(i[m]=!0,o.push({x:p,y:v,edge:x})),v in t?t[p].low=Math.min(t[p].low,t[v].id):(d(h,v,p),t[p].low=Math.min(t[p].low,t[v].low),t[p].id<=t[v].low&&(t[p].cutVertex=!0,c(p,v))))})}},"biconnectedSearch");e.forEach(function(d){if(d.isNode()){var h=d.id();h in t||(r=0,l(h,h),t[h].cutVertex=r>1)}});var s=Object.keys(t).filter(function(d){return t[d].cutVertex}).map(function(d){return e.getElementById(d)});return{cut:e.spawn(s),components:a}},"hopcroftTarjanBiconnected"),Mh={hopcroftTarjanBiconnected:Vr,htbc:Vr,htb:Vr,hopcroftTarjanBiconnectedComponents:Vr},jr=u(function(){var e=this,t={},n=0,r=[],a=[],o=e.spawn(e),i=u(function c(l){a.push(l),t[l]={index:n,low:n++,explored:!1};var s=e.getElementById(l).connectedEdges().intersection(e);if(s.forEach(function(g){var y=g.target().id();y!==l&&(y in t||c(y),t[y].explored||(t[l].low=Math.min(t[l].low,t[y].low)))}),t[l].index===t[l].low){for(var d=e.spawn();;){var h=a.pop();if(d.merge(e.getElementById(h)),t[h].low=t[l].index,t[h].explored=!0,h===l)break}var p=d.edgesWith(d),f=d.merge(p);r.push(f),o=o.difference(f)}},"stronglyConnectedSearch");return e.forEach(function(c){if(c.isNode()){var l=c.id();l in t||i(l)}}),{cut:o,components:r}},"tarjanStronglyConnected"),Ah={tarjanStronglyConnected:jr,tsc:jr,tscc:jr,tarjanStronglyConnectedComponents:jr},el={};[hr,ud,cd,hd,fd,vd,bd,Yd,Ln,zn,Qa,rh,vh,Eh,Dh,Ih,Mh,Ah].forEach(function(e){ve(el,e)});var tl=0,nl=1,rl=2,qt=u(function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=tl,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof t=="function"&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))},"api");qt.prototype={fulfill:u(function(e){return Bo(this,nl,"fulfillValue",e)},"fulfill"),reject:u(function(e){return Bo(this,rl,"rejectReason",e)},"reject"),then:u(function(e,t){var n=this,r=new qt;return n.onFulfilled.push(Mo(e,r,"fulfill")),n.onRejected.push(Mo(t,r,"reject")),al(n),r.proxy},"then")};var Bo=u(function(e,t,n,r){return e.state===tl&&(e.state=t,e[n]=r,al(e)),e},"deliver"),al=u(function(e){e.state===nl?Io(e,"onFulfilled",e.fulfillValue):e.state===rl&&Io(e,"onRejected",e.rejectReason)},"execute"),Io=u(function(e,t,n){if(e[t].length!==0){var r=e[t];e[t]=[];var a=u(function(){for(var o=0;o<r.length;o++)r[o](n)},"func");typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},"execute_handlers"),Mo=u(function(e,t,n){return function(r){if(typeof e!="function")t[n].call(t,r);else{var a;try{a=e(r)}catch(o){t.reject(o);return}Nh(t,a)}}},"resolver"),Nh=u(function e(t,n){if(t===n||t.proxy===n){t.reject(new TypeError("cannot resolve promise with itself"));return}var r;if(Ve(n)==="object"&&n!==null||typeof n=="function")try{r=n.then}catch(o){t.reject(o);return}if(typeof r=="function"){var a=!1;try{r.call(n,function(o){a||(a=!0,o===n?t.reject(new TypeError("circular thenable chain")):e(t,o))},function(o){a||(a=!0,t.reject(o))})}catch(o){a||t.reject(o)}return}t.fulfill(n)},"resolve");qt.all=function(e){return new qt(function(t,n){for(var r=new Array(e.length),a=0,o=u(function(c,l){r[c]=l,a++,a===e.length&&t(r)},"fulfill"),i=0;i<e.length;i++)(function(c){var l=e[c],s=l!=null&&l.then!=null;if(s)l.then(function(h){o(c,h)},function(h){n(h)});else{var d=l;o(c,d)}})(i)})};qt.resolve=function(e){return new qt(function(t,n){t(e)})};qt.reject=function(e){return new qt(function(t,n){n(e)})};var Hn=typeof Promise<"u"?Promise:qt,Ja=u(function(e,t,n){var r=Ci(e),a=!r,o=this._private=ve({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&ze(o.complete)&&o.completes.push(o.complete),a){var i=e.position();o.startPosition=o.startPosition||{x:i.x,y:i.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(r){var c=e.pan();o.startPan={x:c.x,y:c.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},"Animation"),mn=Ja.prototype;ve(mn,{instanceString:u(function(){return"animation"},"instanceString"),hook:u(function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),gt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},"hook"),play:u(function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},"play"),playing:u(function(){return this._private.playing},"playing"),apply:u(function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},"apply"),applying:u(function(){return this._private.applying},"applying"),pause:u(function(){var e=this._private;return e.playing=!1,e.started=!1,this},"pause"),stop:u(function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},"stop"),rewind:u(function(){return this.progress(0)},"rewind"),fastforward:u(function(){return this.progress(1)},"fastforward"),time:u(function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},"time"),progress:u(function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},"progress"),completed:u(function(){return this._private.progress===1},"completed"),reverse:u(function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=u(function(c,l){var s=e[c];s!=null&&(e[c]=e[l],e[l]=s)},"swap");if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var a=e.style[r],o=a.name,i=e.startStyle[o];e.startStyle[o]=a,e.style[r]=i}return t&&this.play(),this},"reverse"),promise:u(function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Hn(function(r,a){n.push(function(){r()})})},"promise")});mn.complete=mn.completed;mn.run=mn.play;mn.running=mn.playing;var Oh={animated:u(function(){return u(function(){var e=this,t=e.length!==void 0,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var a=n[0];if(a)return a._private.animation.current.length>0},"animatedImpl")},"animated"),clearQueue:u(function(){return u(function(){var e=this,t=e.length!==void 0,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var a=0;a<n.length;a++){var o=n[a];o._private.animation.queue=[]}return this},"clearQueueImpl")},"clearQueue"),delay:u(function(){return u(function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this},"delayImpl")},"delay"),delayAnimation:u(function(){return u(function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this},"delayAnimationImpl")},"delayAnimation"),animation:u(function(){return u(function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],o=this._private.cy||this,i=!r,c=!i;if(!o.styleEnabled())return this;var l=o.style();e=ve({},e,t);var s=Object.keys(e).length===0;if(s)return new Ja(a[0],e);switch(e.duration===void 0&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(c&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),c&&e.renderedPosition!=null){var d=e.renderedPosition,h=o.pan(),p=o.zoom();e.position=Xs(d,p,h)}if(i&&e.panBy!=null){var f=e.panBy,g=o.pan();e.pan={x:g.x+f.x,y:g.y+f.y}}var y=e.center||e.centre;if(i&&y!=null){var b=o.getCenterPan(y.eles,e.zoom);b!=null&&(e.pan=b)}if(i&&e.fit!=null){var v=e.fit,m=o.getFitViewport(v.eles||v.boundingBox,v.padding);m!=null&&(e.pan=m.pan,e.zoom=m.zoom)}if(i&&Ce(e.zoom)){var x=o.getZoomedViewport(e.zoom);x!=null?(x.zoomed&&(e.zoom=x.zoom),x.panned&&(e.pan=x.pan)):e.zoom=null}return new Ja(a[0],e)},"animationImpl")},"animation"),animate:u(function(){return u(function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;t&&(e=ve({},e,t));for(var i=0;i<a.length;i++){var c=a[i],l=c.animated()&&(e.queue===void 0||e.queue),s=c.animation(e,l?{queue:!0}:void 0);s.play()}return this},"animateImpl")},"animate"),stop:u(function(){return u(function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var i=0;i<a.length;i++){for(var c=a[i],l=c._private,s=l.animation.current,d=0;d<s.length;d++){var h=s[d],p=h._private;t&&(p.duration=0)}e&&(l.animation.queue=[]),t||(l.animation.current=[])}return o.notify("draw"),this},"stopImpl")},"stop")},Lh=Array.isArray,ka=Lh,zh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rh=/^\w*$/;function il(e,t){if(ka(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Er(e)?!0:Rh.test(e)||!zh.test(e)||t!=null&&e in Object(t)}u(il,"isKey");var Fh=il,Vh="[object AsyncFunction]",jh="[object Function]",qh="[object GeneratorFunction]",Xh="[object Proxy]";function ol(e){if(!fn(e))return!1;var t=Bs(e);return t==jh||t==qh||t==Vh||t==Xh}u(ol,"isFunction");var Yh=ol,Hh=ba["__core-js_shared__"],Xa=Hh,Ao=function(){var e=/[^.]+$/.exec(Xa&&Xa.keys&&Xa.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function sl(e){return!!Ao&&Ao in e}u(sl,"isMasked");var Wh=sl,Uh=Function.prototype,Gh=Uh.toString;function ll(e){if(e!=null){try{return Gh.call(e)}catch{}try{return e+""}catch{}}return""}u(ll,"toSource");var Kh=ll,Zh=/[\\^$.*+?()[\]{}|]/g,$h=/^\[object .+?Constructor\]$/,Qh=Function.prototype,Jh=Object.prototype,ep=Qh.toString,tp=Jh.hasOwnProperty,np=RegExp("^"+ep.call(tp).replace(Zh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ul(e){if(!fn(e)||Wh(e))return!1;var t=Yh(e)?np:$h;return t.test(Kh(e))}u(ul,"baseIsNative");var rp=ul;function cl(e,t){return e==null?void 0:e[t]}u(cl,"getValue$1");var ap=cl;function dl(e,t){var n=ap(e,t);return rp(n)?n:void 0}u(dl,"getNative");var Ai=dl,ip=Ai(Object,"create"),gr=ip;function hl(){this.__data__=gr?gr(null):{},this.size=0}u(hl,"hashClear");var op=hl;function pl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}u(pl,"hashDelete");var sp=pl,lp="__lodash_hash_undefined__",up=Object.prototype,cp=up.hasOwnProperty;function fl(e){var t=this.__data__;if(gr){var n=t[e];return n===lp?void 0:n}return cp.call(t,e)?t[e]:void 0}u(fl,"hashGet");var dp=fl,hp=Object.prototype,pp=hp.hasOwnProperty;function gl(e){var t=this.__data__;return gr?t[e]!==void 0:pp.call(t,e)}u(gl,"hashHas");var fp=gl,gp="__lodash_hash_undefined__";function vl(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gr&&t===void 0?gp:t,this}u(vl,"hashSet");var vp=vl;function wn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u(wn,"Hash");wn.prototype.clear=op;wn.prototype.delete=sp;wn.prototype.get=dp;wn.prototype.has=fp;wn.prototype.set=vp;var No=wn;function yl(){this.__data__=[],this.size=0}u(yl,"listCacheClear");var yp=yl;function ml(e,t){return e===t||e!==e&&t!==t}u(ml,"eq");var bl=ml;function xl(e,t){for(var n=e.length;n--;)if(bl(e[n][0],t))return n;return-1}u(xl,"assocIndexOf");var Ca=xl,mp=Array.prototype,bp=mp.splice;function wl(e){var t=this.__data__,n=Ca(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():bp.call(t,n,1),--this.size,!0}u(wl,"listCacheDelete");var xp=wl;function El(e){var t=this.__data__,n=Ca(t,e);return n<0?void 0:t[n][1]}u(El,"listCacheGet");var wp=El;function kl(e){return Ca(this.__data__,e)>-1}u(kl,"listCacheHas");var Ep=kl;function Cl(e,t){var n=this.__data__,r=Ca(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}u(Cl,"listCacheSet");var kp=Cl;function En(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u(En,"ListCache");En.prototype.clear=yp;En.prototype.delete=xp;En.prototype.get=wp;En.prototype.has=Ep;En.prototype.set=kp;var Cp=En,Sp=Ai(ba,"Map"),Pp=Sp;function Sl(){this.size=0,this.__data__={hash:new No,map:new(Pp||Cp),string:new No}}u(Sl,"mapCacheClear");var Tp=Sl;function Pl(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}u(Pl,"isKeyable");var _p=Pl;function Tl(e,t){var n=e.__data__;return _p(t)?n[typeof t=="string"?"string":"hash"]:n.map}u(Tl,"getMapData");var Sa=Tl;function _l(e){var t=Sa(this,e).delete(e);return this.size-=t?1:0,t}u(_l,"mapCacheDelete");var Dp=_l;function Dl(e){return Sa(this,e).get(e)}u(Dl,"mapCacheGet");var Bp=Dl;function Bl(e){return Sa(this,e).has(e)}u(Bl,"mapCacheHas");var Ip=Bl;function Il(e,t){var n=Sa(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}u(Il,"mapCacheSet");var Mp=Il;function kn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u(kn,"MapCache");kn.prototype.clear=Tp;kn.prototype.delete=Dp;kn.prototype.get=Bp;kn.prototype.has=Ip;kn.prototype.set=Mp;var Ml=kn,Ap="Expected a function";function Pa(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ap);var n=u(function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i},"memoized");return n.cache=new(Pa.Cache||Ml),n}u(Pa,"memoize");Pa.Cache=Ml;var Np=Pa,Op=500;function Al(e){var t=Np(e,function(r){return n.size===Op&&n.clear(),r}),n=t.cache;return t}u(Al,"memoizeCapped");var Lp=Al,zp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rp=/\\(\\)?/g,Fp=Lp(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(zp,function(n,r,a,o){t.push(a?o.replace(Rp,"$1"):r||n)}),t}),Nl=Fp;function Ol(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}u(Ol,"arrayMap");var Ll=Ol,Vp=1/0,Oo=Fn?Fn.prototype:void 0,Lo=Oo?Oo.toString:void 0;function Ni(e){if(typeof e=="string")return e;if(ka(e))return Ll(e,Ni)+"";if(Er(e))return Lo?Lo.call(e):"";var t=e+"";return t=="0"&&1/e==-Vp?"-0":t}u(Ni,"baseToString");var jp=Ni;function zl(e){return e==null?"":jp(e)}u(zl,"toString$1");var Rl=zl;function Fl(e,t){return ka(e)?e:Fh(e,t)?[e]:Nl(Rl(e))}u(Fl,"castPath");var Vl=Fl,qp=1/0;function jl(e){if(typeof e=="string"||Er(e))return e;var t=e+"";return t=="0"&&1/e==-qp?"-0":t}u(jl,"toKey");var Oi=jl;function ql(e,t){t=Vl(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Oi(t[n++])];return n&&n==r?e:void 0}u(ql,"baseGet");var Xp=ql;function Xl(e,t,n){var r=e==null?void 0:Xp(e,t);return r===void 0?n:r}u(Xl,"get");var Yp=Xl,Hp=function(){try{var e=Ai(Object,"defineProperty");return e({},"",{}),e}catch{}}(),zo=Hp;function Yl(e,t,n){t=="__proto__"&&zo?zo(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}u(Yl,"baseAssignValue");var Wp=Yl,Up=Object.prototype,Gp=Up.hasOwnProperty;function Hl(e,t,n){var r=e[t];(!(Gp.call(e,t)&&bl(r,n))||n===void 0&&!(t in e))&&Wp(e,t,n)}u(Hl,"assignValue");var Kp=Hl,Zp=9007199254740991,$p=/^(?:0|[1-9]\d*)$/;function Wl(e,t){var n=typeof e;return t=t??Zp,!!t&&(n=="number"||n!="symbol"&&$p.test(e))&&e>-1&&e%1==0&&e<t}u(Wl,"isIndex");var Qp=Wl;function Ul(e,t,n,r){if(!fn(e))return e;t=Vl(t,e);for(var a=-1,o=t.length,i=o-1,c=e;c!=null&&++a<o;){var l=Oi(t[a]),s=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(a!=i){var d=c[l];s=r?r(d,l,c):void 0,s===void 0&&(s=fn(d)?d:Qp(t[a+1])?[]:{})}Kp(c,l,s),c=c[l]}return e}u(Ul,"baseSet");var Jp=Ul;function Gl(e,t,n){return e==null?e:Jp(e,t,n)}u(Gl,"set");var ef=Gl;function Kl(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}u(Kl,"copyArray");var tf=Kl;function Zl(e){return ka(e)?Ll(e,Oi):Er(e)?[e]:tf(Nl(Rl(e)))}u(Zl,"toPath");var nf=Zl,rf={data:u(function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:u(function(n){},"beforeGet"),beforeSet:u(function(n,r){},"beforeSet"),onSet:u(function(n){},"onSet"),canSet:u(function(n){return!0},"canSet")};return e=ve({},t,e),u(function(n,r){var a=e,o=this,i=o.length!==void 0,c=i?o:[o],l=i?o[0]:o;if(pe(n)){var s=n.indexOf(".")!==-1,d=s&&nf(n);if(a.allowGetting&&r===void 0){var h;return l&&(a.beforeGet(l),d&&l._private[a.field][n]===void 0?h=Yp(l._private[a.field],d):h=l._private[a.field][n]),h}else if(a.allowSetting&&r!==void 0){var p=!a.immutableKeys[n];if(p){var f=wi({},n,r);a.beforeSet(o,f);for(var g=0,y=c.length;g<y;g++){var b=c[g];a.canSet(b)&&(d&&l._private[a.field][n]===void 0?ef(b._private[a.field],d,r):b._private[a.field][n]=r)}a.updateStyle&&o.updateStyle(),a.onSet(o),a.settingTriggersEvent&&o[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&Ce(n)){var v=n,m,x,E=Object.keys(v);a.beforeSet(o,v);for(var P=0;P<E.length;P++){m=E[P],x=v[m];var C=!a.immutableKeys[m];if(C)for(var w=0;w<c.length;w++){var S=c[w];a.canSet(S)&&(S._private[a.field][m]=x)}}a.updateStyle&&o.updateStyle(),a.onSet(o),a.settingTriggersEvent&&o[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&ze(n)){var I=n;o.on(a.bindingEvent,I)}else if(a.allowGetting&&n===void 0){var D;return l&&(a.beforeGet(l),D=l._private[a.field]),D}return o},"dataImpl")},"data"),removeData:u(function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=ve({},t,e),u(function(n){var r=e,a=this,o=a.length!==void 0,i=o?a:[a];if(pe(n)){for(var c=n.split(/\s+/),l=c.length,s=0;s<l;s++){var d=c[s];if(!$t(d)){var h=!r.immutableKeys[d];if(h)for(var p=0,f=i.length;p<f;p++)i[p]._private[r.field][d]=void 0}}r.triggerEvent&&a[r.triggerFnName](r.event)}else if(n===void 0){for(var g=0,y=i.length;g<y;g++)for(var b=i[g]._private[r.field],v=Object.keys(b),m=0;m<v.length;m++){var x=v[m],E=!r.immutableKeys[x];E&&(b[x]=void 0)}r.triggerEvent&&a[r.triggerFnName](r.event)}return a},"removeDataImpl")},"removeData")},af={eventAliasesOn:u(function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,r){var a=this,o=Array.prototype.slice.call(arguments,0);return new Hn(function(i,c){var l=u(function(h){a.off.apply(a,d),i(h)},"callback"),s=o.concat([l]),d=s.concat([]);a.on.apply(a,s)})}},"eventAliasesOn")},_e={};[Oh,rf,af].forEach(function(e){ve(_e,e)});var of={animate:_e.animate(),animation:_e.animation(),animated:_e.animated(),clearQueue:_e.clearQueue(),delay:_e.delay(),delayAnimation:_e.delayAnimation(),stop:_e.stop()},Kr={classes:u(function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(f){return n.push(f)}),n}else Me(e)||(e=(e||"").match(/\S+/g)||[]);for(var r=[],a=new Yn(e),o=0;o<t.length;o++){for(var i=t[o],c=i._private,l=c.classes,s=!1,d=0;d<e.length;d++){var h=e[d],p=l.has(h);if(!p){s=!0;break}}s||(s=l.size!==e.length),s&&(c.classes=a,r.push(i))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),t},"classes"),addClass:u(function(e){return this.toggleClass(e,!0)},"addClass"),hasClass:u(function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},"hasClass"),toggleClass:u(function(e,t){Me(e)||(e=e.match(/\S+/g)||[]);for(var n=this,r=t===void 0,a=[],o=0,i=n.length;o<i;o++)for(var c=n[o],l=c._private.classes,s=!1,d=0;d<e.length;d++){var h=e[d],p=l.has(h),f=!1;t||r&&!p?(l.add(h),f=!0):(!t||r&&p)&&(l.delete(h),f=!0),!s&&f&&(a.push(c),s=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},"toggleClass"),removeClass:u(function(e){return this.toggleClass(e,!1)},"removeClass"),flashClass:u(function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n},"flashClass")};Kr.className=Kr.classNames=Kr.classes;var ke={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:He,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ke.variable="(?:[\\w-.]|(?:\\\\"+ke.metaChar+"))+";ke.className="(?:[\\w-]|(?:\\\\"+ke.metaChar+"))+";ke.value=ke.string+"|"+ke.number;ke.id=ke.variable;(function(){var e,t,n;for(e=ke.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],ke.comparatorOp+="|@"+t;for(e=ke.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],!(t.indexOf("!")>=0)&&t!=="="&&(ke.comparatorOp+="|\\!"+t)})();var Ie=u(function(){return{checks:[]}},"newQuery"),oe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ei=[{selector:":selected",matches:u(function(e){return e.selected()},"matches")},{selector:":unselected",matches:u(function(e){return!e.selected()},"matches")},{selector:":selectable",matches:u(function(e){return e.selectable()},"matches")},{selector:":unselectable",matches:u(function(e){return!e.selectable()},"matches")},{selector:":locked",matches:u(function(e){return e.locked()},"matches")},{selector:":unlocked",matches:u(function(e){return!e.locked()},"matches")},{selector:":visible",matches:u(function(e){return e.visible()},"matches")},{selector:":hidden",matches:u(function(e){return!e.visible()},"matches")},{selector:":transparent",matches:u(function(e){return e.transparent()},"matches")},{selector:":grabbed",matches:u(function(e){return e.grabbed()},"matches")},{selector:":free",matches:u(function(e){return!e.grabbed()},"matches")},{selector:":removed",matches:u(function(e){return e.removed()},"matches")},{selector:":inside",matches:u(function(e){return!e.removed()},"matches")},{selector:":grabbable",matches:u(function(e){return e.grabbable()},"matches")},{selector:":ungrabbable",matches:u(function(e){return!e.grabbable()},"matches")},{selector:":animated",matches:u(function(e){return e.animated()},"matches")},{selector:":unanimated",matches:u(function(e){return!e.animated()},"matches")},{selector:":parent",matches:u(function(e){return e.isParent()},"matches")},{selector:":childless",matches:u(function(e){return e.isChildless()},"matches")},{selector:":child",matches:u(function(e){return e.isChild()},"matches")},{selector:":orphan",matches:u(function(e){return e.isOrphan()},"matches")},{selector:":nonorphan",matches:u(function(e){return e.isChild()},"matches")},{selector:":compound",matches:u(function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()},"matches")},{selector:":loop",matches:u(function(e){return e.isLoop()},"matches")},{selector:":simple",matches:u(function(e){return e.isSimple()},"matches")},{selector:":active",matches:u(function(e){return e.active()},"matches")},{selector:":inactive",matches:u(function(e){return!e.active()},"matches")},{selector:":backgrounding",matches:u(function(e){return e.backgrounding()},"matches")},{selector:":nonbackgrounding",matches:u(function(e){return!e.backgrounding()},"matches")}].sort(function(e,t){return fc(e.selector,t.selector)}),sf=function(){for(var e={},t,n=0;n<ei.length;n++)t=ei[n],e[t.selector]=t.matches;return e}(),lf=u(function(e,t){return sf[e](t)},"stateSelectorMatches"),uf="("+ei.map(function(e){return e.selector}).join("|")+")",Tn=u(function(e){return e.replace(new RegExp("\\\\("+ke.metaChar+")","g"),function(t,n){return n})},"cleanMetaChars"),Wt=u(function(e,t,n){e[e.length-1]=n},"replaceLastQuery"),ti=[{name:"group",query:!0,regex:"("+ke.group+")",populate:u(function(e,t,n){var r=mt(n,1),a=r[0];t.checks.push({type:oe.GROUP,value:a==="*"?a:a+"s"})},"populate")},{name:"state",query:!0,regex:uf,populate:u(function(e,t,n){var r=mt(n,1),a=r[0];t.checks.push({type:oe.STATE,value:a})},"populate")},{name:"id",query:!0,regex:"\\#("+ke.id+")",populate:u(function(e,t,n){var r=mt(n,1),a=r[0];t.checks.push({type:oe.ID,value:Tn(a)})},"populate")},{name:"className",query:!0,regex:"\\.("+ke.className+")",populate:u(function(e,t,n){var r=mt(n,1),a=r[0];t.checks.push({type:oe.CLASS,value:Tn(a)})},"populate")},{name:"dataExists",query:!0,regex:"\\[\\s*("+ke.variable+")\\s*\\]",populate:u(function(e,t,n){var r=mt(n,1),a=r[0];t.checks.push({type:oe.DATA_EXIST,field:Tn(a)})},"populate")},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ke.variable+")\\s*("+ke.comparatorOp+")\\s*("+ke.value+")\\s*\\]",populate:u(function(e,t,n){var r=mt(n,3),a=r[0],o=r[1],i=r[2],c=new RegExp("^"+ke.string+"$").exec(i)!=null;c?i=i.substring(1,i.length-1):i=parseFloat(i),t.checks.push({type:oe.DATA_COMPARE,field:Tn(a),operator:o,value:i})},"populate")},{name:"dataBool",query:!0,regex:"\\[\\s*("+ke.boolOp+")\\s*("+ke.variable+")\\s*\\]",populate:u(function(e,t,n){var r=mt(n,2),a=r[0],o=r[1];t.checks.push({type:oe.DATA_BOOL,field:Tn(o),operator:a})},"populate")},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ke.meta+")\\s*("+ke.comparatorOp+")\\s*("+ke.number+")\\s*\\]\\]",populate:u(function(e,t,n){var r=mt(n,3),a=r[0],o=r[1],i=r[2];t.checks.push({type:oe.META_COMPARE,field:Tn(a),operator:o,value:parseFloat(i)})},"populate")},{name:"nextQuery",separator:!0,regex:ke.separator,populate:u(function(e,t){var n=e.currentSubject,r=e.edgeCount,a=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=r,o.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var i=e[e.length++]=Ie();return i},"populate")},{name:"directedEdge",separator:!0,regex:ke.directedEdge,populate:u(function(e,t){if(e.currentSubject==null){var n=Ie(),r=t,a=Ie();return n.checks.push({type:oe.DIRECTED_EDGE,source:r,target:a}),Wt(e,t,n),e.edgeCount++,a}else{var o=Ie(),i=t,c=Ie();return o.checks.push({type:oe.NODE_SOURCE,source:i,target:c}),Wt(e,t,o),e.edgeCount++,c}},"populate")},{name:"undirectedEdge",separator:!0,regex:ke.undirectedEdge,populate:u(function(e,t){if(e.currentSubject==null){var n=Ie(),r=t,a=Ie();return n.checks.push({type:oe.UNDIRECTED_EDGE,nodes:[r,a]}),Wt(e,t,n),e.edgeCount++,a}else{var o=Ie(),i=t,c=Ie();return o.checks.push({type:oe.NODE_NEIGHBOR,node:i,neighbor:c}),Wt(e,t,o),c}},"populate")},{name:"child",separator:!0,regex:ke.child,populate:u(function(e,t){if(e.currentSubject==null){var n=Ie(),r=Ie(),a=e[e.length-1];return n.checks.push({type:oe.CHILD,parent:a,child:r}),Wt(e,t,n),e.compoundCount++,r}else if(e.currentSubject===t){var o=Ie(),i=e[e.length-1],c=Ie(),l=Ie(),s=Ie(),d=Ie();return o.checks.push({type:oe.COMPOUND_SPLIT,left:i,right:c,subject:l}),l.checks=t.checks,t.checks=[{type:oe.TRUE}],d.checks.push({type:oe.TRUE}),c.checks.push({type:oe.PARENT,parent:d,child:s}),Wt(e,i,o),e.currentSubject=l,e.compoundCount++,s}else{var h=Ie(),p=Ie(),f=[{type:oe.PARENT,parent:h,child:p}];return h.checks=t.checks,t.checks=f,e.compoundCount++,p}},"populate")},{name:"descendant",separator:!0,regex:ke.descendant,populate:u(function(e,t){if(e.currentSubject==null){var n=Ie(),r=Ie(),a=e[e.length-1];return n.checks.push({type:oe.DESCENDANT,ancestor:a,descendant:r}),Wt(e,t,n),e.compoundCount++,r}else if(e.currentSubject===t){var o=Ie(),i=e[e.length-1],c=Ie(),l=Ie(),s=Ie(),d=Ie();return o.checks.push({type:oe.COMPOUND_SPLIT,left:i,right:c,subject:l}),l.checks=t.checks,t.checks=[{type:oe.TRUE}],d.checks.push({type:oe.TRUE}),c.checks.push({type:oe.ANCESTOR,ancestor:d,descendant:s}),Wt(e,i,o),e.currentSubject=l,e.compoundCount++,s}else{var h=Ie(),p=Ie(),f=[{type:oe.ANCESTOR,ancestor:h,descendant:p}];return h.checks=t.checks,t.checks=f,e.compoundCount++,p}},"populate")},{name:"subject",modifier:!0,regex:ke.subject,populate:u(function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return De("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],r=n.checks[0],a=r==null?null:r.type;a===oe.DIRECTED_EDGE?r.type=oe.NODE_TARGET:a===oe.UNDIRECTED_EDGE&&(r.type=oe.NODE_NEIGHBOR,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)},"populate")}];ti.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var cf=u(function(e){for(var t,n,r,a=0;a<ti.length;a++){var o=ti[a],i=o.name,c=e.match(o.regexObj);if(c!=null){n=c,t=o,r=i;var l=c[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:r,remaining:e}},"consumeExpr"),df=u(function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},"consumeWhitespace"),hf=u(function(e){var t=this,n=t.inputText=e,r=t[0]=Ie();for(t.length=1,n=df(n);;){var a=cf(n);if(a.expr==null)return De("The selector `"+e+"`is invalid"),!1;var o=a.match.slice(1),i=a.expr.populate(t,r,o);if(i===!1)return!1;if(i!=null&&(r=i),n=a.remaining,n.match(/^\s*$/))break}var c=t[t.length-1];t.currentSubject!=null&&(c.subject=t.currentSubject),c.edgeCount=t.edgeCount,c.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var s=t[l];if(s.compoundCount>0&&s.edgeCount>0)return De("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(s.edgeCount>1)return De("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;s.edgeCount===1&&De("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},"parse"),pf=u(function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=u(function(l){return l??""},"clean"),t=u(function(l){return pe(l)?'"'+l+'"':e(l)},"cleanVal"),n=u(function(l){return" "+l+" "},"space"),r=u(function(l,s){var d=l.type,h=l.value;switch(d){case oe.GROUP:{var p=e(h);return p.substring(0,p.length-1)}case oe.DATA_COMPARE:{var f=l.field,g=l.operator;return"["+f+n(e(g))+t(h)+"]"}case oe.DATA_BOOL:{var y=l.operator,b=l.field;return"["+e(y)+b+"]"}case oe.DATA_EXIST:{var v=l.field;return"["+v+"]"}case oe.META_COMPARE:{var m=l.operator,x=l.field;return"[["+x+n(e(m))+t(h)+"]]"}case oe.STATE:return h;case oe.ID:return"#"+h;case oe.CLASS:return"."+h;case oe.PARENT:case oe.CHILD:return a(l.parent,s)+n(">")+a(l.child,s);case oe.ANCESTOR:case oe.DESCENDANT:return a(l.ancestor,s)+" "+a(l.descendant,s);case oe.COMPOUND_SPLIT:{var E=a(l.left,s),P=a(l.subject,s),C=a(l.right,s);return E+(E.length>0?" ":"")+P+C}case oe.TRUE:return""}},"checkToString"),a=u(function(l,s){return l.checks.reduce(function(d,h,p){return d+(s===l&&p===0?"$":"")+r(h,s)},"")},"queryToString"),o="",i=0;i<this.length;i++){var c=this[i];o+=a(c,c.subject),this.length>1&&i<this.length-1&&(o+=", ")}return this.toStringCache=o,o},"toString"),ff={parse:hf,toString:pf},$l=u(function(e,t,n){var r,a=pe(e),o=re(e),i=pe(n),c,l,s=!1,d=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),d=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),s=!0),(a||i||s)&&(c=!a&&!o?"":""+e,l=""+n),s&&(e=c=c.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":r=c.indexOf(l)>=0;break;case"$=":r=c.indexOf(l,c.length-l.length)>=0;break;case"^=":r=c.indexOf(l)===0;break;case"=":r=e===n;break;case">":h=!0,r=e>n;break;case">=":h=!0,r=e>=n;break;case"<":h=!0,r=e<n;break;case"<=":h=!0,r=e<=n;break;default:r=!1;break}return d&&(e!=null||!h)&&(r=!r),r},"valCmp"),gf=u(function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},"boolCmp"),vf=u(function(e){return e!==void 0},"existCmp"),Li=u(function(e,t){return e.data(t)},"data"),yf=u(function(e,t){return e[t]()},"meta"),Fe=[],Oe=u(function(e,t){return e.checks.every(function(n){return Fe[n.type](n,t)})},"matches");Fe[oe.GROUP]=function(e,t){var n=e.value;return n==="*"||n===t.group()};Fe[oe.STATE]=function(e,t){var n=e.value;return lf(n,t)};Fe[oe.ID]=function(e,t){var n=e.value;return t.id()===n};Fe[oe.CLASS]=function(e,t){var n=e.value;return t.hasClass(n)};Fe[oe.META_COMPARE]=function(e,t){var n=e.field,r=e.operator,a=e.value;return $l(yf(t,n),r,a)};Fe[oe.DATA_COMPARE]=function(e,t){var n=e.field,r=e.operator,a=e.value;return $l(Li(t,n),r,a)};Fe[oe.DATA_BOOL]=function(e,t){var n=e.field,r=e.operator;return gf(Li(t,n),r)};Fe[oe.DATA_EXIST]=function(e,t){var n=e.field;return e.operator,vf(Li(t,n))};Fe[oe.UNDIRECTED_EDGE]=function(e,t){var n=e.nodes[0],r=e.nodes[1],a=t.source(),o=t.target();return Oe(n,a)&&Oe(r,o)||Oe(r,a)&&Oe(n,o)};Fe[oe.NODE_NEIGHBOR]=function(e,t){return Oe(e.node,t)&&t.neighborhood().some(function(n){return n.isNode()&&Oe(e.neighbor,n)})};Fe[oe.DIRECTED_EDGE]=function(e,t){return Oe(e.source,t.source())&&Oe(e.target,t.target())};Fe[oe.NODE_SOURCE]=function(e,t){return Oe(e.source,t)&&t.outgoers().some(function(n){return n.isNode()&&Oe(e.target,n)})};Fe[oe.NODE_TARGET]=function(e,t){return Oe(e.target,t)&&t.incomers().some(function(n){return n.isNode()&&Oe(e.source,n)})};Fe[oe.CHILD]=function(e,t){return Oe(e.child,t)&&Oe(e.parent,t.parent())};Fe[oe.PARENT]=function(e,t){return Oe(e.parent,t)&&t.children().some(function(n){return Oe(e.child,n)})};Fe[oe.DESCENDANT]=function(e,t){return Oe(e.descendant,t)&&t.ancestors().some(function(n){return Oe(e.ancestor,n)})};Fe[oe.ANCESTOR]=function(e,t){return Oe(e.ancestor,t)&&t.descendants().some(function(n){return Oe(e.descendant,n)})};Fe[oe.COMPOUND_SPLIT]=function(e,t){return Oe(e.subject,t)&&Oe(e.left,t)&&Oe(e.right,t)};Fe[oe.TRUE]=function(){return!0};Fe[oe.COLLECTION]=function(e,t){var n=e.value;return n.has(t)};Fe[oe.FILTER]=function(e,t){var n=e.value;return n(t)};var mf=u(function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===oe.ID)return e.getElementById(t[0].checks[0].value).collection();var n=u(function(r){for(var a=0;a<t.length;a++){var o=t[a];if(Oe(o,r))return!0}return!1},"selectorFunction");return t.text()==null&&(n=u(function(){return!0},"selectorFunction")),e.filter(n)},"filter"),bf=u(function(e){for(var t=this,n=0;n<t.length;n++){var r=t[n];if(Oe(r,e))return!0}return!1},"matches"),xf={matches:bf,filter:mf},Jt=u(function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||pe(e)&&e.match(/^\s*$/)||(gt(e)?this.addQuery({checks:[{type:oe.COLLECTION,value:e.collection()}]}):ze(e)?this.addQuery({checks:[{type:oe.FILTER,value:e}]}):pe(e)?this.parse(e)||(this.invalid=!0):Re("A selector must be created from a string; found "))},"Selector"),en=Jt.prototype;[ff,xf].forEach(function(e){return ve(en,e)});en.text=function(){return this.inputText};en.size=function(){return this.length};en.eq=function(e){return this[e]};en.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()};en.addQuery=function(e){this[this.length++]=e};en.selector=en.toString;var Kt={allAre:u(function(e){var t=new Jt(e);return this.every(function(n){return t.matches(n)})},"allAre"),is:u(function(e){var t=new Jt(e);return this.some(function(n){return t.matches(n)})},"is"),some:u(function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},"some"),every:u(function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},"every"),same:u(function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(r){return e.hasElementWithId(r.id())})},"same"),anySame:u(function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},"anySame"),allAreNeighbors:u(function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},"allAreNeighbors"),contains:u(function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})},"contains")};Kt.allAreNeighbours=Kt.allAreNeighbors;Kt.has=Kt.contains;Kt.equal=Kt.equals=Kt.same;var xt=u(function(e,t){return u(function(n,r,a,o){var i=n,c=this,l;if(i==null?l="":gt(i)&&i.length===1&&(l=i.id()),c.length===1&&l){var s=c[0]._private,d=s.traversalCache=s.traversalCache||{},h=d[t]=d[t]||[],p=gn(l),f=h[p];return f||(h[p]=e.call(c,n,r,a,o))}else return e.call(c,n,r,a,o)},"traversalCache")},"cache"),qn={parent:u(function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var a=this[r],o=a._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},"parent"),parents:u(function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var a=n[r];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},"parents"),commonAncestors:u(function(e){for(var t,n=0;n<this.length;n++){var r=this[n],a=r.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},"commonAncestors"),orphans:u(function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},"orphans"),nonorphans:u(function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},"nonorphans"),children:xt(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n],a=r._private.children,o=0;o<a.length;o++)t.push(a[o]);return this.spawn(t,!0).filter(e)},"children"),siblings:u(function(e){return this.parent().children().not(this).filter(e)},"siblings"),isParent:u(function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},"isParent"),isChildless:u(function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},"isChildless"),isChild:u(function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},"isChild"),isOrphan:u(function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},"isOrphan"),descendants:u(function(e){var t=[];function n(r){for(var a=0;a<r.length;a++){var o=r[a];t.push(o),o.children().nonempty()&&n(o.children())}}return u(n,"add"),n(this.children()),this.spawn(t,!0).filter(e)},"descendants")};function Ta(e,t,n,r){for(var a=[],o=new Yn,i=e.cy(),c=i.hasCompoundNodes(),l=0;l<e.length;l++){var s=e[l];n?a.push(s):c&&r(a,o,s)}for(;a.length>0;){var d=a.shift();t(d),o.add(d.id()),c&&r(a,o,d)}return e}u(Ta,"forEachCompound");function zi(e,t,n){if(n.isParent())for(var r=n._private.children,a=0;a<r.length;a++){var o=r[a];t.has(o.id())||e.push(o)}}u(zi,"addChildren");qn.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ta(this,e,t,zi)};function Ri(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}u(Ri,"addParent");qn.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ta(this,e,t,Ri)};function Ql(e,t,n){Ri(e,t,n),zi(e,t,n)}u(Ql,"addParentAndChildren");qn.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ta(this,e,t,Ql)};qn.ancestors=qn.parents;var vr,Jl;vr=Jl={data:_e.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:_e.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:_e.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:_e.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:_e.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:_e.removeData({field:"rscratch",triggerEvent:!1}),id:u(function(){var e=this[0];if(e)return e._private.data.id},"id")};vr.attr=vr.data;vr.removeAttr=vr.removeData;var wf=Jl,_a={};function Zr(e){return function(t){var n=this;if(t===void 0&&(t=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var r=0,a=n[0],o=a._private.edges,i=0;i<o.length;i++){var c=o[i];!t&&c.isLoop()||(r+=e(a,c))}return r}else return}}u(Zr,"defineDegreeFunction");ve(_a,{degree:Zr(function(e,t){return t.source().same(t.target())?2:1}),indegree:Zr(function(e,t){return t.target().same(e)?1:0}),outdegree:Zr(function(e,t){return t.source().same(e)?1:0})});function ln(e,t){return function(n){for(var r,a=this.nodes(),o=0;o<a.length;o++){var i=a[o],c=i[e](n);c!==void 0&&(r===void 0||t(c,r))&&(r=c)}return r}}u(ln,"defineDegreeBoundsFunction");ve(_a,{minDegree:ln("degree",function(e,t){return e<t}),maxDegree:ln("degree",function(e,t){return e>t}),minIndegree:ln("indegree",function(e,t){return e<t}),maxIndegree:ln("indegree",function(e,t){return e>t}),minOutdegree:ln("outdegree",function(e,t){return e<t}),maxOutdegree:ln("outdegree",function(e,t){return e>t})});ve(_a,{totalDegree:u(function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t},"totalDegree")});var _t,eu,tu=u(function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if(!a.locked()){var o=a._private.position,i={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};a.isParent()&&!(i.x===0&&i.y===0)&&a.children().shift(i,n),a.dirtyBoundingBoxCache()}}},"beforePositionSet"),Ro={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:u(function(e){e.updateCompoundBounds()},"beforeGet"),beforeSet:u(function(e,t){tu(e,t,!1)},"beforeSet"),onSet:u(function(e){e.dirtyCompoundBoundsCache()},"onSet"),canSet:u(function(e){return!e.locked()},"canSet")};_t=eu={position:_e.data(Ro),silentPosition:_e.data(ve({},Ro,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:u(function(e,t){tu(e,t,!0)},"beforeSet"),onSet:u(function(e){e.dirtyCompoundBoundsCache()},"onSet")})),positions:u(function(e,t){if(Ce(e))t?this.silentPosition(e):this.position(e);else if(ze(e)){var n=e,r=this.cy();r.startBatch();for(var a=0;a<this.length;a++){var o=this[a],i=void 0;(i=n(o,a))&&(t?o.silentPosition(i):o.position(i))}r.endBatch()}return this},"positions"),silentPositions:u(function(e){return this.positions(e,!0)},"silentPositions"),shift:u(function(e,t,n){var r;if(Ce(e)?(r={x:re(e.x)?e.x:0,y:re(e.y)?e.y:0},n=t):pe(e)&&re(t)&&(r={x:0,y:0},r[e]=t),r!=null){var a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var i=this[o];if(!(a.hasCompoundNodes()&&i.isChild()&&i.ancestors().anySame(this))){var c=i.position(),l={x:c.x+r.x,y:c.y+r.y};n?i.silentPosition(l):i.position(l)}}a.endBatch()}return this},"shift"),silentShift:u(function(e,t){return Ce(e)?this.shift(e,!0):pe(e)&&re(t)&&this.shift(e,t,!0),this},"silentShift"),renderedPosition:u(function(e,t){var n=this[0],r=this.cy(),a=r.zoom(),o=r.pan(),i=Ce(e)?e:void 0,c=i!==void 0||t!==void 0&&pe(e);if(n&&n.isNode())if(c)for(var l=0;l<this.length;l++){var s=this[l];t!==void 0?s.position(e,(t-o[e])/a):i!==void 0&&s.position(Xs(i,a,o))}else{var d=n.position();return i=Ea(d,a,o),e===void 0?i:i[e]}else if(!c)return;return this},"renderedPosition"),relativePosition:u(function(e,t){var n=this[0],r=this.cy(),a=Ce(e)?e:void 0,o=a!==void 0||t!==void 0&&pe(e),i=r.hasCompoundNodes();if(n&&n.isNode())if(o)for(var c=0;c<this.length;c++){var l=this[c],s=i?l.parent():null,d=s&&s.length>0,h=d;d&&(s=s[0]);var p=h?s.position():{x:0,y:0};t!==void 0?l.position(e,t+p[e]):a!==void 0&&l.position({x:a.x+p.x,y:a.y+p.y})}else{var f=n.position(),g=i?n.parent():null,y=g&&g.length>0,b=y;y&&(g=g[0]);var v=b?g.position():{x:0,y:0};return a={x:f.x-v.x,y:f.y-v.y},e===void 0?a:a[e]}else if(!o)return;return this},"relativePosition")};_t.modelPosition=_t.point=_t.position;_t.modelPositions=_t.points=_t.positions;_t.renderedPoint=_t.renderedPosition;_t.relativePoint=_t.relativePosition;var Ef=eu,Rn,nn;Rn=nn={};nn.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),a=n.pan(),o=t.x1*r+a.x,i=t.x2*r+a.x,c=t.y1*r+a.y,l=t.y2*r+a.y;return{x1:o,x2:i,y1:c,y2:l,w:i-o,h:l-c}};nn.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();return!t.styleEnabled()||!t.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,e||n.emitAndNotify("bounds")}}),this)};nn.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function n(i){if(!i.isParent())return;var c=i._private,l=i.children(),s=i.pstyle("compound-sizing-wrt-labels").value==="include",d={width:{val:i.pstyle("min-width").pfValue,left:i.pstyle("min-width-bias-left"),right:i.pstyle("min-width-bias-right")},height:{val:i.pstyle("min-height").pfValue,top:i.pstyle("min-height-bias-top"),bottom:i.pstyle("min-height-bias-bottom")}},h=l.boundingBox({includeLabels:s,includeOverlays:!1,useCache:!1}),p=c.position;(h.w===0||h.h===0)&&(h={w:i.pstyle("width").pfValue,h:i.pstyle("height").pfValue},h.x1=p.x-h.w/2,h.x2=p.x+h.w/2,h.y1=p.y-h.h/2,h.y2=p.y+h.h/2);function f(I,D,B){var T=0,M=0,_=D+B;return I>0&&_>0&&(T=D/_*I,M=B/_*I),{biasDiff:T,biasComplementDiff:M}}u(f,"computeBiasValues");function g(I,D,B,T){if(B.units==="%")switch(T){case"width":return I>0?B.pfValue*I:0;case"height":return D>0?B.pfValue*D:0;case"average":return I>0&&D>0?B.pfValue*(I+D)/2:0;case"min":return I>0&&D>0?I>D?B.pfValue*D:B.pfValue*I:0;case"max":return I>0&&D>0?I>D?B.pfValue*I:B.pfValue*D:0;default:return 0}else return B.units==="px"?B.pfValue:0}u(g,"computePaddingValues");var y=d.width.left.value;d.width.left.units==="px"&&d.width.val>0&&(y=y*100/d.width.val);var b=d.width.right.value;d.width.right.units==="px"&&d.width.val>0&&(b=b*100/d.width.val);var v=d.height.top.value;d.height.top.units==="px"&&d.height.val>0&&(v=v*100/d.height.val);var m=d.height.bottom.value;d.height.bottom.units==="px"&&d.height.val>0&&(m=m*100/d.height.val);var x=f(d.width.val-h.w,y,b),E=x.biasDiff,P=x.biasComplementDiff,C=f(d.height.val-h.h,v,m),w=C.biasDiff,S=C.biasComplementDiff;c.autoPadding=g(h.w,h.h,i.pstyle("padding"),i.pstyle("padding-relative-to").value),c.autoWidth=Math.max(h.w,d.width.val),p.x=(-E+h.x1+h.x2+P)/2,c.autoHeight=Math.max(h.h,d.height.val),p.y=(-w+h.y1+h.y2+S)/2}u(n,"update");for(var r=0;r<this.length;r++){var a=this[r],o=a._private;(!o.compoundBoundsClean||e)&&(n(a),t.batching()||(o.compoundBoundsClean=!0))}return this};var bt=u(function(e){return e===1/0||e===-1/0?0:e},"noninf"),Pt=u(function(e,t,n,r,a){r-t===0||a-n===0||t==null||n==null||r==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},"updateBounds"),un=u(function(e,t){return t==null?e:Pt(e,t.x1,t.y1,t.x2,t.y2)},"updateBoundsFromBox"),er=u(function(e,t,n){return Tt(e,t,n)},"prefixedProperty"),qr=u(function(e,t,n){if(!t.cy().headless()){var r=t._private,a=r.rstyle,o=a.arrowWidth/2,i=t.pstyle(n+"-arrow-shape").value,c,l;if(i!=="none"){n==="source"?(c=a.srcX,l=a.srcY):n==="target"?(c=a.tgtX,l=a.tgtY):(c=a.midX,l=a.midY);var s=r.arrowBounds=r.arrowBounds||{},d=s[n]=s[n]||{};d.x1=c-o,d.y1=l-o,d.x2=c+o,d.y2=l+o,d.w=d.x2-d.x1,d.h=d.y2-d.y1,Ur(d,1),Pt(e,d.x1,d.y1,d.x2,d.y2)}}},"updateBoundsFromArrow"),Ya=u(function(e,t,n){if(!t.cy().headless()){var r;n?r=n+"-":r="";var a=t._private,o=a.rstyle,i=t.pstyle(r+"label").strValue;if(i){var c=t.pstyle("text-halign"),l=t.pstyle("text-valign"),s=er(o,"labelWidth",n),d=er(o,"labelHeight",n),h=er(o,"labelX",n),p=er(o,"labelY",n),f=t.pstyle(r+"text-margin-x").pfValue,g=t.pstyle(r+"text-margin-y").pfValue,y=t.isEdge(),b=t.pstyle(r+"text-rotation"),v=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,x=m/2,E=t.pstyle("text-background-padding").pfValue,P=2,C=d,w=s,S=w/2,I=C/2,D,B,T,M;if(y)D=h-S,B=h+S,T=p-I,M=p+I;else{switch(c.value){case"left":D=h-w,B=h;break;case"center":D=h-S,B=h+S;break;case"right":D=h,B=h+w;break}switch(l.value){case"top":T=p-C,M=p;break;case"center":T=p-I,M=p+I;break;case"bottom":T=p,M=p+C;break}}D+=f-Math.max(v,x)-E-P,B+=f+Math.max(v,x)+E+P,T+=g-Math.max(v,x)-E-P,M+=g+Math.max(v,x)+E+P;var _=n||"main",O=a.labelBounds,L=O[_]=O[_]||{};L.x1=D,L.y1=T,L.x2=B,L.y2=M,L.w=B-D,L.h=M-T;var z=y&&b.strValue==="autorotate",A=b.pfValue!=null&&b.pfValue!==0;if(z||A){var R=z?er(a.rstyle,"labelAngle",n):b.pfValue,Y=Math.cos(R),V=Math.sin(R),j=(D+B)/2,W=(T+M)/2;if(!y){switch(c.value){case"left":j=B;break;case"right":j=D;break}switch(l.value){case"top":W=M;break;case"bottom":W=T;break}}var J=u(function(ne,de){return ne=ne-j,de=de-W,{x:ne*Y-de*V+j,y:ne*V+de*Y+W}},"rotate"),ae=J(D,T),Z=J(D,M),$=J(B,T),N=J(B,M);D=Math.min(ae.x,Z.x,$.x,N.x),B=Math.max(ae.x,Z.x,$.x,N.x),T=Math.min(ae.y,Z.y,$.y,N.y),M=Math.max(ae.y,Z.y,$.y,N.y)}var G=_+"Rot",U=O[G]=O[G]||{};U.x1=D,U.y1=T,U.x2=B,U.y2=M,U.w=B-D,U.h=M-T,Pt(e,D,T,B,M),Pt(a.labelBounds.all,D,T,B,M)}return e}},"updateBoundsFromLabel"),kf=u(function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,r=t.pstyle("outline-width").value;if(n>0&&r>0){var a=t.pstyle("outline-offset").value,o=t.pstyle("shape").value,i=r+a,c=(e.w+i*2)/e.w,l=(e.h+i*2)/e.h,s=0,d=0;["diamond","pentagon","round-triangle"].includes(o)?(c=(e.w+i*2.4)/e.w,d=-i/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?c=(e.w+i*2.4)/e.w:o==="star"?(c=(e.w+i*2.8)/e.w,l=(e.h+i*2.6)/e.h,d=-i/3.8):o==="triangle"?(c=(e.w+i*2.8)/e.w,l=(e.h+i*2.4)/e.h,d=-i/1.4):o==="vee"&&(c=(e.w+i*4.4)/e.w,l=(e.h+i*3.8)/e.h,d=-i*.5);var h=e.h*l-e.h,p=e.w*c-e.w;if(Gr(e,[Math.ceil(h/2),Math.ceil(p/2)]),s!=0||d!==0){var f=Bd(e,s,d);Hs(e,f)}}}},"updateBoundsFromOutline"),Cf=u(function(e,t){var n=e._private.cy,r=n.styleEnabled(),a=n.headless(),o=pt(),i=e._private,c=e.isNode(),l=e.isEdge(),s,d,h,p,f,g,y=i.rstyle,b=c&&r?e.pstyle("bounds-expansion").pfValue:[0],v=u(function(Q){return Q.pstyle("display").value!=="none"},"isDisplayed"),m=!r||v(e)&&(!l||v(e.source())&&v(e.target()));if(m){var x=0,E=0;r&&t.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(E=e.pstyle("overlay-padding").value));var P=0,C=0;r&&t.includeUnderlays&&(P=e.pstyle("underlay-opacity").value,P!==0&&(C=e.pstyle("underlay-padding").value));var w=Math.max(E,C),S=0,I=0;if(r&&(S=e.pstyle("width").pfValue,I=S/2),c&&t.includeNodes){var D=e.position();f=D.x,g=D.y;var B=e.outerWidth(),T=B/2,M=e.outerHeight(),_=M/2;s=f-T,d=f+T,h=g-_,p=g+_,Pt(o,s,h,d,p),r&&t.includeOutlines&&kf(o,e)}else if(l&&t.includeEdges)if(r&&!a){var O=e.pstyle("curve-style").strValue;if(s=Math.min(y.srcX,y.midX,y.tgtX),d=Math.max(y.srcX,y.midX,y.tgtX),h=Math.min(y.srcY,y.midY,y.tgtY),p=Math.max(y.srcY,y.midY,y.tgtY),s-=I,d+=I,h-=I,p+=I,Pt(o,s,h,d,p),O==="haystack"){var L=y.haystackPts;if(L&&L.length===2){if(s=L[0].x,h=L[0].y,d=L[1].x,p=L[1].y,s>d){var z=s;s=d,d=z}if(h>p){var A=h;h=p,p=A}Pt(o,s-I,h-I,d+I,p+I)}}else if(O==="bezier"||O==="unbundled-bezier"||O.endsWith("segments")||O.endsWith("taxi")){var R;switch(O){case"bezier":case"unbundled-bezier":R=y.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":R=y.linePts;break}if(R!=null)for(var Y=0;Y<R.length;Y++){var V=R[Y];s=V.x-I,d=V.x+I,h=V.y-I,p=V.y+I,Pt(o,s,h,d,p)}}}else{var j=e.source(),W=j.position(),J=e.target(),ae=J.position();if(s=W.x,d=ae.x,h=W.y,p=ae.y,s>d){var Z=s;s=d,d=Z}if(h>p){var $=h;h=p,p=$}s-=I,d+=I,h-=I,p+=I,Pt(o,s,h,d,p)}if(r&&t.includeEdges&&l&&(qr(o,e,"mid-source"),qr(o,e,"mid-target"),qr(o,e,"source"),qr(o,e,"target")),r){var N=e.pstyle("ghost").value==="yes";if(N){var G=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue;Pt(o,o.x1+G,o.y1+U,o.x2+G,o.y2+U)}}var ne=i.bodyBounds=i.bodyBounds||{};yo(ne,o),Gr(ne,b),Ur(ne,1),r&&(s=o.x1,d=o.x2,h=o.y1,p=o.y2,Pt(o,s-w,h-w,d+w,p+w));var de=i.overlayBounds=i.overlayBounds||{};yo(de,o),Gr(de,b),Ur(de,1);var be=i.labelBounds=i.labelBounds||{};be.all!=null?Dd(be.all):be.all=pt(),r&&t.includeLabels&&(t.includeMainLabels&&Ya(o,e,null),l&&(t.includeSourceLabels&&Ya(o,e,"source"),t.includeTargetLabels&&Ya(o,e,"target")))}return o.x1=bt(o.x1),o.y1=bt(o.y1),o.x2=bt(o.x2),o.y2=bt(o.y2),o.w=bt(o.x2-o.x1),o.h=bt(o.y2-o.y1),o.w>0&&o.h>0&&m&&(Gr(o,b),Ur(o,1)),o},"boundingBoxImpl"),nu=u(function(e){var t=0,n=u(function(a){return(a?1:0)<<t++},"tf"),r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeMainLabels),r+=n(e.includeSourceLabels),r+=n(e.includeTargetLabels),r+=n(e.includeOverlays),r+=n(e.includeOutlines),r},"getKey"),ru=u(function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),r=u(function(a){return Math.round(a)},"r");return Zc([r(t.x),r(t.y),r(n.x),r(n.y)])}else return 0},"getBoundingBoxPosKey"),Fo=u(function(e,t){var n=e._private,r,a=e.isEdge(),o=t==null?Vo:nu(t),i=o===Vo,c=ru(e),l=n.bbCachePosKey===c,s=t.useCache&&l,d=u(function(f){return f._private.bbCache==null||f._private.styleDirty},"isDirty"),h=!s||d(e)||a&&d(e.source())||d(e.target());if(h?(l||e.recalculateRenderedStyle(s),r=Cf(e,yr),n.bbCache=r,n.bbCachePosKey=c):r=n.bbCache,!i){var p=e.isNode();r=pt(),(t.includeNodes&&p||t.includeEdges&&!p)&&(t.includeOverlays?un(r,n.overlayBounds):un(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?un(r,n.labelBounds.all):(t.includeMainLabels&&un(r,n.labelBounds.mainRot),t.includeSourceLabels&&un(r,n.labelBounds.sourceRot),t.includeTargetLabels&&un(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},"cachedBoundingBoxImpl"),yr={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Vo=nu(yr),jo=et(yr);nn.boundingBox=function(e){var t;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(e===void 0||e.useCache===void 0||e.useCache===!0))e===void 0?e=yr:e=jo(e),t=Fo(this[0],e);else{t=pt(),e=e||yr;var n=jo(e),r=this,a=r.cy(),o=a.styleEnabled();if(o)for(var i=0;i<r.length;i++){var c=r[i],l=c._private,s=ru(c),d=l.bbCachePosKey===s,h=n.useCache&&d&&!l.styleDirty;c.recalculateRenderedStyle(h)}this.updateCompoundBounds(!e.useCache);for(var p=0;p<r.length;p++){var f=r[p];un(t,Fo(f,n))}}return t.x1=bt(t.x1),t.y1=bt(t.y1),t.x2=bt(t.x2),t.y2=bt(t.y2),t.w=bt(t.x2-t.x1),t.h=bt(t.y2-t.y1),t};nn.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};nn.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),a=n.collection();if(r&&(a=t.filter(function(s){return s.isParent()}),t=t.not(a)),Ce(e)){var o=e;e=u(function(){return o},"fn")}var i=u(function(s,d){return s._private.bbAtOldPos=e(s,d)},"storeOldPos"),c=u(function(s){return s._private.bbAtOldPos},"getOldPos");n.startBatch(),t.forEach(i).silentPositions(e),r&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=_d(this.boundingBox({useCache:!1}));return t.silentPositions(c),r&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),n.endBatch(),l};Rn.boundingbox=Rn.bb=Rn.boundingBox;Rn.renderedBoundingbox=Rn.renderedBoundingBox;var Sf=nn,ar,Sr;ar=Sr={};var au=u(function(e){e.uppercaseName=uo(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=uo(e.outerName),ar[e.name]=u(function(){var t=this[0],n=t._private,r=n.cy,a=r._private.styleEnabled;if(t)if(a){if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var o=t.pstyle(e.name);switch(o.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},"dimImpl"),ar["outer"+e.uppercaseName]=u(function(){var t=this[0],n=t._private,r=n.cy,a=r._private.styleEnabled;if(t)if(a){var o=t[e.name](),i=t.pstyle("border-width").pfValue,c=2*t.padding();return o+i+c}else return 1},"outerDimImpl"),ar["rendered"+e.uppercaseName]=u(function(){var t=this[0];if(t){var n=t[e.name]();return n*this.cy().zoom()}},"renderedDimImpl"),ar["rendered"+e.uppercaseOuterName]=u(function(){var t=this[0];if(t){var n=t[e.outerName]();return n*this.cy().zoom()}},"renderedOuterDimImpl")},"defineDimFns");au({name:"width"});au({name:"height"});Sr.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),t.autoPadding!==void 0?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue};Sr.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()};Sr.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Pf=Sr,Tf=u(function(e,t){if(e.isEdge())return t(e)},"ifEdge"),_f=u(function(e,t){if(e.isEdge()){var n=e.cy();return Ea(t(e),n.zoom(),n.pan())}},"ifEdgeRenderedPosition"),Df=u(function(e,t){if(e.isEdge()){var n=e.cy(),r=n.pan(),a=n.zoom();return t(e).map(function(o){return Ea(o,a,r)})}},"ifEdgeRenderedPositions"),Bf=u(function(e){return e.renderer().getControlPoints(e)},"controlPoints"),If=u(function(e){return e.renderer().getSegmentPoints(e)},"segmentPoints"),Mf=u(function(e){return e.renderer().getSourceEndpoint(e)},"sourceEndpoint"),Af=u(function(e){return e.renderer().getTargetEndpoint(e)},"targetEndpoint"),Nf=u(function(e){return e.renderer().getEdgeMidpoint(e)},"midpoint"),qo={controlPoints:{get:Bf,mult:!0},segmentPoints:{get:If,mult:!0},sourceEndpoint:{get:Mf},targetEndpoint:{get:Af},midpoint:{get:Nf}},Of=u(function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},"renderedName"),Lf=Object.keys(qo).reduce(function(e,t){var n=qo[t],r=Of(t);return e[t]=function(){return Tf(this,n.get)},n.mult?e[r]=function(){return Df(this,n.get)}:e[r]=function(){return _f(this,n.get)},e},{}),zf=ve({},Ef,Sf,Pf,Lf),iu=u(function(e,t){this.recycle(e,t)},"Event");function Bn(){return!1}u(Bn,"returnFalse");function ir(){return!0}u(ir,"returnTrue");iu.prototype={instanceString:u(function(){return"event"},"instanceString"),recycle:u(function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Bn,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ir:Bn):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,r=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*r+a.x,y:n.y*r+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},"recycle"),preventDefault:u(function(){this.isDefaultPrevented=ir;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},"preventDefault"),stopPropagation:u(function(){this.isPropagationStopped=ir;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},"stopPropagation"),stopImmediatePropagation:u(function(){this.isImmediatePropagationStopped=ir,this.stopPropagation()},"stopImmediatePropagation"),isDefaultPrevented:Bn,isPropagationStopped:Bn,isImmediatePropagationStopped:Bn};var ou=/^([^.]+)(\.(?:[^.]+))?$/,Rf=".*",su={qualifierCompare:u(function(e,t){return e===t},"qualifierCompare"),eventMatches:u(function(){return!0},"eventMatches"),addEventFields:u(function(){},"addEventFields"),callbackContext:u(function(e){return e},"callbackContext"),beforeEmit:u(function(){},"beforeEmit"),afterEmit:u(function(){},"afterEmit"),bubble:u(function(){return!1},"bubble"),parent:u(function(){return null},"parent"),context:null},Xo=Object.keys(su),Ff={};function Pr(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ff,t=arguments.length>1?arguments[1]:void 0,n=0;n<Xo.length;n++){var r=Xo[n];this[r]=e[r]||su[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}u(Pr,"Emitter");var tn=Pr.prototype,lu=u(function(e,t,n,r,a,o,i){ze(r)&&(a=r,r=null),i&&(o==null?o=i:o=ve({},o,i));for(var c=Me(n)?n:n.split(/\s+/),l=0;l<c.length;l++){var s=c[l];if(!$t(s)){var d=s.match(ou);if(d){var h=d[1],p=d[2]?d[2]:null,f=t(e,s,h,p,r,a,o);if(f===!1)break}}}},"forEachEvent"),Yo=u(function(e,t){return e.addEventFields(e.context,t),new iu(t.type,t)},"makeEventObj"),Vf=u(function(e,t,n){if(rc(n)){t(e,n);return}else if(Ce(n)){t(e,Yo(e,n));return}for(var r=Me(n)?n:n.split(/\s+/),a=0;a<r.length;a++){var o=r[a];if(!$t(o)){var i=o.match(ou);if(i){var c=i[1],l=i[2]?i[2]:null,s=Yo(e,{type:c,namespace:l,target:e.context});t(e,s)}}}},"forEachEventObj");tn.on=tn.addListener=function(e,t,n,r,a){return lu(this,function(o,i,c,l,s,d,h){ze(d)&&o.listeners.push({event:i,callback:d,type:c,namespace:l,qualifier:s,conf:h})},e,t,n,r,a),this};tn.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})};tn.removeListener=tn.off=function(e,t,n,r){var a=this;this.emitting!==0&&(this.listeners=td(this.listeners));for(var o=this.listeners,i=u(function(l){var s=o[l];lu(a,function(d,h,p,f,g,y){if((s.type===p||e==="*")&&(!f&&s.namespace!==".*"||s.namespace===f)&&(!g||d.qualifierCompare(s.qualifier,g))&&(!y||s.callback===y))return o.splice(l,1),!1},e,t,n,r)},"_loop"),c=o.length-1;c>=0;c--)i(c);return this};tn.removeAllListeners=function(){return this.removeListener("*")};tn.emit=tn.trigger=function(e,t,n){var r=this.listeners,a=r.length;return this.emitting++,Me(t)||(t=[t]),Vf(this,function(o,i){n!=null&&(r=[{event:i.event,type:i.type,namespace:i.namespace,callback:n}],a=r.length);for(var c=u(function(s){var d=r[s];if(d.type===i.type&&(!d.namespace||d.namespace===i.namespace||d.namespace===Rf)&&o.eventMatches(o.context,d,i)){var h=[i];t!=null&&rd(h,t),o.beforeEmit(o.context,d,i),d.conf&&d.conf.one&&(o.listeners=o.listeners.filter(function(g){return g!==d}));var p=o.callbackContext(o.context,d,i),f=d.callback.apply(p,h);o.afterEmit(o.context,d,i),f===!1&&(i.stopPropagation(),i.preventDefault())}},"_loop2"),l=0;l<a;l++)c(l);o.bubble(o.context)&&!i.isPropagationStopped()&&o.parent(o.context).emit(i,t)},e),this.emitting--,this};var jf={qualifierCompare:u(function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},"qualifierCompare"),eventMatches:u(function(e,t,n){var r=t.qualifier;return r!=null?e!==n.target&&wr(n.target)&&r.matches(n.target):!0},"eventMatches"),addEventFields:u(function(e,t){t.cy=e.cy(),t.target=e},"addEventFields"),callbackContext:u(function(e,t,n){return t.qualifier!=null?n.target:e},"callbackContext"),beforeEmit:u(function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},"beforeEmit"),bubble:u(function(){return!0},"bubble"),parent:u(function(e){return e.isChild()?e.parent():e.cy()},"parent")},Xr=u(function(e){return pe(e)?new Jt(e):e},"argSelector"),uu={createEmitter:u(function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Pr(jf,t))}return this},"createEmitter"),emitter:u(function(){return this._private.emitter},"emitter"),on:u(function(e,t,n){for(var r=Xr(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,r,n)}return this},"on"),removeListener:u(function(e,t,n){for(var r=Xr(t),a=0;a<this.length;a++){var o=this[a];o.emitter().removeListener(e,r,n)}return this},"removeListener"),removeAllListeners:u(function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},"removeAllListeners"),one:u(function(e,t,n){for(var r=Xr(t),a=0;a<this.length;a++){var o=this[a];o.emitter().one(e,r,n)}return this},"one"),once:u(function(e,t,n){for(var r=Xr(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,r,n,{once:!0,onceCollection:this})}},"once"),emit:u(function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.emitter().emit(e,t)}return this},"emit"),emitAndNotify:u(function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this},"emitAndNotify")};_e.eventAliasesOn(uu);var cu={nodes:u(function(e){return this.filter(function(t){return t.isNode()}).filter(e)},"nodes"),edges:u(function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},"edges"),byGroup:u(function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):t.push(r)}return{nodes:e,edges:t}},"byGroup"),filter:u(function(e,t){if(e===void 0)return this;if(pe(e)||gt(e))return new Jt(e).filter(this);if(ze(e)){for(var n=this.spawn(),r=this,a=0;a<r.length;a++){var o=r[a],i=t?e.apply(t,[o,a,r]):e(o,a,r);i&&n.push(o)}return n}return this.spawn()},"filter"),not:u(function(e){if(e){pe(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var r=this[n],a=e.has(r);a||t.push(r)}return t}else return this},"not"),absoluteComplement:u(function(){var e=this.cy();return e.mutableElements().not(this)},"absoluteComplement"),intersect:u(function(e){if(pe(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),r=this,a=e,o=this.length<e.length,i=o?r:a,c=o?a:r,l=0;l<i.length;l++){var s=i[l];c.has(s)&&n.push(s)}return n},"intersect"),xor:u(function(e){var t=this._private.cy;pe(e)&&(e=t.$(e));var n=this.spawn(),r=this,a=e,o=u(function(i,c){for(var l=0;l<i.length;l++){var s=i[l],d=s._private.data.id,h=c.hasElementWithId(d);h||n.push(s)}},"add");return o(r,a),o(a,r),n},"xor"),diff:u(function(e){var t=this._private.cy;pe(e)&&(e=t.$(e));var n=this.spawn(),r=this.spawn(),a=this.spawn(),o=this,i=e,c=u(function(l,s,d){for(var h=0;h<l.length;h++){var p=l[h],f=p._private.data.id,g=s.hasElementWithId(f);g?a.merge(p):d.push(p)}},"add");return c(o,i,n),c(i,o,r),{left:n,right:r,both:a}},"diff"),add:u(function(e){var t=this._private.cy;if(!e)return this;if(pe(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=this.spawnSelf(),a=0;a<e.length;a++){var o=e[a],i=!this.has(o);i&&r.push(o)}return r},"add"),merge:u(function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&pe(e)){var r=e;e=n.mutableElements().filter(r)}for(var a=t.map,o=0;o<e.length;o++){var i=e[o],c=i._private.data.id,l=!a.has(c);if(l){var s=this.length++;this[s]=i,a.set(c,{ele:i,index:s})}}return this},"merge"),unmergeAt:u(function(e){var t=this[e],n=t.id(),r=this._private,a=r.map;this[e]=void 0,a.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var i=this.length-1,c=this[i],l=c._private.data.id;this[i]=void 0,this[e]=c,a.set(l,{ele:c,index:e})}return this.length--,this},"unmergeAt"),unmergeOne:u(function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map,a=r.get(n);if(!a)return this;var o=a.index;return this.unmergeAt(o),this},"unmergeOne"),unmerge:u(function(e){var t=this._private.cy;if(!e)return this;if(e&&pe(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},"unmerge"),unmergeBy:u(function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},"unmergeBy"),map:u(function(e,t){for(var n=[],r=this,a=0;a<r.length;a++){var o=r[a],i=t?e.apply(t,[o,a,r]):e(o,a,r);n.push(i)}return n},"map"),reduce:u(function(e,t){for(var n=t,r=this,a=0;a<r.length;a++)n=e(n,r[a],a,r);return n},"reduce"),max:u(function(e,t){for(var n=-1/0,r,a=this,o=0;o<a.length;o++){var i=a[o],c=t?e.apply(t,[i,o,a]):e(i,o,a);c>n&&(n=c,r=i)}return{value:n,ele:r}},"max"),min:u(function(e,t){for(var n=1/0,r,a=this,o=0;o<a.length;o++){var i=a[o],c=t?e.apply(t,[i,o,a]):e(i,o,a);c<n&&(n=c,r=i)}return{value:n,ele:r}},"min")},Te=cu;Te.u=Te["|"]=Te["+"]=Te.union=Te.or=Te.add;Te["\\"]=Te["!"]=Te["-"]=Te.difference=Te.relativeComplement=Te.subtract=Te.not;Te.n=Te["&"]=Te["."]=Te.and=Te.intersection=Te.intersect;Te["^"]=Te["(+)"]=Te["(-)"]=Te.symmetricDifference=Te.symdiff=Te.xor;Te.fnFilter=Te.filterFn=Te.stdFilter=Te.filter;Te.complement=Te.abscomp=Te.absoluteComplement;var qf={isNode:u(function(){return this.group()==="nodes"},"isNode"),isEdge:u(function(){return this.group()==="edges"},"isEdge"),isLoop:u(function(){return this.isEdge()&&this.source()[0]===this.target()[0]},"isLoop"),isSimple:u(function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},"isSimple"),group:u(function(){var e=this[0];if(e)return e._private.group},"group")},du=u(function(e,t){var n=e.cy(),r=n.hasCompoundNodes();function a(s){var d=s.pstyle("z-compound-depth");return d.value==="auto"?r?s.zDepth():0:d.value==="bottom"?-1:d.value==="top"?Pi:0}u(a,"getDepth");var o=a(e)-a(t);if(o!==0)return o;function i(s){var d=s.pstyle("z-index-compare");return d.value==="auto"&&s.isNode()?1:0}u(i,"getEleDepth");var c=i(e)-i(t);if(c!==0)return c;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},"zIndexSort"),da={forEach:u(function(e,t){if(ze(e))for(var n=this.length,r=0;r<n;r++){var a=this[r],o=t?e.apply(t,[a,r,this]):e(a,r,this);if(o===!1)break}return this},"forEach"),toArray:u(function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},"toArray"),slice:u(function(e,t){var n=[],r=this.length;t==null&&(t=r),e==null&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var a=e;a>=0&&a<t&&a<r;a++)n.push(this[a]);return this.spawn(n)},"slice"),size:u(function(){return this.length},"size"),eq:u(function(e){return this[e]||this.spawn()},"eq"),first:u(function(){return this[0]||this.spawn()},"first"),last:u(function(){return this[this.length-1]||this.spawn()},"last"),empty:u(function(){return this.length===0},"empty"),nonempty:u(function(){return!this.empty()},"nonempty"),sort:u(function(e){if(!ze(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},"sort"),sortByZIndex:u(function(){return this.sort(du)},"sortByZIndex"),zDepth:u(function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:Pi-1}else{var a=t.source,o=t.target,i=a.zDepth(),c=o.zDepth();return Math.max(i,c,0)}}},"zDepth")};da.each=da.forEach;var Xf=u(function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Ve(Symbol))!=e&&Ve(Symbol.iterator)!=e;t&&(da[Symbol.iterator]=function(){var n=this,r={value:void 0,done:!1},a=0,o=this.length;return wi({next:u(function(){return a<o?r.value=n[a++]:(r.value=void 0,r.done=!0),r},"next")},Symbol.iterator,function(){return this})})},"defineSymbolIterator");Xf();var Yf=et({nodeDimensionsIncludeLabels:!1}),$r={layoutDimensions:u(function(e){e=Yf(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},"layoutDimensions"),layoutPositions:u(function(e,t,n){var r=this.nodes().filter(function(E){return!E.isParent()}),a=this.cy(),o=t.eles,i=u(function(E){return E.id()},"getMemoizeKey"),c=ur(n,i);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=u(function(E,P,C){var w={x:P.x1+P.w/2,y:P.y1+P.h/2},S={x:(C.x-w.x)*E,y:(C.y-w.y)*E};return{x:w.x+S.x,y:w.y+S.y}},"calculateSpacing"),s=t.spacingFactor&&t.spacingFactor!==1,d=u(function(){if(!s)return null;for(var E=pt(),P=0;P<r.length;P++){var C=r[P],w=c(C,P);Id(E,w.x,w.y)}return E},"spacingBb"),h=d(),p=ur(function(E,P){var C=c(E,P);if(s){var w=Math.abs(t.spacingFactor);C=l(w,h,C)}return t.transform!=null&&(C=t.transform(E,C)),C},i);if(t.animate){for(var f=0;f<r.length;f++){var g=r[f],y=p(g,f),b=t.animateFilter==null||t.animateFilter(g,f);if(b){var v=g.animation({position:y,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}else g.position(y)}if(t.fit){var m=a.animation({fit:{boundingBox:o.boundingBoxAt(p),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var x=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}e.animations.forEach(function(E){return E.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Hn.all(e.animations.map(function(E){return E.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(p),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},"layoutPositions"),layout:u(function(e){var t=this.cy();return t.makeLayout(ve({},e,{eles:this}))},"layout")};$r.createLayout=$r.makeLayout=$r.layout;function Fi(e,t,n){var r=n._private,a=r.styleCache=r.styleCache||[],o;return(o=a[e])!=null||(o=a[e]=t(n)),o}u(Fi,"styleCache");function Tr(e,t){return e=gn(e),u(function(n){return Fi(e,t,n)},"cachedStyleFunction")}u(Tr,"cacheStyleFunction");function _r(e,t){e=gn(e);var n=u(function(r){return t.call(r)},"selfFn");return u(function(){var r=this[0];if(r)return Fi(e,n,r)},"cachedPrototypeStyleFunction")}u(_r,"cachePrototypeStyleFunction");var Qe={recalculateRenderedStyle:u(function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},"recalculateRenderedStyle"),dirtyStyleCache:u(function(){var e=this.cy(),t=u(function(r){return r._private.styleCache=null},"dirty");if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(r){t(r),r.connectedEdges().forEach(t)});return this},"dirtyStyleCache"),updateStyle:u(function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var r=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),r&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=a;return e?o.emitAndNotify("style"):o.emit("style"),a.forEach(function(i){return i._private.styleDirty=!0}),this},"updateStyle"),cleanStyle:u(function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},"cleanStyle"),parsedStyle:u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var a=n._private.style[e];return a??(t?r.style().getDefaultProperty(e):null)}},"parsedStyle"),numericStyle:u(function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},"numericStyle"),numericStyleUnits:u(function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},"numericStyleUnits"),renderedStyle:u(function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},"renderedStyle"),style:u(function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,a=n.style();if(Ce(e)){var o=e;a.applyBypass(this,o,r),this.emitAndNotify("style")}else if(pe(e))if(t===void 0){var i=this[0];return i?a.getStylePropertyValue(i,e):void 0}else a.applyBypass(this,e,t,r),this.emitAndNotify("style");else if(e===void 0){var c=this[0];return c?a.getRawStyle(c):void 0}return this},"style"),removeStyle:u(function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),a=this;if(e===void 0)for(var o=0;o<a.length;o++){var i=a[o];r.removeAllBypasses(i,n)}else{e=e.split(/\s+/);for(var c=0;c<a.length;c++){var l=a[c];r.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},"removeStyle"),show:u(function(){return this.css("display","element"),this},"show"),hide:u(function(){return this.css("display","none"),this},"hide"),effectiveOpacity:u(function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,a=n.pstyle("opacity").value;if(!t)return a;var o=r.data.parent?n.parents():null;if(o)for(var i=0;i<o.length;i++){var c=o[i],l=c.pstyle("opacity").value;a=l*a}return a}},"effectiveOpacity"),transparent:u(function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},"transparent"),backgrounding:u(function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding},"backgrounding")};function Qr(e,t){var n=e._private,r=n.data.parent?e.parents():null;if(r)for(var a=0;a<r.length;a++){var o=r[a];if(!t(o))return!1}return!0}u(Qr,"checkCompound");function Da(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var o=this[0],i=a.hasCompoundNodes();if(o){var c=o._private;if(!t(o))return!1;if(o.isNode())return!i||Qr(o,r);var l=c.source,s=c.target;return n(l)&&(!i||Qr(l,n))&&(l===s||n(s)&&(!i||Qr(s,n)))}}}u(Da,"defineDerivedStateFunction");var Wn=Tr("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:!0)});Qe.takesUpSpace=_r("takesUpSpace",Da({ok:Wn}));var Hf=Tr("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&Wn(e)}),Wf=Tr("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&Wn(e)});Qe.interactive=_r("interactive",Da({ok:Hf,parentOk:Wf,edgeOkViaNode:Wn}));Qe.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var Uf=Tr("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&Wn(e)}),Gf=Wn;Qe.visible=_r("visible",Da({ok:Uf,edgeOkViaNode:Gf}));Qe.hidden=function(){var e=this[0];if(e)return!e.visible()};Qe.isBundledBezier=_r("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Qe.bypass=Qe.css=Qe.style;Qe.renderedCss=Qe.renderedStyle;Qe.removeBypass=Qe.removeCss=Qe.removeStyle;Qe.pstyle=Qe.parsedStyle;var Zt={};function ni(e){return function(){var t=arguments,n=[];if(t.length===2){var r=t[0],a=t[1];this.on(e.event,r,a)}else if(t.length===1&&ze(t[0])){var o=t[0];this.on(e.event,o)}else if(t.length===0||t.length===1&&Me(t[0])){for(var i=t.length===1?t[0]:null,c=0;c<this.length;c++){var l=this[c],s=!e.ableField||l._private[e.ableField],d=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(h!==void 0&&(s=h,!h))return this}s&&(l._private[e.field]=e.value,d&&n.push(l))}var p=this.spawn(n);p.updateStyle(),p.emit(e.event),i&&p.emit(i)}return this}}u(ni,"defineSwitchFunction");function Cn(e){Zt[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(n!==void 0)return n}return t._private[e.field]}},Zt[e.on]=ni({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),Zt[e.off]=ni({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}u(Cn,"defineSwitchSet");Cn({field:"locked",overrideField:u(function(e){return e.cy().autolock()?!0:void 0},"overrideField"),on:"lock",off:"unlock"});Cn({field:"grabbable",overrideField:u(function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},"overrideField"),on:"grabify",off:"ungrabify"});Cn({field:"selected",ableField:"selectable",overrideAble:u(function(e){return e.cy().autounselectify()?!1:void 0},"overrideAble"),on:"select",off:"unselect"});Cn({field:"selectable",overrideField:u(function(e){return e.cy().autounselectify()?!1:void 0},"overrideField"),on:"selectify",off:"unselectify"});Zt.deselect=Zt.unselect;Zt.grabbed=function(){var e=this[0];if(e)return e._private.grabbed};Cn({field:"active",on:"activate",off:"unactivate"});Cn({field:"pannable",on:"panify",off:"unpanify"});Zt.inactive=function(){var e=this[0];if(e)return!e._private.active};var at={},Ho=u(function(e){return u(function(t){for(var n=this,r=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode()){for(var i=!1,c=o.connectedEdges(),l=0;l<c.length;l++){var s=c[l],d=s.source(),h=s.target();if(e.noIncomingEdges&&h===o&&d!==o||e.noOutgoingEdges&&d===o&&h!==o){i=!0;break}}i||r.push(o)}}return this.spawn(r,!0).filter(t)},"dagExtremityImpl")},"defineDagExtremity"),Wo=u(function(e){return function(t){for(var n=this,r=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode())for(var i=o.connectedEdges(),c=0;c<i.length;c++){var l=i[c],s=l.source(),d=l.target();e.outgoing&&s===o?(r.push(l),r.push(d)):e.incoming&&d===o&&(r.push(l),r.push(s))}}return this.spawn(r,!0).filter(t)}},"defineDagOneHop"),Uo=u(function(e){return function(t){for(var n=this,r=[],a={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var i=!1,c=0;c<o.length;c++){var l=o[c],s=l.id();a[s]||(a[s]=!0,r.push(l),i=!0)}if(!i)break;n=o}return this.spawn(r,!0).filter(t)}},"defineDagAllHops");at.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null};ve(at,{roots:Ho({noIncomingEdges:!0}),leaves:Ho({noOutgoingEdges:!0}),outgoers:xt(Wo({outgoing:!0}),"outgoers"),successors:Uo({outgoing:!0}),incomers:xt(Wo({incoming:!0}),"incomers"),predecessors:Uo({incoming:!0})});ve(at,{neighborhood:xt(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var a=n[r],o=a.connectedEdges(),i=0;i<o.length;i++){var c=o[i],l=c.source(),s=c.target(),d=a===l?s:l;d.length>0&&t.push(d[0]),t.push(c[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:u(function(e){return this.neighborhood().add(this).filter(e)},"closedNeighborhood"),openNeighborhood:u(function(e){return this.neighborhood(e)},"openNeighborhood")});at.neighbourhood=at.neighborhood;at.closedNeighbourhood=at.closedNeighborhood;at.openNeighbourhood=at.openNeighborhood;ve(at,{source:xt(u(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"sourceImpl"),"source"),target:xt(u(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"targetImpl"),"target"),sources:ri({attr:"source"}),targets:ri({attr:"target"})});function ri(e){return u(function(t){for(var n=[],r=0;r<this.length;r++){var a=this[r],o=a._private[e.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)},"sourceImpl")}u(ri,"defineSourceFunction");ve(at,{edgesWith:xt(ai(),"edgesWith"),edgesTo:xt(ai({thisIsSrc:!0}),"edgesTo")});function ai(e){return u(function(t){var n=[],r=this._private.cy,a=e||{};pe(t)&&(t=r.$(t));for(var o=0;o<t.length;o++)for(var i=t[o]._private.edges,c=0;c<i.length;c++){var l=i[c],s=l._private.data,d=this.hasElementWithId(s.source)&&t.hasElementWithId(s.target),h=t.hasElementWithId(s.source)&&this.hasElementWithId(s.target),p=d||h;p&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!d||a.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)},"edgesWithImpl")}u(ai,"defineEdgesWithFunction");ve(at,{connectedEdges:xt(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var a=n[r];if(a.isNode())for(var o=a._private.edges,i=0;i<o.length;i++){var c=o[i];t.push(c)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:xt(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var a=n[r];a.isEdge()&&(t.push(a.source()[0]),t.push(a.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:xt(ii(),"parallelEdges"),codirectedEdges:xt(ii({codirected:!0}),"codirectedEdges")});function ii(e){var t={codirected:!1};return e=ve({},t,e),u(function(n){for(var r=[],a=this.edges(),o=e,i=0;i<a.length;i++)for(var c=a[i],l=c._private,s=l.source,d=s._private.data.id,h=l.data.target,p=s._private.edges,f=0;f<p.length;f++){var g=p[f],y=g._private.data,b=y.target,v=y.source,m=b===h&&v===d,x=d===b&&h===v;(o.codirected&&m||!o.codirected&&(m||x))&&r.push(g)}return this.spawn(r,!0).filter(n)},"parallelEdgesImpl")}u(ii,"defineParallelEdgesFunction");ve(at,{components:u(function(e){var t=this,n=t.cy(),r=n.collection(),a=e==null?t.nodes():e.nodes(),o=[];e!=null&&a.empty()&&(a=e.sources());var i=u(function(l,s){r.merge(l),a.unmerge(l),s.merge(l)},"visitInComponent");if(a.empty())return t.spawn();var c=u(function(){var l=n.collection();o.push(l);var s=a[0];i(s,l),t.bfs({directed:!1,roots:s,visit:u(function(d){return i(d,l)},"visit")}),l.forEach(function(d){d.connectedEdges().forEach(function(h){t.has(h)&&l.has(h.source())&&l.has(h.target())&&l.merge(h)})})},"_loop");do c();while(a.length>0);return o},"components"),component:u(function(){var e=this[0];return e.cy().mutableElements().components(e)[0]},"component")});at.componentsOf=at.components;var Je=u(function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Re("A collection must have a reference to the core");return}var a=new Nt,o=!1;if(!t)t=[];else if(t.length>0&&Ce(t[0])&&!wr(t[0])){o=!0;for(var i=[],c=new Yn,l=0,s=t.length;l<s;l++){var d=t[l];d.data==null&&(d.data={});var h=d.data;if(h.id==null)h.id=js();else if(e.hasElementWithId(h.id)||c.has(h.id))continue;var p=new wa(e,d,!1);i.push(p),c.add(h.id)}t=i}this.length=0;for(var f=0,g=t.length;f<g;f++){var y=t[f][0];if(y!=null){var b=y._private.data.id;(!n||!a.has(b))&&(n&&a.set(b,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(v){this.lazyMap=v},rebuildMap:u(function(){for(var v=this.lazyMap=new Nt,m=this.eles,x=0;x<m.length;x++){var E=m[x];v.set(E.id(),{index:x,ele:E})}},"rebuildMap")},n&&(this._private.map=a),o&&!r&&this.restore()},"Collection"),Ne=wa.prototype=Je.prototype=Object.create(Array.prototype);Ne.instanceString=function(){return"collection"};Ne.spawn=function(e,t){return new Je(this.cy(),e,t)};Ne.spawnSelf=function(){return this.spawn(this)};Ne.cy=function(){return this._private.cy};Ne.renderer=function(){return this._private.cy.renderer()};Ne.element=function(){return this[0]};Ne.collection=function(){return vs(this)?this:new Je(this._private.cy,[this])};Ne.unique=function(){return new Je(this._private.cy,this,!0)};Ne.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)};Ne.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new Je(t)};Ne.$id=Ne.getElementById;Ne.poolIndex=function(){var e=this._private.cy,t=e._private.elements,n=this[0]._private.data.id;return t._private.map.get(n).index};Ne.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index};Ne.indexOfId=function(e){return e=""+e,this._private.map.get(e).index};Ne.json=function(e){var t=this.element(),n=this.cy();if(t==null&&e)return this;if(t!=null){var r=t._private;if(Ce(e)){if(n.startBatch(),e.data){t.data(e.data);var a=r.data;if(t.isEdge()){var o=!1,i={},c=e.data.source,l=e.data.target;c!=null&&c!=a.source&&(i.source=""+c,o=!0),l!=null&&l!=a.target&&(i.target=""+l,o=!0),o&&(t=t.move(i))}else{var s="parent"in e.data,d=e.data.parent;s&&(d!=null||a.parent!=null)&&d!=a.parent&&(d===void 0&&(d=null),d!=null&&(d=""+d),t=t.move({parent:d}))}}e.position&&t.position(e.position);var h=u(function(g,y,b){var v=e[g];v!=null&&v!==r[g]&&(v?t[y]():t[b]())},"checkSwitch");return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),e.classes!=null&&t.classes(e.classes),n.endBatch(),this}else if(e===void 0){var p={data:At(r.data),position:At(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};p.classes="";var f=0;return r.classes.forEach(function(g){return p.classes+=f++===0?g:" "+g}),p}}};Ne.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e};Ne.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n],a=r.json(),o=new wa(e,a,!1);t.push(o)}return new Je(e,t)};Ne.copy=Ne.clone;Ne.restore=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=n.cy(),a=r._private,o=[],i=[],c,l=0,s=n.length;l<s;l++){var d=n[l];t&&!d.removed()||(d.isNode()?o.push(d):i.push(d))}c=o.concat(i);var h,p=u(function(){c.splice(h,1),h--},"removeFromElements");for(h=0;h<c.length;h++){var f=c[h],g=f._private,y=g.data;if(f.clearTraversalCache(),!(!t&&!g.removed)){if(y.id===void 0)y.id=js();else if(re(y.id))y.id=""+y.id;else if($t(y.id)||!pe(y.id)){Re("Can not create element with invalid string ID `"+y.id+"`"),p();continue}else if(r.hasElementWithId(y.id)){Re("Can not create second element with ID `"+y.id+"`"),p();continue}}var b=y.id;if(f.isNode()){var v=g.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(f.isEdge()){for(var m=f,x=["source","target"],E=x.length,P=!1,C=0;C<E;C++){var w=x[C],S=y[w];re(S)&&(S=y[w]=""+y[w]),S==null||S===""?(Re("Can not create edge `"+b+"` with unspecified "+w),P=!0):r.hasElementWithId(S)||(Re("Can not create edge `"+b+"` with nonexistant "+w+" `"+S+"`"),P=!0)}if(P){p();continue}var I=r.getElementById(y.source),D=r.getElementById(y.target);I.same(D)?I._private.edges.push(m):(I._private.edges.push(m),D._private.edges.push(m)),m._private.source=I,m._private.target=D}g.map=new Nt,g.map.set(b,{ele:f,index:0}),g.removed=!1,t&&r.addToPool(f)}for(var B=0;B<o.length;B++){var T=o[B],M=T._private.data;re(M.parent)&&(M.parent=""+M.parent);var _=M.parent,O=_!=null;if(O||T._private.parent){var L=T._private.parent?r.collection().merge(T._private.parent):r.getElementById(_);if(L.empty())M.parent=void 0;else if(L[0].removed())De("Node added with missing parent, reference to parent removed"),M.parent=void 0,T._private.parent=null;else{for(var z=!1,A=L;!A.empty();){if(T.same(A)){z=!0,M.parent=void 0;break}A=A.parent()}z||(L[0]._private.children.push(T),T._private.parent=L[0],a.hasCompoundNodes=!0)}}}if(c.length>0){for(var R=c.length===n.length?n:new Je(r,c),Y=0;Y<R.length;Y++){var V=R[Y];V.isNode()||(V.parallelEdges().clearTraversalCache(),V.source().clearTraversalCache(),V.target().clearTraversalCache())}var j;a.hasCompoundNodes?j=r.collection().merge(R).merge(R.connectedNodes()).merge(R.parent()):j=R,j.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?R.emitAndNotify("add"):t&&R.emit("add")}return n};Ne.removed=function(){var e=this[0];return e&&e._private.removed};Ne.inside=function(){var e=this[0];return e&&!e._private.removed};Ne.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=[],a={},o=n._private.cy;function i(_){for(var O=_._private.edges,L=0;L<O.length;L++)l(O[L])}u(i,"addConnectedEdges");function c(_){for(var O=_._private.children,L=0;L<O.length;L++)l(O[L])}u(c,"addChildren");function l(_){var O=a[_.id()];t&&_.removed()||O||(a[_.id()]=!0,_.isNode()?(r.push(_),i(_),c(_)):r.unshift(_))}u(l,"add");for(var s=0,d=n.length;s<d;s++){var h=n[s];l(h)}function p(_,O){var L=_._private.edges;Qt(L,O),_.clearTraversalCache()}u(p,"removeEdgeRef");function f(_){_.clearTraversalCache()}u(f,"removeParallelRef");var g=[];g.ids={};function y(_,O){O=O[0],_=_[0];var L=_._private.children,z=_.id();Qt(L,O),O._private.parent=null,g.ids[z]||(g.ids[z]=!0,g.push(_))}u(y,"removeChildRef"),n.dirtyCompoundBoundsCache(),t&&o.removeFromPool(r);for(var b=0;b<r.length;b++){var v=r[b];if(v.isEdge()){var m=v.source()[0],x=v.target()[0];p(m,v),p(x,v);for(var E=v.parallelEdges(),P=0;P<E.length;P++){var C=E[P];f(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var w=v.parent();w.length!==0&&y(w,v)}t&&(v._private.removed=!0)}var S=o._private.elements;o._private.hasCompoundNodes=!1;for(var I=0;I<S.length;I++){var D=S[I];if(D.isParent()){o._private.hasCompoundNodes=!0;break}}var B=new Je(this.cy(),r);B.size()>0&&(e?B.emitAndNotify("remove"):t&&B.emit("remove"));for(var T=0;T<g.length;T++){var M=g[T];(!t||!M.removed())&&M.updateStyle()}return B};Ne.move=function(e){var t=this._private.cy,n=this,r=!1,a=!1,o=u(function(f){return f==null?f:""+f},"toString");if(e.source!==void 0||e.target!==void 0){var i=o(e.source),c=o(e.target),l=i!=null&&t.hasElementWithId(i),s=c!=null&&t.hasElementWithId(c);(l||s)&&(t.batch(function(){n.remove(r,a),n.emitAndNotify("moveout");for(var f=0;f<n.length;f++){var g=n[f],y=g._private.data;g.isEdge()&&(l&&(y.source=i),s&&(y.target=c))}n.restore(r,a)}),n.emitAndNotify("move"))}else if(e.parent!==void 0){var d=o(e.parent),h=d===null||t.hasElementWithId(d);if(h){var p=d===null?void 0:d;t.batch(function(){var f=n.remove(r,a);f.emitAndNotify("moveout");for(var g=0;g<n.length;g++){var y=n[g],b=y._private.data;y.isNode()&&(b.parent=p)}f.restore(r,a)}),n.emitAndNotify("move")}}return this};[el,of,Kr,Kt,qn,wf,_a,zf,uu,cu,qf,da,$r,Qe,Zt,at].forEach(function(e){ve(Ne,e)});var Kf={add:u(function(e){var t,n=this;if(gt(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var a=[],o=0;o<r.length;o++){var i=r[o];a.push(i.json())}t=new Je(n,a)}}else if(Me(e)){var c=e;t=new Je(n,c)}else if(Ce(e)&&(Me(e.nodes)||Me(e.edges))){for(var l=e,s=[],d=["nodes","edges"],h=0,p=d.length;h<p;h++){var f=d[h],g=l[f];if(Me(g))for(var y=0,b=g.length;y<b;y++){var v=ve({group:f},g[y]);s.push(v)}}t=new Je(n,s)}else{var m=e;t=new wa(n,m).collection()}return t},"add"),remove:u(function(e){if(!gt(e)&&pe(e)){var t=e;e=this.$(t)}return e.remove()},"remove")};function hu(e,t,n,r){var a=4,o=.001,i=1e-7,c=10,l=11,s=1/(l-1),d=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var p=d?new Float32Array(l):new Array(l);function f(D,B){return 1-3*B+3*D}u(f,"A");function g(D,B){return 3*B-6*D}u(g,"B");function y(D){return 3*D}u(y,"C");function b(D,B,T){return((f(B,T)*D+g(B,T))*D+y(B))*D}u(b,"calcBezier");function v(D,B,T){return 3*f(B,T)*D*D+2*g(B,T)*D+y(B)}u(v,"getSlope");function m(D,B){for(var T=0;T<a;++T){var M=v(B,e,n);if(M===0)return B;var _=b(B,e,n)-D;B-=_/M}return B}u(m,"newtonRaphsonIterate");function x(){for(var D=0;D<l;++D)p[D]=b(D*s,e,n)}u(x,"calcSampleValues");function E(D,B,T){var M,_,O=0;do _=B+(T-B)/2,M=b(_,e,n)-D,M>0?T=_:B=_;while(Math.abs(M)>i&&++O<c);return _}u(E,"binarySubdivide");function P(D){for(var B=0,T=1,M=l-1;T!==M&&p[T]<=D;++T)B+=s;--T;var _=(D-p[T])/(p[T+1]-p[T]),O=B+_*s,L=v(O,e,n);return L>=o?m(D,O):L===0?O:E(D,B,B+s)}u(P,"getTForX");var C=!1;function w(){C=!0,(e!==t||n!==r)&&x()}u(w,"precompute");var S=u(function(D){return C||w(),e===t&&n===r?D:D===0?0:D===1?1:b(P(D),t,r)},"f");S.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var I="generateBezier("+[e,t,n,r]+")";return S.toString=function(){return I},S}u(hu,"generateCubicBezier");var Zf=function(){function e(r){return-r.tension*r.x-r.friction*r.v}u(e,"springAccelerationForState");function t(r,a,o){var i={x:r.x+o.dx*a,v:r.v+o.dv*a,tension:r.tension,friction:r.friction};return{dx:i.v,dv:e(i)}}u(t,"springEvaluateStateWithDerivative");function n(r,a){var o={dx:r.v,dv:e(r)},i=t(r,a*.5,o),c=t(r,a*.5,i),l=t(r,a,c),s=1/6*(o.dx+2*(i.dx+c.dx)+l.dx),d=1/6*(o.dv+2*(i.dv+c.dv)+l.dv);return r.x=r.x+s*a,r.v=r.v+d*a,r}return u(n,"springIntegrateState"),u(function r(a,o,i){var c={x:-1,v:0,tension:null,friction:null},l=[0],s=0,d=1/1e4,h=16/1e3,p,f,g;for(a=parseFloat(a)||500,o=parseFloat(o)||20,i=i||null,c.tension=a,c.friction=o,p=i!==null,p?(s=r(a,o),f=s/i*h):f=h;g=n(g||c,f),l.push(1+g.x),s+=16,Math.abs(g.x)>d&&Math.abs(g.v)>d;);return p?function(y){return l[y*(l.length-1)|0]}:s},"springRK4Factory")}(),Ae=u(function(e,t,n,r){var a=hu(e,t,n,r);return function(o,i,c){return o+(i-o)*a(c)}},"cubicBezier"),Jr={linear:u(function(e,t,n){return e+(t-e)*n},"linear"),ease:Ae(.25,.1,.25,1),"ease-in":Ae(.42,0,1,1),"ease-out":Ae(0,0,.58,1),"ease-in-out":Ae(.42,0,.58,1),"ease-in-sine":Ae(.47,0,.745,.715),"ease-out-sine":Ae(.39,.575,.565,1),"ease-in-out-sine":Ae(.445,.05,.55,.95),"ease-in-quad":Ae(.55,.085,.68,.53),"ease-out-quad":Ae(.25,.46,.45,.94),"ease-in-out-quad":Ae(.455,.03,.515,.955),"ease-in-cubic":Ae(.55,.055,.675,.19),"ease-out-cubic":Ae(.215,.61,.355,1),"ease-in-out-cubic":Ae(.645,.045,.355,1),"ease-in-quart":Ae(.895,.03,.685,.22),"ease-out-quart":Ae(.165,.84,.44,1),"ease-in-out-quart":Ae(.77,0,.175,1),"ease-in-quint":Ae(.755,.05,.855,.06),"ease-out-quint":Ae(.23,1,.32,1),"ease-in-out-quint":Ae(.86,0,.07,1),"ease-in-expo":Ae(.95,.05,.795,.035),"ease-out-expo":Ae(.19,1,.22,1),"ease-in-out-expo":Ae(1,0,0,1),"ease-in-circ":Ae(.6,.04,.98,.335),"ease-out-circ":Ae(.075,.82,.165,1),"ease-in-out-circ":Ae(.785,.135,.15,.86),spring:u(function(e,t,n){if(n===0)return Jr.linear;var r=Zf(e,t,n);return function(a,o,i){return a+(o-a)*r(i)}},"spring"),"cubic-bezier":Ae};function oi(e,t,n,r,a){if(r===1||t===n)return n;var o=a(t,n,r);return e==null||((e.roundValue||e.color)&&(o=Math.round(o)),e.min!==void 0&&(o=Math.max(o,e.min)),e.max!==void 0&&(o=Math.min(o,e.max))),o}u(oi,"getEasedValue");function si(e,t){return e.pfValue!=null||e.value!=null?e.pfValue!=null&&(t==null||t.type.units!=="%")?e.pfValue:e.value:e}u(si,"getValue");function cn(e,t,n,r,a){var o=a!=null?a.type:null;n<0?n=0:n>1&&(n=1);var i=si(e,a),c=si(t,a);if(re(i)&&re(c))return oi(o,i,c,n,r);if(Me(i)&&Me(c)){for(var l=[],s=0;s<c.length;s++){var d=i[s],h=c[s];if(d!=null&&h!=null){var p=oi(o,d,h,n,r);l.push(p)}else l.push(h)}return l}}u(cn,"ease");function pu(e,t,n,r){var a=!r,o=e._private,i=t._private,c=i.easing,l=i.startTime,s=r?e:e.cy(),d=s.style();if(!i.easingImpl)if(c==null)i.easingImpl=Jr.linear;else{var h;if(pe(c)){var p=d.parse("transition-timing-function",c);h=p.value}else h=c;var f,g;pe(h)?(f=h,g=[]):(f=h[1],g=h.slice(2).map(function(R){return+R})),g.length>0?(f==="spring"&&g.push(i.duration),i.easingImpl=Jr[f].apply(null,g)):i.easingImpl=Jr[f]}var y=i.easingImpl,b;if(i.duration===0?b=1:b=(n-l)/i.duration,i.applying&&(b=i.progress),b<0?b=0:b>1&&(b=1),i.delay==null){var v=i.startPosition,m=i.position;if(m&&a&&!e.locked()){var x={};In(v.x,m.x)&&(x.x=cn(v.x,m.x,b,y)),In(v.y,m.y)&&(x.y=cn(v.y,m.y,b,y)),e.position(x)}var E=i.startPan,P=i.pan,C=o.pan,w=P!=null&&r;w&&(In(E.x,P.x)&&(C.x=cn(E.x,P.x,b,y)),In(E.y,P.y)&&(C.y=cn(E.y,P.y,b,y)),e.emit("pan"));var S=i.startZoom,I=i.zoom,D=I!=null&&r;D&&(In(S,I)&&(o.zoom=pr(o.minZoom,cn(S,I,b,y),o.maxZoom)),e.emit("zoom")),(w||D)&&e.emit("viewport");var B=i.style;if(B&&B.length>0&&a){for(var T=0;T<B.length;T++){var M=B[T],_=M.name,O=M,L=i.startStyle[_],z=d.properties[L.name],A=cn(L,O,b,y,z);d.overrideBypass(e,_,A)}e.emit("style")}}return i.progress=b,b}u(pu,"step$1");function In(e,t){return e==null||t==null?!1:re(e)&&re(t)?!0:!!(e&&t)}u(In,"valid");function fu(e,t,n,r){var a=t._private;a.started=!0,a.startTime=n-a.progress*a.duration}u(fu,"startAnimation");function li(e,t){var n=t._private.aniEles,r=[];function a(d,h){var p=d._private,f=p.animation.current,g=p.animation.queue,y=!1;if(f.length===0){var b=g.shift();b&&f.push(b)}for(var v=u(function(P){for(var C=P.length-1;C>=0;C--){var w=P[C];w()}P.splice(0,P.length)},"callbacks"),m=f.length-1;m>=0;m--){var x=f[m],E=x._private;if(E.stopped){f.splice(m,1),E.hooked=!1,E.playing=!1,E.started=!1,v(E.frames);continue}!E.playing&&!E.applying||(E.playing&&E.applying&&(E.applying=!1),E.started||fu(d,x,e),pu(d,x,e,h),E.applying&&(E.applying=!1),v(E.frames),E.step!=null&&E.step(e),x.completed()&&(f.splice(m,1),E.hooked=!1,E.playing=!1,E.started=!1,v(E.completes)),y=!0)}return!h&&f.length===0&&g.length===0&&r.push(d),y}u(a,"stepOne");for(var o=!1,i=0;i<n.length;i++){var c=n[i],l=a(c);o=o||l}var s=a(t,!0);(o||s)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}u(li,"stepAll");var $f={animate:_e.animate(),animation:_e.animation(),animated:_e.animated(),clearQueue:_e.clearQueue(),delay:_e.delay(),delayAnimation:_e.delayAnimation(),stop:_e.stop(),addToAnimationPool:u(function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},"addToAnimationPool"),stopAnimationLoop:u(function(){this._private.animationsRunning=!1},"stopAnimationLoop"),startAnimationLoop:u(function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&oa(u(function(r){li(r,e),t()},"animationStep"))}u(t,"headlessStep");var n=e.renderer();n&&n.beforeRender?n.beforeRender(u(function(r,a){li(a,e)},"rendererAnimationStep"),n.beforeRenderPriorities.animations):t()},"startAnimationLoop")},Qf={qualifierCompare:u(function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},"qualifierCompare"),eventMatches:u(function(e,t,n){var r=t.qualifier;return r!=null?e!==n.target&&wr(n.target)&&r.matches(n.target):!0},"eventMatches"),addEventFields:u(function(e,t){t.cy=e,t.target=e},"addEventFields"),callbackContext:u(function(e,t,n){return t.qualifier!=null?n.target:e},"callbackContext")},Yr=u(function(e){return pe(e)?new Jt(e):e},"argSelector"),gu={createEmitter:u(function(){var e=this._private;return e.emitter||(e.emitter=new Pr(Qf,this)),this},"createEmitter"),emitter:u(function(){return this._private.emitter},"emitter"),on:u(function(e,t,n){return this.emitter().on(e,Yr(t),n),this},"on"),removeListener:u(function(e,t,n){return this.emitter().removeListener(e,Yr(t),n),this},"removeListener"),removeAllListeners:u(function(){return this.emitter().removeAllListeners(),this},"removeAllListeners"),one:u(function(e,t,n){return this.emitter().one(e,Yr(t),n),this},"one"),once:u(function(e,t,n){return this.emitter().one(e,Yr(t),n),this},"once"),emit:u(function(e,t){return this.emitter().emit(e,t),this},"emit"),emitAndNotify:u(function(e,t){return this.emit(e),this.notify(e,t),this},"emitAndNotify")};_e.eventAliasesOn(gu);var ui={png:u(function(e){var t=this._private.renderer;return e=e||{},t.png(e)},"png"),jpg:u(function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)},"jpg")};ui.jpeg=ui.jpg;var ea={layout:u(function(e){var t=this;if(e==null){Re("Layout options must be specified to make a layout");return}if(e.name==null){Re("A `name` must be specified to make a layout");return}var n=e.name,r=t.extension("layout",n);if(r==null){Re("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;pe(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var o=new r(ve({},e,{cy:t,eles:a}));return o},"layout")};ea.createLayout=ea.makeLayout=ea.layout;var Jf={notify:u(function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&r.merge(t);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},"notify"),notifications:u(function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},"notifications"),noNotifications:u(function(e){this.notifications(!1),e(),this.notifications(!0)},"noNotifications"),batching:u(function(){return this._private.batchCount>0},"batching"),startBatch:u(function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},"startBatch"),endBatch:u(function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},"endBatch"),batch:u(function(e){return this.startBatch(),e(),this.endBatch(),this},"batch"),batchData:u(function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var a=n[r],o=e[a],i=t.getElementById(a);i.data(o)}})},"batchData")},eg=et({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),ci={renderTo:u(function(e,t,n,r){var a=this._private.renderer;return a.renderTo(e,t,n,r),this},"renderTo"),renderer:u(function(){return this._private.renderer},"renderer"),forceRender:u(function(){return this.notify("draw"),this},"forceRender"),resize:u(function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},"resize"),initRenderer:u(function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){Re("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&De("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=eg(e);r.cy=t,t._private.renderer=new n(r),this.notify("init")},"initRenderer"),destroyRenderer:u(function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var r=n._private;r.rscratch={},r.rstyle={},r.animation.current=[],r.animation.queue=[]})},"destroyRenderer"),onRender:u(function(e){return this.on("render",e)},"onRender"),offRender:u(function(e){return this.off("render",e)},"offRender")};ci.invalidateDimensions=ci.resize;var ta={collection:u(function(e,t){return pe(e)?this.$(e):gt(e)?e.collection():Me(e)?(t||(t={}),new Je(this,e,t.unique,t.removed)):new Je(this)},"collection"),nodes:u(function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},"nodes"),edges:u(function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},"edges"),$:u(function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},"$"),mutableElements:u(function(){return this._private.elements},"mutableElements")};ta.elements=ta.filter=ta.$;var ot={},sr="t",tg="f";ot.apply=function(e){for(var t=this,n=t._private,r=n.cy,a=r.collection(),o=0;o<e.length;o++){var i=e[o],c=t.getContextMeta(i);if(!c.empty){var l=t.getContextStyle(c),s=t.applyContextStyle(c,l,i);i._private.appliedInitStyle?t.updateTransitions(i,s.diffProps):i._private.appliedInitStyle=!0;var d=t.updateStyleHints(i);d&&a.push(i)}}return a};ot.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},a=e+"-"+t,o=r[a];if(o)return o;for(var i=[],c={},l=0;l<n.length;l++){var s=n[l],d=e[l]===sr,h=t[l]===sr,p=d!==h,f=s.mappedProperties.length>0;if(p||h&&f){var g=void 0;p&&f||p?g=s.properties:f&&(g=s.mappedProperties);for(var y=0;y<g.length;y++){for(var b=g[y],v=b.name,m=!1,x=l+1;x<n.length;x++){var E=n[x],P=t[x]===sr;if(P&&(m=E.properties[b.name]!=null,m))break}!c[v]&&!m&&(c[v]=!0,i.push(v))}}}return r[a]=i,i};ot.getContextMeta=function(e){for(var t=this,n="",r,a=e._private.styleCxtKey||"",o=0;o<t.length;o++){var i=t[o],c=i.selector&&i.selector.matches(e);c?n+=sr:n+=tg}return r=t.getPropertiesDiff(a,n),e._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:r.length===0}};ot.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var a={_private:{key:t}},o=0;o<n.length;o++){var i=n[o],c=t[o]===sr;if(c)for(var l=0;l<i.properties.length;l++){var s=i.properties[l];a[s.name]=s}}return r[t]=a,a};ot.applyContextStyle=function(e,t,n){for(var r=this,a=e.diffPropNames,o={},i=r.types,c=0;c<a.length;c++){var l=a[c],s=t[l],d=n.pstyle(l);if(!s)if(d)d.bypass?s={name:l,deleteBypassed:!0}:s={name:l,delete:!0};else continue;if(d!==s){if(s.mapped===i.fn&&d!=null&&d.mapping!=null&&d.mapping.value===s.value){var h=d.mapping,p=h.fnValue=s.value(n);if(p===h.prevFnValue)continue}var f=o[l]={prev:d};r.applyParsedProperty(n,s),f.next=n.pstyle(l),f.next&&f.next.bypass&&(f.next=f.next.bypassed)}}return{diffProps:o}};ot.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,a=n.propertyGroupKeys,o=u(function(U,ne,de){return n.getPropertiesHash(U,ne,de)},"propHash"),i=t.styleKey;if(e.removed())return!1;var c=t.group==="nodes",l=e._private.style;r=Object.keys(l);for(var s=0;s<a.length;s++){var d=a[s];t.styleKeys[d]=[Mn,nr]}for(var h=u(function(U,ne){return t.styleKeys[ne][0]=cr(U,t.styleKeys[ne][0])},"updateGrKey1"),p=u(function(U,ne){return t.styleKeys[ne][1]=dr(U,t.styleKeys[ne][1])},"updateGrKey2"),f=u(function(U,ne){h(U,ne),p(U,ne)},"updateGrKey"),g=u(function(U,ne){for(var de=0;de<U.length;de++){var be=U.charCodeAt(de);h(be,ne),p(be,ne)}},"updateGrKeyWStr"),y=2e9,b=u(function(U){return-128<U&&U<128&&Math.floor(U)!==U?y-(U*1024|0):U},"cleanNum"),v=0;v<r.length;v++){var m=r[v],x=l[m];if(x!=null){var E=this.properties[m],P=E.type,C=E.groupKey,w=void 0;E.hashOverride!=null?w=E.hashOverride(e,x):x.pfValue!=null&&(w=x.pfValue);var S=E.enums==null?x.value:null,I=w!=null,D=S!=null,B=I||D,T=x.units;if(P.number&&B&&!P.multiple){var M=I?w:S;f(b(M),C),!I&&T!=null&&g(T,C)}else g(x.strValue,C)}}for(var _=[Mn,nr],O=0;O<a.length;O++){var L=a[O],z=t.styleKeys[L];_[0]=cr(z[0],_[0]),_[1]=dr(z[1],_[1])}t.styleKey=Kc(_[0],_[1]);var A=t.styleKeys;t.labelDimsKey=Ht(A.labelDimensions);var R=o(e,["label"],A.labelDimensions);if(t.labelKey=Ht(R),t.labelStyleKey=Ht(Lr(A.commonLabel,R)),!c){var Y=o(e,["source-label"],A.labelDimensions);t.sourceLabelKey=Ht(Y),t.sourceLabelStyleKey=Ht(Lr(A.commonLabel,Y));var V=o(e,["target-label"],A.labelDimensions);t.targetLabelKey=Ht(V),t.targetLabelStyleKey=Ht(Lr(A.commonLabel,V))}if(c){var j=t.styleKeys,W=j.nodeBody,J=j.nodeBorder,ae=j.nodeOutline,Z=j.backgroundImage,$=j.compound,N=j.pie,G=[W,J,ae,Z,$,N].filter(function(U){return U!=null}).reduce(Lr,[Mn,nr]);t.nodeKey=Ht(G),t.hasPie=N!=null&&N[0]!==Mn&&N[1]!==nr}return i!==t.styleKey};ot.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null};ot.applyParsedProperty=function(e,t){var n=this,r=t,a=e._private.style,o,i=n.types,c=n.properties[r.name].type,l=r.bypass,s=a[r.name],d=s&&s.bypass,h=e._private,p="mapping",f=u(function(j){return j==null?null:j.pfValue!=null?j.pfValue:j.value},"getVal"),g=u(function(){var j=f(s),W=f(r);n.checkTriggers(e,r.name,j,W)},"checkTriggers");if(t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))&&(r=t=this.parse(t.name,"bezier",l)),r.delete)return a[r.name]=void 0,g(),!0;if(r.deleteBypassed)return s?s.bypass?(s.bypassed=void 0,g(),!0):!1:(g(),!0);if(r.deleteBypass)return s?s.bypass?(a[r.name]=s.bypassed,g(),!0):!1:(g(),!0);var y=u(function(){De("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")},"printMappingErr");switch(r.mapped){case i.mapData:{for(var b=r.field.split("."),v=h.data,m=0;m<b.length&&v;m++){var x=b[m];v=v[x]}if(v==null)return y(),!1;var E;if(re(v)){var P=r.fieldMax-r.fieldMin;P===0?E=0:E=(v-r.fieldMin)/P}else return De("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+v+"` for `"+e.id()+"` is non-numeric)"),!1;if(E<0?E=0:E>1&&(E=1),c.color){var C=r.valueMin[0],w=r.valueMax[0],S=r.valueMin[1],I=r.valueMax[1],D=r.valueMin[2],B=r.valueMax[2],T=r.valueMin[3]==null?1:r.valueMin[3],M=r.valueMax[3]==null?1:r.valueMax[3],_=[Math.round(C+(w-C)*E),Math.round(S+(I-S)*E),Math.round(D+(B-D)*E),Math.round(T+(M-T)*E)];o={bypass:r.bypass,name:r.name,value:_,strValue:"rgb("+_[0]+", "+_[1]+", "+_[2]+")"}}else if(c.number){var O=r.valueMin+(r.valueMax-r.valueMin)*E;o=this.parse(r.name,O,r.bypass,p)}else return!1;if(!o)return y(),!1;o.mapping=r,r=o;break}case i.data:{for(var L=r.field.split("."),z=h.data,A=0;A<L.length&&z;A++){var R=L[A];z=z[R]}if(z!=null&&(o=this.parse(r.name,z,r.bypass,p)),!o)return y(),!1;o.mapping=r,r=o;break}case i.fn:{var Y=r.value,V=r.fnValue!=null?r.fnValue:Y(e);if(r.prevFnValue=V,V==null)return De("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+e.id()+"` is null)"),!1;if(o=this.parse(r.name,V,r.bypass,p),!o)return De("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+e.id()+"` is invalid)"),!1;o.mapping=At(r),r=o;break}case void 0:break;default:return!1}return l?(d?r.bypassed=s.bypassed:r.bypassed=s,a[r.name]=r):d?s.bypassed=r:a[r.name]=r,g(),!0};ot.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),!t)r._private.style={};else for(var a=r._private.style,o=Object.keys(a),i=0;i<o.length;i++){var c=o[i],l=a[c];l!=null&&(l.bypass?l.bypassed=null:a[c]=null)}}};ot.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()};ot.updateTransitions=function(e,t){var n=this,r=e._private,a=e.pstyle("transition-property").value,o=e.pstyle("transition-duration").pfValue,i=e.pstyle("transition-delay").pfValue;if(a.length>0&&o>0){for(var c={},l=!1,s=0;s<a.length;s++){var d=a[s],h=e.pstyle(d),p=t[d];if(p){var f=p.prev,g=f,y=p.next!=null?p.next:h,b=!1,v=void 0,m=1e-6;g&&(re(g.pfValue)&&re(y.pfValue)?(b=y.pfValue-g.pfValue,v=g.pfValue+m*b):re(g.value)&&re(y.value)?(b=y.value-g.value,v=g.value+m*b):Me(g.value)&&Me(y.value)&&(b=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2],v=g.strValue),b&&(c[d]=y.strValue,this.applyBypass(e,d,v),l=!0))}}if(!l)return;r.transitioning=!0,new Hn(function(x){i>0?e.delayAnimation(i).play().promise().then(x):x()}).then(function(){return e.animation({style:c,duration:o,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,a),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,a),e.emitAndNotify("style"),r.transitioning=!1)};ot.checkTrigger=function(e,t,n,r,a,o){var i=this.properties[t],c=a(i);c!=null&&c(n,r)&&o(i)};ot.checkZOrderTrigger=function(e,t,n,r){var a=this;this.checkTrigger(e,t,n,r,function(o){return o.triggersZOrder},function(){a._private.cy.notify("zorder",e)})};ot.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(a){return a.triggersBounds},function(a){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&t==="curve-style"&&(n==="bezier"||r==="bezier")&&e.parallelEdges().forEach(function(o){o.isBundledBezier()&&o.dirtyBoundingBoxCache()}),a.triggersBoundsOfConnectedEdges&&t==="display"&&(n==="none"||r==="none")&&e.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};ot.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r)};var Dr={};Dr.applyBypass=function(e,t,n,r){var a=this,o=[],i=!0;if(t==="*"||t==="**"){if(n!==void 0)for(var c=0;c<a.properties.length;c++){var l=a.properties[c],s=l.name,d=this.parse(s,n,!0);d&&o.push(d)}}else if(pe(t)){var h=this.parse(t,n,!0);h&&o.push(h)}else if(Ce(t)){var p=t;r=n;for(var f=Object.keys(p),g=0;g<f.length;g++){var y=f[g],b=p[y];if(b===void 0&&(b=p[ma(y)]),b!==void 0){var v=this.parse(y,b,!0);v&&o.push(v)}}}else return!1;if(o.length===0)return!1;for(var m=!1,x=0;x<e.length;x++){for(var E=e[x],P={},C=void 0,w=0;w<o.length;w++){var S=o[w];if(r){var I=E.pstyle(S.name);C=P[S.name]={prev:I}}m=this.applyParsedProperty(E,At(S))||m,r&&(C.next=E.pstyle(S.name))}m&&this.updateStyleHints(E),r&&this.updateTransitions(E,P,i)}return m};Dr.overrideBypass=function(e,t,n){t=Si(t);for(var r=0;r<e.length;r++){var a=e[r],o=a._private.style[t],i=this.properties[t].type,c=i.color,l=i.mutiple,s=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(a,t,n):(o.value=n,o.pfValue!=null&&(o.pfValue=n),c?o.strValue="rgb("+n.join(",")+")":l?o.strValue=n.join(" "):o.strValue=""+n,this.updateStyleHints(a)),this.checkTriggers(a,t,s,n)}};Dr.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)};Dr.removeBypasses=function(e,t,n){for(var r=!0,a=0;a<e.length;a++){for(var o=e[a],i={},c=0;c<t.length;c++){var l=t[c],s=this.properties[l],d=o.pstyle(s.name);if(!(!d||!d.bypass)){var h="",p=this.parse(l,h,!0),f=i[s.name]={prev:d};this.applyParsedProperty(o,p),f.next=o.pstyle(s.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,i,r)}};var Vi={};Vi.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return e!=null?parseFloat(e):1};Vi.containerCss=function(e){var t=this._private.cy,n=t.container(),r=t.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(e)};var Ot={};Ot.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)};Ot.getRawStyle=function(e,t){var n=this;if(e=e[0],e){for(var r={},a=0;a<n.properties.length;a++){var o=n.properties[a],i=n.getStylePropertyValue(e,o.name,t);i!=null&&(r[o.name]=i,r[ma(o.name)]=i)}return r}};Ot.getIndexedStyle=function(e,t,n,r){var a=e.pstyle(t)[n][r];return a??e.cy().style().getDefaultProperty(t)[n][0]};Ot.getStylePropertyValue=function(e,t,n){var r=this;if(e=e[0],e){var a=r.properties[t];a.alias&&(a=a.pointsTo);var o=a.type,i=e.pstyle(a.name);if(i){var c=i.value,l=i.units,s=i.strValue;if(n&&o.number&&c!=null&&re(c)){var d=e.cy().zoom(),h=u(function(y){return y*d},"getRenderedValue"),p=u(function(y,b){return h(y)+b},"getValueStringWithUnits"),f=Me(c),g=f?l.every(function(y){return y!=null}):l!=null;return g?f?c.map(function(y,b){return p(y,l[b])}).join(" "):p(c,l):f?c.map(function(y){return pe(y)?y:""+h(y)}).join(" "):""+h(c)}else if(s!=null)return s}return null}};Ot.getAnimationStartStyle=function(e,t){for(var n={},r=0;r<t.length;r++){var a=t[r],o=a.name,i=e.pstyle(o);i!==void 0&&(Ce(i)?i=this.parse(o,i.strValue):i=this.parse(o,i)),i&&(n[o]=i)}return n};Ot.getPropsList=function(e){var t=this,n=[],r=e,a=t.properties;if(r)for(var o=Object.keys(r),i=0;i<o.length;i++){var c=o[i],l=r[c],s=a[c]||a[Si(c)],d=this.parse(s.name,l);d&&n.push(d)}return n};Ot.getNonDefaultPropertiesHash=function(e,t,n){var r=n.slice(),a,o,i,c,l,s;for(l=0;l<t.length;l++)if(a=t[l],o=e.pstyle(a,!1),o!=null)if(o.pfValue!=null)r[0]=cr(c,r[0]),r[1]=dr(c,r[1]);else for(i=o.strValue,s=0;s<i.length;s++)c=i.charCodeAt(s),r[0]=cr(c,r[0]),r[1]=dr(c,r[1]);return r};Ot.getPropertiesHash=Ot.getNonDefaultPropertiesHash;var Ba={};Ba.appendFromJson=function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],a=r.selector,o=r.style||r.css,i=Object.keys(o);t.selector(a);for(var c=0;c<i.length;c++){var l=i[c],s=o[l];t.css(l,s)}}return t};Ba.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t};Ba.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,a=n.properties,o={},i=0;i<a.length;i++){var c=a[i];o[c.name]=c.strValue}e.push({selector:r?r.toString():"core",style:o})}return e};var ji={};ji.appendFromString=function(e){var t=this,n=this,r=""+e,a,o,i;r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");function c(){r.length>a.length?r=r.substr(a.length):r=""}u(c,"removeSelAndBlockFromRemaining");function l(){o.length>i.length?o=o.substr(i.length):o=""}for(u(l,"removePropAndValFromRem");;){var s=r.match(/^\s*$/);if(s)break;var d=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!d){De("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}a=d[0];var h=d[1];if(h!=="core"){var p=new Jt(h);if(p.invalid){De("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),c();continue}}var f=d[2],g=!1;o=f;for(var y=[];;){var b=o.match(/^\s*$/);if(b)break;var v=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){De("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+f),g=!0;break}i=v[0];var m=v[1],x=v[2],E=t.properties[m];if(!E){De("Skipping property: Invalid property name in: "+i),l();continue}var P=n.parse(m,x);if(!P){De("Skipping property: Invalid property definition in: "+i),l();continue}y.push({name:m,val:x}),l()}if(g){c();break}n.selector(h);for(var C=0;C<y.length;C++){var w=y[C];n.css(w.name,w.val)}c()}return n};ji.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t};var $e={};(function(){var e=He,t=uc,n=dc,r=hc,a=pc,o=u(function(N){return"^"+N+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},"data"),i=u(function(N){var G=e+"|\\w+|"+t+"|"+n+"|"+r+"|"+a;return"^"+N+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+G+")\\s*\\,\\s*("+G+")\\)$"},"mapData"),c=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];$e.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:c,singleRegexMatchValue:!0},urls:{regexes:c,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:u(function(N,G){switch(N.length){case 2:return G[0]!=="deg"&&G[0]!=="rad"&&G[1]!=="deg"&&G[1]!=="rad";case 1:return pe(N[0])||G[0]==="deg"||G[0]==="rad";default:return!1}},"validate")},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:u(function(N){var G=N.length;return G===1||G===2||G===4},"validate")}};var l={zeroNonZero:u(function(N,G){return(N==null||G==null)&&N!==G||N==0&&G!=0?!0:N!=0&&G==0},"zeroNonZero"),any:u(function(N,G){return N!=G},"any"),emptyNonEmpty:u(function(N,G){var U=$t(N),ne=$t(G);return U&&!ne||!U&&ne},"emptyNonEmpty")},s=$e.types,d=[{name:"label",type:s.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any}],h=[{name:"source-label",type:s.text,triggersBounds:l.any},{name:"source-text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:s.size,triggersBounds:l.any}],p=[{name:"target-label",type:s.text,triggersBounds:l.any},{name:"target-text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:s.size,triggersBounds:l.any}],f=[{name:"font-family",type:s.fontFamily,triggersBounds:l.any},{name:"font-style",type:s.fontStyle,triggersBounds:l.any},{name:"font-weight",type:s.fontWeight,triggersBounds:l.any},{name:"font-size",type:s.size,triggersBounds:l.any},{name:"text-transform",type:s.textTransform,triggersBounds:l.any},{name:"text-wrap",type:s.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:s.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:s.size,triggersBounds:l.any},{name:"text-outline-width",type:s.size,triggersBounds:l.any},{name:"line-height",type:s.positiveNumber,triggersBounds:l.any}],g=[{name:"text-valign",type:s.valign,triggersBounds:l.any},{name:"text-halign",type:s.halign,triggersBounds:l.any},{name:"color",type:s.color},{name:"text-outline-color",type:s.color},{name:"text-outline-opacity",type:s.zeroOneNumber},{name:"text-background-color",type:s.color},{name:"text-background-opacity",type:s.zeroOneNumber},{name:"text-background-padding",type:s.size,triggersBounds:l.any},{name:"text-border-opacity",type:s.zeroOneNumber},{name:"text-border-color",type:s.color},{name:"text-border-width",type:s.size,triggersBounds:l.any},{name:"text-border-style",type:s.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:s.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:s.justification}],y=[{name:"events",type:s.bool,triggersZOrder:l.any},{name:"text-events",type:s.bool,triggersZOrder:l.any}],b=[{name:"display",type:s.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:s.visibility,triggersZOrder:l.any},{name:"opacity",type:s.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:s.zeroOneNumber},{name:"min-zoomed-font-size",type:s.size},{name:"z-compound-depth",type:s.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:s.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:s.number,triggersZOrder:l.any}],v=[{name:"overlay-padding",type:s.size,triggersBounds:l.any},{name:"overlay-color",type:s.color},{name:"overlay-opacity",type:s.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:s.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:s.cornerRadius}],m=[{name:"underlay-padding",type:s.size,triggersBounds:l.any},{name:"underlay-color",type:s.color},{name:"underlay-opacity",type:s.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:s.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:s.cornerRadius}],x=[{name:"transition-property",type:s.propList},{name:"transition-duration",type:s.time},{name:"transition-delay",type:s.time},{name:"transition-timing-function",type:s.easing}],E=u(function(N,G){return G.value==="label"?-N.poolIndex():G.pfValue},"nodeSizeHashOverride"),P=[{name:"height",type:s.nodeSize,triggersBounds:l.any,hashOverride:E},{name:"width",type:s.nodeSize,triggersBounds:l.any,hashOverride:E},{name:"shape",type:s.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:s.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:s.cornerRadius},{name:"background-color",type:s.color},{name:"background-fill",type:s.fill},{name:"background-opacity",type:s.zeroOneNumber},{name:"background-blacken",type:s.nOneOneNumber},{name:"background-gradient-stop-colors",type:s.colors},{name:"background-gradient-stop-positions",type:s.percentages},{name:"background-gradient-direction",type:s.gradientDirection},{name:"padding",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:s.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:s.boundsExpansion,triggersBounds:l.any}],C=[{name:"border-color",type:s.color},{name:"border-opacity",type:s.zeroOneNumber},{name:"border-width",type:s.size,triggersBounds:l.any},{name:"border-style",type:s.borderStyle},{name:"border-cap",type:s.lineCap},{name:"border-join",type:s.lineJoin},{name:"border-dash-pattern",type:s.numbers},{name:"border-dash-offset",type:s.number},{name:"border-position",type:s.linePosition}],w=[{name:"outline-color",type:s.color},{name:"outline-opacity",type:s.zeroOneNumber},{name:"outline-width",type:s.size,triggersBounds:l.any},{name:"outline-style",type:s.borderStyle},{name:"outline-offset",type:s.size,triggersBounds:l.any}],S=[{name:"background-image",type:s.urls},{name:"background-image-crossorigin",type:s.bgCrossOrigin},{name:"background-image-opacity",type:s.zeroOneNumbers},{name:"background-image-containment",type:s.bgContainment},{name:"background-image-smoothing",type:s.bools},{name:"background-position-x",type:s.bgPos},{name:"background-position-y",type:s.bgPos},{name:"background-width-relative-to",type:s.bgRelativeTo},{name:"background-height-relative-to",type:s.bgRelativeTo},{name:"background-repeat",type:s.bgRepeat},{name:"background-fit",type:s.bgFit},{name:"background-clip",type:s.bgClip},{name:"background-width",type:s.bgWH},{name:"background-height",type:s.bgWH},{name:"background-offset-x",type:s.bgPos},{name:"background-offset-y",type:s.bgPos}],I=[{name:"position",type:s.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:s.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:s.size,triggersBounds:l.any},{name:"min-width-bias-left",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:s.size,triggersBounds:l.any},{name:"min-height-bias-top",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:s.sizeMaybePercent,triggersBounds:l.any}],D=[{name:"line-style",type:s.lineStyle},{name:"line-color",type:s.color},{name:"line-fill",type:s.fill},{name:"line-cap",type:s.lineCap},{name:"line-opacity",type:s.zeroOneNumber},{name:"line-dash-pattern",type:s.numbers},{name:"line-dash-offset",type:s.number},{name:"line-outline-width",type:s.size},{name:"line-outline-color",type:s.color},{name:"line-gradient-stop-colors",type:s.colors},{name:"line-gradient-stop-positions",type:s.percentages},{name:"curve-style",type:s.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:s.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:s.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:s.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:s.size,triggersBounds:l.any},{name:"control-point-distances",type:s.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:s.numbers,triggersBounds:l.any},{name:"segment-distances",type:s.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:s.numbers,triggersBounds:l.any},{name:"segment-radii",type:s.numbers,triggersBounds:l.any},{name:"radius-type",type:s.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:s.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:s.size,triggersBounds:l.any},{name:"taxi-direction",type:s.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:s.number,triggersBounds:l.any},{name:"edge-distances",type:s.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:s.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:s.angle,triggersBounds:l.any},{name:"loop-sweep",type:s.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:s.size,triggersBounds:l.any},{name:"target-distance-from-node",type:s.size,triggersBounds:l.any}],B=[{name:"ghost",type:s.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:s.zeroOneNumber}],T=[{name:"selection-box-color",type:s.color},{name:"selection-box-opacity",type:s.zeroOneNumber},{name:"selection-box-border-color",type:s.color},{name:"selection-box-border-width",type:s.size},{name:"active-bg-color",type:s.color},{name:"active-bg-opacity",type:s.zeroOneNumber},{name:"active-bg-size",type:s.size},{name:"outside-texture-bg-color",type:s.color},{name:"outside-texture-bg-opacity",type:s.zeroOneNumber}],M=[];$e.pieBackgroundN=16,M.push({name:"pie-size",type:s.sizeMaybePercent});for(var _=1;_<=$e.pieBackgroundN;_++)M.push({name:"pie-"+_+"-background-color",type:s.color}),M.push({name:"pie-"+_+"-background-size",type:s.percent}),M.push({name:"pie-"+_+"-background-opacity",type:s.zeroOneNumber});var O=[],L=$e.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:s.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:s.color},{name:"arrow-fill",type:s.arrowFill},{name:"arrow-width",type:s.arrowWidth}].forEach(function(N){L.forEach(function(G){var U=G+"-"+N.name,ne=N.type,de=N.triggersBounds;O.push({name:U,type:ne,triggersBounds:de})})},{});var z=$e.properties=[].concat(y,x,b,v,m,B,g,f,d,h,p,P,C,w,S,M,I,D,O,T),A=$e.propertyGroups={behavior:y,transition:x,visibility:b,overlay:v,underlay:m,ghost:B,commonLabel:g,labelDimensions:f,mainLabel:d,sourceLabel:h,targetLabel:p,nodeBody:P,nodeBorder:C,nodeOutline:w,backgroundImage:S,pie:M,compound:I,edgeLine:D,edgeArrow:O,core:T},R=$e.propertyGroupNames={},Y=$e.propertyGroupKeys=Object.keys(A);Y.forEach(function(N){R[N]=A[N].map(function(G){return G.name}),A[N].forEach(function(G){return G.groupKey=N})});var V=$e.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];$e.propertyNames=z.map(function(N){return N.name});for(var j=0;j<z.length;j++){var W=z[j];z[W.name]=W}for(var J=0;J<V.length;J++){var ae=V[J],Z=z[ae.pointsTo],$={name:ae.name,alias:!0,pointsTo:Z};z.push($),z[ae.name]=$}})();$e.getDefaultProperty=function(e){return this.getDefaultProperties()[e]};$e.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;for(var t=ve({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,s){for(var d=1;d<=$e.pieBackgroundN;d++){var h=s.name.replace("{{i}}",d),p=s.value;l[h]=p}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,s){return $e.arrowPrefixes.forEach(function(d){var h=d+"-"+s.name,p=s.value;l[h]=p}),l},{})),n={},r=0;r<this.properties.length;r++){var a=this.properties[r];if(!a.pointsTo){var o=a.name,i=t[o],c=this.parse(o,i);n[o]=c}}return e.defaultProperties=n,e.defaultProperties};$e.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ia={};Ia.parse=function(e,t,n,r){var a=this;if(ze(t))return a.parseImplWarn(e,t,n,r);var o=r==="mapping"||r===!0||r===!1||r==null?"dontcare":r,i=n?"t":"f",c=""+t,l=Rs(e,c,i,o),s=a.propCache=a.propCache||[],d;return(d=s[l])||(d=s[l]=a.parseImplWarn(e,t,n,r)),(n||r==="mapping")&&(d=At(d),d&&(d.value=At(d.value))),d};Ia.parseImplWarn=function(e,t,n,r){var a=this.parseImpl(e,t,n,r);return!a&&t!=null&&De("The style property `".concat(e,": ").concat(t,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&t==="label"&&De("The style value of `label` is deprecated for `"+a.name+"`"),a};Ia.parseImpl=function(e,t,n,r){var a=this;e=Si(e);var o=a.properties[e],i=t,c=a.types;if(!o||t===void 0)return null;o.alias&&(o=o.pointsTo,e=o.name);var l=pe(t);l&&(t=t.trim());var s=o.type;if(!s)return null;if(n&&(t===""||t===null))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(ze(t))return{name:e,value:t,strValue:"fn",mapped:c.fn,bypass:n};var d,h;if(!(!l||r||t.length<7||t[1]!=="a")){if(t.length>=7&&t[0]==="d"&&(d=new RegExp(c.data.regex).exec(t))){if(n)return!1;var p=c.data;return{name:e,value:d,strValue:""+t,mapped:p,field:d[1],bypass:n}}else if(t.length>=10&&t[0]==="m"&&(h=new RegExp(c.mapData.regex).exec(t))){if(n||s.multiple)return!1;var f=c.mapData;if(!(s.color||s.number))return!1;var g=this.parse(e,h[4]);if(!g||g.mapped)return!1;var y=this.parse(e,h[5]);if(!y||y.mapped)return!1;if(g.pfValue===y.pfValue||g.strValue===y.strValue)return De("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+g.strValue+"`"),this.parse(e,g.strValue);if(s.color){var b=g.value,v=y.value,m=b[0]===v[0]&&b[1]===v[1]&&b[2]===v[2]&&(b[3]===v[3]||(b[3]==null||b[3]===1)&&(v[3]==null||v[3]===1));if(m)return!1}return{name:e,value:h,strValue:""+t,mapped:f,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:g.value,valueMax:y.value,bypass:n}}}if(s.multiple&&r!=="multiple"){var x;if(l?x=t.split(/\s+/):Me(t)?x=t:x=[t],s.evenMultiple&&x.length%2!==0)return null;for(var E=[],P=[],C=[],w="",S=!1,I=0;I<x.length;I++){var D=a.parse(e,x[I],n,"multiple");S=S||pe(D.value),E.push(D.value),C.push(D.pfValue!=null?D.pfValue:D.value),P.push(D.units),w+=(I>0?" ":"")+D.strValue}return s.validate&&!s.validate(E,P)?null:s.singleEnum&&S?E.length===1&&pe(E[0])?{name:e,value:E[0],strValue:E[0],bypass:n}:null:{name:e,value:E,pfValue:C,strValue:w,bypass:n,units:P}}var B=u(function(){for(var N=0;N<s.enums.length;N++){var G=s.enums[N];if(G===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null},"checkEnums");if(s.number){var T,M="px";if(s.units&&(T=s.units),s.implicitUnits&&(M=s.implicitUnits),!s.unitless)if(l){var _="px|em"+(s.allowPercent?"|\\%":"");T&&(_=T);var O=t.match("^("+He+")("+_+")?$");O&&(t=O[1],T=O[2]||M)}else(!T||s.implicitUnits)&&(T=M);if(t=parseFloat(t),isNaN(t)&&s.enums===void 0)return null;if(isNaN(t)&&s.enums!==void 0)return t=i,B();if(s.integer&&!nc(t)||s.min!==void 0&&(t<s.min||s.strictMin&&t===s.min)||s.max!==void 0&&(t>s.max||s.strictMax&&t===s.max))return null;var L={name:e,value:t,strValue:""+t+(T||""),units:T,bypass:n};return s.unitless||T!=="px"&&T!=="em"?L.pfValue=t:L.pfValue=T==="px"||!T?t:this.getEmSizeInPixels()*t,(T==="ms"||T==="s")&&(L.pfValue=T==="ms"?t:1e3*t),(T==="deg"||T==="rad")&&(L.pfValue=T==="rad"?t:Sd(t)),T==="%"&&(L.pfValue=t/100),L}else if(s.propList){var z=[],A=""+t;if(A!=="none"){for(var R=A.split(/\s*,\s*|\s+/),Y=0;Y<R.length;Y++){var V=R[Y].trim();a.properties[V]?z.push(V):De("`"+V+"` is not a valid property name")}if(z.length===0)return null}return{name:e,value:z,strValue:z.length===0?"none":z.join(" "),bypass:n}}else if(s.color){var j=bc(t);return j?{name:e,value:j,pfValue:j,strValue:"rgb("+j[0]+","+j[1]+","+j[2]+")",bypass:n}:null}else if(s.regex||s.regexes){if(s.enums){var W=B();if(W)return W}for(var J=s.regexes?s.regexes:[s.regex],ae=0;ae<J.length;ae++){var Z=new RegExp(J[ae]),$=Z.exec(t);if($)return{name:e,value:s.singleRegexMatchValue?$[1]:$,strValue:""+t,bypass:n}}return null}else return s.string?{name:e,value:""+t,strValue:""+t,bypass:n}:s.enums?B():null};var rt=u(function e(t){if(!(this instanceof e))return new e(t);if(!Ci(t)){Re("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},"Style"),it=rt.prototype;it.instanceString=function(){return"style"};it.clear=function(){for(var e=this._private,t=e.cy,n=t.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(n,!0),n.forEach(function(a){var o=a[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};it.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};it.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)};it.selector=function(e){var t=e==="core"?null:new Jt(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this};it.css=function(){var e=this,t=arguments;if(t.length===1)for(var n=t[0],r=0;r<e.properties.length;r++){var a=e.properties[r],o=n[a.name];o===void 0&&(o=n[ma(a.name)]),o!==void 0&&this.cssRule(a.name,o)}else t.length===2&&this.cssRule(t[0],t[1]);return this};it.style=it.css;it.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var a=!this[r].selector;a&&(this._private.coreStyle[n.name]=n)}return this};it.append=function(e){return ys(e)?e.appendToStyle(this):Me(e)?this.appendFromJson(e):pe(e)&&this.appendFromString(e),this};rt.fromJson=function(e,t){var n=new rt(e);return n.fromJson(t),n};rt.fromString=function(e,t){return new rt(e).fromString(t)};[ot,Dr,Vi,Ot,Ba,ji,$e,Ia].forEach(function(e){ve(it,e)});rt.types=it.types;rt.properties=it.properties;rt.propertyGroups=it.propertyGroups;rt.propertyGroupNames=it.propertyGroupNames;rt.propertyGroupKeys=it.propertyGroupKeys;var ng={style:u(function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},"style"),setStyle:u(function(e){var t=this._private;return ys(e)?t.style=e.generateStyle(this):Me(e)?t.style=rt.fromJson(this,e):pe(e)?t.style=rt.fromString(this,e):t.style=rt(this),t.style},"setStyle"),updateStyle:u(function(){this.mutableElements().updateStyle()},"updateStyle")},rg="single",bn={autolock:u(function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},"autolock"),autoungrabify:u(function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},"autoungrabify"),autounselectify:u(function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},"autounselectify"),selectionType:u(function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=rg),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},"selectionType"),panningEnabled:u(function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},"panningEnabled"),userPanningEnabled:u(function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},"userPanningEnabled"),zoomingEnabled:u(function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},"zoomingEnabled"),userZoomingEnabled:u(function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},"userZoomingEnabled"),boxSelectionEnabled:u(function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},"boxSelectionEnabled"),pan:u(function(){var e=arguments,t=this._private.pan,n,r,a,o,i;switch(e.length){case 0:return t;case 1:if(pe(e[0]))return n=e[0],t[n];if(Ce(e[0])){if(!this._private.panningEnabled)return this;a=e[0],o=a.x,i=a.y,re(o)&&(t.x=o),re(i)&&(t.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],r=e[1],(n==="x"||n==="y")&&re(r)&&(t[n]=r),this.emit("pan viewport");break}return this.notify("viewport"),this},"pan"),panBy:u(function(e,t){var n=arguments,r=this._private.pan,a,o,i,c,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Ce(e)&&(i=n[0],c=i.x,l=i.y,re(c)&&(r.x+=c),re(l)&&(r.y+=l),this.emit("pan viewport"));break;case 2:a=e,o=t,(a==="x"||a==="y")&&re(o)&&(r[a]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},"panBy"),fit:u(function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},"fit"),getFitViewport:u(function(e,t){if(re(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(pe(e)){var r=e;e=this.$(r)}else if(ic(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else gt(e)||(e=this.mutableElements());if(!(gt(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),i=this.height(),c;if(t=re(t)?t:0,!isNaN(o)&&!isNaN(i)&&o>0&&i>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){c=Math.min((o-2*t)/n.w,(i-2*t)/n.h),c=c>this._private.maxZoom?this._private.maxZoom:c,c=c<this._private.minZoom?this._private.minZoom:c;var l={x:(o-c*(n.x1+n.x2))/2,y:(i-c*(n.y1+n.y2))/2};return{zoom:c,pan:l}}}}},"getFitViewport"),zoomRange:u(function(e,t){var n=this._private;if(t==null){var r=e;e=r.min,t=r.max}return re(e)&&re(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):re(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:re(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},"zoomRange"),minZoom:u(function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},"minZoom"),maxZoom:u(function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},"maxZoom"),getZoomedViewport:u(function(e){var t=this._private,n=t.pan,r=t.zoom,a,o,i=!1;if(t.zoomingEnabled||(i=!0),re(e)?o=e:Ce(e)&&(o=e.level,e.position!=null?a=Ea(e.position,r,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(i=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,i||!re(o)||o===r||a!=null&&(!re(a.x)||!re(a.y)))return null;if(a!=null){var c=n,l=r,s=o,d={x:-s/l*(a.x-c.x)+a.x,y:-s/l*(a.y-c.y)+a.y};return{zoomed:!0,panned:!0,zoom:s,pan:d}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},"getZoomedViewport"),zoom:u(function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},"zoom"),viewport:u(function(e){var t=this._private,n=!0,r=!0,a=[],o=!1,i=!1;if(!e)return this;if(re(e.zoom)||(n=!1),Ce(e.pan)||(r=!1),!n&&!r)return this;if(n){var c=e.zoom;c<t.minZoom||c>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=c,a.push("zoom"))}if(r&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;re(l.x)&&(t.pan.x=l.x,i=!1),re(l.y)&&(t.pan.y=l.y,i=!1),i||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},"viewport"),center:u(function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},"center"),getCenterPan:u(function(e,t){if(this._private.panningEnabled){if(pe(e)){var n=e;e=this.mutableElements().filter(n)}else gt(e)||(e=this.mutableElements());if(e.length!==0){var r=e.boundingBox(),a=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var i={x:(a-t*(r.x1+r.x2))/2,y:(o-t*(r.y1+r.y2))/2};return i}}},"getCenterPan"),reset:u(function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},"reset"),invalidateSize:u(function(){this._private.sizeCache=null},"invalidateSize"),size:u(function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var r=n.window().getComputedStyle(t),a=u(function(o){return parseFloat(r.getPropertyValue(o))},"val");return{width:t.clientWidth-a("padding-left")-a("padding-right"),height:t.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},"size"),width:u(function(){return this.size().width},"width"),height:u(function(){return this.size().height},"height"),extent:u(function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},"extent"),renderedExtent:u(function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},"renderedExtent"),multiClickDebounceTime:u(function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this},"multiClickDebounceTime")};bn.centre=bn.center;bn.autolockNodes=bn.autolock;bn.autoungrabifyNodes=bn.autoungrabify;var mr={data:_e.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:_e.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:_e.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:_e.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};mr.attr=mr.data;mr.removeAttr=mr.removeData;var br=u(function(e){var t=this;e=ve({},e);var n=e.container;n&&!ia(n)&&ia(n[0])&&(n=n[0]);var r=n?n._cyreg:null;r=r||{},r&&r.cy&&(r.cy.destroy(),r={});var a=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var o=Ye!==void 0&&n!==void 0&&!e.headless,i=e;i.layout=ve({name:o?"grid":"null"},i.layout),i.renderer=ve({name:o?"canvas":"null"},i.renderer);var c=u(function(p,f,g){return f!==void 0?f:g!==void 0?g:p},"defVal"),l=this._private={container:n,ready:!1,options:i,elements:new Je(this),listeners:[],aniEles:new Je(this),data:i.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,i.zoomingEnabled),userZoomingEnabled:c(!0,i.userZoomingEnabled),panningEnabled:c(!0,i.panningEnabled),userPanningEnabled:c(!0,i.userPanningEnabled),boxSelectionEnabled:c(!0,i.boxSelectionEnabled),autolock:c(!1,i.autolock,i.autolockNodes),autoungrabify:c(!1,i.autoungrabify,i.autoungrabifyNodes),autounselectify:c(!1,i.autounselectify),styleEnabled:i.styleEnabled===void 0?o:i.styleEnabled,zoom:re(i.zoom)?i.zoom:1,pan:{x:Ce(i.pan)&&re(i.pan.x)?i.pan.x:0,y:Ce(i.pan)&&re(i.pan.y)?i.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:c(250,i.multiClickDebounceTime)};this.createEmitter(),this.selectionType(i.selectionType),this.zoomRange({min:i.minZoom,max:i.maxZoom});var s=u(function(p,f){var g=p.some(oc);if(g)return Hn.all(p).then(f);f(p)},"loadExtData");l.styleEnabled&&t.setStyle([]);var d=ve({},i,i.renderer);t.initRenderer(d);var h=u(function(p,f,g){t.notifications(!1);var y=t.mutableElements();y.length>0&&y.remove(),p!=null&&(Ce(p)||Me(p))&&t.add(p),t.one("layoutready",function(v){t.notifications(!0),t.emit(v),t.one("load",f),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",g),t.emit("done")});var b=ve({},t._private.options.layout);b.eles=t.elements(),t.layout(b).run()},"setElesAndLayout");s([i.style,i.elements],function(p){var f=p[0],g=p[1];l.styleEnabled&&t.style().append(f),h(g,function(){t.startAnimationLoop(),l.ready=!0,ze(i.ready)&&t.on("ready",i.ready);for(var y=0;y<a.length;y++){var b=a[y];t.on("ready",b)}r&&(r.readies=[]),t.emit("ready")},i.done)})},"Core"),ha=br.prototype;ve(ha,{instanceString:u(function(){return"core"},"instanceString"),isReady:u(function(){return this._private.ready},"isReady"),destroyed:u(function(){return this._private.destroyed},"destroyed"),ready:u(function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},"ready"),destroy:u(function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},"destroy"),hasElementWithId:u(function(e){return this._private.elements.hasElementWithId(e)},"hasElementWithId"),getElementById:u(function(e){return this._private.elements.getElementById(e)},"getElementById"),hasCompoundNodes:u(function(){return this._private.hasCompoundNodes},"hasCompoundNodes"),headless:u(function(){return this._private.renderer.isHeadless()},"headless"),styleEnabled:u(function(){return this._private.styleEnabled},"styleEnabled"),addToPool:u(function(e){return this._private.elements.merge(e),this},"addToPool"),removeFromPool:u(function(e){return this._private.elements.unmerge(e),this},"removeFromPool"),container:u(function(){return this._private.container||null},"container"),window:u(function(){var e=this._private.container;if(e==null)return Ye;var t=this._private.container.ownerDocument;return t===void 0||t==null?Ye:t.defaultView||Ye},"window"),mount:u(function(e){if(e!=null){var t=this,n=t._private,r=n.options;return!ia(e)&&ia(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(ve({},r,r.renderer,{name:r.renderer.name==="null"?"canvas":r.renderer.name})),t.startAnimationLoop(),t.style(r.style),t.emit("mount"),t}},"mount"),unmount:u(function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},"unmount"),options:u(function(){return At(this._private.options)},"options"),json:u(function(e){var t=this,n=t._private,r=t.mutableElements(),a=u(function(m){return t.getElementById(m.id())},"getFreshRef");if(Ce(e)){if(t.startBatch(),e.elements){var o={},i=u(function(m,x){for(var E=[],P=[],C=0;C<m.length;C++){var w=m[C];if(!w.data.id){De("cy.json() cannot handle elements without an ID attribute");continue}var S=""+w.data.id,I=t.getElementById(S);o[S]=!0,I.length!==0?P.push({ele:I,json:w}):(x&&(w.group=x),E.push(w))}t.add(E);for(var D=0;D<P.length;D++){var B=P[D],T=B.ele,M=B.json;T.json(M)}},"updateEles");if(Me(e.elements))i(e.elements);else for(var c=["nodes","edges"],l=0;l<c.length;l++){var s=c[l],d=e.elements[s];Me(d)&&i(d,s)}var h=t.collection();r.filter(function(m){return!o[m.id()]}).forEach(function(m){m.isParent()?h.merge(m):m.remove()}),h.forEach(function(m){return m.children().move({parent:null})}),h.forEach(function(m){return a(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var p=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],f=0;f<p.length;f++){var g=p[f];e[g]!=null&&t[g](e[g])}return t.endBatch(),this}else{var y=!!e,b={};y?b.elements=this.elements().map(function(m){return m.json()}):(b.elements={},r.forEach(function(m){var x=m.group();b.elements[x]||(b.elements[x]=[]),b.elements[x].push(m.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=At(t.data());var v=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=At(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=At(v.renderer),b.hideEdgesOnViewport=v.hideEdgesOnViewport,b.textureOnViewport=v.textureOnViewport,b.wheelSensitivity=v.wheelSensitivity,b.motionBlur=v.motionBlur,b.multiClickDebounceTime=v.multiClickDebounceTime,b}},"json")});ha.$id=ha.getElementById;[Kf,$f,gu,ui,ea,Jf,ci,ta,ng,bn,mr].forEach(function(e){ve(ha,e)});var ag={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")},ig={maximal:!1,acyclic:!1},_n=u(function(e){return e.scratch("breadthfirst")},"getInfo"),Go=u(function(e,t){return e.scratch("breadthfirst",t)},"setInfo");function qi(e){this.options=ve({},ag,ig,e)}u(qi,"BreadthFirstLayout");qi.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=r.nodes().filter(function(Q){return!Q.isParent()}),o=r,i=t.directed,c=t.acyclic||t.maximal||t.maximalAdjustments>0,l=pt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s;if(gt(t.roots))s=t.roots;else if(Me(t.roots)){for(var d=[],h=0;h<t.roots.length;h++){var p=t.roots[h],f=n.getElementById(p);d.push(f)}s=n.collection(d)}else if(pe(t.roots))s=n.$(t.roots);else if(i)s=a.roots();else{var g=r.components();s=n.collection();for(var y=u(function(Q){var se=g[Q],ie=se.maxDegree(!1),he=se.filter(function(ye){return ye.degree(!1)===ie});s=s.add(he)},"_loop"),b=0;b<g.length;b++)y(b)}var v=[],m={},x=u(function(Q,se){v[se]==null&&(v[se]=[]);var ie=v[se].length;v[se].push(Q),Go(Q,{index:ie,depth:se})},"addToDepth"),E=u(function(Q,se){var ie=_n(Q),he=ie.depth,ye=ie.index;v[he][ye]=null,x(Q,se)},"changeDepth");o.bfs({roots:s,directed:t.directed,visit:u(function(Q,se,ie,he,ye){var xe=Q[0],we=xe.id();x(xe,ye),m[we]=!0},"visit")});for(var P=[],C=0;C<a.length;C++){var w=a[C];m[w.id()]||P.push(w)}var S=u(function(Q){for(var se=v[Q],ie=0;ie<se.length;ie++){var he=se[ie];if(he==null){se.splice(ie,1),ie--;continue}Go(he,{depth:Q,index:ie})}},"assignDepthsAt"),I=u(function(){for(var Q=0;Q<v.length;Q++)S(Q)},"assignDepths"),D=u(function(Q,se){for(var ie=_n(Q),he=Q.incomers().filter(function(k){return k.isNode()&&r.has(k)}),ye=-1,xe=Q.id(),we=0;we<he.length;we++){var Be=he[we],Ee=_n(Be);ye=Math.max(ye,Ee.depth)}if(ie.depth<=ye){if(!t.acyclic&&se[xe])return null;var Se=ye+1;return E(Q,Se),se[xe]=Se,!0}return!1},"adjustMaximally");if(i&&c){var B=[],T={},M=u(function(Q){return B.push(Q)},"enqueue"),_=u(function(){return B.shift()},"dequeue");for(a.forEach(function(Q){return B.push(Q)});B.length>0;){var O=_(),L=D(O,T);if(L)O.outgoers().filter(function(Q){return Q.isNode()&&r.has(Q)}).forEach(M);else if(L===null){De("Detected double maximal shift for node `"+O.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}I();var z=0;if(t.avoidOverlap)for(var A=0;A<a.length;A++){var R=a[A],Y=R.layoutDimensions(t),V=Y.w,j=Y.h;z=Math.max(z,V,j)}var W={},J=u(function(Q){if(W[Q.id()])return W[Q.id()];for(var se=_n(Q).depth,ie=Q.neighborhood(),he=0,ye=0,xe=0;xe<ie.length;xe++){var we=ie[xe];if(!(we.isEdge()||we.isParent()||!a.has(we))){var Be=_n(we);if(Be!=null){var Ee=Be.index,Se=Be.depth;if(!(Ee==null||Se==null)){var k=v[Se].length;Se<se&&(he+=Ee/k,ye++)}}}}return ye=Math.max(1,ye),he=he/ye,ye===0&&(he=0),W[Q.id()]=he,he},"getWeightedPercent"),ae=u(function(Q,se){var ie=J(Q),he=J(se),ye=ie-he;return ye===0?bs(Q.id(),se.id()):ye},"sortFn");t.depthSort!==void 0&&(ae=t.depthSort);for(var Z=0;Z<v.length;Z++)v[Z].sort(ae),S(Z);for(var $=[],N=0;N<P.length;N++)$.push(P[N]);v.unshift($),I();for(var G=0,U=0;U<v.length;U++)G=Math.max(v[U].length,G);var ne={x:l.x1+l.w/2,y:l.x1+l.h/2},de=v.reduce(function(Q,se){return Math.max(Q,se.length)},0),be=u(function(Q){var se=_n(Q),ie=se.depth,he=se.index,ye=v[ie].length,xe=Math.max(l.w/((t.grid?de:ye)+1),z),we=Math.max(l.h/(v.length+1),z),Be=Math.min(l.w/2/v.length,l.h/2/v.length);if(Be=Math.max(Be,z),t.circle){var Ee=Be*ie+Be-(v.length>0&&v[0].length<=3?Be/2:0),Se=2*Math.PI/v[ie].length*he;return ie===0&&v[0].length===1&&(Ee=1),{x:ne.x+Ee*Math.cos(Se),y:ne.y+Ee*Math.sin(Se)}}else{var k={x:ne.x+(he+1-(ye+1)/2)*xe,y:(ie+1)*we};return k}},"getPosition");return r.nodes().layoutPositions(this,t,be),this};var og={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function Xi(e){this.options=ve({},og,e)}u(Xi,"CircleLayout");Xi.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,o=r.nodes().not(":parent");t.sort&&(o=o.sort(t.sort));for(var i=pt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c={x:i.x1+i.w/2,y:i.y1+i.h/2},l=t.sweep===void 0?2*Math.PI-2*Math.PI/o.length:t.sweep,s=l/Math.max(1,o.length-1),d,h=0,p=0;p<o.length;p++){var f=o[p],g=f.layoutDimensions(t),y=g.w,b=g.h;h=Math.max(h,y,b)}if(re(t.radius)?d=t.radius:o.length<=1?d=0:d=Math.min(i.h,i.w)/2-h,o.length>1&&t.avoidOverlap){h*=1.75;var v=Math.cos(s)-Math.cos(0),m=Math.sin(s)-Math.sin(0),x=Math.sqrt(h*h/(v*v+m*m));d=Math.max(x,d)}var E=u(function(P,C){var w=t.startAngle+C*s*(a?1:-1),S=d*Math.cos(w),I=d*Math.sin(w),D={x:c.x+S,y:c.y+I};return D},"getPos");return r.nodes().layoutPositions(this,t,E),this};var sg={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:u(function(e){return e.degree()},"concentric"),levelWidth:u(function(e){return e.maxDegree()/4},"levelWidth"),animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function Yi(e){this.options=ve({},sg,e)}u(Yi,"ConcentricLayout");Yi.prototype.run=function(){for(var e=this.options,t=e,n=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,r=e.cy,a=t.eles,o=a.nodes().not(":parent"),i=pt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),c={x:i.x1+i.w/2,y:i.y1+i.h/2},l=[],s=0,d=0;d<o.length;d++){var h=o[d],p=void 0;p=t.concentric(h),l.push({value:p,node:h}),h._private.scratch.concentric=p}o.updateStyle();for(var f=0;f<o.length;f++){var g=o[f],y=g.layoutDimensions(t);s=Math.max(s,y.w,y.h)}l.sort(function(Q,se){return se.value-Q.value});for(var b=t.levelWidth(o),v=[[]],m=v[0],x=0;x<l.length;x++){var E=l[x];if(m.length>0){var P=Math.abs(m[0].value-E.value);P>=b&&(m=[],v.push(m))}m.push(E)}var C=s+t.minNodeSpacing;if(!t.avoidOverlap){var w=v.length>0&&v[0].length>1,S=Math.min(i.w,i.h)/2-C,I=S/(v.length+w?1:0);C=Math.min(C,I)}for(var D=0,B=0;B<v.length;B++){var T=v[B],M=t.sweep===void 0?2*Math.PI-2*Math.PI/T.length:t.sweep,_=T.dTheta=M/Math.max(1,T.length-1);if(T.length>1&&t.avoidOverlap){var O=Math.cos(_)-Math.cos(0),L=Math.sin(_)-Math.sin(0),z=Math.sqrt(C*C/(O*O+L*L));D=Math.max(z,D)}T.r=D,D+=C}if(t.equidistant){for(var A=0,R=0,Y=0;Y<v.length;Y++){var V=v[Y],j=V.r-R;A=Math.max(A,j)}R=0;for(var W=0;W<v.length;W++){var J=v[W];W===0&&(R=J.r),J.r=R,R+=A}}for(var ae={},Z=0;Z<v.length;Z++)for(var $=v[Z],N=$.dTheta,G=$.r,U=0;U<$.length;U++){var ne=$[U],de=t.startAngle+(n?1:-1)*N*U,be={x:c.x+G*Math.cos(de),y:c.y+G*Math.sin(de)};ae[ne.node.id()]=be}return a.nodes().layoutPositions(this,t,function(Q){var se=Q.id();return ae[se]}),this};var Ha,lg={ready:u(function(){},"ready"),stop:u(function(){},"stop"),animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:u(function(e){return 2048},"nodeRepulsion"),nodeOverlap:4,idealEdgeLength:u(function(e){return 32},"idealEdgeLength"),edgeElasticity:u(function(e){return 32},"edgeElasticity"),nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Br(e){this.options=ve({},lg,e),this.options.layout=this;var t=this.options.eles.nodes(),n=this.options.eles.edges(),r=n.filter(function(a){var o=a.source().data("id"),i=a.target().data("id"),c=t.some(function(s){return s.data("id")===o}),l=t.some(function(s){return s.data("id")===i});return!c||!l});this.options.eles=this.options.eles.not(r)}u(Br,"CoseLayout");Br.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,(e.animate===!0||e.animate===!1)&&n.emit({type:"layoutstart",layout:n}),e.debug===!0?Ha=!0:Ha=!1;var r=ug(t,n,e);Ha&&hg(r),e.randomize&&pg(r);var a=Vt(),o=u(function(){fg(r,t,e),e.fit===!0&&t.fit(e.padding)},"refresh"),i=u(function(h){return!(n.stopped||h>=e.numIter||(gg(r,e),r.temperature=r.temperature*e.coolingFactor,r.temperature<e.minTemp))},"mainLoop"),c=u(function(){if(e.animate===!0||e.animate===!1)o(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var h=e.eles.nodes(),p=vu(r,e,h);h.layoutPositions(n,e,p)}},"done"),l=0,s=!0;if(e.animate===!0){var d=u(function h(){for(var p=0;s&&p<e.refresh;)s=i(l),l++,p++;if(!s)Zo(r,e),c();else{var f=Vt();f-a>=e.animationThreshold&&o(),oa(h)}},"frame");d()}else{for(;s;)s=i(l),l++;Zo(r,e),c()}return this};Br.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Br.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var ug=u(function(e,t,n){for(var r=n.eles.edges(),a=n.eles.nodes(),o=pt(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},c=n.eles.components(),l={},s=0;s<c.length;s++)for(var d=c[s],h=0;h<d.length;h++){var p=d[h];l[p.id()]=s}for(var s=0;s<i.nodeSize;s++){var f=a[s],g=f.layoutDimensions(n),y={};y.isLocked=f.locked(),y.id=f.data("id"),y.parentId=f.data("parent"),y.cmptId=l[f.id()],y.children=[],y.positionX=f.position("x"),y.positionY=f.position("y"),y.offsetX=0,y.offsetY=0,y.height=g.w,y.width=g.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(f.style("padding")),y.padRight=parseFloat(f.style("padding")),y.padTop=parseFloat(f.style("padding")),y.padBottom=parseFloat(f.style("padding")),y.nodeRepulsion=ze(n.nodeRepulsion)?n.nodeRepulsion(f):n.nodeRepulsion,i.layoutNodes.push(y),i.idToIndex[y.id]=s}for(var b=[],v=0,m=-1,x=[],s=0;s<i.nodeSize;s++){var f=i.layoutNodes[s],E=f.parentId;E!=null?i.layoutNodes[i.idToIndex[E]].children.push(f.id):(b[++m]=f.id,x.push(f.id))}for(i.graphSet.push(x);v<=m;){var P=b[v++],C=i.idToIndex[P],p=i.layoutNodes[C],w=p.children;if(w.length>0){i.graphSet.push(w);for(var s=0;s<w.length;s++)b[++m]=w[s]}}for(var s=0;s<i.graphSet.length;s++)for(var S=i.graphSet[s],h=0;h<S.length;h++){var I=i.idToIndex[S[h]];i.indexToGraph[I]=s}for(var s=0;s<i.edgeSize;s++){var D=r[s],B={};B.id=D.data("id"),B.sourceId=D.data("source"),B.targetId=D.data("target");var T=ze(n.idealEdgeLength)?n.idealEdgeLength(D):n.idealEdgeLength,M=ze(n.edgeElasticity)?n.edgeElasticity(D):n.edgeElasticity,_=i.idToIndex[B.sourceId],O=i.idToIndex[B.targetId],L=i.indexToGraph[_],z=i.indexToGraph[O];if(L!=z){for(var A=cg(B.sourceId,B.targetId,i),R=i.graphSet[A],Y=0,y=i.layoutNodes[_];R.indexOf(y.id)===-1;)y=i.layoutNodes[i.idToIndex[y.parentId]],Y++;for(y=i.layoutNodes[O];R.indexOf(y.id)===-1;)y=i.layoutNodes[i.idToIndex[y.parentId]],Y++;T*=Y*n.nestingFactor}B.idealLength=T,B.elasticity=M,i.layoutEdges.push(B)}return i},"createLayoutInfo"),cg=u(function(e,t,n){var r=dg(e,t,0,n);return 2>r.count?0:r.graph},"findLCA"),dg=u(function e(t,n,r,a){var o=a.graphSet[r];if(-1<o.indexOf(t)&&-1<o.indexOf(n))return{count:2,graph:r};for(var i=0,c=0;c<o.length;c++){var l=o[c],s=a.idToIndex[l],d=a.layoutNodes[s].children;if(d.length!==0){var h=a.indexToGraph[a.idToIndex[d[0]]],p=e(t,n,h,a);if(p.count!==0)if(p.count===1){if(i++,i===2)break}else return p}}return{count:i,graph:r}},"findLCA_aux"),hg,pg=u(function(e,t){for(var n=e.clientWidth,r=e.clientHeight,a=0;a<e.nodeSize;a++){var o=e.layoutNodes[a];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},"randomizePositions"),vu=u(function(e,t,n){var r=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var i=e.layoutNodes[e.idToIndex[o.data("id")]];a.x1=Math.min(a.x1,i.positionX),a.x2=Math.max(a.x2,i.positionX),a.y1=Math.min(a.y1,i.positionY),a.y2=Math.max(a.y2,i.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(o,i){var c=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var l=(c.positionX-a.x1)/a.w,s=(c.positionY-a.y1)/a.h;return{x:r.x1+l*r.w,y:r.y1+s*r.h}}else return{x:c.positionX,y:c.positionY}}},"getScaleInBoundsFn"),fg=u(function(e,t,n){var r=n.layout,a=n.eles.nodes(),o=vu(e,n,a);a.positions(o),e.ready!==!0&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},"refreshPositions"),gg=u(function(e,t,n){vg(e,t),bg(e),xg(e,t),wg(e),Eg(e)},"step"),vg=u(function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],a=r.length,o=0;o<a;o++)for(var i=e.layoutNodes[e.idToIndex[r[o]]],c=o+1;c<a;c++){var l=e.layoutNodes[e.idToIndex[r[c]]];yg(i,l,e,t)}},"calculateNodeForces"),Ko=u(function(e){return-e+2*e*Math.random()},"randomDistance"),yg=u(function(e,t,n,r){var a=e.cmptId,o=t.cmptId;if(!(a!==o&&!n.isCompound)){var i=t.positionX-e.positionX,c=t.positionY-e.positionY,l=1;i===0&&c===0&&(i=Ko(l),c=Ko(l));var s=mg(e,t,i,c);if(s>0)var b=r.nodeOverlap*s,y=Math.sqrt(i*i+c*c),v=b*i/y,m=b*c/y;else var d=pa(e,i,c),h=pa(t,-1*i,-1*c),p=h.x-d.x,f=h.y-d.y,g=p*p+f*f,y=Math.sqrt(g),b=(e.nodeRepulsion+t.nodeRepulsion)/g,v=b*p/y,m=b*f/y;e.isLocked||(e.offsetX-=v,e.offsetY-=m),t.isLocked||(t.offsetX+=v,t.offsetY+=m)}},"nodeRepulsion"),mg=u(function(e,t,n,r){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(r>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return a>=0&&o>=0?Math.sqrt(a*a+o*o):0},"nodesOverlap"),pa=u(function(e,t,n){var r=e.positionX,a=e.positionY,o=e.height||1,i=e.width||1,c=n/t,l=o/i,s={};return t===0&&0<n||t===0&&0>n?(s.x=r,s.y=a+o/2,s):0<t&&-1*l<=c&&c<=l?(s.x=r+i/2,s.y=a+i*n/2/t,s):0>t&&-1*l<=c&&c<=l?(s.x=r-i/2,s.y=a-i*n/2/t,s):0<n&&(c<=-1*l||c>=l)?(s.x=r+o*t/2/n,s.y=a+o/2,s):(0>n&&(c<=-1*l||c>=l)&&(s.x=r-o*t/2/n,s.y=a-o/2),s)},"findClippingPoint"),bg=u(function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],a=e.idToIndex[r.sourceId],o=e.layoutNodes[a],i=e.idToIndex[r.targetId],c=e.layoutNodes[i],l=c.positionX-o.positionX,s=c.positionY-o.positionY;if(!(l===0&&s===0)){var d=pa(o,l,s),h=pa(c,-1*l,-1*s),p=h.x-d.x,f=h.y-d.y,g=Math.sqrt(p*p+f*f),y=Math.pow(r.idealLength-g,2)/r.elasticity;if(g!==0)var b=y*p/g,v=y*f/g;else var b=0,v=0;o.isLocked||(o.offsetX+=b,o.offsetY+=v),c.isLocked||(c.offsetX-=b,c.offsetY-=v)}}},"calculateEdgeForces"),xg=u(function(e,t){if(t.gravity!==0)for(var n=1,r=0;r<e.graphSet.length;r++){var a=e.graphSet[r],o=a.length;if(r===0)var l=e.clientHeight/2,s=e.clientWidth/2;else var i=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[i.parentId]],l=c.positionX,s=c.positionY;for(var d=0;d<o;d++){var h=e.layoutNodes[e.idToIndex[a[d]]];if(!h.isLocked){var p=l-h.positionX,f=s-h.positionY,g=Math.sqrt(p*p+f*f);if(g>n){var y=t.gravity*p/g,b=t.gravity*f/g;h.offsetX+=y,h.offsetY+=b}}}}},"calculateGravityForces"),wg=u(function(e,t){var n=[],r=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;r<=a;){var o=n[r++],i=e.idToIndex[o],c=e.layoutNodes[i],l=c.children;if(0<l.length&&!c.isLocked){for(var s=c.offsetX,d=c.offsetY,h=0;h<l.length;h++){var p=e.layoutNodes[e.idToIndex[l[h]]];p.offsetX+=s,p.offsetY+=d,n[++a]=l[h]}c.offsetX=0,c.offsetY=0}}},"propagateForces"),Eg=u(function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var a=kg(r.offsetX,r.offsetY,e.temperature);r.positionX+=a.x,r.positionY+=a.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,Cg(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},"updatePositions"),kg=u(function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var a={x:n*e/r,y:n*t/r};else var a={x:e,y:t};return a},"limitForce"),Cg=u(function e(t,n){var r=t.parentId;if(r!=null){var a=n.layoutNodes[n.idToIndex[r]],o=!1;if((a.maxX==null||t.maxX+a.padRight>a.maxX)&&(a.maxX=t.maxX+a.padRight,o=!0),(a.minX==null||t.minX-a.padLeft<a.minX)&&(a.minX=t.minX-a.padLeft,o=!0),(a.maxY==null||t.maxY+a.padBottom>a.maxY)&&(a.maxY=t.maxY+a.padBottom,o=!0),(a.minY==null||t.minY-a.padTop<a.minY)&&(a.minY=t.minY-a.padTop,o=!0),o)return e(a,n)}},"updateAncestryBoundaries"),Zo=u(function(e,t){for(var n=e.layoutNodes,r=[],a=0;a<n.length;a++){var o=n[a],i=o.cmptId,c=r[i]=r[i]||[];c.push(o)}for(var l=0,a=0;a<r.length;a++){var s=r[a];if(s){s.x1=1/0,s.x2=-1/0,s.y1=1/0,s.y2=-1/0;for(var d=0;d<s.length;d++){var h=s[d];s.x1=Math.min(s.x1,h.positionX-h.width/2),s.x2=Math.max(s.x2,h.positionX+h.width/2),s.y1=Math.min(s.y1,h.positionY-h.height/2),s.y2=Math.max(s.y2,h.positionY+h.height/2)}s.w=s.x2-s.x1,s.h=s.y2-s.y1,l+=s.w*s.h}}r.sort(function(v,m){return m.w*m.h-v.w*v.h});for(var p=0,f=0,g=0,y=0,b=Math.sqrt(l)*e.clientWidth/e.clientHeight,a=0;a<r.length;a++){var s=r[a];if(s){for(var d=0;d<s.length;d++){var h=s[d];h.isLocked||(h.positionX+=p-s.x1,h.positionY+=f-s.y1)}p+=s.w+t.componentSpacing,g+=s.w+t.componentSpacing,y=Math.max(y,s.h),g>b&&(f+=y+t.componentSpacing,p=0,g=0,y=0)}}},"separateComponents"),Sg={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:u(function(e){},"position"),sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function Hi(e){this.options=ve({},Sg,e)}u(Hi,"GridLayout");Hi.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=r.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));var o=pt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(o.h===0||o.w===0)r.nodes().layoutPositions(this,t,function(W){return{x:o.x1,y:o.y1}});else{var i=a.size(),c=Math.sqrt(i*o.h/o.w),l=Math.round(c),s=Math.round(o.w/o.h*c),d=u(function(W){if(W==null)return Math.min(l,s);var J=Math.min(l,s);J==l?l=W:s=W},"small"),h=u(function(W){if(W==null)return Math.max(l,s);var J=Math.max(l,s);J==l?l=W:s=W},"large"),p=t.rows,f=t.cols!=null?t.cols:t.columns;if(p!=null&&f!=null)l=p,s=f;else if(p!=null&&f==null)l=p,s=Math.ceil(i/l);else if(p==null&&f!=null)s=f,l=Math.ceil(i/s);else if(s*l>i){var g=d(),y=h();(g-1)*y>=i?d(g-1):(y-1)*g>=i&&h(y-1)}else for(;s*l<i;){var b=d(),v=h();(v+1)*b>=i?h(v+1):d(b+1)}var m=o.w/s,x=o.h/l;if(t.condense&&(m=0,x=0),t.avoidOverlap)for(var E=0;E<a.length;E++){var P=a[E],C=P._private.position;(C.x==null||C.y==null)&&(C.x=0,C.y=0);var w=P.layoutDimensions(t),S=t.avoidOverlapPadding,I=w.w+S,D=w.h+S;m=Math.max(m,I),x=Math.max(x,D)}for(var B={},T=u(function(W,J){return!!B["c-"+W+"-"+J]},"used"),M=u(function(W,J){B["c-"+W+"-"+J]=!0},"use"),_=0,O=0,L=u(function(){O++,O>=s&&(O=0,_++)},"moveToNextCell"),z={},A=0;A<a.length;A++){var R=a[A],Y=t.position(R);if(Y&&(Y.row!==void 0||Y.col!==void 0)){var V={row:Y.row,col:Y.col};if(V.col===void 0)for(V.col=0;T(V.row,V.col);)V.col++;else if(V.row===void 0)for(V.row=0;T(V.row,V.col);)V.row++;z[R.id()]=V,M(V.row,V.col)}}var j=u(function(W,J){var ae,Z;if(W.locked()||W.isParent())return!1;var $=z[W.id()];if($)ae=$.col*m+m/2+o.x1,Z=$.row*x+x/2+o.y1;else{for(;T(_,O);)L();ae=O*m+m/2+o.x1,Z=_*x+x/2+o.y1,M(_,O),L()}return{x:ae,y:Z}},"getPos");a.layoutPositions(this,t,j)}return this};var Pg={ready:u(function(){},"ready"),stop:u(function(){},"stop")};function Ma(e){this.options=ve({},Pg,e)}u(Ma,"NullLayout");Ma.prototype.run=function(){var e=this.options,t=e.eles,n=this;return e.cy,n.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.emit("layoutready"),n.one("layoutstop",e.stop),n.emit("layoutstop"),this};Ma.prototype.stop=function(){return this};var Tg={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function Wi(e){this.options=ve({},Tg,e)}u(Wi,"PresetLayout");Wi.prototype.run=function(){var e=this.options,t=e.eles,n=t.nodes(),r=ze(e.positions);function a(o){if(e.positions==null)return xd(o.position());if(r)return e.positions(o);var i=e.positions[o._private.data.id];return i??null}return u(a,"getPosition"),n.layoutPositions(this,e,function(o,i){var c=a(o);return o.locked()||c==null?!1:c}),this};var _g={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function Ui(e){this.options=ve({},_g,e)}u(Ui,"RandomLayout");Ui.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=pt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),a=u(function(o,i){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}},"getPos");return n.nodes().layoutPositions(this,e,a),this};var Dg=[{name:"breadthfirst",impl:qi},{name:"circle",impl:Xi},{name:"concentric",impl:Yi},{name:"cose",impl:Br},{name:"grid",impl:Hi},{name:"null",impl:Ma},{name:"preset",impl:Wi},{name:"random",impl:Ui}];function Gi(e){this.options=e,this.notifications=0}u(Gi,"NullRenderer");var $o=u(function(){},"noop"),Qo=u(function(){throw new Error("A headless instance can not render images")},"throwImgErr");Gi.prototype={recalculateRenderedStyle:$o,notify:u(function(){this.notifications++},"notify"),init:$o,isHeadless:u(function(){return!0},"isHeadless"),png:Qo,jpg:Qo};var Ki={};Ki.arrowShapeWidth=.3;Ki.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=u(function(l,s,d,h,p,f,g){var y=p.x-d/2-g,b=p.x+d/2+g,v=p.y-d/2-g,m=p.y+d/2+g,x=y<=l&&l<=b&&v<=s&&s<=m;return x},"bbCollide"),r=u(function(l,s,d,h,p){var f=l*Math.cos(h)-s*Math.sin(h),g=l*Math.sin(h)+s*Math.cos(h),y=f*d,b=g*d,v=y+p.x,m=b+p.y;return{x:v,y:m}},"transform"),a=u(function(l,s,d,h){for(var p=[],f=0;f<l.length;f+=2){var g=l[f],y=l[f+1];p.push(r(g,y,s,d,h))}return p},"transformPoints"),o=u(function(l){for(var s=[],d=0;d<l.length;d++){var h=l[d];s.push(h.x,h.y)}return s},"pointsToArr"),i=u(function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},"standardGap"),c=u(function(l,s){pe(s)&&(s=e[s]),e[l]=ve({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:u(function(d,h,p,f,g,y){var b=o(a(this.points,p+2*y,f,g)),v=ht(d,h,b);return v},"collide"),roughCollide:n,draw:u(function(d,h,p,f){var g=a(this.points,h,p,f);t.arrowShapeImpl("polygon")(d,g)},"draw"),spacing:u(function(d){return 0},"spacing"),gap:i},s)},"defineArrowShape");c("none",{collide:sa,roughCollide:sa,draw:Ti,spacing:go,gap:go}),c("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),c("arrow","triangle"),c("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:u(function(l,s,d,h,p){var f=a(this.points,s,d,h),g=this.controlPoint,y=r(g[0],g[1],s,d,h);t.arrowShapeImpl(this.name)(l,f,y)},"draw"),gap:u(function(l){return i(l)*.8},"gap")}),c("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:u(function(l,s,d,h,p,f,g){var y=o(a(this.points,d+2*g,h,p)),b=o(a(this.pointsTee,d+2*g,h,p)),v=ht(l,s,y)||ht(l,s,b);return v},"collide"),draw:u(function(l,s,d,h,p){var f=a(this.points,s,d,h),g=a(this.pointsTee,s,d,h);t.arrowShapeImpl(this.name)(l,f,g)},"draw")}),c("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:u(function(l,s,d,h,p,f,g){var y=p,b=Math.pow(y.x-l,2)+Math.pow(y.y-s,2)<=Math.pow((d+2*g)*this.radius,2),v=o(a(this.points,d+2*g,h,p));return ht(l,s,v)||b},"collide"),draw:u(function(l,s,d,h,p){var f=a(this.pointsTr,s,d,h);t.arrowShapeImpl(this.name)(l,f,h.x,h.y,this.radius*s)},"draw"),spacing:u(function(l){return t.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius},"spacing")}),c("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:u(function(l,s){var d=this.baseCrossLinePts.slice(),h=s/l,p=3,f=5;return d[p]=d[p]-h,d[f]=d[f]-h,d},"crossLinePts"),collide:u(function(l,s,d,h,p,f,g){var y=o(a(this.points,d+2*g,h,p)),b=o(a(this.crossLinePts(d,f),d+2*g,h,p)),v=ht(l,s,y)||ht(l,s,b);return v},"collide"),draw:u(function(l,s,d,h,p){var f=a(this.points,s,d,h),g=a(this.crossLinePts(s,p),s,d,h);t.arrowShapeImpl(this.name)(l,f,g)},"draw")}),c("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:u(function(l){return i(l)*.525},"gap")}),c("circle",{radius:.15,collide:u(function(l,s,d,h,p,f,g){var y=p,b=Math.pow(y.x-l,2)+Math.pow(y.y-s,2)<=Math.pow((d+2*g)*this.radius,2);return b},"collide"),draw:u(function(l,s,d,h,p){t.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*s)},"draw"),spacing:u(function(l){return t.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius},"spacing")}),c("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:u(function(l){return 1},"spacing"),gap:u(function(l){return 1},"gap")}),c("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),c("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:u(function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value},"gap")}),c("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:u(function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value},"gap")})};var Sn={};Sn.projectIntoViewport=function(e,t){var n=this.cy,r=this.findContainerClientCoords(),a=r[0],o=r[1],i=r[4],c=n.pan(),l=n.zoom(),s=((e-a)/i-c.x)/l,d=((t-o)/i-c.y)/l;return[s,d]};Sn.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=this.cy.window().getComputedStyle(e),r=u(function(b){return parseFloat(n.getPropertyValue(b))},"styleValue"),a={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},o={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},i=e.clientWidth,c=e.clientHeight,l=a.left+a.right,s=a.top+a.bottom,d=o.left+o.right,h=t.width/(i+d),p=i-l,f=c-s,g=t.left+a.left+o.left,y=t.top+a.top+o.top;return this.containerBB=[g,y,p,f,h]};Sn.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Sn.findNearestElement=function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]};Sn.findNearestElements=function(e,t,n,r){var a=this,o=this,i=o.getCachedZSortedEles(),c=[],l=o.cy.zoom(),s=o.cy.hasCompoundNodes(),d=(r?24:8)/l,h=(r?8:2)/l,p=(r?8:2)/l,f=1/0,g,y;n&&(i=i.interactive);function b(w,S){if(w.isNode()){if(y)return;y=w,c.push(w)}if(w.isEdge()&&(S==null||S<f))if(g){if(g.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value&&g.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value){for(var I=0;I<c.length;I++)if(c[I].isEdge()){c[I]=w,g=w,f=S??f;break}}}else c.push(w),g=w,f=S??f}u(b,"addEle");function v(w){var S=w.outerWidth()+2*h,I=w.outerHeight()+2*h,D=S/2,B=I/2,T=w.position(),M=w.pstyle("corner-radius").value==="auto"?"auto":w.pstyle("corner-radius").pfValue,_=w._private.rscratch;if(T.x-D<=e&&e<=T.x+D&&T.y-B<=t&&t<=T.y+B){var O=o.nodeShapes[a.getNodeShape(w)];if(O.checkPoint(e,t,0,S,I,T.x,T.y,M,_))return b(w,0),!0}}u(v,"checkNode");function m(w){var S=w._private,I=S.rscratch,D=w.pstyle("width").pfValue,B=w.pstyle("arrow-scale").value,T=D/2+d,M=T*T,_=T*2,O=S.source,L=S.target,z;if(I.edgeType==="segments"||I.edgeType==="straight"||I.edgeType==="haystack"){for(var A=I.allpts,R=0;R+3<A.length;R+=2)if(Ad(e,t,A[R],A[R+1],A[R+2],A[R+3],_)&&M>(z=Rd(e,t,A[R],A[R+1],A[R+2],A[R+3])))return b(w,z),!0}else if(I.edgeType==="bezier"||I.edgeType==="multibezier"||I.edgeType==="self"||I.edgeType==="compound"){for(var A=I.allpts,R=0;R+5<I.allpts.length;R+=4)if(Nd(e,t,A[R],A[R+1],A[R+2],A[R+3],A[R+4],A[R+5],_)&&M>(z=zd(e,t,A[R],A[R+1],A[R+2],A[R+3],A[R+4],A[R+5])))return b(w,z),!0}for(var O=O||S.source,L=L||S.target,Y=a.getArrowWidth(D,B),V=[{name:"source",x:I.arrowStartX,y:I.arrowStartY,angle:I.srcArrowAngle},{name:"target",x:I.arrowEndX,y:I.arrowEndY,angle:I.tgtArrowAngle},{name:"mid-source",x:I.midX,y:I.midY,angle:I.midsrcArrowAngle},{name:"mid-target",x:I.midX,y:I.midY,angle:I.midtgtArrowAngle}],R=0;R<V.length;R++){var j=V[R],W=o.arrowShapes[w.pstyle(j.name+"-arrow-shape").value],J=w.pstyle("width").pfValue;if(W.roughCollide(e,t,Y,j.angle,{x:j.x,y:j.y},J,d)&&W.collide(e,t,Y,j.angle,{x:j.x,y:j.y},J,d))return b(w),!0}s&&c.length>0&&(v(O),v(L))}u(m,"checkEdge");function x(w,S,I){return Tt(w,S,I)}u(x,"preprop");function E(w,S){var I=w._private,D=p,B;S?B=S+"-":B="",w.boundingBox();var T=I.labelBounds[S||"main"],M=w.pstyle(B+"label").value,_=w.pstyle("text-events").strValue==="yes";if(!(!_||!M)){var O=x(I.rscratch,"labelX",S),L=x(I.rscratch,"labelY",S),z=x(I.rscratch,"labelAngle",S),A=w.pstyle(B+"text-margin-x").pfValue,R=w.pstyle(B+"text-margin-y").pfValue,Y=T.x1-D-A,V=T.x2+D-A,j=T.y1-D-R,W=T.y2+D-R;if(z){var J=Math.cos(z),ae=Math.sin(z),Z=u(function(de,be){return de=de-O,be=be-L,{x:de*J-be*ae+O,y:de*ae+be*J+L}},"rotate"),$=Z(Y,j),N=Z(Y,W),G=Z(V,j),U=Z(V,W),ne=[$.x+A,$.y+R,G.x+A,G.y+R,U.x+A,U.y+R,N.x+A,N.y+R];if(ht(e,t,ne))return b(w),!0}else if(Vn(T,e,t))return b(w),!0}}u(E,"checkLabel");for(var P=i.length-1;P>=0;P--){var C=i[P];C.isNode()?v(C)||E(C):m(C)||E(C)||E(C,"source")||E(C,"target")}return c};Sn.getAllInBox=function(e,t,n,r){var a=this.getCachedZSortedEles().interactive,o=[],i=Math.min(e,n),c=Math.max(e,n),l=Math.min(t,r),s=Math.max(t,r);e=i,n=c,t=l,r=s;for(var d=pt({x1:e,y1:t,x2:n,y2:r}),h=0;h<a.length;h++){var p=a[h];if(p.isNode()){var f=p,g=f.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Bi(d,g)&&!Ws(g,d)&&o.push(f)}else{var y=p,b=y._private,v=b.rscratch;if(v.startX!=null&&v.startY!=null&&!Vn(d,v.startX,v.startY)||v.endX!=null&&v.endY!=null&&!Vn(d,v.endX,v.endY))continue;if(v.edgeType==="bezier"||v.edgeType==="multibezier"||v.edgeType==="self"||v.edgeType==="compound"||v.edgeType==="segments"||v.edgeType==="haystack"){for(var m=b.rstyle.bezierPts||b.rstyle.linePts||b.rstyle.haystackPts,x=!0,E=0;E<m.length;E++)if(!Md(d,m[E])){x=!1;break}x&&o.push(y)}else(v.edgeType==="haystack"||v.edgeType==="straight")&&o.push(y)}}return o};var fa={};fa.calculateArrowAngles=function(e){var t=e._private.rscratch,n=t.edgeType==="haystack",r=t.edgeType==="bezier",a=t.edgeType==="multibezier",o=t.edgeType==="segments",i=t.edgeType==="compound",c=t.edgeType==="self",l,s,d,h,p,f,v,m;if(n?(d=t.haystackPts[0],h=t.haystackPts[1],p=t.haystackPts[2],f=t.haystackPts[3]):(d=t.arrowStartX,h=t.arrowStartY,p=t.arrowEndX,f=t.arrowEndY),v=t.midX,m=t.midY,o)l=d-t.segpts[0],s=h-t.segpts[1];else if(a||i||c||r){var g=t.allpts,y=Ke(g[0],g[2],g[4],.1),b=Ke(g[1],g[3],g[5],.1);l=d-y,s=h-b}else l=d-v,s=h-m;t.srcArrowAngle=zr(l,s);var v=t.midX,m=t.midY;if(n&&(v=(d+p)/2,m=(h+f)/2),l=p-d,s=f-h,o){var g=t.allpts;if(g.length/2%2===0){var x=g.length/2,E=x-2;l=g[x]-g[E],s=g[x+1]-g[E+1]}else if(t.isRound)l=t.midVector[1],s=-t.midVector[0];else{var x=g.length/2-1,E=x-2;l=g[x]-g[E],s=g[x+1]-g[E+1]}}else if(a||i||c){var g=t.allpts,P=t.ctrlpts,C,w,S,I;if(P.length/2%2===0){var D=g.length/2-1,B=D+2,T=B+2;C=Ke(g[D],g[B],g[T],0),w=Ke(g[D+1],g[B+1],g[T+1],0),S=Ke(g[D],g[B],g[T],1e-4),I=Ke(g[D+1],g[B+1],g[T+1],1e-4)}else{var B=g.length/2-1,D=B-2,T=B+2;C=Ke(g[D],g[B],g[T],.4999),w=Ke(g[D+1],g[B+1],g[T+1],.4999),S=Ke(g[D],g[B],g[T],.5),I=Ke(g[D+1],g[B+1],g[T+1],.5)}l=S-C,s=I-w}if(t.midtgtArrowAngle=zr(l,s),t.midDispX=l,t.midDispY=s,l*=-1,s*=-1,o){var g=t.allpts;if(g.length/2%2!==0&&!t.isRound){var x=g.length/2-1,M=x+2;l=-(g[M]-g[x]),s=-(g[M+1]-g[x+1])}}if(t.midsrcArrowAngle=zr(l,s),o)l=p-t.segpts[t.segpts.length-2],s=f-t.segpts[t.segpts.length-1];else if(a||i||c||r){var g=t.allpts,_=g.length,y=Ke(g[_-6],g[_-4],g[_-2],.9),b=Ke(g[_-5],g[_-3],g[_-1],.9);l=p-y,s=f-b}else l=p-v,s=f-m;t.tgtArrowAngle=zr(l,s)};fa.getArrowWidth=fa.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(e*13.37,.9),29)*t,n[e+", "+t]=r,r)};var di,hi,Mt={},yt={},Jo,es,hn,na,Ft,an,dn,It,Dn,Hr,yu,mu,pi,fi,ts,ns=u(function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},"asVec"),Bg=u(function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},"invertVec"),Ig=u(function(e,t,n,r,a){if(e!==ts?ns(t,e,Mt):Bg(yt,Mt),ns(t,n,yt),Jo=Mt.nx*yt.ny-Mt.ny*yt.nx,es=Mt.nx*yt.nx-Mt.ny*-yt.ny,Ft=Math.asin(Math.max(-1,Math.min(1,Jo))),Math.abs(Ft)<1e-6){di=t.x,hi=t.y,dn=Dn=0;return}hn=1,na=!1,es<0?Ft<0?Ft=Math.PI+Ft:(Ft=Math.PI-Ft,hn=-1,na=!0):Ft>0&&(hn=-1,na=!0),t.radius!==void 0?Dn=t.radius:Dn=r,an=Ft/2,Hr=Math.min(Mt.len/2,yt.len/2),a?(It=Math.abs(Math.cos(an)*Dn/Math.sin(an)),It>Hr?(It=Hr,dn=Math.abs(It*Math.sin(an)/Math.cos(an))):dn=Dn):(It=Math.min(Hr,Dn),dn=Math.abs(It*Math.sin(an)/Math.cos(an))),pi=t.x+yt.nx*It,fi=t.y+yt.ny*It,di=pi-yt.ny*dn*hn,hi=fi+yt.nx*dn*hn,yu=t.x+Mt.nx*It,mu=t.y+Mt.ny*It,ts=t},"calcCornerArc");function Zi(e,t){t.radius===0?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}u(Zi,"drawPreparedRoundCorner");function Aa(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return r===0||t.radius===0?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(Ig(e,t,n,r,a),{cx:di,cy:hi,radius:dn,startX:yu,startY:mu,stopX:pi,stopY:fi,startAngle:Mt.ang+Math.PI/2*hn,endAngle:yt.ang-Math.PI/2*hn,counterClockwise:na})}u(Aa,"getRoundCorner");var st={};st.findMidptPtsEtc=function(e,t){var n=t.posPts,r=t.intersectionPts,a=t.vectorNormInverse,o,i=e.pstyle("source-endpoint"),c=e.pstyle("target-endpoint"),l=i.units!=null&&c.units!=null,s=u(function(E,P,C,w){var S=w-P,I=C-E,D=Math.sqrt(I*I+S*S);return{x:-S/D,y:I/D}},"recalcVectorNormInverse"),d=e.pstyle("edge-distances").value;switch(d){case"node-position":o=n;break;case"intersection":o=r;break;case"endpoints":{if(l){var h=this.manualEndptToPx(e.source()[0],i),p=mt(h,2),f=p[0],g=p[1],y=this.manualEndptToPx(e.target()[0],c),b=mt(y,2),v=b[0],m=b[1],x={x1:f,y1:g,x2:v,y2:m};a=s(f,g,v,m),o=x}else De("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=r;break}}return{midptPts:o,vectorNormInverse:a}};st.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,a=r.rscratch;if(!a.haystack){var o=Math.random()*2*Math.PI;a.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,a.target={x:Math.cos(o),y:Math.sin(o)}}var i=r.source,c=r.target,l=i.position(),s=c.position(),d=i.width(),h=c.width(),p=i.height(),f=c.height(),g=n.pstyle("haystack-radius").value,y=g/2;a.haystackPts=a.allpts=[a.source.x*d*y+l.x,a.source.y*p*y+l.y,a.target.x*h*y+s.x,a.target.y*f*y+s.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};st.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=e.pstyle("segment-weights"),a=e.pstyle("segment-distances"),o=e.pstyle("segment-radii"),i=e.pstyle("radius-type"),c=Math.min(r.pfValue.length,a.pfValue.length),l=o.pfValue[o.pfValue.length-1],s=i.pfValue[i.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var d=0;d<c;d++){var h=r.pfValue[d],p=a.pfValue[d],f=1-h,g=h,y=this.findMidptPtsEtc(e,t),b=y.midptPts,v=y.vectorNormInverse,m={x:b.x1*f+b.x2*g,y:b.y1*f+b.y2*g};n.segpts.push(m.x+v.x*p,m.y+v.y*p),n.radii.push(o.pfValue[d]!==void 0?o.pfValue[d]:l),n.isArcRadius.push((i.pfValue[d]!==void 0?i.pfValue[d]:s)==="arc-radius")}};st.findLoopPoints=function(e,t,n,r){var a=e._private.rscratch,o=t.dirCounts,i=t.srcPos,c=e.pstyle("control-point-distances"),l=c?c.pfValue[0]:void 0,s=e.pstyle("loop-direction").pfValue,d=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;a.edgeType="self";var p=n,f=h;r&&(p=0,f=l);var g=s-Math.PI/2,y=g-d/2,b=g+d/2,v=s+"_"+d;p=o[v]===void 0?o[v]=0:++o[v],a.ctrlpts=[i.x+Math.cos(y)*1.4*f*(p/3+1),i.y+Math.sin(y)*1.4*f*(p/3+1),i.x+Math.cos(b)*1.4*f*(p/3+1),i.y+Math.sin(b)*1.4*f*(p/3+1)]};st.findCompoundLoopPoints=function(e,t,n,r){var a=e._private.rscratch;a.edgeType="compound";var o=t.srcPos,i=t.tgtPos,c=t.srcW,l=t.srcH,s=t.tgtW,d=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,p=e.pstyle("control-point-distances"),f=p?p.pfValue[0]:void 0,g=n,y=h;r&&(g=0,y=f);var b=50,v={x:o.x-c/2,y:o.y-l/2},m={x:i.x-s/2,y:i.y-d/2},x={x:Math.min(v.x,m.x),y:Math.min(v.y,m.y)},E=.5,P=Math.max(E,Math.log(c*.01)),C=Math.max(E,Math.log(s*.01));a.ctrlpts=[x.x,x.y-(1+Math.pow(b,1.12)/100)*y*(g/3+1)*P,x.x-(1+Math.pow(b,1.12)/100)*y*(g/3+1)*C,x.y]};st.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"};st.findBezierPoints=function(e,t,n,r,a){var o=e._private.rscratch,i=e.pstyle("control-point-step-size").pfValue,c=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),s=c&&l?Math.min(c.value.length,l.value.length):1,d=c?c.pfValue[0]:void 0,h=l.value[0],p=r;o.edgeType=p?"multibezier":"bezier",o.ctrlpts=[];for(var f=0;f<s;f++){var g=(.5-t.eles.length/2+n)*i*(a?-1:1),y=void 0,b=Ys(g);p&&(d=c?c.pfValue[f]:i,h=l.value[f]),r?y=d:y=d!==void 0?b*d:void 0;var v=y!==void 0?y:g,m=1-h,x=h,E=this.findMidptPtsEtc(e,t),P=E.midptPts,C=E.vectorNormInverse,w={x:P.x1*m+P.x2*x,y:P.y1*m+P.y2*x};o.ctrlpts.push(w.x+C.x*v,w.y+C.y*v)}};st.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var r="vertical",a="horizontal",o="leftward",i="rightward",c="downward",l="upward",s="auto",d=t.posPts,h=t.srcW,p=t.srcH,f=t.tgtW,g=t.tgtH,y=e.pstyle("edge-distances").value,b=y!=="node-position",v=e.pstyle("taxi-direction").value,m=v,x=e.pstyle("taxi-turn"),E=x.units==="%",P=x.pfValue,C=P<0,w=e.pstyle("taxi-turn-min-distance").pfValue,S=b?(h+f)/2:0,I=b?(p+g)/2:0,D=d.x2-d.x1,B=d.y2-d.y1,T=u(function(fe,ge){return fe>0?Math.max(fe-ge,0):Math.min(fe+ge,0)},"subDWH"),M=T(D,S),_=T(B,I),O=!1;m===s?v=Math.abs(M)>Math.abs(_)?a:r:m===l||m===c?(v=r,O=!0):(m===o||m===i)&&(v=a,O=!0);var L=v===r,z=L?_:M,A=L?B:D,R=Ys(A),Y=!1;!(O&&(E||C))&&(m===c&&A<0||m===l&&A>0||m===o&&A>0||m===i&&A<0)&&(R*=-1,z=R*Math.abs(z),Y=!0);var V;if(E){var j=P<0?1+P:P;V=j*z}else{var W=P<0?z:0;V=W+P*R}var J=u(function(fe){return Math.abs(fe)<w||Math.abs(fe)>=Math.abs(z)},"getIsTooClose"),ae=J(V),Z=J(Math.abs(z)-Math.abs(V)),$=ae||Z;if($&&!Y)if(L){var N=Math.abs(A)<=p/2,G=Math.abs(D)<=f/2;if(N){var U=(d.x1+d.x2)/2,ne=d.y1,de=d.y2;n.segpts=[U,ne,U,de]}else if(G){var be=(d.y1+d.y2)/2,Q=d.x1,se=d.x2;n.segpts=[Q,be,se,be]}else n.segpts=[d.x1,d.y2]}else{var ie=Math.abs(A)<=h/2,he=Math.abs(B)<=g/2;if(ie){var ye=(d.y1+d.y2)/2,xe=d.x1,we=d.x2;n.segpts=[xe,ye,we,ye]}else if(he){var Be=(d.x1+d.x2)/2,Ee=d.y1,Se=d.y2;n.segpts=[Be,Ee,Be,Se]}else n.segpts=[d.x2,d.y1]}else if(L){var k=d.y1+V+(b?p/2*R:0),F=d.x1,K=d.x2;n.segpts=[F,k,K,k]}else{var H=d.x1+V+(b?h/2*R:0),q=d.y1,te=d.y2;n.segpts=[H,q,H,te]}if(n.isRound){var X=e.pstyle("taxi-radius").value,ee=e.pstyle("radius-type").value[0]==="arc-radius";n.radii=new Array(n.segpts.length/2).fill(X),n.isArcRadius=new Array(n.segpts.length/2).fill(ee)}};st.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if(n.edgeType==="bezier"){var r=t.srcPos,a=t.tgtPos,o=t.srcW,i=t.srcH,c=t.tgtW,l=t.tgtH,s=t.srcShape,d=t.tgtShape,h=t.srcCornerRadius,p=t.tgtCornerRadius,f=t.srcRs,g=t.tgtRs,y=!re(n.startX)||!re(n.startY),b=!re(n.arrowStartX)||!re(n.arrowStartY),v=!re(n.endX)||!re(n.endY),m=!re(n.arrowEndX)||!re(n.arrowEndY),x=3,E=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth,P=x*E,C=vn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),w=C<P,S=vn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),I=S<P,D=!1;if(y||b||w){D=!0;var B={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},T=Math.sqrt(B.x*B.x+B.y*B.y),M={x:B.x/T,y:B.y/T},_=Math.max(o,i),O={x:n.ctrlpts[0]+M.x*2*_,y:n.ctrlpts[1]+M.y*2*_},L=s.intersectLine(r.x,r.y,o,i,O.x,O.y,0,h,f);w?(n.ctrlpts[0]=n.ctrlpts[0]+M.x*(P-C),n.ctrlpts[1]=n.ctrlpts[1]+M.y*(P-C)):(n.ctrlpts[0]=L[0]+M.x*P,n.ctrlpts[1]=L[1]+M.y*P)}if(v||m||I){D=!0;var z={x:n.ctrlpts[0]-a.x,y:n.ctrlpts[1]-a.y},A=Math.sqrt(z.x*z.x+z.y*z.y),R={x:z.x/A,y:z.y/A},Y=Math.max(o,i),V={x:n.ctrlpts[0]+R.x*2*Y,y:n.ctrlpts[1]+R.y*2*Y},j=d.intersectLine(a.x,a.y,c,l,V.x,V.y,0,p,g);I?(n.ctrlpts[0]=n.ctrlpts[0]+R.x*(P-S),n.ctrlpts[1]=n.ctrlpts[1]+R.y*(P-S)):(n.ctrlpts[0]=j[0]+R.x*P,n.ctrlpts[1]=j[1]+R.y*P)}D&&this.findEndpoints(e)}};st.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);t.allpts.push(t.endX,t.endY);var r,a;t.ctrlpts.length/2%2===0?(r=t.allpts.length/2-1,t.midX=t.allpts[r],t.midY=t.allpts[r+1]):(r=t.allpts.length/2-3,a=.5,t.midX=Ke(t.allpts[r],t.allpts[r+2],t.allpts[r+4],a),t.midY=Ke(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],a))}else if(t.edgeType==="straight")t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if(t.edgeType==="segments"){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var o=2;o+3<t.allpts.length;o+=2){var i=t.radii[o/2-1],c=t.isArcRadius[o/2-1];t.roundCorners.push(Aa({x:t.allpts[o-2],y:t.allpts[o-1]},{x:t.allpts[o],y:t.allpts[o+1],radius:i},{x:t.allpts[o+2],y:t.allpts[o+3]},i,c))}}if(t.segpts.length%4===0){var l=t.segpts.length/2,s=l-2;t.midX=(t.segpts[s]+t.segpts[l])/2,t.midY=(t.segpts[s+1]+t.segpts[l+1])/2}else{var d=t.segpts.length/2-1;if(!t.isRound)t.midX=t.segpts[d],t.midY=t.segpts[d+1];else{var h={x:t.segpts[d],y:t.segpts[d+1]},p=t.roundCorners[d/2],f=[h.x-p.cx,h.y-p.cy],g=p.radius/Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2));f=f.map(function(y){return y*g}),t.midX=p.cx+f[0],t.midY=p.cy+f[1],t.midVector=f}}}};st.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||re(t.startX)&&re(t.startY)&&re(t.endX)&&re(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,De("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};st.findEdgeControlPoints=function(e){var t=this;if(!(!e||e.length===0)){for(var n=this,r=n.cy,a=r.hasCompoundNodes(),o={map:new Nt,get:u(function(C){var w=this.map.get(C[0]);return w!=null?w.get(C[1]):null},"get"),set:u(function(C,w){var S=this.map.get(C[0]);S==null&&(S=new Nt,this.map.set(C[0],S)),S.set(C[1],w)},"set")},i=[],c=[],l=0;l<e.length;l++){var s=e[l],d=s._private,h=s.pstyle("curve-style").value;if(!(s.removed()||!s.takesUpSpace())){if(h==="haystack"){c.push(s);continue}var p=h==="unbundled-bezier"||h.endsWith("segments")||h==="straight"||h==="straight-triangle"||h.endsWith("taxi"),f=h==="unbundled-bezier"||h==="bezier",g=d.source,y=d.target,b=g.poolIndex(),v=y.poolIndex(),m=[b,v].sort(),x=o.get(m);x==null&&(x={eles:[]},o.set(m,x),i.push(m)),x.eles.push(s),p&&(x.hasUnbundled=!0),f&&(x.hasBezier=!0)}}for(var E=u(function(C){var w=i[C],S=o.get(w),I=void 0;if(!S.hasUnbundled){var D=S.eles[0].parallelEdges().filter(function(K){return K.isBundledBezier()});_i(S.eles),D.forEach(function(K){return S.eles.push(K)}),S.eles.sort(function(K,H){return K.poolIndex()-H.poolIndex()})}var B=S.eles[0],T=B.source(),M=B.target();if(T.poolIndex()>M.poolIndex()){var _=T;T=M,M=_}var O=S.srcPos=T.position(),L=S.tgtPos=M.position(),z=S.srcW=T.outerWidth(),A=S.srcH=T.outerHeight(),R=S.tgtW=M.outerWidth(),Y=S.tgtH=M.outerHeight(),V=S.srcShape=n.nodeShapes[t.getNodeShape(T)],j=S.tgtShape=n.nodeShapes[t.getNodeShape(M)],W=S.srcCornerRadius=T.pstyle("corner-radius").value==="auto"?"auto":T.pstyle("corner-radius").pfValue,J=S.tgtCornerRadius=M.pstyle("corner-radius").value==="auto"?"auto":M.pstyle("corner-radius").pfValue,ae=S.tgtRs=M._private.rscratch,Z=S.srcRs=T._private.rscratch;S.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $=0;$<S.eles.length;$++){var N=S.eles[$],G=N[0]._private.rscratch,U=N.pstyle("curve-style").value,ne=U==="unbundled-bezier"||U.endsWith("segments")||U.endsWith("taxi"),de=!T.same(N.source());if(!S.calculatedIntersection&&T!==M&&(S.hasBezier||S.hasUnbundled)){S.calculatedIntersection=!0;var be=V.intersectLine(O.x,O.y,z,A,L.x,L.y,0,W,Z),Q=S.srcIntn=be,se=j.intersectLine(L.x,L.y,R,Y,O.x,O.y,0,J,ae),ie=S.tgtIntn=se,he=S.intersectionPts={x1:be[0],x2:se[0],y1:be[1],y2:se[1]},ye=S.posPts={x1:O.x,x2:L.x,y1:O.y,y2:L.y},xe=se[1]-be[1],we=se[0]-be[0],Be=Math.sqrt(we*we+xe*xe),Ee=S.vector={x:we,y:xe},Se=S.vectorNorm={x:Ee.x/Be,y:Ee.y/Be},k={x:-Se.y,y:Se.x};S.nodesOverlap=!re(Be)||j.checkPoint(be[0],be[1],0,R,Y,L.x,L.y,J,ae)||V.checkPoint(se[0],se[1],0,z,A,O.x,O.y,W,Z),S.vectorNormInverse=k,I={nodesOverlap:S.nodesOverlap,dirCounts:S.dirCounts,calculatedIntersection:!0,hasBezier:S.hasBezier,hasUnbundled:S.hasUnbundled,eles:S.eles,srcPos:L,tgtPos:O,srcW:R,srcH:Y,tgtW:z,tgtH:A,srcIntn:ie,tgtIntn:Q,srcShape:j,tgtShape:V,posPts:{x1:ye.x2,y1:ye.y2,x2:ye.x1,y2:ye.y1},intersectionPts:{x1:he.x2,y1:he.y2,x2:he.x1,y2:he.y1},vector:{x:-Ee.x,y:-Ee.y},vectorNorm:{x:-Se.x,y:-Se.y},vectorNormInverse:{x:-k.x,y:-k.y}}}var F=de?I:S;G.nodesOverlap=F.nodesOverlap,G.srcIntn=F.srcIntn,G.tgtIntn=F.tgtIntn,G.isRound=U.startsWith("round"),a&&(T.isParent()||T.isChild()||M.isParent()||M.isChild())&&(T.parents().anySame(M)||M.parents().anySame(T)||T.same(M)&&T.isParent())?t.findCompoundLoopPoints(N,F,$,ne):T===M?t.findLoopPoints(N,F,$,ne):U.endsWith("segments")?t.findSegmentsPoints(N,F):U.endsWith("taxi")?t.findTaxiPoints(N,F):U==="straight"||!ne&&S.eles.length%2===1&&$===Math.floor(S.eles.length/2)?t.findStraightEdgePoints(N):t.findBezierPoints(N,F,$,ne,de),t.findEndpoints(N),t.tryToCorrectInvalidPoints(N,F),t.checkForInvalidEdgeWarning(N),t.storeAllpts(N),t.storeEdgeProjections(N),t.calculateArrowAngles(N),t.recalculateEdgeLabelProjections(N),t.calculateLabelAngles(N)}},"_loop"),P=0;P<i.length;P++)E(P);this.findHaystackPoints(c)}};function $i(e){var t=[];if(e!=null){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];t.push({x:r,y:a})}return t}}u($i,"getPts");st.getSegmentPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if(n==="segments")return this.recalculateRenderedStyle(e),$i(t.segpts)};st.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return this.recalculateRenderedStyle(e),$i(t.ctrlpts)};st.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var Ir={};Ir.manualEndptToPx=function(e,t){var n=this,r=e.position(),a=e.outerWidth(),o=e.outerHeight(),i=e._private.rscratch;if(t.value.length===2){var c=[t.pfValue[0],t.pfValue[1]];return t.units[0]==="%"&&(c[0]=c[0]*a),t.units[1]==="%"&&(c[1]=c[1]*o),c[0]+=r.x,c[1]+=r.y,c}else{var l=t.pfValue[0];l=-Math.PI/2+l;var s=2*Math.max(a,o),d=[r.x+Math.cos(l)*s,r.y+Math.sin(l)*s];return n.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,a,o,d[0],d[1],0,e.pstyle("corner-radius").value==="auto"?"auto":e.pstyle("corner-radius").pfValue,i)}};Ir.findEndpoints=function(e){var t=this,n,r=e.source()[0],a=e.target()[0],o=r.position(),i=a.position(),c=e.pstyle("target-arrow-shape").value,l=e.pstyle("source-arrow-shape").value,s=e.pstyle("target-distance-from-node").pfValue,d=e.pstyle("source-distance-from-node").pfValue,h=r._private.rscratch,p=a._private.rscratch,f=e.pstyle("curve-style").value,g=e._private.rscratch,y=g.edgeType,b=f==="taxi",v=y==="self"||y==="compound",m=y==="bezier"||y==="multibezier"||v,x=y!=="bezier",E=y==="straight"||y==="segments",P=y==="segments",C=m||x||E,w=v||b,S=e.pstyle("source-endpoint"),I=w?"outside-to-node":S.value,D=r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,B=e.pstyle("target-endpoint"),T=w?"outside-to-node":B.value,M=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;g.srcManEndpt=S,g.tgtManEndpt=B;var _,O,L,z;if(m){var A=[g.ctrlpts[0],g.ctrlpts[1]],R=x?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:A;_=R,O=A}else if(E){var Y=P?g.segpts.slice(0,2):[i.x,i.y],V=P?g.segpts.slice(g.segpts.length-2):[o.x,o.y];_=V,O=Y}if(T==="inside-to-node")n=[i.x,i.y];else if(B.units)n=this.manualEndptToPx(a,B);else if(T==="outside-to-line")n=g.tgtIntn;else if(T==="outside-to-node"||T==="outside-to-node-or-label"?L=_:(T==="outside-to-line"||T==="outside-to-line-or-label")&&(L=[o.x,o.y]),n=t.nodeShapes[this.getNodeShape(a)].intersectLine(i.x,i.y,a.outerWidth(),a.outerHeight(),L[0],L[1],0,M,p),T==="outside-to-node-or-label"||T==="outside-to-line-or-label"){var j=a._private.rscratch,W=j.labelWidth,J=j.labelHeight,ae=j.labelX,Z=j.labelY,$=W/2,N=J/2,G=a.pstyle("text-valign").value;G==="top"?Z-=N:G==="bottom"&&(Z+=N);var U=a.pstyle("text-halign").value;U==="left"?ae-=$:U==="right"&&(ae+=$);var ne=fr(L[0],L[1],[ae-$,Z-N,ae+$,Z-N,ae+$,Z+N,ae-$,Z+N],i.x,i.y);if(ne.length>0){var de=o,be=sn(de,An(n)),Q=sn(de,An(ne)),se=be;if(Q<be&&(n=ne,se=Q),ne.length>2){var ie=sn(de,{x:ne[2],y:ne[3]});ie<se&&(n=[ne[2],ne[3]])}}}var he=Rr(n,_,t.arrowShapes[c].spacing(e)+s),ye=Rr(n,_,t.arrowShapes[c].gap(e)+s);if(g.endX=ye[0],g.endY=ye[1],g.arrowEndX=he[0],g.arrowEndY=he[1],I==="inside-to-node")n=[o.x,o.y];else if(S.units)n=this.manualEndptToPx(r,S);else if(I==="outside-to-line")n=g.srcIntn;else if(I==="outside-to-node"||I==="outside-to-node-or-label"?z=O:(I==="outside-to-line"||I==="outside-to-line-or-label")&&(z=[i.x,i.y]),n=t.nodeShapes[this.getNodeShape(r)].intersectLine(o.x,o.y,r.outerWidth(),r.outerHeight(),z[0],z[1],0,D,h),I==="outside-to-node-or-label"||I==="outside-to-line-or-label"){var xe=r._private.rscratch,we=xe.labelWidth,Be=xe.labelHeight,Ee=xe.labelX,Se=xe.labelY,k=we/2,F=Be/2,K=r.pstyle("text-valign").value;K==="top"?Se-=F:K==="bottom"&&(Se+=F);var H=r.pstyle("text-halign").value;H==="left"?Ee-=k:H==="right"&&(Ee+=k);var q=fr(z[0],z[1],[Ee-k,Se-F,Ee+k,Se-F,Ee+k,Se+F,Ee-k,Se+F],o.x,o.y);if(q.length>0){var te=i,X=sn(te,An(n)),ee=sn(te,An(q)),fe=X;if(ee<X&&(n=[q[0],q[1]],fe=ee),q.length>2){var ge=sn(te,{x:q[2],y:q[3]});ge<fe&&(n=[q[2],q[3]])}}}var ue=Rr(n,O,t.arrowShapes[l].spacing(e)+d),me=Rr(n,O,t.arrowShapes[l].gap(e)+d);g.startX=me[0],g.startY=me[1],g.arrowStartX=ue[0],g.arrowStartY=ue[1],C&&(!re(g.startX)||!re(g.startY)||!re(g.endX)||!re(g.endY)?g.badLine=!0:g.badLine=!1)};Ir.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}};Ir.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var Qi={};function bu(e,t,n){for(var r=u(function(l,s,d,h){return Ke(l,s,d,h)},"qbezierAt$1"),a=t._private,o=a.rstyle.bezierPts,i=0;i<e.bezierProjPcts.length;i++){var c=e.bezierProjPcts[i];o.push({x:r(n[0],n[2],n[4],c),y:r(n[1],n[3],n[5],c)})}}u(bu,"pushBezierPts");Qi.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,r==="multibezier"||r==="bezier"||r==="self"||r==="compound"){t.rstyle.bezierPts=[];for(var a=0;a+5<n.allpts.length;a+=4)bu(this,e,n.allpts.slice(a,a+6))}else if(r==="segments")for(var o=t.rstyle.linePts=[],a=0;a+1<n.allpts.length;a+=2)o.push({x:n.allpts[a],y:n.allpts[a+1]});else if(r==="haystack"){var i=n.haystackPts;t.rstyle.haystackPts=[{x:i[0],y:i[1]},{x:i[2],y:i[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth};Qi.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Lt={};Lt.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!$t(t)){var n,r,a=e._private,o=e.width(),i=e.height(),c=e.padding(),l=e.position(),s=e.pstyle("text-halign").strValue,d=e.pstyle("text-valign").strValue,h=a.rscratch,p=a.rstyle;switch(s){case"left":n=l.x-o/2-c;break;case"right":n=l.x+o/2+c;break;default:n=l.x}switch(d){case"top":r=l.y-i/2-c;break;case"bottom":r=l.y+i/2+c;break;default:r=l.y}h.labelX=n,h.labelY=r,p.labelX=n,p.labelY=r,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var xu=u(function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},"lineAngleFromDelta"),wu=u(function(e,t){var n=t.x-e.x,r=t.y-e.y;return xu(n,r)},"lineAngle"),Mg=u(function(e,t,n,r){var a=pr(0,r-.001,1),o=pr(0,r+.001,1),i=On(e,t,n,a),c=On(e,t,n,o);return wu(i,c)},"bezierAngle");Lt.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,a=this,o={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(o.mid||o.source||o.target){t={x:r.midX,y:r.midY};var i=u(function(d,h,p){Ut(n.rscratch,d,h,p),Ut(n.rstyle,d,h,p)},"setRs");i("labelX",null,t.x),i("labelY",null,t.y);var c=xu(r.midDispX,r.midDispY);i("labelAutoAngle",null,c);var l=u(function d(){if(d.cache)return d.cache;for(var h=[],p=0;p+5<r.allpts.length;p+=4){var f={x:r.allpts[p],y:r.allpts[p+1]},g={x:r.allpts[p+2],y:r.allpts[p+3]},y={x:r.allpts[p+4],y:r.allpts[p+5]};h.push({p0:f,p1:g,p2:y,startDist:0,length:0,segments:[]})}var b=n.rstyle.bezierPts,v=a.bezierProjPcts.length;function m(w,S,I,D,B){var T=vn(S,I),M=w.segments[w.segments.length-1],_={p0:S,p1:I,t0:D,t1:B,startDist:M?M.startDist+M.length:0,length:T};w.segments.push(_),w.length+=T}u(m,"addSegment");for(var x=0;x<h.length;x++){var E=h[x],P=h[x-1];P&&(E.startDist=P.startDist+P.length),m(E,E.p0,b[x*v],0,a.bezierProjPcts[0]);for(var C=0;C<v-1;C++)m(E,b[x*v+C],b[x*v+C+1],a.bezierProjPcts[C],a.bezierProjPcts[C+1]);m(E,b[x*v+v-1],E.p2,a.bezierProjPcts[v-1],1)}return d.cache=h},"createControlPointInfo"),s=u(function(d){var h,p=d==="source";if(o[d]){var f=e.pstyle(d+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=l(),y,b=0,v=0,m=0;m<g.length;m++){for(var x=g[p?m:g.length-1-m],E=0;E<x.segments.length;E++){var P=x.segments[p?E:x.segments.length-1-E],C=m===g.length-1&&E===x.segments.length-1;if(b=v,v+=P.length,v>=f||C){y={cp:x,segment:P};break}}if(y)break}var w=y.cp,S=y.segment,I=(f-b)/S.length,D=S.t1-S.t0,B=p?S.t0+D*I:S.t1-D*I;B=pr(0,B,1),t=On(w.p0,w.p1,w.p2,B),h=Mg(w.p0,w.p1,w.p2,B);break}case"straight":case"segments":case"haystack":{for(var T=0,M,_,O,L,z=r.allpts.length,A=0;A+3<z&&(p?(O={x:r.allpts[A],y:r.allpts[A+1]},L={x:r.allpts[A+2],y:r.allpts[A+3]}):(O={x:r.allpts[z-2-A],y:r.allpts[z-1-A]},L={x:r.allpts[z-4-A],y:r.allpts[z-3-A]}),M=vn(O,L),_=T,T+=M,!(T>=f));A+=2);var R=f-_,Y=R/M;Y=pr(0,Y,1),t=Td(O,L,Y),h=wu(O,L);break}}i("labelX",d,t.x),i("labelY",d,t.y),i("labelAutoAngle",d,h)}},"calculateEndProjection");s("source"),s("target"),this.applyLabelDimensions(e)}};Lt.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))};Lt.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),a=this.calculateLabelDimensions(e,r),o=e.pstyle("line-height").pfValue,i=e.pstyle("text-wrap").strValue,c=Tt(n.rscratch,"labelWrapCachedLines",t)||[],l=i!=="wrap"?1:Math.max(c.length,1),s=a.height/l,d=s*o,h=a.width,p=a.height+(l-1)*(o-1)*s;Ut(n.rstyle,"labelWidth",t,h),Ut(n.rscratch,"labelWidth",t,h),Ut(n.rstyle,"labelHeight",t,p),Ut(n.rscratch,"labelHeight",t,p),Ut(n.rscratch,"labelLineHeight",t,d)};Lt.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",a=e.pstyle(r+"label").strValue,o=e.pstyle("text-transform").value,i=u(function(j,W){return W?(Ut(n.rscratch,j,t,W),W):Tt(n.rscratch,j,t)},"rscratch");if(!a)return"";o=="none"||(o=="uppercase"?a=a.toUpperCase():o=="lowercase"&&(a=a.toLowerCase()));var c=e.pstyle("text-wrap").value;if(c==="wrap"){var l=i("labelKey");if(l!=null&&i("labelWrapKey")===l)return i("labelWrapCachedText");for(var s="​",d=a.split(`
`),h=e.pstyle("text-max-width").pfValue,p=e.pstyle("text-overflow-wrap").value,f=p==="anywhere",g=[],y=/[\s\u200b]+|$/g,b=0;b<d.length;b++){var v=d[b],m=this.calculateLabelDimensions(e,v),x=m.width;if(f){var E=v.split("").join(s);v=E}if(x>h){var P=v.matchAll(y),C="",w=0,S=ki(P),I;try{for(S.s();!(I=S.n()).done;){var D=I.value,B=D[0],T=v.substring(w,D.index);w=D.index+B.length;var M=C.length===0?T:C+T+B,_=this.calculateLabelDimensions(e,M),O=_.width;O<=h?C+=T+B:(C&&g.push(C),C=T+B)}}catch(j){S.e(j)}finally{S.f()}C.match(/^[\s\u200b]+$/)||g.push(C)}else g.push(v)}i("labelWrapCachedLines",g),a=i("labelWrapCachedText",g.join(`
`)),i("labelWrapKey",l)}else if(c==="ellipsis"){var L=e.pstyle("text-max-width").pfValue,z="",A="…",R=!1;if(this.calculateLabelDimensions(e,a).width<L)return a;for(var Y=0;Y<a.length;Y++){var V=this.calculateLabelDimensions(e,z+a[Y]+A).width;if(V>L)break;z+=a[Y],Y===a.length-1&&(R=!0)}return R||(z+=A),z}return a};Lt.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t};Lt.calculateLabelDimensions=function(e,t){var n=this,r=n.cy.window(),a=r.document,o=gn(t,e._private.labelDimsKey),i=n.labelDimCache||(n.labelDimCache=[]),c=i[o];if(c!=null)return c;var l=0,s=e.pstyle("font-style").strValue,d=e.pstyle("font-size").pfValue,h=e.pstyle("font-family").strValue,p=e.pstyle("font-weight").strValue,f=this.labelCalcCanvas,g=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=a.createElement("canvas"),g=this.labelCalcCanvasContext=f.getContext("2d");var y=f.style;y.position="absolute",y.left="-9999px",y.top="-9999px",y.zIndex="-1",y.visibility="hidden",y.pointerEvents="none"}g.font="".concat(s," ").concat(p," ").concat(d,"px ").concat(h);for(var b=0,v=0,m=t.split(`
`),x=0;x<m.length;x++){var E=m[x],P=g.measureText(E),C=Math.ceil(P.width),w=d;b=Math.max(C,b),v+=w}return b+=l,v+=l,i[o]={width:b,height:v}};Lt.calculateLabelAngle=function(e,t){var n=e._private,r=n.rscratch,a=e.isEdge(),o=t?t+"-":"",i=e.pstyle(o+"text-rotation"),c=i.strValue;return c==="none"?0:a&&c==="autorotate"?r.labelAutoAngle:c==="autorotate"?0:i.pfValue};Lt.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),r=e._private,a=r.rscratch;a.labelAngle=t.calculateLabelAngle(e),n&&(a.sourceLabelAngle=t.calculateLabelAngle(e,"source"),a.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var Eu={},rs=28,as=!1;Eu.getNodeShape=function(e){var t=this,n=e.pstyle("shape").value;if(n==="cutrectangle"&&(e.width()<rs||e.height()<rs))return as||(De("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),as=!0),"rectangle";if(e.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var r=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(r).name}return n};var Na={};Na.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),n=this,r=u(function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.merge(o),i)for(var c=0;c<o.length;c++){var l=o[c],s=l._private,d=s.rstyle;d.clean=!1,d.cleanConnected=!1}},"enqueue");n.binder(e).on("bounds.* dirty.*",u(function(o){var i=o.target;r(i)},"onDirtyBounds")).on("style.* background.*",u(function(o){var i=o.target;r(i,!1)},"onDirtyStyle"));var a=u(function(o){if(o){var i=n.onUpdateEleCalcsFns;t.cleanStyle();for(var c=0;c<t.length;c++){var l=t[c],s=l._private.rstyle;l.isNode()&&!s.cleanConnected&&(r(l.connectedEdges()),s.cleanConnected=!0)}if(i)for(var d=0;d<i.length;d++){var h=i[d];h(o,t)}n.recalculateRenderedStyle(t),t=e.collection()}},"updateEleCalcs");n.flushRenderedStyleQueue=function(){a(!0)},n.beforeRender(a,n.beforeRenderPriorities.eleCalcs)};Na.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)};Na.recalculateRenderedStyle=function(e,t){var n=u(function(x){return x._private.rstyle.cleanConnected},"isCleanConnected"),r=[],a=[];if(!this.destroyed){t===void 0&&(t=!0);for(var o=0;o<e.length;o++){var i=e[o],c=i._private,l=c.rstyle;i.isEdge()&&(!n(i.source())||!n(i.target()))&&(l.clean=!1),!(t&&l.clean||i.removed())&&i.pstyle("display").value!=="none"&&(c.group==="nodes"?a.push(i):r.push(i),l.clean=!0)}for(var s=0;s<a.length;s++){var d=a[s],h=d._private,p=h.rstyle,f=d.position();this.recalculateNodeLabelProjection(d),p.nodeX=f.x,p.nodeY=f.y,p.nodeW=d.pstyle("width").pfValue,p.nodeH=d.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var g=0;g<r.length;g++){var y=r[g],b=y._private,v=b.rstyle,m=b.rscratch;v.srcX=m.arrowStartX,v.srcY=m.arrowStartY,v.tgtX=m.arrowEndX,v.tgtY=m.arrowEndY,v.midX=m.midX,v.midY=m.midY,v.labelAngle=m.labelAngle,v.sourceLabelAngle=m.sourceLabelAngle,v.targetLabelAngle=m.targetLabelAngle}}};var Oa={};Oa.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=e[n],a=r._private.rscratch;r.grabbed()&&!r.isParent()?t.push(r):a.inDragLayer?e.drag.push(r):e.nondrag.push(r)}for(var n=0;n<t.length;n++){var r=t[n];e.drag.push(r)}}};Oa.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Oa.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(du),t.interactive=t.filter(function(n){return n.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var ku={};[Sn,fa,st,Ir,Qi,Lt,Eu,Na,Oa].forEach(function(e){ve(ku,e)});var Cu={};Cu.getCachedImage=function(e,t,n){var r=this,a=r.imageCache=r.imageCache||{},o=a[e];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=a[e]=a[e]||{};var i=o.image=new Image;i.addEventListener("load",n),i.addEventListener("error",function(){i.error=!0});var c="data:",l=e.substring(0,c.length).toLowerCase()===c;return l||(t=t==="null"?null:t,i.crossOrigin=t),i.src=e,i};var Un={};Un.registerBinding=function(e,t,n,r){var a=Array.prototype.slice.apply(arguments,[1]),o=this.binder(e);return o.on.apply(o,a)};Un.binder=function(e){var t=this,n=t.cy.window(),r=e===n||e===n.document||e===n.document.body||ac(e);if(t.supportsPassiveEvents==null){var a=!1;try{var o=Object.defineProperty({},"passive",{get:u(function(){return a=!0,!0},"get")});n.addEventListener("test",null,o)}catch{}t.supportsPassiveEvents=a}var i=u(function(c,l,s){var d=Array.prototype.slice.call(arguments);return r&&t.supportsPassiveEvents&&(d[2]={capture:s??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:d}),(e.addEventListener||e.on).apply(e,d),this},"on");return{on:i,addEventListener:i,addListener:i,bind:i}};Un.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()};Un.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()};Un.load=function(){var e=this,t=e.cy.window(),n=u(function(k){return k.selected()},"isSelected"),r=u(function(k,F,K,H){k==null&&(k=e.cy);for(var q=0;q<F.length;q++){var te=F[q];k.emit({originalEvent:K,type:te,position:H})}},"triggerEvents"),a=u(function(k){return k.shiftKey||k.metaKey||k.ctrlKey},"isMultSelKeyDown"),o=u(function(k,F){var K=!0;if(e.cy.hasCompoundNodes()&&k&&k.pannable())for(var H=0;F&&H<F.length;H++){var k=F[H];if(k.isNode()&&k.isParent()&&!k.pannable()){K=!1;break}}else K=!0;return K},"allowPanningPassthrough"),i=u(function(k){k[0]._private.grabbed=!0},"setGrabbed"),c=u(function(k){k[0]._private.grabbed=!1},"setFreed"),l=u(function(k){k[0]._private.rscratch.inDragLayer=!0},"setInDragLayer"),s=u(function(k){k[0]._private.rscratch.inDragLayer=!1},"setOutDragLayer"),d=u(function(k){k[0]._private.rscratch.isGrabTarget=!0},"setGrabTarget"),h=u(function(k){k[0]._private.rscratch.isGrabTarget=!1},"removeGrabTarget"),p=u(function(k,F){var K=F.addToList,H=K.has(k);!H&&k.grabbable()&&!k.locked()&&(K.merge(k),i(k))},"addToDragList"),f=u(function(k,F){if(k.cy().hasCompoundNodes()&&!(F.inDragLayer==null&&F.addToList==null)){var K=k.descendants();F.inDragLayer&&(K.forEach(l),K.connectedEdges().forEach(l)),F.addToList&&p(K,F)}},"addDescendantsToDrag"),g=u(function(k,F){F=F||{};var K=k.cy().hasCompoundNodes();F.inDragLayer&&(k.forEach(l),k.neighborhood().stdFilter(function(H){return!K||H.isEdge()}).forEach(l)),F.addToList&&k.forEach(function(H){p(H,F)}),f(k,F),v(k,{inDragLayer:F.inDragLayer}),e.updateCachedGrabbedEles()},"addNodesToDrag"),y=g,b=u(function(k){k&&(e.getCachedZSortedEles().forEach(function(F){c(F),s(F),h(F)}),e.updateCachedGrabbedEles())},"freeDraggedElements"),v=u(function(k,F){if(!(F.inDragLayer==null&&F.addToList==null)&&k.cy().hasCompoundNodes()){var K=k.ancestors().orphans();if(!K.same(k)){var H=K.descendants().spawnSelf().merge(K).unmerge(k).unmerge(k.descendants()),q=H.connectedEdges();F.inDragLayer&&(q.forEach(l),H.forEach(l)),F.addToList&&H.forEach(function(te){p(te,F)})}}},"updateAncestorsInDragLayer"),m=u(function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},"blurActiveDomElement"),x=typeof MutationObserver<"u",E=typeof ResizeObserver<"u";x?(e.removeObserver=new MutationObserver(function(k){for(var F=0;F<k.length;F++){var K=k[F],H=K.removedNodes;if(H)for(var q=0;q<H.length;q++){var te=H[q];if(te===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(k){e.destroy()});var P=xa(function(){e.cy.resize()},100);x&&(e.styleObserver=new MutationObserver(P),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",P),E&&(e.resizeObserver=new ResizeObserver(P),e.resizeObserver.observe(e.container));var C=u(function(k,F){for(;k!=null;)F(k),k=k.parentNode},"forEachUp"),w=u(function(){e.invalidateContainerClientCoordsCache()},"invalidateCoords");C(e.container,function(k){e.registerBinding(k,"transitionend",w),e.registerBinding(k,"animationend",w),e.registerBinding(k,"scroll",w)}),e.registerBinding(e.container,"contextmenu",function(k){k.preventDefault()});var S=u(function(){return e.selection[4]!==0},"inBoxSelection"),I=u(function(k){for(var F=e.findContainerClientCoords(),K=F[0],H=F[1],q=F[2],te=F[3],X=k.touches?k.touches:[k],ee=!1,fe=0;fe<X.length;fe++){var ge=X[fe];if(K<=ge.clientX&&ge.clientX<=K+q&&H<=ge.clientY&&ge.clientY<=H+te){ee=!0;break}}if(!ee)return!1;for(var ue=e.container,me=k.target,le=me.parentNode,ce=!1;le;){if(le===ue){ce=!0;break}le=le.parentNode}return!!ce},"eventInContainer");e.registerBinding(e.container,"mousedown",u(function(k){if(I(k)&&!(e.hoverData.which===1&&k.which!==1)){k.preventDefault(),m(),e.hoverData.capture=!0,e.hoverData.which=k.which;var F=e.cy,K=[k.clientX,k.clientY],H=e.projectIntoViewport(K[0],K[1]),q=e.selection,te=e.findNearestElements(H[0],H[1],!0,!1),X=te[0],ee=e.dragData.possibleDragElements;e.hoverData.mdownPos=H,e.hoverData.mdownGPos=K;var fe=u(function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var ce=e.hoverData.down;ce?ce.emit({originalEvent:k,type:"taphold",position:{x:H[0],y:H[1]}}):F.emit({originalEvent:k,type:"taphold",position:{x:H[0],y:H[1]}})}},e.tapholdDuration)},"checkForTaphold");if(k.which==3){e.hoverData.cxtStarted=!0;var ge={originalEvent:k,type:"cxttapstart",position:{x:H[0],y:H[1]}};X?(X.activate(),X.emit(ge),e.hoverData.down=X):F.emit(ge),e.hoverData.downTime=new Date().getTime(),e.hoverData.cxtDragged=!1}else if(k.which==1){X&&X.activate();{if(X!=null&&e.nodeIsGrabbable(X)){var ue=u(function(ce){return{originalEvent:k,type:ce,position:{x:H[0],y:H[1]}}},"makeEvent"),me=u(function(ce){ce.emit(ue("grab"))},"triggerGrab");if(d(X),!X.selected())ee=e.dragData.possibleDragElements=F.collection(),y(X,{addToList:ee}),X.emit(ue("grabon")).emit(ue("grab"));else{ee=e.dragData.possibleDragElements=F.collection();var le=F.$(function(ce){return ce.isNode()&&ce.selected()&&e.nodeIsGrabbable(ce)});g(le,{addToList:ee}),X.emit(ue("grabon")),le.forEach(me)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=X,e.hoverData.downs=te,e.hoverData.downTime=new Date().getTime()}r(X,["mousedown","tapstart","vmousedown"],k,{x:H[0],y:H[1]}),X==null?(q[4]=1,e.data.bgActivePosistion={x:H[0],y:H[1]},e.redrawHint("select",!0),e.redraw()):X.pannable()&&(q[4]=1),fe()}q[0]=q[2]=H[0],q[1]=q[3]=H[1]}},"mousedownHandler"),!1),e.registerBinding(t,"mousemove",u(function(k){var F=e.hoverData.capture;if(!(!F&&!I(k))){var K=!1,H=e.cy,q=H.zoom(),te=[k.clientX,k.clientY],X=e.projectIntoViewport(te[0],te[1]),ee=e.hoverData.mdownPos,fe=e.hoverData.mdownGPos,ge=e.selection,ue=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(ue=e.findNearestElement(X[0],X[1],!0,!1));var me=e.hoverData.last,le=e.hoverData.down,ce=[X[0]-ge[2],X[1]-ge[3]],je=e.dragData.possibleDragElements,Le;if(fe){var lt=te[0]-fe[0],Ze=lt*lt,qe=te[1]-fe[1],ct=qe*qe,Ue=Ze+ct;e.hoverData.isOverThresholdDrag=Le=Ue>=e.desktopTapThreshold2}var ft=a(k);Le&&(e.hoverData.tapholdCancelled=!0);var wt=u(function(){var Bt=e.hoverData.dragDelta=e.hoverData.dragDelta||[];Bt.length===0?(Bt.push(ce[0]),Bt.push(ce[1])):(Bt[0]+=ce[0],Bt[1]+=ce[1])},"updateDragDelta");K=!0,r(ue,["mousemove","vmousemove","tapdrag"],k,{x:X[0],y:X[1]});var dt=u(function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||H.emit({originalEvent:k,type:"boxstart",position:{x:X[0],y:X[1]}}),ge[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()},"goIntoBoxMode");if(e.hoverData.which===3){if(Le){var Et={originalEvent:k,type:"cxtdrag",position:{x:X[0],y:X[1]}};le?le.emit(Et):H.emit(Et),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||ue!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:k,type:"cxtdragout",position:{x:X[0],y:X[1]}}),e.hoverData.cxtOver=ue,ue&&ue.emit({originalEvent:k,type:"cxtdragover",position:{x:X[0],y:X[1]}}))}}else if(e.hoverData.dragging){if(K=!0,H.panningEnabled()&&H.userPanningEnabled()){var Dt;if(e.hoverData.justStartedPan){var Rt=e.hoverData.mdownPos;Dt={x:(X[0]-Rt[0])*q,y:(X[1]-Rt[1])*q},e.hoverData.justStartedPan=!1}else Dt={x:ce[0]*q,y:ce[1]*q};H.panBy(Dt),H.emit("dragpan"),e.hoverData.dragged=!0}X=e.projectIntoViewport(k.clientX,k.clientY)}else if(ge[4]==1&&(le==null||le.pannable())){if(Le){if(!e.hoverData.dragging&&H.boxSelectionEnabled()&&(ft||!H.panningEnabled()||!H.userPanningEnabled()))dt();else if(!e.hoverData.selecting&&H.panningEnabled()&&H.userPanningEnabled()){var kt=o(le,e.hoverData.downs);kt&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,ge[4]=0,e.data.bgActivePosistion=An(ee),e.redrawHint("select",!0),e.redraw())}le&&le.pannable()&&le.active()&&le.unactivate()}}else{if(le&&le.pannable()&&le.active()&&le.unactivate(),(!le||!le.grabbed())&&ue!=me&&(me&&r(me,["mouseout","tapdragout"],k,{x:X[0],y:X[1]}),ue&&r(ue,["mouseover","tapdragover"],k,{x:X[0],y:X[1]}),e.hoverData.last=ue),le)if(Le){if(H.boxSelectionEnabled()&&ft)le&&le.grabbed()&&(b(je),le.emit("freeon"),je.emit("free"),e.dragData.didDrag&&(le.emit("dragfreeon"),je.emit("dragfree"))),dt();else if(le&&le.grabbed()&&e.nodeIsDraggable(le)){var Xe=!e.dragData.didDrag;Xe&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||g(je,{inDragLayer:!0});var Ge={x:0,y:0};if(re(ce[0])&&re(ce[1])&&(Ge.x+=ce[0],Ge.y+=ce[1],Xe)){var nt=e.hoverData.dragDelta;nt&&re(nt[0])&&re(nt[1])&&(Ge.x+=nt[0],Ge.y+=nt[1])}e.hoverData.draggingEles=!0,je.silentShift(Ge).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else wt();K=!0}if(ge[2]=X[0],ge[3]=X[1],K)return k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault(),!1}},"mousemoveHandler"),!1);var D,B,T;e.registerBinding(t,"mouseup",u(function(k){if(!(e.hoverData.which===1&&k.which!==1&&e.hoverData.capture)){var F=e.hoverData.capture;if(F){e.hoverData.capture=!1;var K=e.cy,H=e.projectIntoViewport(k.clientX,k.clientY),q=e.selection,te=e.findNearestElement(H[0],H[1],!0,!1),X=e.dragData.possibleDragElements,ee=e.hoverData.down,fe=a(k);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,ee&&ee.unactivate(),e.hoverData.which===3){var ge={originalEvent:k,type:"cxttapend",position:{x:H[0],y:H[1]}};if(ee?ee.emit(ge):K.emit(ge),!e.hoverData.cxtDragged){var ue={originalEvent:k,type:"cxttap",position:{x:H[0],y:H[1]}};ee?ee.emit(ue):K.emit(ue)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(e.hoverData.which===1){if(r(te,["mouseup","tapend","vmouseup"],k,{x:H[0],y:H[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(r(ee,["click","tap","vclick"],k,{x:H[0],y:H[1]}),B=!1,k.timeStamp-T<=K.multiClickDebounceTime()?(D&&clearTimeout(D),B=!0,T=null,r(ee,["dblclick","dbltap","vdblclick"],k,{x:H[0],y:H[1]})):(D=setTimeout(function(){B||r(ee,["oneclick","onetap","voneclick"],k,{x:H[0],y:H[1]})},K.multiClickDebounceTime()),T=k.timeStamp)),ee==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!a(k)&&(K.$(n).unselect(["tapunselect"]),X.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=X=K.collection()),te==ee&&!e.dragData.didDrag&&!e.hoverData.selecting&&te!=null&&te._private.selectable&&(e.hoverData.dragging||(K.selectionType()==="additive"||fe?te.selected()?te.unselect(["tapunselect"]):te.select(["tapselect"]):fe||(K.$(n).unmerge(te).unselect(["tapunselect"]),te.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var me=K.collection(e.getAllInBox(q[0],q[1],q[2],q[3]));e.redrawHint("select",!0),me.length>0&&e.redrawHint("eles",!0),K.emit({type:"boxend",originalEvent:k,position:{x:H[0],y:H[1]}});var le=u(function(je){return je.selectable()&&!je.selected()},"eleWouldBeSelected");K.selectionType()==="additive"||fe||K.$(n).unmerge(me).unselect(),me.emit("box").stdFilter(le).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!q[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var ce=ee&&ee.grabbed();b(X),ce&&(ee.emit("freeon"),X.emit("free"),e.dragData.didDrag&&(ee.emit("dragfreeon"),X.emit("dragfree")))}}q[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}},"mouseupHandler"),!1);var M=u(function(k){if(!e.scrollingPage){var F=e.cy,K=F.zoom(),H=F.pan(),q=e.projectIntoViewport(k.clientX,k.clientY),te=[q[0]*K+H.x,q[1]*K+H.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||S()){k.preventDefault();return}if(F.panningEnabled()&&F.userPanningEnabled()&&F.zoomingEnabled()&&F.userZoomingEnabled()){k.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var X;k.deltaY!=null?X=k.deltaY/-250:k.wheelDeltaY!=null?X=k.wheelDeltaY/1e3:X=k.wheelDelta/1e3,X=X*e.wheelSensitivity;var ee=k.deltaMode===1;ee&&(X*=33);var fe=F.zoom()*Math.pow(10,X);k.type==="gesturechange"&&(fe=e.gestureStartZoom*k.scale),F.zoom({level:fe,renderedPosition:{x:te[0],y:te[1]}}),F.emit(k.type==="gesturechange"?"pinchzoom":"scrollzoom")}}},"wheelHandler");e.registerBinding(e.container,"wheel",M,!0),e.registerBinding(t,"scroll",u(function(k){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},"scrollHandler"),!0),e.registerBinding(e.container,"gesturestart",u(function(k){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||k.preventDefault()},"gestureStartHandler"),!0),e.registerBinding(e.container,"gesturechange",function(k){e.hasTouchStarted||M(k)},!0),e.registerBinding(e.container,"mouseout",u(function(k){var F=e.projectIntoViewport(k.clientX,k.clientY);e.cy.emit({originalEvent:k,type:"mouseout",position:{x:F[0],y:F[1]}})},"mouseOutHandler"),!1),e.registerBinding(e.container,"mouseover",u(function(k){var F=e.projectIntoViewport(k.clientX,k.clientY);e.cy.emit({originalEvent:k,type:"mouseover",position:{x:F[0],y:F[1]}})},"mouseOverHandler"),!1);var _,O,L,z,A,R,Y,V,j,W,J,ae,Z,$=u(function(k,F,K,H){return Math.sqrt((K-k)*(K-k)+(H-F)*(H-F))},"distance"),N=u(function(k,F,K,H){return(K-k)*(K-k)+(H-F)*(H-F)},"distanceSq"),G;e.registerBinding(e.container,"touchstart",G=u(function(k){if(e.hasTouchStarted=!0,!!I(k)){m(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var F=e.cy,K=e.touchData.now,H=e.touchData.earlier;if(k.touches[0]){var q=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);K[0]=q[0],K[1]=q[1]}if(k.touches[1]){var q=e.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY);K[2]=q[0],K[3]=q[1]}if(k.touches[2]){var q=e.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY);K[4]=q[0],K[5]=q[1]}if(k.touches[1]){e.touchData.singleTouchMoved=!0,b(e.dragData.touchDragEles);var te=e.findContainerClientCoords();j=te[0],W=te[1],J=te[2],ae=te[3],_=k.touches[0].clientX-j,O=k.touches[0].clientY-W,L=k.touches[1].clientX-j,z=k.touches[1].clientY-W,Z=0<=_&&_<=J&&0<=L&&L<=J&&0<=O&&O<=ae&&0<=z&&z<=ae;var X=F.pan(),ee=F.zoom();A=$(_,O,L,z),R=N(_,O,L,z),Y=[(_+L)/2,(O+z)/2],V=[(Y[0]-X.x)/ee,(Y[1]-X.y)/ee];var fe=200,ge=fe*fe;if(R<ge&&!k.touches[2]){var ue=e.findNearestElement(K[0],K[1],!0,!0),me=e.findNearestElement(K[2],K[3],!0,!0);ue&&ue.isNode()?(ue.activate().emit({originalEvent:k,type:"cxttapstart",position:{x:K[0],y:K[1]}}),e.touchData.start=ue):me&&me.isNode()?(me.activate().emit({originalEvent:k,type:"cxttapstart",position:{x:K[0],y:K[1]}}),e.touchData.start=me):F.emit({originalEvent:k,type:"cxttapstart",position:{x:K[0],y:K[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,e.redraw();return}}if(k.touches[2])F.boxSelectionEnabled()&&k.preventDefault();else if(!k.touches[1]&&k.touches[0]){var le=e.findNearestElements(K[0],K[1],!0,!0),ce=le[0];if(ce!=null&&(ce.activate(),e.touchData.start=ce,e.touchData.starts=le,e.nodeIsGrabbable(ce))){var je=e.dragData.touchDragEles=F.collection(),Le=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),ce.selected()?(Le=F.$(function(Ue){return Ue.selected()&&e.nodeIsGrabbable(Ue)}),g(Le,{addToList:je})):y(ce,{addToList:je}),d(ce);var lt=u(function(Ue){return{originalEvent:k,type:Ue,position:{x:K[0],y:K[1]}}},"makeEvent");ce.emit(lt("grabon")),Le?Le.forEach(function(Ue){Ue.emit(lt("grab"))}):ce.emit(lt("grab"))}r(ce,["touchstart","tapstart","vmousedown"],k,{x:K[0],y:K[1]}),ce==null&&(e.data.bgActivePosistion={x:q[0],y:q[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved===!1&&!e.pinching&&!e.touchData.selecting&&r(e.touchData.start,["taphold"],k,{x:K[0],y:K[1]})},e.tapholdDuration)}if(k.touches.length>=1){for(var Ze=e.touchData.startPosition=[null,null,null,null,null,null],qe=0;qe<K.length;qe++)Ze[qe]=H[qe]=K[qe];var ct=k.touches[0];e.touchData.startGPosition=[ct.clientX,ct.clientY]}}},"touchstartHandler"),!1);var U;e.registerBinding(t,"touchmove",U=u(function(k){var F=e.touchData.capture;if(!(!F&&!I(k))){var K=e.selection,H=e.cy,q=e.touchData.now,te=e.touchData.earlier,X=H.zoom();if(k.touches[0]){var ee=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);q[0]=ee[0],q[1]=ee[1]}if(k.touches[1]){var ee=e.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY);q[2]=ee[0],q[3]=ee[1]}if(k.touches[2]){var ee=e.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY);q[4]=ee[0],q[5]=ee[1]}var fe=e.touchData.startGPosition,ge;if(F&&k.touches[0]&&fe){for(var ue=[],me=0;me<q.length;me++)ue[me]=q[me]-te[me];var le=k.touches[0].clientX-fe[0],ce=le*le,je=k.touches[0].clientY-fe[1],Le=je*je,lt=ce+Le;ge=lt>=e.touchTapThreshold2}if(F&&e.touchData.cxt){k.preventDefault();var Ze=k.touches[0].clientX-j,qe=k.touches[0].clientY-W,ct=k.touches[1].clientX-j,Ue=k.touches[1].clientY-W,ft=N(Ze,qe,ct,Ue),wt=ft/R,dt=150,Et=dt*dt,Dt=1.5,Rt=Dt*Dt;if(wt>=Rt||ft>=Et){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var kt={originalEvent:k,type:"cxttapend",position:{x:q[0],y:q[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(kt),e.touchData.start=null):H.emit(kt)}}if(F&&e.touchData.cxt){var kt={originalEvent:k,type:"cxtdrag",position:{x:q[0],y:q[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(kt):H.emit(kt),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Xe=e.findNearestElement(q[0],q[1],!0,!0);(!e.touchData.cxtOver||Xe!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:k,type:"cxtdragout",position:{x:q[0],y:q[1]}}),e.touchData.cxtOver=Xe,Xe&&Xe.emit({originalEvent:k,type:"cxtdragover",position:{x:q[0],y:q[1]}}))}else if(F&&k.touches[2]&&H.boxSelectionEnabled())k.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||H.emit({originalEvent:k,type:"boxstart",position:{x:q[0],y:q[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,K[4]=1,!K||K.length===0||K[0]===void 0?(K[0]=(q[0]+q[2]+q[4])/3,K[1]=(q[1]+q[3]+q[5])/3,K[2]=(q[0]+q[2]+q[4])/3+1,K[3]=(q[1]+q[3]+q[5])/3+1):(K[2]=(q[0]+q[2]+q[4])/3,K[3]=(q[1]+q[3]+q[5])/3),e.redrawHint("select",!0),e.redraw();else if(F&&k.touches[1]&&!e.touchData.didSelect&&H.zoomingEnabled()&&H.panningEnabled()&&H.userZoomingEnabled()&&H.userPanningEnabled()){k.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Ge=e.dragData.touchDragEles;if(Ge){e.redrawHint("drag",!0);for(var nt=0;nt<Ge.length;nt++){var Bt=Ge[nt]._private;Bt.grabbed=!1,Bt.rscratch.inDragLayer=!1}}var Nr=e.touchData.start,Ze=k.touches[0].clientX-j,qe=k.touches[0].clientY-W,ct=k.touches[1].clientX-j,Ue=k.touches[1].clientY-W,ao=$(Ze,qe,ct,Ue),Xu=ao/A;if(Z){var Yu=Ze-_,Hu=qe-O,Wu=ct-L,Uu=Ue-z,Gu=(Yu+Wu)/2,Ku=(Hu+Uu)/2,Zn=H.zoom(),La=Zn*Xu,Or=H.pan(),io=V[0]*Zn+Or.x,oo=V[1]*Zn+Or.y,Zu={x:-La/Zn*(io-Or.x-Gu)+io,y:-La/Zn*(oo-Or.y-Ku)+oo};if(Nr&&Nr.active()){var Ge=e.dragData.touchDragEles;b(Ge),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Nr.unactivate().emit("freeon"),Ge.emit("free"),e.dragData.didDrag&&(Nr.emit("dragfreeon"),Ge.emit("dragfree"))}H.viewport({zoom:La,pan:Zu,cancelOnFailedZoom:!0}),H.emit("pinchzoom"),A=ao,_=Ze,O=qe,L=ct,z=Ue,e.pinching=!0}if(k.touches[0]){var ee=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);q[0]=ee[0],q[1]=ee[1]}if(k.touches[1]){var ee=e.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY);q[2]=ee[0],q[3]=ee[1]}if(k.touches[2]){var ee=e.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY);q[4]=ee[0],q[5]=ee[1]}}else if(k.touches[0]&&!e.touchData.didSelect){var Ct=e.touchData.start,za=e.touchData.last,Xe;if(!e.hoverData.draggingEles&&!e.swipePanning&&(Xe=e.findNearestElement(q[0],q[1],!0,!0)),F&&Ct!=null&&k.preventDefault(),F&&Ct!=null&&e.nodeIsDraggable(Ct))if(ge){var Ge=e.dragData.touchDragEles,so=!e.dragData.didDrag;so&&g(Ge,{inDragLayer:!0}),e.dragData.didDrag=!0;var $n={x:0,y:0};if(re(ue[0])&&re(ue[1])&&($n.x+=ue[0],$n.y+=ue[1],so)){e.redrawHint("eles",!0);var St=e.touchData.dragDelta;St&&re(St[0])&&re(St[1])&&($n.x+=St[0],$n.y+=St[1])}e.hoverData.draggingEles=!0,Ge.silentShift($n).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==te[0]&&e.touchData.startPosition[1]==te[1]&&e.redrawHint("eles",!0),e.redraw()}else{var St=e.touchData.dragDelta=e.touchData.dragDelta||[];St.length===0?(St.push(ue[0]),St.push(ue[1])):(St[0]+=ue[0],St[1]+=ue[1])}if(r(Ct||Xe,["touchmove","tapdrag","vmousemove"],k,{x:q[0],y:q[1]}),(!Ct||!Ct.grabbed())&&Xe!=za&&(za&&za.emit({originalEvent:k,type:"tapdragout",position:{x:q[0],y:q[1]}}),Xe&&Xe.emit({originalEvent:k,type:"tapdragover",position:{x:q[0],y:q[1]}})),e.touchData.last=Xe,F)for(var nt=0;nt<q.length;nt++)q[nt]&&e.touchData.startPosition[nt]&&ge&&(e.touchData.singleTouchMoved=!0);if(F&&(Ct==null||Ct.pannable())&&H.panningEnabled()&&H.userPanningEnabled()){var $u=o(Ct,e.touchData.starts);$u&&(k.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=An(e.touchData.startPosition)),e.swipePanning?(H.panBy({x:ue[0]*X,y:ue[1]*X}),H.emit("dragpan")):ge&&(e.swipePanning=!0,H.panBy({x:le*X,y:je*X}),H.emit("dragpan"),Ct&&(Ct.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));var ee=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);q[0]=ee[0],q[1]=ee[1]}}for(var me=0;me<q.length;me++)te[me]=q[me];F&&k.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},"touchmoveHandler"),!1);var ne;e.registerBinding(t,"touchcancel",ne=u(function(k){var F=e.touchData.start;e.touchData.capture=!1,F&&F.unactivate()},"touchcancelHandler"));var de,be,Q,se;if(e.registerBinding(t,"touchend",de=u(function(k){var F=e.touchData.start,K=e.touchData.capture;if(K)k.touches.length===0&&(e.touchData.capture=!1),k.preventDefault();else return;var H=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var q=e.cy,te=q.zoom(),X=e.touchData.now,ee=e.touchData.earlier;if(k.touches[0]){var fe=e.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);X[0]=fe[0],X[1]=fe[1]}if(k.touches[1]){var fe=e.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY);X[2]=fe[0],X[3]=fe[1]}if(k.touches[2]){var fe=e.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY);X[4]=fe[0],X[5]=fe[1]}F&&F.unactivate();var ge;if(e.touchData.cxt){if(ge={originalEvent:k,type:"cxttapend",position:{x:X[0],y:X[1]}},F?F.emit(ge):q.emit(ge),!e.touchData.cxtDragged){var ue={originalEvent:k,type:"cxttap",position:{x:X[0],y:X[1]}};F?F.emit(ue):q.emit(ue)}e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,e.redraw();return}if(!k.touches[2]&&q.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var me=q.collection(e.getAllInBox(H[0],H[1],H[2],H[3]));H[0]=void 0,H[1]=void 0,H[2]=void 0,H[3]=void 0,H[4]=0,e.redrawHint("select",!0),q.emit({type:"boxend",originalEvent:k,position:{x:X[0],y:X[1]}});var le=u(function(dt){return dt.selectable()&&!dt.selected()},"eleWouldBeSelected");me.emit("box").stdFilter(le).select().emit("boxselect"),me.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(F==null||F.unactivate(),k.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!k.touches[1]&&!k.touches[0]&&!k.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var ce=e.dragData.touchDragEles;if(F!=null){var je=F._private.grabbed;b(ce),e.redrawHint("drag",!0),e.redrawHint("eles",!0),je&&(F.emit("freeon"),ce.emit("free"),e.dragData.didDrag&&(F.emit("dragfreeon"),ce.emit("dragfree"))),r(F,["touchend","tapend","vmouseup","tapdragout"],k,{x:X[0],y:X[1]}),F.unactivate(),e.touchData.start=null}else{var Le=e.findNearestElement(X[0],X[1],!0,!0);r(Le,["touchend","tapend","vmouseup","tapdragout"],k,{x:X[0],y:X[1]})}var lt=e.touchData.startPosition[0]-X[0],Ze=lt*lt,qe=e.touchData.startPosition[1]-X[1],ct=qe*qe,Ue=Ze+ct,ft=Ue*te*te;e.touchData.singleTouchMoved||(F||q.$(":selected").unselect(["tapunselect"]),r(F,["tap","vclick"],k,{x:X[0],y:X[1]}),be=!1,k.timeStamp-se<=q.multiClickDebounceTime()?(Q&&clearTimeout(Q),be=!0,se=null,r(F,["dbltap","vdblclick"],k,{x:X[0],y:X[1]})):(Q=setTimeout(function(){be||r(F,["onetap","voneclick"],k,{x:X[0],y:X[1]})},q.multiClickDebounceTime()),se=k.timeStamp)),F!=null&&!e.dragData.didDrag&&F._private.selectable&&ft<e.touchTapThreshold2&&!e.pinching&&(q.selectionType()==="single"?(q.$(n).unmerge(F).unselect(["tapunselect"]),F.select(["tapselect"])):F.selected()?F.unselect(["tapunselect"]):F.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var wt=0;wt<X.length;wt++)ee[wt]=X[wt];e.dragData.didDrag=!1,k.touches.length===0&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),k.touches.length<2&&(k.touches.length===1&&(e.touchData.startGPosition=[k.touches[0].clientX,k.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())},"touchendHandler"),!1),typeof TouchEvent>"u"){var ie=[],he=u(function(k){return{clientX:k.clientX,clientY:k.clientY,force:1,identifier:k.pointerId,pageX:k.pageX,pageY:k.pageY,radiusX:k.width/2,radiusY:k.height/2,screenX:k.screenX,screenY:k.screenY,target:k.target}},"makeTouch"),ye=u(function(k){return{event:k,touch:he(k)}},"makePointer"),xe=u(function(k){ie.push(ye(k))},"addPointer"),we=u(function(k){for(var F=0;F<ie.length;F++){var K=ie[F];if(K.event.pointerId===k.pointerId){ie.splice(F,1);return}}},"removePointer"),Be=u(function(k){var F=ie.filter(function(K){return K.event.pointerId===k.pointerId})[0];F.event=k,F.touch=he(k)},"updatePointer"),Ee=u(function(k){k.touches=ie.map(function(F){return F.touch})},"addTouchesToEvent"),Se=u(function(k){return k.pointerType==="mouse"||k.pointerType===4},"pointerIsMouse");e.registerBinding(e.container,"pointerdown",function(k){Se(k)||(k.preventDefault(),xe(k),Ee(k),G(k))}),e.registerBinding(e.container,"pointerup",function(k){Se(k)||(we(k),Ee(k),de(k))}),e.registerBinding(e.container,"pointercancel",function(k){Se(k)||(we(k),Ee(k),ne(k))}),e.registerBinding(e.container,"pointermove",function(k){Se(k)||(k.preventDefault(),Be(k),Ee(k),U(k))})}};var Xt={};Xt.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:u(function(n,r,a,o,i,c){this.renderer.nodeShapeImpl("polygon",n,r,a,o,i,this.points)},"draw"),intersectLine:u(function(n,r,a,o,i,c,l,s){return fr(i,c,this.points,n,r,a/2,o/2,l)},"intersectLine"),checkPoint:u(function(n,r,a,o,i,c,l,s){return jt(n,r,this.points,c,l,o,i,[0,-1],a)},"checkPoint")}};Xt.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:u(function(e,t,n,r,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},"draw"),intersectLine:u(function(e,t,n,r,a,o,i,c){return Vd(a,o,e,t,n/2+i,r/2+i)},"intersectLine"),checkPoint:u(function(e,t,n,r,a,o,i,c){return pn(e,t,r,a,o,i,n)},"checkPoint")}};Xt.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:u(function(n,r,a,o,i,c,l){if(c[l]!==void 0&&c[l+"-cx"]===n&&c[l+"-cy"]===r)return c[l];c[l]=new Array(t.length/2),c[l+"-cx"]=n,c[l+"-cy"]=r;var s=a/2,d=o/2;i=i==="auto"?Ks(a,o):i;for(var h=new Array(t.length/2),p=0;p<t.length/2;p++)h[p]={x:n+s*t[p*2],y:r+d*t[p*2+1]};var f,g,y,b,v=h.length;for(g=h[v-1],f=0;f<v;f++)y=h[f%v],b=h[(f+1)%v],c[l][f]=Aa(g,y,b,i),g=y,y=b;return c[l]},"getOrCreateCorners"),draw:u(function(n,r,a,o,i,c,l){this.renderer.nodeShapeImpl("round-polygon",n,r,a,o,i,this.points,this.getOrCreateCorners(r,a,o,i,c,l,"drawCorners"))},"draw"),intersectLine:u(function(n,r,a,o,i,c,l,s,d){return jd(i,c,this.points,n,r,a,o,l,this.getOrCreateCorners(n,r,a,o,s,d,"corners"))},"intersectLine"),checkPoint:u(function(n,r,a,o,i,c,l,s,d){return Fd(n,r,this.points,c,l,o,i,this.getOrCreateCorners(c,l,o,i,s,d,"corners"))},"checkPoint")}};Xt.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:ut(4,0),draw:u(function(e,t,n,r,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a,this.points,o)},"draw"),intersectLine:u(function(e,t,n,r,a,o,i,c){return Us(a,o,e,t,n,r,i,c)},"intersectLine"),checkPoint:u(function(e,t,n,r,a,o,i,c){var l=r/2,s=a/2;c=c==="auto"?yn(r,a):c,c=Math.min(l,s,c);var d=c*2;return!!(jt(e,t,this.points,o,i,r,a-d,[0,-1],n)||jt(e,t,this.points,o,i,r-d,a,[0,-1],n)||pn(e,t,d,d,o-l+c,i-s+c,n)||pn(e,t,d,d,o+l-c,i-s+c,n)||pn(e,t,d,d,o+l-c,i+s-c,n)||pn(e,t,d,d,o-l+c,i+s-c,n))},"checkPoint")}};Xt.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Ii(),points:ut(4,0),draw:u(function(e,t,n,r,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a,null,o)},"draw"),generateCutTrianglePts:u(function(e,t,n,r,a){var o=a==="auto"?this.cornerLength:a,i=t/2,c=e/2,l=n-c,s=n+c,d=r-i,h=r+i;return{topLeft:[l,d+o,l+o,d,l+o,d+o],topRight:[s-o,d,s,d+o,s-o,d+o],bottomRight:[s,h-o,s-o,h,s-o,h-o],bottomLeft:[l+o,h,l,h-o,l+o,h-o]}},"generateCutTrianglePts"),intersectLine:u(function(e,t,n,r,a,o,i,c){var l=this.generateCutTrianglePts(n+2*i,r+2*i,e,t,c),s=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return fr(a,o,s,e,t)},"intersectLine"),checkPoint:u(function(e,t,n,r,a,o,i,c){var l=c==="auto"?this.cornerLength:c;if(jt(e,t,this.points,o,i,r,a-2*l,[0,-1],n)||jt(e,t,this.points,o,i,r-2*l,a,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,a,o,i);return ht(e,t,s.topLeft)||ht(e,t,s.topRight)||ht(e,t,s.bottomRight)||ht(e,t,s.bottomLeft)},"checkPoint")}};Xt.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:ut(4,0),draw:u(function(e,t,n,r,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},"draw"),intersectLine:u(function(e,t,n,r,a,o,i,c){var l=.15,s=.5,d=.85,h=this.generateBarrelBezierPts(n+2*i,r+2*i,e,t),p=u(function(g){var y=On({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),b=On({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},s),v=On({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},d);return[g[0],g[1],y.x,y.y,b.x,b.y,v.x,v.y,g[4],g[5]]},"approximateBarrelCurvePts"),f=[].concat(p(h.topLeft),p(h.topRight),p(h.bottomRight),p(h.bottomLeft));return fr(a,o,f,e,t)},"intersectLine"),generateBarrelBezierPts:u(function(e,t,n,r){var a=t/2,o=e/2,i=n-o,c=n+o,l=r-a,s=r+a,d=$a(e,t),h=d.heightOffset,p=d.widthOffset,f=d.ctrlPtOffsetPct*e,g={topLeft:[i,l+h,i+f,l,i+p,l],topRight:[c-p,l,c-f,l,c,l+h],bottomRight:[c,s-h,c-f,s,c-p,s],bottomLeft:[i+p,s,i+f,s,i,s-h]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},"generateBarrelBezierPts"),checkPoint:u(function(e,t,n,r,a,o,i,c){var l=$a(r,a),s=l.heightOffset,d=l.widthOffset;if(jt(e,t,this.points,o,i,r,a-2*s,[0,-1],n)||jt(e,t,this.points,o,i,r-2*d,a,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(r,a,o,i),p=u(function(C,w,S){var I=S[4],D=S[2],B=S[0],T=S[5],M=S[1],_=Math.min(I,B),O=Math.max(I,B),L=Math.min(T,M),z=Math.max(T,M);if(_<=C&&C<=O&&L<=w&&w<=z){var A=qd(I,D,B),R=Od(A[0],A[1],A[2],C),Y=R.filter(function(V){return 0<=V&&V<=1});if(Y.length>0)return Y[0]}return null},"getCurveT"),f=Object.keys(h),g=0;g<f.length;g++){var y=f[g],b=h[y],v=p(e,t,b);if(v!=null){var m=b[5],x=b[3],E=b[1],P=Ke(m,x,E,v);if(b.isTop&&P<=t||b.isBottom&&t<=P)return!0}}return!1},"checkPoint")}};Xt.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:ut(4,0),draw:u(function(e,t,n,r,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a,this.points,o)},"draw"),intersectLine:u(function(e,t,n,r,a,o,i,c){var l=e-(n/2+i),s=t-(r/2+i),d=s,h=e+(n/2+i),p=Gt(a,o,e,t,l,s,h,d,!1);return p.length>0?p:Us(a,o,e,t,n,r,i,c)},"intersectLine"),checkPoint:u(function(e,t,n,r,a,o,i,c){c=c==="auto"?yn(r,a):c;var l=2*c;if(jt(e,t,this.points,o,i,r,a-l,[0,-1],n)||jt(e,t,this.points,o,i,r-l,a,[0,-1],n))return!0;var s=r/2+2*n,d=a/2+2*n,h=[o-s,i-d,o-s,i,o+s,i,o+s,i-d];return!!(ht(e,t,h)||pn(e,t,l,l,o+r/2-c,i+a/2-c,n)||pn(e,t,l,l,o-r/2+c,i+a/2-c,n))},"checkPoint")}};Xt.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",ut(3,0)),this.generateRoundPolygon("round-triangle",ut(3,0)),this.generatePolygon("rectangle",ut(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",ut(5,0)),this.generateRoundPolygon("round-pentagon",ut(5,0)),this.generatePolygon("hexagon",ut(6,0)),this.generateRoundPolygon("round-hexagon",ut(6,0)),this.generatePolygon("heptagon",ut(7,0)),this.generateRoundPolygon("round-heptagon",ut(7,0)),this.generatePolygon("octagon",ut(8,0)),this.generateRoundPolygon("round-octagon",ut(8,0));var r=new Array(20);{var a=Za(5,0),o=Za(5,Math.PI/5),i=.5*(3-Math.sqrt(5));i*=1.57;for(var c=0;c<o.length/2;c++)o[c*2]*=i,o[c*2+1]*=i;for(var c=0;c<20/4;c++)r[c*4]=a[c*2],r[c*4+1]=a[c*2+1],r[c*4+2]=o[c*2],r[c*4+3]=o[c*2+1]}r=Gs(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}e.makePolygon=function(s){var d=s.join("$"),h="polygon-"+d,p;return(p=this[h])?p:t.generatePolygon(h,s)}};var Mr={};Mr.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Mr.redraw=function(e){e=e||qs();var t=this;t.averageRedrawTime===void 0&&(t.averageRedrawTime=0),t.lastRedrawTime===void 0&&(t.lastRedrawTime=0),t.lastDrawTime===void 0&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e};Mr.beforeRender=function(e,t){if(!this.destroyed){t==null&&Re("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(r,a){return a.priority-r.priority})}};var is=u(function(e,t,n){for(var r=e.beforeRenderCallbacks,a=0;a<r.length;a++)r[a].fn(t,n)},"beforeRenderCallbacks");Mr.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var n=u(function r(a){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){is(e,!0,a);var o=Vt();e.render(e.renderOptions);var i=e.lastDrawTime=Vt();e.averageRedrawTime===void 0&&(e.averageRedrawTime=i-o),e.redrawCount===void 0&&(e.redrawCount=0),e.redrawCount++,e.redrawTotalTime===void 0&&(e.redrawTotalTime=0);var c=i-o;e.redrawTotalTime+=c,e.lastRedrawTime=c,e.averageRedrawTime=e.averageRedrawTime/2+c/2,e.requestedFrame=!1}else is(e,!1,a);e.skipFrame=!1,oa(r)}},"renderFn");oa(n)}};var Ag=u(function(e){this.init(e)},"BaseRenderer"),Su=Ag,Gn=Su.prototype;Gn.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Gn.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container(),r=t.cy.window();if(r){var a=r.document,o=a.head,i="__________cytoscape_stylesheet",c="__________cytoscape_container",l=a.getElementById(i)!=null;if(n.className.indexOf(c)<0&&(n.className=(n.className||"")+" "+c),!l){var s=a.createElement("style");s.id=i,s.textContent="."+c+" { position: relative; }",o.insertBefore(s,o.children[0])}var d=r.getComputedStyle(n),h=d.getPropertyValue("position");h==="static"&&De("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=re(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()};Gn.notify=function(e,t){var n=this,r=n.cy;if(!this.destroyed){if(e==="init"){n.load();return}if(e==="destroy"){n.destroy();return}(e==="add"||e==="remove"||e==="move"&&r.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")&&n.invalidateCachedZSortedEles(),e==="viewport"&&n.redrawHint("select",!0),(e==="load"||e==="resize"||e==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Gn.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n,a=r.target;(a.off||a.removeEventListener).apply(a,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}};Gn.isHeadless=function(){return!1};[Ki,ku,Cu,Un,Xt,Mr].forEach(function(e){ve(Gn,e)});var Wa=1e3/60,Pu={setupDequeueing:u(function(e){return u(function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=xa(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),a=u(function(i,c){var l=Vt(),s=n.averageRedrawTime,d=n.lastRedrawTime,h=[],p=n.cy.extent(),f=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var g=Vt(),y=g-l,b=g-c;if(d<Wa){var v=Wa-(i?s:0);if(b>=e.deqFastCost*v)break}else if(i){if(y>=e.deqCost*d||y>=e.deqAvgCost*s)break}else if(b>=e.deqNoDrawCost*Wa)break;var m=e.deq(t,f,p);if(m.length>0)for(var x=0;x<m.length;x++)h.push(m[x]);else break}h.length>0&&(e.onDeqd(t,h),!i&&e.shouldRedraw(t,h,f,p)&&r())},"dequeue"),o=e.priority||Ti;n.beforeRender(a,o(t))}},"setupDequeueingImpl")},"setupDequeueing")},Ng=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sa;va(this,e),this.idsByKey=new Nt,this.keyForId=new Nt,this.cachesByLvl=new Nt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n}return u(e,"ElementTextureCacheLookup"),ya(e,[{key:"getIdsFor",value:u(function(t){t==null&&Re("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(t);return r||(r=new Yn,n.set(t,r)),r},"getIdsFor")},{key:"addIdForKey",value:u(function(t,n){t!=null&&this.getIdsFor(t).add(n)},"addIdForKey")},{key:"deleteIdForKey",value:u(function(t,n){t!=null&&this.getIdsFor(t).delete(n)},"deleteIdForKey")},{key:"getNumberOfIdsForKey",value:u(function(t){return t==null?0:this.getIdsFor(t).size},"getNumberOfIdsForKey")},{key:"updateKeyMappingFor",value:u(function(t){var n=t.id(),r=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(r,n),this.addIdForKey(a,n),this.keyForId.set(n,a)},"updateKeyMappingFor")},{key:"deleteKeyMappingFor",value:u(function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)},"deleteKeyMappingFor")},{key:"keyHasChangedFor",value:u(function(t){var n=t.id(),r=this.keyForId.get(n),a=this.getKey(t);return r!==a},"keyHasChangedFor")},{key:"isInvalid",value:u(function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)},"isInvalid")},{key:"getCachesAt",value:u(function(t){var n=this.cachesByLvl,r=this.lvls,a=n.get(t);return a||(a=new Nt,n.set(t,a),r.push(t)),a},"getCachesAt")},{key:"getCache",value:u(function(t,n){return this.getCachesAt(n).get(t)},"getCache")},{key:"get",value:u(function(t,n){var r=this.getKey(t),a=this.getCache(r,n);return a!=null&&this.updateKeyMappingFor(t),a},"get")},{key:"getForCachedKey",value:u(function(t,n){var r=this.keyForId.get(t.id()),a=this.getCache(r,n);return a},"getForCachedKey")},{key:"hasCache",value:u(function(t,n){return this.getCachesAt(n).has(t)},"hasCache")},{key:"has",value:u(function(t,n){var r=this.getKey(t);return this.hasCache(r,n)},"has")},{key:"setCache",value:u(function(t,n,r){r.key=t,this.getCachesAt(n).set(t,r)},"setCache")},{key:"set",value:u(function(t,n,r){var a=this.getKey(t);this.setCache(a,n,r),this.updateKeyMappingFor(t)},"set")},{key:"deleteCache",value:u(function(t,n){this.getCachesAt(n).delete(t)},"deleteCache")},{key:"delete",value:u(function(t,n){var r=this.getKey(t);this.deleteCache(r,n)},"_delete")},{key:"invalidateKey",value:u(function(t){var n=this;this.lvls.forEach(function(r){return n.deleteCache(t,r)})},"invalidateKey")},{key:"invalidate",value:u(function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(r),a||this.getNumberOfIdsForKey(r)===0},"invalidate")}]),e}(),os=25,Wr=50,ra=-4,gi=3,Og=7.99,Lg=8,zg=1024,Rg=1024,Fg=1024,Vg=.2,jg=.8,qg=10,Xg=.15,Yg=.1,Hg=.9,Wg=.9,Ug=100,Gg=1,Nn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Kg=et({getKey:null,doesEleInvalidateKey:sa,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Fs,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),or=u(function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var r=Kg(t);ve(n,r),n.lookup=new Ng(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},"ElementTextureCache"),We=or.prototype;We.reasons=Nn;We.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]};We.getRetiredTextureQueue=function(e){var t=this,n=t.eleImgCaches.retired=t.eleImgCaches.retired||{},r=n[e]=n[e]||[];return r};We.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new kr(function(n,r){return r.reqs-n.reqs});return t};We.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t};We.getElement=function(e,t,n,r,a){var o=this,i=this.renderer,c=i.cy.zoom(),l=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!o.allowEdgeTxrCaching&&e.isEdge()||!o.allowParentTxrCaching&&e.isParent())return null;if(r==null&&(r=Math.ceil(Di(c*n))),r<ra)r=ra;else if(c>=Og||r>gi)return null;var s=Math.pow(2,r),d=t.h*s,h=t.w*s,p=i.eleTextBiggerThanMin(e,s);if(!this.isVisible(e,p))return null;var f=l.get(e,r);if(f&&f.invalidated&&(f.invalidated=!1,f.texture.invalidatedWidth-=f.width),f)return f;var g;if(d<=os?g=os:d<=Wr?g=Wr:g=Math.ceil(d/Wr)*Wr,d>Fg||h>Rg)return null;var y=o.getTextureQueue(g),b=y[y.length-2],v=u(function(){return o.recycleTexture(g,h)||o.addTexture(g,h)},"addNewTxr");b||(b=y[y.length-1]),b||(b=v()),b.width-b.usedWidth<h&&(b=v());for(var m=u(function(O){return O&&O.scaledLabelShown===p},"scalableFrom"),x=a&&a===Nn.dequeue,E=a&&a===Nn.highQuality,P=a&&a===Nn.downscale,C,w=r+1;w<=gi;w++){var S=l.get(e,w);if(S){C=S;break}}var I=C&&C.level===r+1?C:null,D=u(function(){b.context.drawImage(I.texture.canvas,I.x,0,I.width,I.height,b.usedWidth,0,h,d)},"downscale");if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,h,g),m(I))D();else if(m(C))if(E){for(var B=C.level;B>r;B--)I=o.getElement(e,t,n,B,Nn.downscale);D()}else return o.queueElement(e,C.level-1),C;else{var T;if(!x&&!E&&!P)for(var M=r-1;M>=ra;M--){var _=l.get(e,M);if(_){T=_;break}}if(m(T))return o.queueElement(e,r),T;b.context.translate(b.usedWidth,0),b.context.scale(s,s),this.drawElement(b.context,e,t,p,!1),b.context.scale(1/s,1/s),b.context.translate(-b.usedWidth,0)}return f={x:b.usedWidth,texture:b,level:r,scale:s,width:h,height:d,scaledLabelShown:p},b.usedWidth+=Math.ceil(h+Lg),b.eleCaches.push(f),l.set(e,r,f),o.checkTextureFullness(b),f};We.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])};We.invalidateElement=function(e){var t=this,n=t.lookup,r=[],a=n.isInvalid(e);if(a){for(var o=ra;o<=gi;o++){var i=n.getForCachedKey(e,o);i&&r.push(i)}var c=n.invalidate(e);if(c)for(var l=0;l<r.length;l++){var s=r[l],d=s.texture;d.invalidatedWidth+=s.width,s.invalidated=!0,t.checkTextureUtility(d)}t.removeFromQueue(e)}};We.checkTextureUtility=function(e){e.invalidatedWidth>=Vg*e.width&&this.retireTexture(e)};We.checkTextureFullness=function(e){var t=this,n=t.getTextureQueue(e.height);e.usedWidth/e.width>jg&&e.fullnessChecks>=qg?Qt(n,e):e.fullnessChecks++};We.retireTexture=function(e){var t=this,n=e.height,r=t.getTextureQueue(n),a=this.lookup;Qt(r,e),e.retired=!0;for(var o=e.eleCaches,i=0;i<o.length;i++){var c=o[i];a.deleteCache(c.key,c.level)}_i(o);var l=t.getRetiredTextureQueue(n);l.push(e)};We.addTexture=function(e,t){var n=this,r=n.getTextureQueue(e),a={};return r.push(a),a.eleCaches=[],a.height=e,a.width=Math.max(zg,t),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=n.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};We.recycleTexture=function(e,t){for(var n=this,r=n.getTextureQueue(e),a=n.getRetiredTextureQueue(e),o=0;o<a.length;o++){var i=a[o];if(i.width>=t)return i.retired=!1,i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,_i(i.eleCaches),i.context.setTransform(1,0,0,1,0,0),i.context.clearRect(0,0,i.width,i.height),Qt(a,i),r.push(i),i}};We.queueElement=function(e,t){var n=this,r=n.getElementQueue(),a=n.getElementKeyToQueue(),o=this.getKey(e),i=a[o];if(i)i.level=Math.max(i.level,t),i.eles.merge(e),i.reqs++,r.updateItem(i);else{var c={eles:e.spawn().merge(e),level:t,reqs:1,key:o};r.push(c),a[o]=c}};We.dequeue=function(e){for(var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),a=[],o=t.lookup,i=0;i<Gg&&n.size()>0;i++){var c=n.pop(),l=c.key,s=c.eles[0],d=o.hasCache(s,c.level);if(r[l]=null,!d){a.push(c);var h=t.getBoundingBox(s);t.getElement(s,h,e,c.level,Nn.dequeue)}}return a};We.removeFromQueue=function(e){var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),a=this.getKey(e),o=r[a];o!=null&&(o.eles.length===1?(o.reqs=Pi,n.updateItem(o),n.pop(),r[a]=null):o.eles.unmerge(e))};We.onDequeue=function(e){this.onDequeues.push(e)};We.offDequeue=function(e){Qt(this.onDequeues,e)};We.setupDequeueing=Pu.setupDequeueing({deqRedrawThreshold:Ug,deqCost:Xg,deqAvgCost:Yg,deqNoDrawCost:Hg,deqFastCost:Wg,deq:u(function(e,t,n){return e.dequeue(t,n)},"deq"),onDeqd:u(function(e,t){for(var n=0;n<e.onDequeues.length;n++){var r=e.onDequeues[n];r(t)}},"onDeqd"),shouldRedraw:u(function(e,t,n,r){for(var a=0;a<t.length;a++)for(var o=t[a].eles,i=0;i<o.length;i++){var c=o[i].boundingBox();if(Bi(c,r))return!0}return!1},"shouldRedraw"),priority:u(function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq},"priority")});var Zg=1,lr=-4,ga=2,$g=3.99,Qg=50,Jg=50,ev=.15,tv=.1,nv=.9,rv=.9,av=1,ss=250,iv=4e3*4e3,ov=!0,Tu=u(function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Vt()-2*ss,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=xa(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},Jg),n.beforeRender(function(o,i){i-t.lastInvalidationTime<=ss?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=u(function(o,i){return i.reqs-o.reqs},"qSort");t.layersQueue=new kr(a),t.setupDequeueing()},"LayeredTextureCache"),tt=Tu.prototype,ls=0,sv=Math.pow(2,53)-1;tt.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),a=Math.ceil(e.h*n),o=this.renderer.makeOffscreenCanvas(r,a),i={id:ls=++ls%sv,bb:e,level:t,width:r,height:a,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},c=i.context,l=-i.bb.x1,s=-i.bb.y1;return c.scale(n,n),c.translate(l,s),i};tt.getLayers=function(e,t,n){var r=this,a=r.renderer,o=a.cy,i=o.zoom(),c=r.firstGet;if(r.firstGet=!1,n==null){if(n=Math.ceil(Di(i*t)),n<lr)n=lr;else if(i>=$g||n>ga)return null}r.validateLayersElesOrdering(n,e);var l=r.layersByLevel,s=Math.pow(2,n),d=l[n]=l[n]||[],h,p=r.levelIsComplete(n,e),f,g=u(function(){var I=u(function(M){if(r.validateLayersElesOrdering(M,e),r.levelIsComplete(M,e))return f=l[M],!0},"canUseAsTmpLvl"),D=u(function(M){if(!f)for(var _=n+M;lr<=_&&_<=ga&&!I(_);_+=M);},"checkLvls");D(1),D(-1);for(var B=d.length-1;B>=0;B--){var T=d[B];T.invalid&&Qt(d,T)}},"checkTempLevels");if(!p)g();else return d;var y=u(function(){if(!h){h=pt();for(var I=0;I<e.length;I++)Hs(h,e[I].boundingBox())}return h},"getBb"),b=u(function(I){I=I||{};var D=I.after;y();var B=h.w*s*(h.h*s);if(B>iv)return null;var T=r.makeLayer(h,n);if(D!=null){var M=d.indexOf(D)+1;d.splice(M,0,T)}else(I.insert===void 0||I.insert)&&d.unshift(T);return T},"makeLayer");if(r.skipping&&!c)return null;for(var v=null,m=e.length/Zg,x=!c,E=0;E<e.length;E++){var P=e[E],C=P._private.rscratch,w=C.imgLayerCaches=C.imgLayerCaches||{},S=w[n];if(S){v=S;continue}if((!v||v.eles.length>=m||!Ws(v.bb,P.boundingBox()))&&(v=b({insert:!0,after:v}),!v))return null;f||x?r.queueLayer(v,P):r.drawEleInLayer(v,P,n,t),v.eles.push(P),w[n]=v}return f||(x?null:d)};tt.getEleLevelForLayerLevel=function(e,t){return e};tt.drawEleInLayer=function(e,t,n,r){var a=this,o=this.renderer,i=e.context,c=t.boundingBox();c.w===0||c.h===0||!t.visible()||(n=a.getEleLevelForLayerLevel(n,r),o.setImgSmoothing(i,!1),o.drawCachedElement(i,t,null,null,n,ov),o.setImgSmoothing(i,!0))};tt.levelIsComplete=function(e,t){var n=this,r=n.layersByLevel[e];if(!r||r.length===0)return!1;for(var a=0,o=0;o<r.length;o++){var i=r[o];if(i.reqs>0||i.invalid)return!1;a+=i.eles.length}return a===t.length};tt.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var a=n[r],o=-1,i=0;i<t.length;i++)if(a.eles[0]===t[i]){o=i;break}if(o<0){this.invalidateLayer(a);continue}for(var c=o,i=0;i<a.eles.length;i++)if(a.eles[i]!==t[c+i]){this.invalidateLayer(a);break}}};tt.updateElementsInLayers=function(e,t){for(var n=this,r=wr(e[0]),a=0;a<e.length;a++)for(var o=r?null:e[a],i=r?e[a]:e[a].ele,c=i._private.rscratch,l=c.imgLayerCaches=c.imgLayerCaches||{},s=lr;s<=ga;s++){var d=l[s];d&&(o&&n.getEleLevelForLayerLevel(d.level)!==o.level||t(d,i,o))}};tt.haveLayers=function(){for(var e=this,t=!1,n=lr;n<=ga;n++){var r=e.layersByLevel[n];if(r&&r.length>0){t=!0;break}}return t};tt.invalidateElements=function(e){var t=this;e.length!==0&&(t.lastInvalidationTime=Vt(),!(e.length===0||!t.haveLayers())&&t.updateElementsInLayers(e,u(function(n,r,a){t.invalidateLayer(n)},"invalAssocLayers")))};tt.invalidateLayer=function(e){if(this.lastInvalidationTime=Vt(),!e.invalid){var t=e.level,n=e.eles,r=this.layersByLevel[t];Qt(r,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var a=0;a<n.length;a++){var o=n[a]._private.rscratch.imgLayerCaches;o&&(o[t]=null)}}};tt.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,u(function(n,r,a){var o=n.replacement;if(o||(o=n.replacement=t.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var i=0;i<o.eles.length;i++)t.queueLayer(o,o.eles[i])},"refineEachEle"))};tt.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()};tt.queueLayer=function(e,t){var n=this,r=n.layersQueue,a=e.elesQueue,o=a.hasId=a.hasId||{};if(!e.replacement){if(t){if(o[t.id()])return;a.push(t),o[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}};tt.dequeue=function(e){for(var t=this,n=t.layersQueue,r=[],a=0;a<av&&n.size()!==0;){var o=n.peek();if(o.replacement){n.pop();continue}if(o.replaces&&o!==o.replaces.replacement){n.pop();continue}if(o.invalid){n.pop();continue}var i=o.elesQueue.shift();i&&(t.drawEleInLayer(o,i,o.level,e),a++),r.length===0&&r.push(!0),o.elesQueue.length===0&&(n.pop(),o.reqs=0,o.replaces&&t.applyLayerReplacement(o),t.requestRedraw())}return r};tt.applyLayerReplacement=function(e){var t=this,n=t.layersByLevel[e.level],r=e.replaces,a=n.indexOf(r);if(!(a<0||r.invalid)){n[a]=e;for(var o=0;o<e.eles.length;o++){var i=e.eles[o]._private,c=i.imgLayerCaches=i.imgLayerCaches||{};c&&(c[e.level]=e)}t.requestRedraw()}};tt.requestRedraw=xa(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100);tt.setupDequeueing=Pu.setupDequeueing({deqRedrawThreshold:Qg,deqCost:ev,deqAvgCost:tv,deqNoDrawCost:nv,deqFastCost:rv,deq:u(function(e,t){return e.dequeue(t)},"deq"),onDeqd:Ti,shouldRedraw:Fs,priority:u(function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq},"priority")});var _u={},us;function Du(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}u(Du,"polygon");function Bu(e,t,n){for(var r,a=0;a<t.length;a++){var o=t[a];a===0&&(r=o),e.lineTo(o.x,o.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}u(Bu,"triangleBackcurve");function vi(e,t,n){e.beginPath&&e.beginPath();for(var r=t,a=0;a<r.length;a++){var o=r[a];e.lineTo(o.x,o.y)}var i=n,c=n[0];e.moveTo(c.x,c.y);for(var a=1;a<i.length;a++){var o=i[a];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()}u(vi,"triangleTee");function Iu(e,t,n,r,a){e.beginPath&&e.beginPath(),e.arc(n,r,a,0,Math.PI*2,!1);var o=t,i=o[0];e.moveTo(i.x,i.y);for(var c=0;c<o.length;c++){var l=o[c];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}u(Iu,"circleTriangle");function Mu(e,t,n,r){e.arc(t,n,r,0,Math.PI*2,!1)}u(Mu,"circle");_u.arrowShapeImpl=function(e){return(us||(us={polygon:Du,"triangle-backcurve":Bu,"triangle-tee":vi,"circle-triangle":Iu,"triangle-cross":vi,circle:Mu}))[e]};var zt={};zt.drawElement=function(e,t,n,r,a,o){var i=this;t.isNode()?i.drawNode(e,t,n,r,a,o):i.drawEdge(e,t,n,r,a,o)};zt.drawElementOverlay=function(e,t){var n=this;t.isNode()?n.drawNodeOverlay(e,t):n.drawEdgeOverlay(e,t)};zt.drawElementUnderlay=function(e,t){var n=this;t.isNode()?n.drawNodeUnderlay(e,t):n.drawEdgeUnderlay(e,t)};zt.drawCachedElementPortion=function(e,t,n,r,a,o,i,c){var l=this,s=n.getBoundingBox(t);if(!(s.w===0||s.h===0)){var d=n.getElement(t,s,r,a,o);if(d!=null){var h=c(l,t);if(h===0)return;var p=i(l,t),f=s.x1,g=s.y1,y=s.w,b=s.h,v,m,x,E,P;if(p!==0){var C=n.getRotationPoint(t);x=C.x,E=C.y,e.translate(x,E),e.rotate(p),P=l.getImgSmoothing(e),P||l.setImgSmoothing(e,!0);var w=n.getRotationOffset(t);v=w.x,m=w.y}else v=f,m=g;var S;h!==1&&(S=e.globalAlpha,e.globalAlpha=S*h),e.drawImage(d.texture.canvas,d.x,0,d.width,d.height,v,m,y,b),h!==1&&(e.globalAlpha=S),p!==0&&(e.rotate(-p),e.translate(-x,-E),P||l.setImgSmoothing(e,!1))}else n.drawElement(e,t)}};var lv=u(function(){return 0},"getZeroRotation"),uv=u(function(e,t){return e.getTextAngle(t,null)},"getLabelRotation"),cv=u(function(e,t){return e.getTextAngle(t,"source")},"getSourceLabelRotation"),dv=u(function(e,t){return e.getTextAngle(t,"target")},"getTargetLabelRotation"),hv=u(function(e,t){return t.effectiveOpacity()},"getOpacity"),Ua=u(function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()},"getTextOpacity");zt.drawCachedElement=function(e,t,n,r,a,o){var i=this,c=i.data,l=c.eleTxrCache,s=c.lblTxrCache,d=c.slbTxrCache,h=c.tlbTxrCache,p=t.boundingBox(),f=o===!0?l.reasons.highQuality:null;if(!(p.w===0||p.h===0||!t.visible())&&(!r||Bi(p,r))){var g=t.isEdge(),y=t.element()._private.rscratch.badLine;i.drawElementUnderlay(e,t),i.drawCachedElementPortion(e,t,l,n,a,f,lv,hv),(!g||!y)&&i.drawCachedElementPortion(e,t,s,n,a,f,uv,Ua),g&&!y&&(i.drawCachedElementPortion(e,t,d,n,a,f,cv,Ua),i.drawCachedElementPortion(e,t,h,n,a,f,dv,Ua)),i.drawElementOverlay(e,t)}};zt.drawElements=function(e,t){for(var n=this,r=0;r<t.length;r++){var a=t[r];n.drawElement(e,a)}};zt.drawCachedElements=function(e,t,n,r){for(var a=this,o=0;o<t.length;o++){var i=t[o];a.drawCachedElement(e,i,n,r)}};zt.drawCachedNodes=function(e,t,n,r){for(var a=this,o=0;o<t.length;o++){var i=t[o];i.isNode()&&a.drawCachedElement(e,i,n,r)}};zt.drawLayeredElements=function(e,t,n,r){var a=this,o=a.data.lyrTxrCache.getLayers(t,n);if(o)for(var i=0;i<o.length;i++){var c=o[i],l=c.bb;l.w===0||l.h===0||e.drawImage(c.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(e,t,n,r)};var Yt={};Yt.drawEdge=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this,c=t._private.rscratch;if(!(o&&!t.visible())&&!(c.badLine||c.allpts==null||isNaN(c.allpts[0]))){var l;n&&(l=n,e.translate(-l.x1,-l.y1));var s=o?t.pstyle("opacity").value:1,d=o?t.pstyle("line-opacity").value:1,h=t.pstyle("curve-style").value,p=t.pstyle("line-style").value,f=t.pstyle("width").pfValue,g=t.pstyle("line-cap").value,y=t.pstyle("line-outline-width").value,b=t.pstyle("line-outline-color").value,v=s*d,m=s*d,x=u(function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;h==="straight-triangle"?(i.eleStrokeStyle(e,t,_),i.drawEdgeTrianglePath(t,e,c.allpts)):(e.lineWidth=f,e.lineCap=g,i.eleStrokeStyle(e,t,_),i.drawEdgePath(t,e,c.allpts,p),e.lineCap="butt")},"drawLine"),E=u(function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(e.lineWidth=f+y,e.lineCap=g,y>0)i.colorStrokeStyle(e,b[0],b[1],b[2],_);else{e.lineCap="butt";return}h==="straight-triangle"?i.drawEdgeTrianglePath(t,e,c.allpts):(i.drawEdgePath(t,e,c.allpts,p),e.lineCap="butt")},"drawLineOutline"),P=u(function(){a&&i.drawEdgeOverlay(e,t)},"drawOverlay"),C=u(function(){a&&i.drawEdgeUnderlay(e,t)},"drawUnderlay"),w=u(function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;i.drawArrowheads(e,t,_)},"drawArrows"),S=u(function(){i.drawElementText(e,t,null,r)},"drawText");e.lineJoin="round";var I=t.pstyle("ghost").value==="yes";if(I){var D=t.pstyle("ghost-offset-x").pfValue,B=t.pstyle("ghost-offset-y").pfValue,T=t.pstyle("ghost-opacity").value,M=v*T;e.translate(D,B),x(M),w(M),e.translate(-D,-B)}else E();C(),x(),w(),P(),S(),n&&e.translate(l.x1,l.y1)}};var Au=u(function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(r!==0){var a=this,o=a.usePaths(),i=n._private.rscratch,c=n.pstyle("".concat(e,"-padding")).pfValue,l=2*c,s=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,i.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,s[0],s[1],s[2],r),a.drawEdgePath(n,t,i.allpts,"solid")}}}},"drawEdgeOverlayUnderlay");Yt.drawEdgeOverlay=Au("overlay");Yt.drawEdgeUnderlay=Au("underlay");Yt.drawEdgePath=function(e,t,n,r){var a=e._private.rscratch,o=t,i,c=!1,l=this.usePaths(),s=e.pstyle("line-dash-pattern").pfValue,d=e.pstyle("line-dash-offset").pfValue;if(l){var h=n.join("$"),p=a.pathCacheKey&&a.pathCacheKey===h;p?(i=t=a.pathCache,c=!0):(i=t=new Path2D,a.pathCacheKey=h,a.pathCache=i)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(s),o.lineDashOffset=d;break;case"solid":o.setLineDash([]);break}if(!c&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var f=2;f+3<n.length;f+=4)t.quadraticCurveTo(n[f],n[f+1],n[f+2],n[f+3]);break;case"straight":case"haystack":for(var g=2;g+1<n.length;g+=2)t.lineTo(n[g],n[g+1]);break;case"segments":if(a.isRound){var y=ki(a.roundCorners),b;try{for(y.s();!(b=y.n()).done;){var v=b.value;Zi(t,v)}}catch(x){y.e(x)}finally{y.f()}t.lineTo(n[n.length-2],n[n.length-1])}else for(var m=2;m+1<n.length;m+=2)t.lineTo(n[m],n[m+1]);break}t=o,l?t.stroke(i):t.stroke(),t.setLineDash&&t.setLineDash([])};Yt.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var r=e.pstyle("width").pfValue,a=0;a+1<n.length;a+=2){var o=[n[a+2]-n[a],n[a+3]-n[a+1]],i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=[o[1]/i,-o[0]/i],l=[c[0]*r/2,c[1]*r/2];t.beginPath(),t.moveTo(n[a]-l[0],n[a+1]-l[1]),t.lineTo(n[a]+l[0],n[a+1]+l[1]),t.lineTo(n[a+2],n[a+3]),t.closePath(),t.fill()}};Yt.drawArrowheads=function(e,t,n){var r=t._private.rscratch,a=r.edgeType==="haystack";a||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),a||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)};Yt.drawArrowhead=function(e,t,n,r,a,o,i){if(!(isNaN(r)||r==null||isNaN(a)||a==null||isNaN(o)||o==null)){var c=this,l=t.pstyle(n+"-arrow-shape").value;if(l!=="none"){var s=t.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",d=t.pstyle(n+"-arrow-fill").value,h=t.pstyle("width").pfValue,p=t.pstyle(n+"-arrow-width"),f=p.value==="match-line"?h:p.pfValue;p.units==="%"&&(f*=h);var g=t.pstyle("opacity").value;i===void 0&&(i=g);var y=e.globalCompositeOperation;(i!==1||d==="hollow")&&(e.globalCompositeOperation="destination-out",c.colorFillStyle(e,255,255,255,1),c.colorStrokeStyle(e,255,255,255,1),c.drawArrowShape(t,e,s,h,l,f,r,a,o),e.globalCompositeOperation=y);var b=t.pstyle(n+"-arrow-color").value;c.colorFillStyle(e,b[0],b[1],b[2],i),c.colorStrokeStyle(e,b[0],b[1],b[2],i),c.drawArrowShape(t,e,d,h,l,f,r,a,o)}}};Yt.drawArrowShape=function(e,t,n,r,a,o,i,c,l){var s=this,d=this.usePaths()&&a!=="triangle-cross",h=!1,p,f=t,g={x:i,y:c},y=e.pstyle("arrow-scale").value,b=this.getArrowWidth(r,y),v=s.arrowShapes[a];if(d){var m=s.arrowPathCache=s.arrowPathCache||[],x=gn(a),E=m[x];E!=null?(p=t=E,h=!0):(p=t=new Path2D,m[x]=p)}h||(t.beginPath&&t.beginPath(),d?v.draw(t,1,0,{x:0,y:0},1):v.draw(t,b,l,g,r),t.closePath&&t.closePath()),t=f,d&&(t.translate(i,c),t.rotate(l),t.scale(b,b)),(n==="filled"||n==="both")&&(d?t.fill(p):t.fill()),(n==="hollow"||n==="both")&&(t.lineWidth=o/(d?b:1),t.lineJoin="miter",d?t.stroke(p):t.stroke()),d&&(t.scale(1/b,1/b),t.rotate(-l),t.translate(-i,-c))};var Ji={};Ji.safeDrawImage=function(e,t,n,r,a,o,i,c,l,s){if(!(a<=0||o<=0||l<=0||s<=0))try{e.drawImage(t,n,r,a,o,i,c,l,s)}catch(d){De(d)}};Ji.drawInscribedImage=function(e,t,n,r,a){var o=this,i=n.position(),c=i.x,l=i.y,s=n.cy().style(),d=s.getIndexedStyle.bind(s),h=d(n,"background-fit","value",r),p=d(n,"background-repeat","value",r),f=n.width(),g=n.height(),y=n.padding()*2,b=f+(d(n,"background-width-relative-to","value",r)==="inner"?0:y),v=g+(d(n,"background-height-relative-to","value",r)==="inner"?0:y),m=n._private.rscratch,x=d(n,"background-clip","value",r),E=x==="node",P=d(n,"background-image-opacity","value",r)*a,C=d(n,"background-image-smoothing","value",r),w=n.pstyle("corner-radius").value;w!=="auto"&&(w=n.pstyle("corner-radius").pfValue);var S=t.width||t.cachedW,I=t.height||t.cachedH;(S==null||I==null)&&(document.body.appendChild(t),S=t.cachedW=t.width||t.offsetWidth,I=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var D=S,B=I;if(d(n,"background-width","value",r)!=="auto"&&(d(n,"background-width","units",r)==="%"?D=d(n,"background-width","pfValue",r)*b:D=d(n,"background-width","pfValue",r)),d(n,"background-height","value",r)!=="auto"&&(d(n,"background-height","units",r)==="%"?B=d(n,"background-height","pfValue",r)*v:B=d(n,"background-height","pfValue",r)),!(D===0||B===0)){if(h==="contain"){var T=Math.min(b/D,v/B);D*=T,B*=T}else if(h==="cover"){var T=Math.max(b/D,v/B);D*=T,B*=T}var M=c-b/2,_=d(n,"background-position-x","units",r),O=d(n,"background-position-x","pfValue",r);_==="%"?M+=(b-D)*O:M+=O;var L=d(n,"background-offset-x","units",r),z=d(n,"background-offset-x","pfValue",r);L==="%"?M+=(b-D)*z:M+=z;var A=l-v/2,R=d(n,"background-position-y","units",r),Y=d(n,"background-position-y","pfValue",r);R==="%"?A+=(v-B)*Y:A+=Y;var V=d(n,"background-offset-y","units",r),j=d(n,"background-offset-y","pfValue",r);V==="%"?A+=(v-B)*j:A+=j,m.pathCache&&(M-=c,A-=l,c=0,l=0);var W=e.globalAlpha;e.globalAlpha=P;var J=o.getImgSmoothing(e),ae=!1;if(C==="no"&&J?(o.setImgSmoothing(e,!1),ae=!0):C==="yes"&&!J&&(o.setImgSmoothing(e,!0),ae=!0),p==="no-repeat")E&&(e.save(),m.pathCache?e.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(e,c,l,b,v,w,m),e.clip())),o.safeDrawImage(e,t,0,0,S,I,M,A,D,B),E&&e.restore();else{var Z=e.createPattern(t,p);e.fillStyle=Z,o.nodeShapes[o.getNodeShape(n)].draw(e,c,l,b,v,w,m),e.translate(M,A),e.fill(),e.translate(-M,-A)}e.globalAlpha=W,ae&&o.setImgSmoothing(e,J)}};var Pn={};Pn.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),a=Math.ceil(Di(n*r));t=Math.pow(2,a)}var o=e.pstyle("font-size").pfValue*t,i=e.pstyle("min-zoomed-font-size").pfValue;return!(o<i)};Pn.drawElementText=function(e,t,n,r,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this;if(r==null){if(o&&!i.eleTextBiggerThanMin(t))return}else if(r===!1)return;if(t.isNode()){var c=t.pstyle("label");if(!c||!c.value)return;var l=i.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var s=t.element()._private.rscratch.badLine,d=t.pstyle("label"),h=t.pstyle("source-label"),p=t.pstyle("target-label");if(s||(!d||!d.value)&&(!h||!h.value)&&(!p||!p.value))return;e.textAlign="center",e.textBaseline="bottom"}var f=!n,g;n&&(g=n,e.translate(-g.x1,-g.y1)),a==null?(i.drawText(e,t,null,f,o),t.isEdge()&&(i.drawText(e,t,"source",f,o),i.drawText(e,t,"target",f,o))):i.drawText(e,t,a,f,o),n&&e.translate(g.x1,g.y1)};Pn.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t};Pn.setupTextStyle=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t.pstyle("font-style").strValue,a=t.pstyle("font-size").pfValue+"px",o=t.pstyle("font-family").strValue,i=t.pstyle("font-weight").strValue,c=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*c,s=t.pstyle("color").value,d=t.pstyle("text-outline-color").value;e.font=r+" "+i+" "+a+" "+o,e.lineJoin="round",this.colorFillStyle(e,s[0],s[1],s[2],c),this.colorStrokeStyle(e,d[0],d[1],d[2],l)};function aa(e,t,n,r,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,i=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+a-o),e.quadraticCurveTo(t+r,n+a,t+r-o,n+a),e.lineTo(t+o,n+a),e.quadraticCurveTo(t,n+a,t,n+a-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),i?e.stroke():e.fill()}u(aa,"roundRect");Pn.getTextAngle=function(e,t){var n,r=e._private,a=r.rscratch,o=t?t+"-":"",i=e.pstyle(o+"text-rotation"),c=Tt(a,"labelAngle",t);return i.strValue==="autorotate"?n=e.isEdge()?c:0:i.strValue==="none"?n=0:n=i.pfValue,n};Pn.drawText=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=t._private,i=o.rscratch,c=a?t.effectiveOpacity():1;if(!(a&&(c===0||t.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var l=Tt(i,"labelX",n),s=Tt(i,"labelY",n),d,h,p=this.getLabelText(t,n);if(p!=null&&p!==""&&!isNaN(l)&&!isNaN(s)){this.setupTextStyle(e,t,a);var f=n?n+"-":"",g=Tt(i,"labelWidth",n),y=Tt(i,"labelHeight",n),b=t.pstyle(f+"text-margin-x").pfValue,v=t.pstyle(f+"text-margin-y").pfValue,m=t.isEdge(),x=t.pstyle("text-halign").value,E=t.pstyle("text-valign").value;m&&(x="center",E="center"),l+=b,s+=v;var P;switch(r?P=this.getTextAngle(t,n):P=0,P!==0&&(d=l,h=s,e.translate(d,h),e.rotate(P),l=0,s=0),E){case"top":break;case"center":s+=y/2;break;case"bottom":s+=y;break}var C=t.pstyle("text-background-opacity").value,w=t.pstyle("text-border-opacity").value,S=t.pstyle("text-border-width").pfValue,I=t.pstyle("text-background-padding").pfValue,D=t.pstyle("text-background-shape").strValue,B=D.indexOf("round")===0,T=2;if(C>0||S>0&&w>0){var M=l-I;switch(x){case"left":M-=g;break;case"center":M-=g/2;break}var _=s-y-I,O=g+2*I,L=y+2*I;if(C>0){var z=e.fillStyle,A=t.pstyle("text-background-color").value;e.fillStyle="rgba("+A[0]+","+A[1]+","+A[2]+","+C*c+")",B?aa(e,M,_,O,L,T):e.fillRect(M,_,O,L),e.fillStyle=z}if(S>0&&w>0){var R=e.strokeStyle,Y=e.lineWidth,V=t.pstyle("text-border-color").value,j=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+V[0]+","+V[1]+","+V[2]+","+w*c+")",e.lineWidth=S,e.setLineDash)switch(j){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=S/4,e.setLineDash([]);break;case"solid":e.setLineDash([]);break}if(B?aa(e,M,_,O,L,T,"stroke"):e.strokeRect(M,_,O,L),j==="double"){var W=S/2;B?aa(e,M+W,_+W,O-W*2,L-W*2,T,"stroke"):e.strokeRect(M+W,_+W,O-W*2,L-W*2)}e.setLineDash&&e.setLineDash([]),e.lineWidth=Y,e.strokeStyle=R}}var J=2*t.pstyle("text-outline-width").pfValue;if(J>0&&(e.lineWidth=J),t.pstyle("text-wrap").value==="wrap"){var ae=Tt(i,"labelWrapCachedLines",n),Z=Tt(i,"labelLineHeight",n),$=g/2,N=this.getLabelJustification(t);switch(N==="auto"||(x==="left"?N==="left"?l+=-g:N==="center"&&(l+=-$):x==="center"?N==="left"?l+=-$:N==="right"&&(l+=$):x==="right"&&(N==="center"?l+=$:N==="right"&&(l+=g))),E){case"top":s-=(ae.length-1)*Z;break;case"center":case"bottom":s-=(ae.length-1)*Z;break}for(var G=0;G<ae.length;G++)J>0&&e.strokeText(ae[G],l,s),e.fillText(ae[G],l,s),s+=Z}else J>0&&e.strokeText(p,l,s),e.fillText(p,l,s);P!==0&&(e.rotate(-P),e.translate(-d,-h))}}};var Kn={};Kn.drawNode=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this,c,l,s=t._private,d=s.rscratch,h=t.position();if(!(!re(h.x)||!re(h.y))&&!(o&&!t.visible())){var p=o?t.effectiveOpacity():1,f=i.usePaths(),g,y=!1,b=t.padding();c=t.width()+2*b,l=t.height()+2*b;var v;n&&(v=n,e.translate(-v.x1,-v.y1));for(var m=t.pstyle("background-image"),x=m.value,E=new Array(x.length),P=new Array(x.length),C=0,w=0;w<x.length;w++){var S=x[w],I=E[w]=S!=null&&S!=="none";if(I){var D=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",w);C++,P[w]=i.getCachedImage(S,D,function(){s.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var B=t.pstyle("background-blacken").value,T=t.pstyle("border-width").pfValue,M=t.pstyle("background-opacity").value*p,_=t.pstyle("border-color").value,O=t.pstyle("border-style").value,L=t.pstyle("border-join").value,z=t.pstyle("border-cap").value,A=t.pstyle("border-position").value,R=t.pstyle("border-dash-pattern").pfValue,Y=t.pstyle("border-dash-offset").pfValue,V=t.pstyle("border-opacity").value*p,j=t.pstyle("outline-width").pfValue,W=t.pstyle("outline-color").value,J=t.pstyle("outline-style").value,ae=t.pstyle("outline-opacity").value*p,Z=t.pstyle("outline-offset").value,$=t.pstyle("corner-radius").value;$!=="auto"&&($=t.pstyle("corner-radius").pfValue);var N=u(function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;i.eleFillStyle(e,t,te)},"setupShapeColor"),G=u(function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V;i.colorStrokeStyle(e,_[0],_[1],_[2],te)},"setupBorderColor"),U=u(function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ae;i.colorStrokeStyle(e,W[0],W[1],W[2],te)},"setupOutlineColor"),ne=u(function(te,X,ee,fe){var ge=i.nodePathCache=i.nodePathCache||[],ue=Rs(ee==="polygon"?ee+","+fe.join(","):ee,""+X,""+te,""+$),me=ge[ue],le,ce=!1;return me!=null?(le=me,ce=!0,d.pathCache=le):(le=new Path2D,ge[ue]=d.pathCache=le),{path:le,cacheHit:ce}},"getPath"),de=t.pstyle("shape").strValue,be=t.pstyle("shape-polygon-points").pfValue;if(f){e.translate(h.x,h.y);var Q=ne(c,l,de,be);g=Q.path,y=Q.cacheHit}var se=u(function(){if(!y){var te=h;f&&(te={x:0,y:0}),i.nodeShapes[i.getNodeShape(t)].draw(g||e,te.x,te.y,c,l,$,d)}f?e.fill(g):e.fill()},"drawShape"),ie=u(function(){for(var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ee=s.backgrounding,fe=0,ge=0;ge<P.length;ge++){var ue=t.cy().style().getIndexedStyle(t,"background-image-containment","value",ge);if(X&&ue==="over"||!X&&ue==="inside"){fe++;continue}E[ge]&&P[ge].complete&&!P[ge].error&&(fe++,i.drawInscribedImage(e,P[ge],t,ge,te))}s.backgrounding=fe!==C,ee!==s.backgrounding&&t.updateStyle(!1)},"drawImages"),he=u(function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;i.hasPie(t)&&(i.drawPie(e,t,X),te&&(f||i.nodeShapes[i.getNodeShape(t)].draw(e,h.x,h.y,c,l,$,d)))},"drawPie"),ye=u(function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,X=(B>0?B:-B)*te,ee=B>0?0:255;B!==0&&(i.colorFillStyle(e,ee,ee,ee,X),f?e.fill(g):e.fill())},"darken"),xe=u(function(){if(T>0){if(e.lineWidth=T,e.lineCap=z,e.lineJoin=L,e.setLineDash)switch(O){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(R),e.lineDashOffset=Y;break;case"solid":case"double":e.setLineDash([]);break}if(A!=="center"){if(e.save(),e.lineWidth*=2,A==="inside")f?e.clip(g):e.clip();else{var te=new Path2D;te.rect(-c/2-T,-l/2-T,c+2*T,l+2*T),te.addPath(g),e.clip(te,"evenodd")}f?e.stroke(g):e.stroke(),e.restore()}else f?e.stroke(g):e.stroke();if(O==="double"){e.lineWidth=T/3;var X=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",f?e.stroke(g):e.stroke(),e.globalCompositeOperation=X}e.setLineDash&&e.setLineDash([])}},"drawBorder"),we=u(function(){if(j>0){if(e.lineWidth=j,e.lineCap="butt",e.setLineDash)switch(J){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}var te=h;f&&(te={x:0,y:0});var X=i.getNodeShape(t),ee=T;A==="inside"&&(ee=0),A==="outside"&&(ee*=2);var fe=(c+ee+(j+Z))/c,ge=(l+ee+(j+Z))/l,ue=c*fe,me=l*ge,le=i.nodeShapes[X].points,ce;if(f){var je=ne(ue,me,X,le);ce=je.path}if(X==="ellipse")i.drawEllipsePath(ce||e,te.x,te.y,ue,me);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(X)){var Le=0,lt=0,Ze=0;X==="round-diamond"?Le=(ee+Z+j)*1.4:X==="round-heptagon"?(Le=(ee+Z+j)*1.075,Ze=-(ee/2+Z+j)/35):X==="round-hexagon"?Le=(ee+Z+j)*1.12:X==="round-pentagon"?(Le=(ee+Z+j)*1.13,Ze=-(ee/2+Z+j)/15):X==="round-tag"?(Le=(ee+Z+j)*1.12,lt=(ee/2+j+Z)*.07):X==="round-triangle"&&(Le=(ee+Z+j)*(Math.PI/2),Ze=-(ee+Z/2+j)/Math.PI),Le!==0&&(fe=(c+Le)/c,ue=c*fe,["round-hexagon","round-tag"].includes(X)||(ge=(l+Le)/l,me=l*ge)),$=$==="auto"?Ks(ue,me):$;for(var qe=ue/2,ct=me/2,Ue=$+(ee+j+Z)/2,ft=new Array(le.length/2),wt=new Array(le.length/2),dt=0;dt<le.length/2;dt++)ft[dt]={x:te.x+lt+qe*le[dt*2],y:te.y+Ze+ct*le[dt*2+1]};var Et,Dt,Rt,kt,Xe=ft.length;for(Dt=ft[Xe-1],Et=0;Et<Xe;Et++)Rt=ft[Et%Xe],kt=ft[(Et+1)%Xe],wt[Et]=Aa(Dt,Rt,kt,Ue),Dt=Rt,Rt=kt;i.drawRoundPolygonPath(ce||e,te.x+lt,te.y+Ze,c*fe,l*ge,le,wt)}else if(["roundrectangle","round-rectangle"].includes(X))$=$==="auto"?yn(ue,me):$,i.drawRoundRectanglePath(ce||e,te.x,te.y,ue,me,$+(ee+j+Z)/2);else if(["cutrectangle","cut-rectangle"].includes(X))$=$==="auto"?Ii():$,i.drawCutRectanglePath(ce||e,te.x,te.y,ue,me,null,$+(ee+j+Z)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(X))$=$==="auto"?yn(ue,me):$,i.drawBottomRoundRectanglePath(ce||e,te.x,te.y,ue,me,$+(ee+j+Z)/2);else if(X==="barrel")i.drawBarrelPath(ce||e,te.x,te.y,ue,me);else if(X.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(X)){var Ge=(ee+j+Z)/c;le=la(ua(le,Ge)),i.drawPolygonPath(ce||e,te.x,te.y,c,l,le)}else{var nt=(ee+j+Z)/c;le=la(ua(le,-nt)),i.drawPolygonPath(ce||e,te.x,te.y,c,l,le)}if(f?e.stroke(ce):e.stroke(),J==="double"){e.lineWidth=ee/3;var Bt=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",f?e.stroke(ce):e.stroke(),e.globalCompositeOperation=Bt}e.setLineDash&&e.setLineDash([])}},"drawOutline"),Be=u(function(){a&&i.drawNodeOverlay(e,t,h,c,l)},"drawOverlay"),Ee=u(function(){a&&i.drawNodeUnderlay(e,t,h,c,l)},"drawUnderlay"),Se=u(function(){i.drawElementText(e,t,null,r)},"drawText"),k=t.pstyle("ghost").value==="yes";if(k){var F=t.pstyle("ghost-offset-x").pfValue,K=t.pstyle("ghost-offset-y").pfValue,H=t.pstyle("ghost-opacity").value,q=H*p;e.translate(F,K),U(),we(),N(H*M),se(),ie(q,!0),G(H*V),xe(),he(B!==0||T!==0),ie(q,!1),ye(q),e.translate(-F,-K)}f&&e.translate(-h.x,-h.y),Ee(),f&&e.translate(h.x,h.y),U(),we(),N(),se(),ie(p,!0),G(),xe(),he(B!==0||T!==0),ie(p,!1),ye(),f&&e.translate(-h.x,-h.y),Se(),Be(),n&&e.translate(v.x1,v.y1)}};var Nu=u(function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,r,a,o){var i=this;if(n.visible()){var c=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,s=n.pstyle("".concat(e,"-color")).value,d=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(r=r||n.position(),a==null||o==null){var p=n.padding();a=n.width()+2*p,o=n.height()+2*p}i.colorFillStyle(t,s[0],s[1],s[2],l),i.nodeShapes[d].draw(t,r.x,r.y,a+c*2,o+c*2,h),t.fill()}}}},"drawNodeOverlayUnderlay");Kn.drawNodeOverlay=Nu("overlay");Kn.drawNodeUnderlay=Nu("underlay");Kn.hasPie=function(e){return e=e[0],e._private.hasPie};Kn.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var a=t.cy().style(),o=t.pstyle("pie-size"),i=r.x,c=r.y,l=t.width(),s=t.height(),d=Math.min(l,s)/2,h=0,p=this.usePaths();p&&(i=0,c=0),o.units==="%"?d=d*o.pfValue:o.pfValue!==void 0&&(d=o.pfValue/2);for(var f=1;f<=a.pieBackgroundN;f++){var g=t.pstyle("pie-"+f+"-background-size").value,y=t.pstyle("pie-"+f+"-background-color").value,b=t.pstyle("pie-"+f+"-background-opacity").value*n,v=g/100;v+h>1&&(v=1-h);var m=1.5*Math.PI+2*Math.PI*h,x=2*Math.PI*v,E=m+x;g===0||h>=1||h+v>1||(e.beginPath(),e.moveTo(i,c),e.arc(i,c,d,m,E),e.closePath(),this.colorFillStyle(e,y[0],y[1],y[2],b),e.fill(),h+=v)}};var vt={},pv=100;vt.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=this.cy.window(),n=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/n};vt.paintCache=function(e){for(var t=this.paintCaches=this.paintCaches||[],n=!0,r,a=0;a<t.length;a++)if(r=t[a],r.context===e){n=!1;break}return n&&(r={context:e},t.push(r)),r};vt.createGradientStyleFor=function(e,t,n,r,a){var o,i=this.usePaths(),c=n.pstyle(t+"-gradient-stop-colors").value,l=n.pstyle(t+"-gradient-stop-positions").pfValue;if(r==="radial-gradient")if(n.isEdge()){var s=n.sourceEndpoint(),d=n.targetEndpoint(),h=n.midpoint(),p=vn(s,h),f=vn(d,h);o=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,f))}else{var g=i?{x:0,y:0}:n.position(),y=n.paddedWidth(),b=n.paddedHeight();o=e.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(y,b))}else if(n.isEdge()){var v=n.sourceEndpoint(),m=n.targetEndpoint();o=e.createLinearGradient(v.x,v.y,m.x,m.y)}else{var x=i?{x:0,y:0}:n.position(),E=n.paddedWidth(),P=n.paddedHeight(),C=E/2,w=P/2,S=n.pstyle("background-gradient-direction").value;switch(S){case"to-bottom":o=e.createLinearGradient(x.x,x.y-w,x.x,x.y+w);break;case"to-top":o=e.createLinearGradient(x.x,x.y+w,x.x,x.y-w);break;case"to-left":o=e.createLinearGradient(x.x+C,x.y,x.x-C,x.y);break;case"to-right":o=e.createLinearGradient(x.x-C,x.y,x.x+C,x.y);break;case"to-bottom-right":case"to-right-bottom":o=e.createLinearGradient(x.x-C,x.y-w,x.x+C,x.y+w);break;case"to-top-right":case"to-right-top":o=e.createLinearGradient(x.x-C,x.y+w,x.x+C,x.y-w);break;case"to-bottom-left":case"to-left-bottom":o=e.createLinearGradient(x.x+C,x.y-w,x.x-C,x.y+w);break;case"to-top-left":case"to-left-top":o=e.createLinearGradient(x.x+C,x.y+w,x.x-C,x.y-w);break}}if(!o)return null;for(var I=l.length===c.length,D=c.length,B=0;B<D;B++)o.addColorStop(I?l[B]:B/(D-1),"rgba("+c[B][0]+","+c[B][1]+","+c[B][2]+","+a+")");return o};vt.gradientFillStyle=function(e,t,n,r){var a=this.createGradientStyleFor(e,"background",t,n,r);if(!a)return null;e.fillStyle=a};vt.colorFillStyle=function(e,t,n,r,a){e.fillStyle="rgba("+t+","+n+","+r+","+a+")"};vt.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientFillStyle(e,t,r,n);else{var a=t.pstyle("background-color").value;this.colorFillStyle(e,a[0],a[1],a[2],n)}};vt.gradientStrokeStyle=function(e,t,n,r){var a=this.createGradientStyleFor(e,"line",t,n,r);if(!a)return null;e.strokeStyle=a};vt.colorStrokeStyle=function(e,t,n,r,a){e.strokeStyle="rgba("+t+","+n+","+r+","+a+")"};vt.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientStrokeStyle(e,t,r,n);else{var a=t.pstyle("line-color").value;this.colorStrokeStyle(e,a[0],a[1],a[2],n)}};vt.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),a=r[2],o=r[3],i=t.getPixelRatio(),c=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(i=c);var l=a*i,s=o*i,d;if(!(l===t.canvasWidth&&s===t.canvasHeight)){t.fontCaches=null;var h=n.canvasContainer;h.style.width=a+"px",h.style.height=o+"px";for(var p=0;p<t.CANVAS_LAYERS;p++)d=n.canvases[p],d.width=l,d.height=s,d.style.width=a+"px",d.style.height=o+"px";for(var p=0;p<t.BUFFER_COUNT;p++)d=n.bufferCanvases[p],d.width=l,d.height=s,d.style.width=a+"px",d.style.height=o+"px";t.textureMult=1,i<=1&&(d=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,d.width=l*t.textureMult,d.height=s*t.textureMult),t.canvasWidth=l,t.canvasHeight=s}};vt.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})};vt.render=function(e){e=e||qs();var t=e.forcedContext,n=e.drawAllLayers,r=e.drawOnlyNodeLayer,a=e.forcedZoom,o=e.forcedPan,i=this,c=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio,l=i.cy,s=i.data,d=s.canvasNeedsRedraw,h=i.textureOnViewport&&!t&&(i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming),p=e.motionBlur!==void 0?e.motionBlur:i.motionBlur,f=i.motionBlurPxRatio,g=l.hasCompoundNodes(),y=i.hoverData.draggingEles,b=!!(i.hoverData.selecting||i.touchData.selecting);p=p&&!t&&i.motionBlurEnabled&&!b;var v=p;t||(i.prevPxRatio!==c&&(i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.container),i.redrawHint("eles",!0),i.redrawHint("drag",!0)),i.prevPxRatio=c),!t&&i.motionBlurTimeout&&clearTimeout(i.motionBlurTimeout),p&&(i.mbFrames==null&&(i.mbFrames=0),i.mbFrames++,i.mbFrames<3&&(v=!1),i.mbFrames>i.minMbLowQualFrames&&(i.motionBlurPxRatio=i.mbPxRBlurry)),i.clearingMotionBlur&&(i.motionBlurPxRatio=1),i.textureDrawLastFrame&&!h&&(d[i.NODE]=!0,d[i.SELECT_BOX]=!0);var m=l.style(),x=l.zoom(),E=a!==void 0?a:x,P=l.pan(),C={x:P.x,y:P.y},w={zoom:x,pan:{x:P.x,y:P.y}},S=i.prevViewport,I=S===void 0||w.zoom!==S.zoom||w.pan.x!==S.pan.x||w.pan.y!==S.pan.y;!I&&!(y&&!g)&&(i.motionBlurPxRatio=1),o&&(C=o),E*=c,C.x*=c,C.y*=c;var D=i.getCachedZSortedEles();function B(Q,se,ie,he,ye){var xe=Q.globalCompositeOperation;Q.globalCompositeOperation="destination-out",i.colorFillStyle(Q,255,255,255,i.motionBlurTransparency),Q.fillRect(se,ie,he,ye),Q.globalCompositeOperation=xe}u(B,"mbclear");function T(Q,se){var ie,he,ye,xe;!i.clearingMotionBlur&&(Q===s.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]||Q===s.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG])?(ie={x:P.x*f,y:P.y*f},he=x*f,ye=i.canvasWidth*f,xe=i.canvasHeight*f):(ie=C,he=E,ye=i.canvasWidth,xe=i.canvasHeight),Q.setTransform(1,0,0,1,0,0),se==="motionBlur"?B(Q,0,0,ye,xe):!t&&(se===void 0||se)&&Q.clearRect(0,0,ye,xe),n||(Q.translate(ie.x,ie.y),Q.scale(he,he)),o&&Q.translate(o.x,o.y),a&&Q.scale(a,a)}if(u(T,"setContextTransform"),h||(i.textureDrawLastFrame=!1),h){if(i.textureDrawLastFrame=!0,!i.textureCache){i.textureCache={},i.textureCache.bb=l.mutableElements().boundingBox(),i.textureCache.texture=i.data.bufferCanvases[i.TEXTURE_BUFFER];var M=i.data.bufferContexts[i.TEXTURE_BUFFER];M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,i.canvasWidth*i.textureMult,i.canvasHeight*i.textureMult),i.render({forcedContext:M,drawOnlyNodeLayer:!0,forcedPxRatio:c*i.textureMult});var w=i.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:i.canvasWidth,height:i.canvasHeight};w.mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}d[i.DRAG]=!1,d[i.NODE]=!1;var _=s.contexts[i.NODE],O=i.textureCache.texture,w=i.textureCache.viewport;_.setTransform(1,0,0,1,0,0),p?B(_,0,0,w.width,w.height):_.clearRect(0,0,w.width,w.height);var L=m.core("outside-texture-bg-color").value,z=m.core("outside-texture-bg-opacity").value;i.colorFillStyle(_,L[0],L[1],L[2],z),_.fillRect(0,0,w.width,w.height);var x=l.zoom();T(_,!1),_.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/c,w.height/w.zoom/c),_.drawImage(O,w.mpan.x,w.mpan.y,w.width/w.zoom/c,w.height/w.zoom/c)}else i.textureOnViewport&&!t&&(i.textureCache=null);var A=l.extent(),R=i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming||i.hoverData.draggingEles||i.cy.animated(),Y=i.hideEdgesOnViewport&&R,V=[];if(V[i.NODE]=!d[i.NODE]&&p&&!i.clearedForMotionBlur[i.NODE]||i.clearingMotionBlur,V[i.NODE]&&(i.clearedForMotionBlur[i.NODE]=!0),V[i.DRAG]=!d[i.DRAG]&&p&&!i.clearedForMotionBlur[i.DRAG]||i.clearingMotionBlur,V[i.DRAG]&&(i.clearedForMotionBlur[i.DRAG]=!0),d[i.NODE]||n||r||V[i.NODE]){var j=p&&!V[i.NODE]&&f!==1,_=t||(j?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]:s.contexts[i.NODE]),W=p&&!j?"motionBlur":void 0;T(_,W),Y?i.drawCachedNodes(_,D.nondrag,c,A):i.drawLayeredElements(_,D.nondrag,c,A),i.debug&&i.drawDebugPoints(_,D.nondrag),!n&&!p&&(d[i.NODE]=!1)}if(!r&&(d[i.DRAG]||n||V[i.DRAG])){var j=p&&!V[i.DRAG]&&f!==1,_=t||(j?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG]:s.contexts[i.DRAG]);T(_,p&&!j?"motionBlur":void 0),Y?i.drawCachedNodes(_,D.drag,c,A):i.drawCachedElements(_,D.drag,c,A),i.debug&&i.drawDebugPoints(_,D.drag),!n&&!p&&(d[i.DRAG]=!1)}if(i.showFps||!r&&d[i.SELECT_BOX]&&!n){var _=t||s.contexts[i.SELECT_BOX];if(T(_),i.selection[4]==1&&(i.hoverData.selecting||i.touchData.selecting)){var x=i.cy.zoom(),J=m.core("selection-box-border-width").value/x;_.lineWidth=J,_.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",_.fillRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]),J>0&&(_.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",_.strokeRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]))}if(s.bgActivePosistion&&!i.hoverData.selecting){var x=i.cy.zoom(),ae=s.bgActivePosistion;_.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",_.beginPath(),_.arc(ae.x,ae.y,m.core("active-bg-size").pfValue/x,0,2*Math.PI),_.fill()}var Z=i.lastRedrawTime;if(i.showFps&&Z){Z=Math.round(Z);var $=Math.round(1e3/Z);_.setTransform(1,0,0,1,0,0),_.fillStyle="rgba(255, 0, 0, 0.75)",_.strokeStyle="rgba(255, 0, 0, 0.75)",_.lineWidth=1,_.fillText("1 frame = "+Z+" ms = "+$+" fps",0,20);var N=60;_.strokeRect(0,30,250,20),_.fillRect(0,30,250*Math.min($/N,1),20)}n||(d[i.SELECT_BOX]=!1)}if(p&&f!==1){var G=s.contexts[i.NODE],U=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_NODE],ne=s.contexts[i.DRAG],de=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_DRAG],be=u(function(Q,se,ie){Q.setTransform(1,0,0,1,0,0),ie||!v?Q.clearRect(0,0,i.canvasWidth,i.canvasHeight):B(Q,0,0,i.canvasWidth,i.canvasHeight);var he=f;Q.drawImage(se,0,0,i.canvasWidth*he,i.canvasHeight*he,0,0,i.canvasWidth,i.canvasHeight)},"drawMotionBlur");(d[i.NODE]||V[i.NODE])&&(be(G,U,V[i.NODE]),d[i.NODE]=!1),(d[i.DRAG]||V[i.DRAG])&&(be(ne,de,V[i.DRAG]),d[i.DRAG]=!1)}i.prevViewport=w,i.clearingMotionBlur&&(i.clearingMotionBlur=!1,i.motionBlurCleared=!0,i.motionBlur=!0),p&&(i.motionBlurTimeout=setTimeout(function(){i.motionBlurTimeout=null,i.clearedForMotionBlur[i.NODE]=!1,i.clearedForMotionBlur[i.DRAG]=!1,i.motionBlur=!1,i.clearingMotionBlur=!h,i.mbFrames=0,d[i.NODE]=!0,d[i.DRAG]=!0,i.redraw()},pv)),t||l.emit("render")};var rn={};rn.drawPolygonPath=function(e,t,n,r,a,o){var i=r/2,c=a/2;e.beginPath&&e.beginPath(),e.moveTo(t+i*o[0],n+c*o[1]);for(var l=1;l<o.length/2;l++)e.lineTo(t+i*o[l*2],n+c*o[l*2+1]);e.closePath()};rn.drawRoundPolygonPath=function(e,t,n,r,a,o,i){i.forEach(function(c){return Zi(e,c)}),e.closePath()};rn.drawRoundRectanglePath=function(e,t,n,r,a,o){var i=r/2,c=a/2,l=o==="auto"?yn(r,a):Math.min(o,c,i);e.beginPath&&e.beginPath(),e.moveTo(t,n-c),e.arcTo(t+i,n-c,t+i,n,l),e.arcTo(t+i,n+c,t,n+c,l),e.arcTo(t-i,n+c,t-i,n,l),e.arcTo(t-i,n-c,t,n-c,l),e.lineTo(t,n-c),e.closePath()};rn.drawBottomRoundRectanglePath=function(e,t,n,r,a,o){var i=r/2,c=a/2,l=o==="auto"?yn(r,a):o;e.beginPath&&e.beginPath(),e.moveTo(t,n-c),e.lineTo(t+i,n-c),e.lineTo(t+i,n),e.arcTo(t+i,n+c,t,n+c,l),e.arcTo(t-i,n+c,t-i,n,l),e.lineTo(t-i,n-c),e.lineTo(t,n-c),e.closePath()};rn.drawCutRectanglePath=function(e,t,n,r,a,o,i){var c=r/2,l=a/2,s=i==="auto"?Ii():i;e.beginPath&&e.beginPath(),e.moveTo(t-c+s,n-l),e.lineTo(t+c-s,n-l),e.lineTo(t+c,n-l+s),e.lineTo(t+c,n+l-s),e.lineTo(t+c-s,n+l),e.lineTo(t-c+s,n+l),e.lineTo(t-c,n+l-s),e.lineTo(t-c,n-l+s),e.closePath()};rn.drawBarrelPath=function(e,t,n,r,a){var o=r/2,i=a/2,c=t-o,l=t+o,s=n-i,d=n+i,h=$a(r,a),p=h.widthOffset,f=h.heightOffset,g=h.ctrlPtOffsetPct*p;e.beginPath&&e.beginPath(),e.moveTo(c,s+f),e.lineTo(c,d-f),e.quadraticCurveTo(c+g,d,c+p,d),e.lineTo(l-p,d),e.quadraticCurveTo(l-g,d,l,d-f),e.lineTo(l,s+f),e.quadraticCurveTo(l-g,s,l-p,s),e.lineTo(c+p,s),e.quadraticCurveTo(c+g,s,c,s+f),e.closePath()};var cs=Math.sin(0),ds=Math.cos(0),yi={},mi={},Ou=Math.PI/40;for(on=0*Math.PI;on<2*Math.PI;on+=Ou)yi[on]=Math.sin(on),mi[on]=Math.cos(on);var on;rn.drawEllipsePath=function(e,t,n,r,a){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,a/2,0,0,2*Math.PI);else for(var o,i,c=r/2,l=a/2,s=0*Math.PI;s<2*Math.PI;s+=Ou)o=t-c*yi[s]*cs+c*mi[s]*ds,i=n+l*mi[s]*cs+l*yi[s]*ds,s===0?e.moveTo(o,i):e.lineTo(o,i);e.closePath()};var Ar={};Ar.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]};Ar.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements(),r=n.boundingBox(),a=this.findContainerClientCoords(),o=e.full?Math.ceil(r.w):a[2],i=e.full?Math.ceil(r.h):a[3],c=re(e.maxWidth)||re(e.maxHeight),l=this.getPixelRatio(),s=1;if(e.scale!==void 0)o*=e.scale,i*=e.scale,s=e.scale;else if(c){var d=1/0,h=1/0;re(e.maxWidth)&&(d=s*e.maxWidth/o),re(e.maxHeight)&&(h=s*e.maxHeight/i),s=Math.min(d,h),o*=s,i*=s}c||(o*=l,i*=l,s*=l);var p=document.createElement("canvas");p.width=o,p.height=i,p.style.width=o+"px",p.style.height=i+"px";var f=p.getContext("2d");if(o>0&&i>0){f.clearRect(0,0,o,i),f.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(e.full)f.translate(-r.x1*s,-r.y1*s),f.scale(s,s),this.drawElements(f,g),f.scale(1/s,1/s),f.translate(r.x1*s,r.y1*s);else{var y=t.pan(),b={x:y.x*s,y:y.y*s};s*=t.zoom(),f.translate(b.x,b.y),f.scale(s,s),this.drawElements(f,g),f.scale(1/s,1/s),f.translate(-b.x,-b.y)}e.bg&&(f.globalCompositeOperation="destination-over",f.fillStyle=e.bg,f.rect(0,0,o,i),f.fill())}return p};function Lu(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),a=new Uint8Array(r),o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return new Blob([r],{type:t})}u(Lu,"b64ToBlob");function bi(e){var t=e.indexOf(",");return e.substr(t+1)}u(bi,"b64UriToB64");function eo(e,t,n){var r=u(function(){return t.toDataURL(n,e.quality)},"getB64Uri");switch(e.output){case"blob-promise":return new Hn(function(a,o){try{t.toBlob(function(i){i!=null?a(i):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(i){o(i)}});case"blob":return Lu(bi(r()),n);case"base64":return bi(r());case"base64uri":default:return r()}}u(eo,"output");Ar.png=function(e){return eo(e,this.bufferCanvasImage(e),"image/png")};Ar.jpg=function(e){return eo(e,this.bufferCanvasImage(e),"image/jpeg")};var zu={};zu.nodeShapeImpl=function(e,t,n,r,a,o,i,c){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,a,o);case"polygon":return this.drawPolygonPath(t,n,r,a,o,i);case"round-polygon":return this.drawRoundPolygonPath(t,n,r,a,o,i,c);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,a,o,c);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,a,o,i,c);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,a,o,c);case"barrel":return this.drawBarrelPath(t,n,r,a,o)}};var fv=to,Pe=to.prototype;Pe.CANVAS_LAYERS=3;Pe.SELECT_BOX=0;Pe.DRAG=1;Pe.NODE=2;Pe.BUFFER_COUNT=3;Pe.TEXTURE_BUFFER=0;Pe.MOTIONBLUR_BUFFER_NODE=1;Pe.MOTIONBLUR_BUFFER_DRAG=2;function to(e){var t=this,n=t.cy.window(),r=n.document;t.data={canvases:new Array(Pe.CANVAS_LAYERS),contexts:new Array(Pe.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Pe.CANVAS_LAYERS),bufferCanvases:new Array(Pe.BUFFER_COUNT),bufferContexts:new Array(Pe.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",o="rgba(0,0,0,0)";t.data.canvasContainer=r.createElement("div");var i=t.data.canvasContainer.style;t.data.canvasContainer.style[a]=o,i.position="relative",i.zIndex="0",i.overflow="hidden";var c=e.cy.container();c.appendChild(t.data.canvasContainer),c.style[a]=o;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};sc()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var s=0;s<Pe.CANVAS_LAYERS;s++){var d=t.data.canvases[s]=r.createElement("canvas");t.data.contexts[s]=d.getContext("2d"),Object.keys(l).forEach(function(N){d.style[N]=l[N]}),d.style.position="absolute",d.setAttribute("data-id","layer"+s),d.style.zIndex=String(Pe.CANVAS_LAYERS-s),t.data.canvasContainer.appendChild(d),t.data.canvasNeedsRedraw[s]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[Pe.NODE].setAttribute("data-id","layer"+Pe.NODE+"-node"),t.data.canvases[Pe.SELECT_BOX].setAttribute("data-id","layer"+Pe.SELECT_BOX+"-selectbox"),t.data.canvases[Pe.DRAG].setAttribute("data-id","layer"+Pe.DRAG+"-drag");for(var s=0;s<Pe.BUFFER_COUNT;s++)t.data.bufferCanvases[s]=r.createElement("canvas"),t.data.bufferContexts[s]=t.data.bufferCanvases[s].getContext("2d"),t.data.bufferCanvases[s].style.position="absolute",t.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),t.data.bufferCanvases[s].style.zIndex=String(-s-1),t.data.bufferCanvases[s].style.visibility="hidden";t.pathsEnabled=!0;var h=pt(),p=u(function(N){return{x:(N.x1+N.x2)/2,y:(N.y1+N.y2)/2}},"getBoxCenter"),f=u(function(N){return{x:-N.w/2,y:-N.h/2}},"getCenterOffset"),g=u(function(N){var G=N[0]._private,U=G.oldBackgroundTimestamp===G.backgroundTimestamp;return!U},"backgroundTimestampHasChanged"),y=u(function(N){return N[0]._private.nodeKey},"getStyleKey"),b=u(function(N){return N[0]._private.labelStyleKey},"getLabelKey"),v=u(function(N){return N[0]._private.sourceLabelStyleKey},"getSourceLabelKey"),m=u(function(N){return N[0]._private.targetLabelStyleKey},"getTargetLabelKey"),x=u(function(N,G,U,ne,de){return t.drawElement(N,G,U,!1,!1,de)},"drawElement"),E=u(function(N,G,U,ne,de){return t.drawElementText(N,G,U,ne,"main",de)},"drawLabel"),P=u(function(N,G,U,ne,de){return t.drawElementText(N,G,U,ne,"source",de)},"drawSourceLabel"),C=u(function(N,G,U,ne,de){return t.drawElementText(N,G,U,ne,"target",de)},"drawTargetLabel"),w=u(function(N){return N.boundingBox(),N[0]._private.bodyBounds},"getElementBox"),S=u(function(N){return N.boundingBox(),N[0]._private.labelBounds.main||h},"getLabelBox"),I=u(function(N){return N.boundingBox(),N[0]._private.labelBounds.source||h},"getSourceLabelBox"),D=u(function(N){return N.boundingBox(),N[0]._private.labelBounds.target||h},"getTargetLabelBox"),B=u(function(N,G){return G},"isLabelVisibleAtScale"),T=u(function(N){return p(w(N))},"getElementRotationPoint"),M=u(function(N,G,U){var ne=N?N+"-":"";return{x:G.x+U.pstyle(ne+"text-margin-x").pfValue,y:G.y+U.pstyle(ne+"text-margin-y").pfValue}},"addTextMargin"),_=u(function(N,G,U){var ne=N[0]._private.rscratch;return{x:ne[G],y:ne[U]}},"getRsPt"),O=u(function(N){return M("",_(N,"labelX","labelY"),N)},"getLabelRotationPoint"),L=u(function(N){return M("source",_(N,"sourceLabelX","sourceLabelY"),N)},"getSourceLabelRotationPoint"),z=u(function(N){return M("target",_(N,"targetLabelX","targetLabelY"),N)},"getTargetLabelRotationPoint"),A=u(function(N){return f(w(N))},"getElementRotationOffset"),R=u(function(N){return f(I(N))},"getSourceLabelRotationOffset"),Y=u(function(N){return f(D(N))},"getTargetLabelRotationOffset"),V=u(function(N){var G=S(N),U=f(S(N));if(N.isNode()){switch(N.pstyle("text-halign").value){case"left":U.x=-G.w;break;case"right":U.x=0;break}switch(N.pstyle("text-valign").value){case"top":U.y=-G.h;break;case"bottom":U.y=0;break}}return U},"getLabelRotationOffset"),j=t.data.eleTxrCache=new or(t,{getKey:y,doesEleInvalidateKey:g,drawElement:x,getBoundingBox:w,getRotationPoint:T,getRotationOffset:A,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),W=t.data.lblTxrCache=new or(t,{getKey:b,drawElement:E,getBoundingBox:S,getRotationPoint:O,getRotationOffset:V,isVisible:B}),J=t.data.slbTxrCache=new or(t,{getKey:v,drawElement:P,getBoundingBox:I,getRotationPoint:L,getRotationOffset:R,isVisible:B}),ae=t.data.tlbTxrCache=new or(t,{getKey:m,drawElement:C,getBoundingBox:D,getRotationPoint:z,getRotationOffset:Y,isVisible:B}),Z=t.data.lyrTxrCache=new Tu(t);t.onUpdateEleCalcs(u(function(N,G){j.invalidateElements(G),W.invalidateElements(G),J.invalidateElements(G),ae.invalidateElements(G),Z.invalidateElements(G);for(var U=0;U<G.length;U++){var ne=G[U]._private;ne.oldBackgroundTimestamp=ne.backgroundTimestamp}},"invalidateTextureCaches"));var $=u(function(N){for(var G=0;G<N.length;G++)Z.enqueueElementRefinement(N[G].ele)},"refineInLayers");j.onDequeue($),W.onDequeue($),J.onDequeue($),ae.onDequeue($)}u(to,"CanvasRenderer");Pe.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[Pe.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[Pe.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[Pe.SELECT_BOX]=t;break}};var gv=typeof Path2D<"u";Pe.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=!!e};Pe.usePaths=function(){return gv&&this.pathsEnabled};Pe.setImgSmoothing=function(e,t){e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)};Pe.getImgSmoothing=function(e){return e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled};Pe.makeOffscreenCanvas=function(e,t){var n;if((typeof OffscreenCanvas>"u"?"undefined":Ve(OffscreenCanvas))!=="undefined")n=new OffscreenCanvas(e,t);else{var r=this.cy.window(),a=r.document;n=a.createElement("canvas"),n.width=e,n.height=t}return n};[_u,zt,Yt,Ji,Pn,Kn,vt,rn,Ar,zu].forEach(function(e){ve(Pe,e)});var vv=[{name:"null",impl:Gi},{name:"base",impl:Su},{name:"canvas",impl:fv}],yv=[{type:"layout",extensions:Dg},{type:"renderer",extensions:vv}],Ru={},Fu={};function no(e,t,n){var r=n,a=u(function(w){De("Can not register `"+t+"` for `"+e+"` since `"+w+"` already exists in the prototype and can not be overridden")},"overrideErr");if(e==="core"){if(br.prototype[t])return a(t);br.prototype[t]=n}else if(e==="collection"){if(Je.prototype[t])return a(t);Je.prototype[t]=n}else if(e==="layout"){for(var o=u(function(w){this.options=w,n.call(this,w),Ce(this._private)||(this._private={}),this._private.cy=w.cy,this._private.listeners=[],this.createEmitter()},"Layout"),i=o.prototype=Object.create(n.prototype),c=[],l=0;l<c.length;l++){var s=c[l];i[s]=i[s]||function(){return this}}i.start&&!i.run?i.run=function(){return this.start(),this}:!i.start&&i.run&&(i.start=function(){return this.run(),this});var d=n.prototype.stop;i.stop=function(){var w=this.options;if(w&&w.animate){var S=this.animations;if(S)for(var I=0;I<S.length;I++)S[I].stop()}return d?d.call(this):this.emit("layoutstop"),this},i.destroy||(i.destroy=function(){return this}),i.cy=function(){return this._private.cy};var h=u(function(w){return w._private.cy},"getCy"),p={addEventFields:u(function(w,S){S.layout=w,S.cy=h(w),S.target=w},"addEventFields"),bubble:u(function(){return!0},"bubble"),parent:u(function(w){return h(w)},"parent")};ve(i,{createEmitter:u(function(){return this._private.emitter=new Pr(p,this),this},"createEmitter"),emitter:u(function(){return this._private.emitter},"emitter"),on:u(function(w,S){return this.emitter().on(w,S),this},"on"),one:u(function(w,S){return this.emitter().one(w,S),this},"one"),once:u(function(w,S){return this.emitter().one(w,S),this},"once"),removeListener:u(function(w,S){return this.emitter().removeListener(w,S),this},"removeListener"),removeAllListeners:u(function(){return this.emitter().removeAllListeners(),this},"removeAllListeners"),emit:u(function(w,S){return this.emitter().emit(w,S),this},"emit")}),_e.eventAliasesOn(i),r=o}else if(e==="renderer"&&t!=="null"&&t!=="base"){var f=ro("renderer","base"),g=f.prototype,y=n,b=n.prototype,v=u(function(){f.apply(this,arguments),y.apply(this,arguments)},"Renderer"),m=v.prototype;for(var x in g){var E=g[x],P=b[x]!=null;if(P)return a(x);m[x]=E}for(var C in b)m[C]=b[C];g.clientFunctions.forEach(function(w){m[w]=m[w]||function(){Re("Renderer does not implement `renderer."+w+"()` on its prototype")}}),r=v}else if(e==="__proto__"||e==="constructor"||e==="prototype")return Re(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return xs({map:Ru,keys:[e,t],value:r})}u(no,"setExtension");function ro(e,t){return ws({map:Ru,keys:[e,t]})}u(ro,"getExtension");function Vu(e,t,n,r,a){return xs({map:Fu,keys:[e,t,n,r],value:a})}u(Vu,"setModule");function ju(e,t,n,r){return ws({map:Fu,keys:[e,t,n,r]})}u(ju,"getModule");var xi=u(function(){if(arguments.length===2)return ro.apply(null,arguments);if(arguments.length===3)return no.apply(null,arguments);if(arguments.length===4)return ju.apply(null,arguments);if(arguments.length===5)return Vu.apply(null,arguments);Re("Invalid extension access syntax")},"extension");br.prototype.extension=xi;yv.forEach(function(e){e.extensions.forEach(function(t){no(e.type,t.name,t.impl)})});var qu=u(function e(){if(!(this instanceof e))return new e;this.length=0},"Stylesheet"),xn=qu.prototype;xn.instanceString=function(){return"stylesheet"};xn.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this};xn.css=function(e,t){var n=this.length-1;if(pe(e))this[n].properties.push({name:e,value:t});else if(Ce(e))for(var r=e,a=Object.keys(r),o=0;o<a.length;o++){var i=a[o],c=r[i];if(c!=null){var l=rt.properties[i]||rt.properties[ma(i)];if(l!=null){var s=l.name,d=c;this[n].properties.push({name:s,value:d})}}}return this};xn.style=xn.css;xn.generateStyle=function(e){var t=new rt(e);return this.appendToStyle(t)};xn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,a=n.properties;e.selector(r);for(var o=0;o<a.length;o++){var i=a[o];e.css(i.name,i.value)}}return e};var mv="3.30.2",Xn=u(function(e){if(e===void 0&&(e={}),Ce(e))return new br(e);if(pe(e))return xi.apply(xi,arguments)},"cytoscape");Xn.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(Xn),e.apply(null,t),this};Xn.warnings=function(e){return Vs(e)};Xn.version=mv;Xn.stylesheet=Xn.Stylesheet=qu;/*! Bundled license information:

cytoscape/dist/cytoscape.esm.mjs:
  (*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  *)
  (*!
  Event object based on jQuery events, MIT license
  
  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  *)
  (*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
  (*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
*/export{Xn as F};
