import{_ as t,c as o,d as a,o as n}from"./app-BLMzBMjl.js";const s={};function d(c,e){return n(),o("div",null,e[0]||(e[0]=[a(`<h1 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h1><p>For most uses you probably do not need any specific configuration on each package within your repository. But there are a few options to customize <code>beachball</code>&#39;s behavior.</p><p>There are two types of configurations:</p><ol><li>repository config</li><li>package config</li></ol><h2 id="repository-config" tabindex="-1"><a class="header-anchor" href="#repository-config"><span>Repository config</span></a></h2><p><code>beachball</code> uses <a href="https://github.com/davidtheclark/cosmiconfig" target="_blank" rel="noopener noreferrer"><code>cosmiconfig</code></a> to read its configuration, so you can specify configuration in several ways (in addition to CLI arguments).</p><ul><li><code>&quot;beachball&quot;</code> key inside <code>package.json</code></li><li><code>.beachballrc</code></li><li><code>.beachballrc.json</code></li><li><code>beachball.config.js</code> (CJS or ESM depending on your project setup; explicit <code>.cjs</code> or <code>.mjs</code> is also supported)</li></ul><p>It&#39;s most common to use a JavaScript file for the repo-level config, since it&#39;s the most flexible and allows comments. Usually this file is at the repo root.</p><p>The <code>beachball.config.js</code> example below uses JSDoc type annotations to enable intellisense in some editors (these are optional).</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// @ts-check</span></span>
<span class="line"><span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;beachball&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BeachallConfig<span class="token punctuation">}</span></span> */</span></span>
<span class="line"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">disallowedChangeTypes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;major&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">changehint</span><span class="token operator">:</span> <span class="token string">&#39;Run &quot;yarn change&quot; to generate a change file&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">groupChanges</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="package-config" tabindex="-1"><a class="header-anchor" href="#package-config"><span>Package config</span></a></h2><p>Package-level configuration is currently only supported under the <code>beachball</code> key in <code>package.json</code>.</p><p>For example, suppose the repo config above is at <code>beachball.config.js</code> at the repo root, and there are these other files:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">packages/</span>
<span class="line">  foo/</span>
<span class="line">    package.json</span>
<span class="line">  bar/</span>
<span class="line">    package.json</span>
<span class="line">beachball.config.js</span>
<span class="line">package.json</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To change the <code>disallowedChangeTypes</code> for package <code>foo</code>, you could add the following to <code>packages/foo/package.json</code>:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;beachball&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;disallowedChangeTypes&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="options" tabindex="-1"><a class="header-anchor" href="#options"><span>Options</span></a></h2><p>For the latest full list of supported options, see <code>RepoOptions</code> <a href="https://github.com/microsoft/beachball/blob/master/src/types/BeachballOptions.ts" target="_blank" rel="noopener noreferrer">in this file</a>.</p><p>&quot;Applies to&quot; indicates where the settings can be specified: repo-level config or package-level config.</p><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Applies to</th><th>Description</th></tr></thead><tbody><tr><td><code>access</code></td><td><code>&#39;public&#39;</code> or <code>&#39;restricted&#39;</code></td><td><code>&#39;restricted&#39;</code></td><td>repo</td><td>publish access level for scoped package names (e.g. <code>@foo/bar</code>)</td></tr><tr><td><code>branch</code></td><td><code>string</code></td><td><a href="#determining-the-target-branch-and-remote">see notes</a></td><td>repo</td><td>target branch; <a href="#determining-the-target-branch-and-remote">see notes</a></td></tr><tr><td><code>bumpDeps</code></td><td><code>boolean</code></td><td><code>true</code></td><td>repo</td><td>bump dependent packages during publish (if B is bumped, and A depends on B, also bump A)</td></tr><tr><td><code>changeFilePrompt</code></td><td><a href="https://github.com/microsoft/beachball/blob/master/src/types/ChangeFilePrompt.ts" target="_blank" rel="noopener noreferrer"><code>ChangeFilePromptOptions</code></a></td><td></td><td>repo</td><td>customize the prompt for change files (can be used to add custom fields)</td></tr><tr><td><code>changehint</code></td><td><code>string</code></td><td></td><td>repo</td><td>hint message for when change files are not detected but required</td></tr><tr><td><code>changeDir</code></td><td><code>string</code></td><td><code>change</code></td><td>repo</td><td>directory where change files are stored (relative to repo root)</td></tr><tr><td><code>changelog</code></td><td><a href="https://github.com/microsoft/beachball/blob/master/src/types/ChangelogOptions.ts" target="_blank" rel="noopener noreferrer"><code>ChangelogOptions</code></a></td><td></td><td>repo</td><td>changelog rendering and grouping options</td></tr><tr><td><code>defaultNpmTag</code></td><td><code>string</code></td><td><code>&#39;latest&#39;</code></td><td>repo, package</td><td>the default dist-tag used for NPM publish</td></tr><tr><td><code>disallowedChangeTypes</code></td><td><code>string[]</code></td><td></td><td>repo, package</td><td>what change types are disallowed</td></tr><tr><td><code>fetch</code></td><td><code>boolean</code></td><td><code>true</code></td><td>repo</td><td>fetch from remote before doing diff comparisons</td></tr><tr><td><code>generateChangelog</code></td><td><code>boolean | &#39;md&#39; | &#39;json&#39;</code></td><td><code>true</code></td><td>repo</td><td>whether to generate <code>CHANGELOG.md/json</code> (<code>&#39;md&#39;</code> or <code>&#39;json&#39;</code> to generate only that type)</td></tr><tr><td><code>gitTags</code></td><td><code>boolean</code></td><td><code>true</code></td><td>repo, package</td><td>whether to create git tags for published packages (eg: foo_v1.0.1)</td></tr><tr><td><code>groups</code></td><td><a href="../concepts/groups#version-groups"><code>VersionGroupOptions[]</code></a></td><td></td><td>repo</td><td>bump these packages together (<a href="../concepts/groups#version-groups">see details</a>)</td></tr><tr><td><code>groupChanges</code></td><td><code>boolean</code></td><td><code>false</code></td><td>repo</td><td>write multiple changes to a single changefile</td></tr><tr><td><code>hooks</code></td><td><a href="https://github.com/microsoft/beachball/blob/master/src/types/BeachballOptions.ts" target="_blank" rel="noopener noreferrer"><code>HooksOptions</code></a></td><td></td><td>repo</td><td>hooks for custom pre/post publish actions</td></tr><tr><td><code>ignorePatterns</code></td><td><code>string[]</code></td><td></td><td>repo</td><td>ignore changes in files matching these glob patterns (<a href="#glob-matching">see notes</a>)</td></tr><tr><td><code>package</code></td><td><code>string</code></td><td></td><td>repo</td><td>specifies which package the command relates to (overrides change detection based on <code>git diff</code>)</td></tr><tr><td><code>prereleasePrefix</code></td><td><code>string</code></td><td></td><td>repo</td><td>prerelease prefix for packages that are specified to receive a prerelease bump</td></tr><tr><td><code>publish</code></td><td><code>boolean</code></td><td><code>true</code></td><td>repo</td><td>whether to publish to npm registry</td></tr><tr><td><code>push</code></td><td><code>boolean</code></td><td><code>true</code></td><td>repo</td><td>whether to push to the remote git branch</td></tr><tr><td><code>registry</code></td><td><code>string</code></td><td></td><td>repo</td><td>target NPM registry to publish</td></tr><tr><td><code>retries</code></td><td><code>number</code></td><td><code>3</code></td><td>repo</td><td>number of retries for a package publish before failing</td></tr><tr><td><code>scope</code></td><td><code>string[]</code></td><td></td><td>repo</td><td>only consider package paths matching these patterns (<a href="#scoping">see details</a>)</td></tr><tr><td><code>shouldPublish</code></td><td><code>false | undefined</code></td><td></td><td>package</td><td>manually disable publishing of a package by beachball (does not work to force publishing)</td></tr><tr><td><code>tag</code></td><td><code>string</code></td><td><code>&#39;latest&#39;</code></td><td>repo, package</td><td>dist-tag for npm when published</td></tr><tr><td><code>transform</code></td><td><a href="https://github.com/microsoft/beachball/blob/master/src/types/BeachballOptions.ts" target="_blank" rel="noopener noreferrer"><code>TransformOptions</code></a></td><td></td><td>repo</td><td>transformations for change files</td></tr></tbody></table><h3 id="glob-matching" tabindex="-1"><a class="header-anchor" href="#glob-matching"><span>Glob matching</span></a></h3><p>Glob matching is implemented using <a href="https://www.npmjs.com/package/minimatch" target="_blank" rel="noopener noreferrer"><code>minimatch</code></a>, which supports most glob syntax.</p><p>All glob patterns are relative to the repo or monorepo root and must use <strong>forward slashes only</strong>.</p><p>Unless otherwise noted (such as for <code>scope</code>), using gitignore-style negated patterns to modify previous matches is not supported.</p><h3 id="scoping" tabindex="-1"><a class="header-anchor" href="#scoping"><span>Scoping</span></a></h3><p>The <code>scope</code> option allows limiting which packages are considered. You can set it in the config file if it should always apply, or on the command line for a specific operation.</p><p>This option takes a list of patterns which are matched against package paths. Patterns are relative to the monorepo root and must use forward slashes. Negations are supported, similar to how gitignore works.</p><p>Example: with this config, <code>beachball</code> will only consider packages under <code>packages/foo</code> (excluding <code>packages/foo/bar</code>).</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;scope&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;packages/foo/*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!packages/foo/bar&quot;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>On the command line, this could be specified as <code>--scope &#39;packages/foo/*&#39; --scope &#39;!packages/foo/bar&#39;</code> (don&#39;t forget the quotes!).</p><blockquote><p>Note: if you have multiple sets of packages in the repo with different scopes, <code>groupChanges</code> is not supported.</p></blockquote><h3 id="determining-the-target-branch-and-remote" tabindex="-1"><a class="header-anchor" href="#determining-the-target-branch-and-remote"><span>Determining the target branch and remote</span></a></h3><p>The <code>branch</code> option is the official target branch to compare against when determining changes. Usually it should be a name only, though you can also include a remote. The default is the system default branch name (<code>main</code> or <code>master</code>) and the official remote.</p><p>To let <code>beachball</code> reliably determine the official remote, it&#39;s recommended to specify <code>repository</code> in the repo root <code>package.json</code>. This allows matching via URL regardless of what the user decided to call the remote.</p><p>If <code>repository</code> isn&#39;t specified and <code>branch</code> doesn&#39;t include a remote, the fallback is <code>upstream</code> if defined, <code>origin</code> if defined, or the first defined remote.</p>`,35)]))}const i=t(s,[["render",d],["__file","configuration.html.vue"]]),p=JSON.parse('{"path":"/overview/configuration.html","title":"Configuration","lang":"en-US","frontmatter":{"tags":["overview"],"category":"doc"},"headers":[{"level":2,"title":"Repository config","slug":"repository-config","link":"#repository-config","children":[]},{"level":2,"title":"Package config","slug":"package-config","link":"#package-config","children":[]},{"level":2,"title":"Options","slug":"options","link":"#options","children":[{"level":3,"title":"Glob matching","slug":"glob-matching","link":"#glob-matching","children":[]},{"level":3,"title":"Scoping","slug":"scoping","link":"#scoping","children":[]},{"level":3,"title":"Determining the target branch and remote","slug":"determining-the-target-branch-and-remote","link":"#determining-the-target-branch-and-remote","children":[]}]}],"git":{"updatedTime":1733808221000,"contributors":[{"name":"Elizabeth Craig","email":"elcraig@microsoft.com","commits":1,"url":"https://github.com/Elizabeth Craig"}]},"filePathRelative":"overview/configuration.md"}');export{i as comp,p as data};
