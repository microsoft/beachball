import{m as u}from"./mermaid.esm.min-CYb6L16v.js";function We(e){"@babel/helpers - typeof";return We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(e)}u(We,"_typeof");function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}u(Ht,"_classCallCheck");function hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u(hi,"_defineProperties");function Ut(e,t,n){return t&&hi(e.prototype,t),n&&hi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}u(Ut,"_createClass");function Vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}u(Vi,"_defineProperty$1");function Ye(e,t){return js(e)||Xs(e,t)||Ia(e,t)||qs()}u(Ye,"_slicedToArray");function ji(e){return Vs(e)||Ys(e)||Ia(e)||Ws()}u(ji,"_toConsumableArray");function Vs(e){if(Array.isArray(e))return xa(e)}u(Vs,"_arrayWithoutHoles");function js(e){if(Array.isArray(e))return e}u(js,"_arrayWithHoles");function Ys(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}u(Ys,"_iterableToArray");function Xs(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,o,c;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(l){i=!0,c=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw c}}return r}}u(Xs,"_iterableToArrayLimit");function Ia(e,t){if(e){if(typeof e=="string")return xa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xa(e,t)}}u(Ia,"_unsupportedIterableToArray");function xa(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}u(xa,"_arrayLikeToArray");function Ws(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}u(Ws,"_nonIterableSpread");function qs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}u(qs,"_nonIterableRest");function vt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ia(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=u(function(){},"F");return{s:a,n:u(function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},"n"),e:u(function(l){throw l},"e"),f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,c;return{s:u(function(){n=n.call(e)},"s"),n:u(function(){var l=n.next();return i=l.done,l},"n"),e:u(function(l){o=!0,c=l},"e"),f:u(function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw c}},"f")}}u(vt,"_createForOfIteratorHelper");var Ue=typeof window>"u"?null:window,Mo=Ue?Ue.navigator:null;Ue&&Ue.document;var Qc=We(""),Hs=We({}),Jc=We(function(){}),ed=typeof HTMLElement>"u"?"undefined":We(HTMLElement),Mr=u(function(e){return e&&e.instanceString&&Fe(e.instanceString)?e.instanceString():null},"instanceStr"),ce=u(function(e){return e!=null&&We(e)==Qc},"string"),Fe=u(function(e){return e!=null&&We(e)===Jc},"fn"),Me=u(function(e){return!wt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},"array"),ke=u(function(e){return e!=null&&We(e)===Hs&&!Me(e)&&e.constructor===Object},"plainObject"),td=u(function(e){return e!=null&&We(e)===Hs},"object"),te=u(function(e){return e!=null&&We(e)===We(1)&&!isNaN(e)},"number"),nd=u(function(e){return te(e)&&Math.floor(e)===e},"integer"),wa=u(function(e){if(ed!=="undefined")return e!=null&&e instanceof HTMLElement},"htmlElement"),wt=u(function(e){return Rr(e)||Us(e)},"elementOrCollection"),Rr=u(function(e){return Mr(e)==="collection"&&e._private.single},"element"),Us=u(function(e){return Mr(e)==="collection"&&!e._private.single},"collection"),Yi=u(function(e){return Mr(e)==="core"},"core"),Ks=u(function(e){return Mr(e)==="stylesheet"},"stylesheet"),rd=u(function(e){return Mr(e)==="event"},"event"),rn=u(function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},"emptyString"),ad=u(function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},"domElement"),id=u(function(e){return ke(e)&&te(e.x1)&&te(e.x2)&&te(e.y1)&&te(e.y2)},"boundingBox"),od=u(function(e){return td(e)&&Fe(e.then)},"promise"),sd=u(function(){return Mo&&Mo.userAgent.match(/msie|trident|edge/i)},"ms"),wr=u(function(e,t){t||(t=u(function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var r=[],a=0;a<arguments.length;a++)r.push(arguments[a]);return r.join("$")},"keyFn"));var n=u(function r(){var a=this,i=arguments,o,c=t.apply(a,i),l=r.cache;return(o=l[c])||(o=l[c]=e.apply(a,i)),o},"memoizedFn");return n.cache={},n},"memoize"),Xi=wr(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),Ma=wr(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),Gs=wr(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Ro=u(function(e){return rn(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},"capitalize"),Ke="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ld="rgb[a]?\\(("+Ke+"[%]?)\\s*,\\s*("+Ke+"[%]?)\\s*,\\s*("+Ke+"[%]?)(?:\\s*,\\s*("+Ke+"))?\\)",ud="rgb[a]?\\((?:"+Ke+"[%]?)\\s*,\\s*(?:"+Ke+"[%]?)\\s*,\\s*(?:"+Ke+"[%]?)(?:\\s*,\\s*(?:"+Ke+"))?\\)",cd="hsl[a]?\\(("+Ke+")\\s*,\\s*("+Ke+"[%])\\s*,\\s*("+Ke+"[%])(?:\\s*,\\s*("+Ke+"))?\\)",dd="hsl[a]?\\((?:"+Ke+")\\s*,\\s*(?:"+Ke+"[%])\\s*,\\s*(?:"+Ke+"[%])(?:\\s*,\\s*(?:"+Ke+"))?\\)",hd="\\#[0-9a-fA-F]{3}",fd="\\#[0-9a-fA-F]{6}",Zs=u(function(e,t){return e<t?-1:e>t?1:0},"ascending"),pd=u(function(e,t){return-1*Zs(e,t)},"descending"),pe=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(r!=null)for(var a=Object.keys(r),i=0;i<a.length;i++){var o=a[i];e[o]=r[o]}}return e},gd=u(function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,r,a,i=16;return t?(n=parseInt(e[1]+e[1],i),r=parseInt(e[2]+e[2],i),a=parseInt(e[3]+e[3],i)):(n=parseInt(e[1]+e[2],i),r=parseInt(e[3]+e[4],i),a=parseInt(e[5]+e[6],i)),[n,r,a]}},"hex2tuple"),vd=u(function(e){var t,n,r,a,i,o,c,l;function s(p,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?p+(g-p)*6*y:y<1/2?g:y<2/3?p+(g-p)*(2/3-y)*6:p}u(s,"hue2rgb");var d=new RegExp("^"+cd+"$").exec(e);if(d){if(n=parseInt(d[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,r=parseFloat(d[2]),r<0||r>100||(r=r/100,a=parseFloat(d[3]),a<0||a>100)||(a=a/100,i=d[4],i!==void 0&&(i=parseFloat(i),i<0||i>1)))return;if(r===0)o=c=l=Math.round(a*255);else{var h=a<.5?a*(1+r):a+r-a*r,f=2*a-h;o=Math.round(255*s(f,h,n+1/3)),c=Math.round(255*s(f,h,n)),l=Math.round(255*s(f,h,n-1/3))}t=[o,c,l,i]}return t},"hsl2tuple"),yd=u(function(e){var t,n=new RegExp("^"+ld+"$").exec(e);if(n){t=[];for(var r=[],a=1;a<=3;a++){var i=n[a];if(i[i.length-1]==="%"&&(r[a]=!0),i=parseFloat(i),r[a]&&(i=i/100*255),i<0||i>255)return;t.push(Math.floor(i))}var o=r[1]||r[2]||r[3],c=r[1]&&r[2]&&r[3];if(o&&!c)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},"rgb2tuple"),md=u(function(e){return bd[e.toLowerCase()]},"colorname2tuple"),$s=u(function(e){return(Me(e)?e:null)||md(e)||gd(e)||yd(e)||vd(e)},"color2tuple"),bd={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Qs=u(function(e){for(var t=e.map,n=e.keys,r=n.length,a=0;a<r;a++){var i=n[a];if(ke(i))throw Error("Tried to set map with object key");a<n.length-1?(t[i]==null&&(t[i]={}),t=t[i]):t[i]=e.value}},"setMap"),Js=u(function(e){for(var t=e.map,n=e.keys,r=n.length,a=0;a<r;a++){var i=n[a];if(ke(i))throw Error("Tried to get map with object key");if(t=t[i],t==null)return t}return t},"getMap");function el(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}u(el,"isObject");var wn=el,cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tl(e,t){return t={exports:{}},e(t,t.exports),t.exports}u(tl,"createCommonjsModule");var xd=typeof cr=="object"&&cr&&cr.Object===Object&&cr,wd=xd,Ed=typeof self=="object"&&self&&self.Object===Object&&self,Cd=wd||Ed||Function("return this")(),Ra=Cd,Td=u(function(){return Ra.Date.now()},"now"),ei=Td,Sd=/\s/;function nl(e){for(var t=e.length;t--&&Sd.test(e.charAt(t)););return t}u(nl,"trimmedEndIndex");var Pd=nl,Dd=/^\s+/;function rl(e){return e&&e.slice(0,Pd(e)+1).replace(Dd,"")}u(rl,"baseTrim");var kd=rl,Ad=Ra.Symbol,Hn=Ad,al=Object.prototype,Bd=al.hasOwnProperty,_d=al.toString,ir=Hn?Hn.toStringTag:void 0;function il(e){var t=Bd.call(e,ir),n=e[ir];try{e[ir]=void 0;var r=!0}catch{}var a=_d.call(e);return r&&(t?e[ir]=n:delete e[ir]),a}u(il,"getRawTag");var Id=il,Md=Object.prototype,Rd=Md.toString;function ol(e){return Rd.call(e)}u(ol,"objectToString");var Ld=ol,Nd="[object Null]",Od="[object Undefined]",Lo=Hn?Hn.toStringTag:void 0;function sl(e){return e==null?e===void 0?Od:Nd:Lo&&Lo in Object(e)?Id(e):Ld(e)}u(sl,"baseGetTag");var ll=sl;function ul(e){return e!=null&&typeof e=="object"}u(ul,"isObjectLike");var zd=ul,Fd="[object Symbol]";function cl(e){return typeof e=="symbol"||zd(e)&&ll(e)==Fd}u(cl,"isSymbol");var Lr=cl,No=NaN,Vd=/^[-+]0x[0-9a-f]+$/i,jd=/^0b[01]+$/i,Yd=/^0o[0-7]+$/i,Xd=parseInt;function dl(e){if(typeof e=="number")return e;if(Lr(e))return No;if(wn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=wn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=kd(e);var n=jd.test(e);return n||Yd.test(e)?Xd(e.slice(2),n?2:8):Vd.test(e)?No:+e}u(dl,"toNumber");var Oo=dl,Wd="Expected a function",qd=Math.max,Hd=Math.min;function hl(e,t,n){var r,a,i,o,c,l,s=0,d=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(Wd);t=Oo(t)||0,wn(n)&&(d=!!n.leading,h="maxWait"in n,i=h?qd(Oo(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f);function p(T){var E=r,S=a;return r=a=void 0,s=T,o=e.apply(S,E),o}u(p,"invokeFunc");function g(T){return s=T,c=setTimeout(v,t),d?p(T):o}u(g,"leadingEdge");function y(T){var E=T-l,S=T-s,A=t-E;return h?Hd(A,i-S):A}u(y,"remainingWait");function b(T){var E=T-l,S=T-s;return l===void 0||E>=t||E<0||h&&S>=i}u(b,"shouldInvoke");function v(){var T=ei();if(b(T))return m(T);c=setTimeout(v,y(T))}u(v,"timerExpired");function m(T){return c=void 0,f&&r?p(T):(r=a=void 0,o)}u(m,"trailingEdge");function x(){c!==void 0&&clearTimeout(c),s=0,r=l=a=c=void 0}u(x,"cancel");function w(){return c===void 0?o:m(ei())}u(w,"flush");function P(){var T=ei(),E=b(T);if(r=arguments,a=this,l=T,E){if(c===void 0)return g(l);if(h)return clearTimeout(c),c=setTimeout(v,t),p(l)}return c===void 0&&(c=setTimeout(v,t)),o}return u(P,"debounced"),P.cancel=x,P.flush=w,P}u(hl,"debounce");var Nr=hl,ti=Ue?Ue.performance:null,fl=ti&&ti.now?function(){return ti.now()}:function(){return Date.now()},Ud=function(){if(Ue){if(Ue.requestAnimationFrame)return function(e){Ue.requestAnimationFrame(e)};if(Ue.mozRequestAnimationFrame)return function(e){Ue.mozRequestAnimationFrame(e)};if(Ue.webkitRequestAnimationFrame)return function(e){Ue.webkitRequestAnimationFrame(e)};if(Ue.msRequestAnimationFrame)return function(e){Ue.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(fl())},1e3/60)}}(),Ea=u(function(e){return Ud(e)},"requestAnimationFrame"),Xt=fl,zn=9261,pl=65599,dr=5381,gl=u(function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn,n=t,r;r=e.next(),!r.done;)n=n*pl+r.value|0;return n},"hashIterableInts"),Er=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn;return t*pl+e|0},"hashInt"),Cr=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dr;return(t<<5)+t+e|0},"hashIntAlt"),Kd=u(function(e,t){return e*2097152+t},"combineHashes"),$t=u(function(e){return e[0]*2097152+e[1]},"combineHashesArray"),Zr=u(function(e,t){return[Er(e[0],t[0]),Cr(e[1],t[1])]},"hashArrays"),Gd=u(function(e,t){var n={value:0,done:!1},r=0,a=e.length,i={next:u(function(){return r<a?n.value=e[r++]:n.done=!0,n},"next")};return gl(i,t)},"hashIntsArray"),an=u(function(e,t){var n={value:0,done:!1},r=0,a=e.length,i={next:u(function(){return r<a?n.value=e.charCodeAt(r++):n.done=!0,n},"next")};return gl(i,t)},"hashString"),vl=u(function(){return Zd(arguments)},"hashStrings"),Zd=u(function(e){for(var t,n=0;n<e.length;n++){var r=e[n];n===0?t=an(r):t=an(r,t)}return t},"hashStringsArray"),zo=!0,$d=console.warn!=null,Qd=console.trace!=null,Wi=Number.MAX_SAFE_INTEGER||9007199254740991,yl=u(function(){return!0},"trueify"),Ca=u(function(){return!1},"falsify"),Fo=u(function(){return 0},"zeroify"),qi=u(function(){},"noop"),ze=u(function(e){throw new Error(e)},"error"),ml=u(function(e){if(e!==void 0)zo=!!e;else return zo},"warnings"),_e=u(function(e){ml()&&($d?console.warn(e):(console.log(e),Qd&&console.trace()))},"warn"),Jd=u(function(e){return pe({},e)},"clone"),Rt=u(function(e){return e==null?e:Me(e)?e.slice():ke(e)?Jd(e):e},"copy"),eh=u(function(e){return e.slice()},"copyArray"),bl=u(function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},"uuid"),th={},xl=u(function(){return th},"staticEmptyObject"),Je=u(function(e){var t=Object.keys(e);return function(n){for(var r={},a=0;a<t.length;a++){var i=t[a],o=n==null?void 0:n[i];r[i]=o===void 0?e[i]:o}return r}},"defaults"),on=u(function(e,t,n){for(var r=e.length-1;r>=0&&!(e[r]===t&&(e.splice(r,1),n));r--);},"removeFromArray"),Hi=u(function(e){e.splice(0,e.length)},"clearArray"),nh=u(function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},"push"),At=u(function(e,t,n){return n&&(t=Gs(n,t)),e[t]},"getPrefixedProperty"),Jt=u(function(e,t,n,r){n&&(t=Gs(n,t)),e[t]=r},"setPrefixedProperty"),rh=function(){function e(){Ht(this,e),this._obj={}}return u(e,"ObjectMap"),Ut(e,[{key:"set",value:u(function(t,n){return this._obj[t]=n,this},"set")},{key:"delete",value:u(function(t){return this._obj[t]=void 0,this},"_delete")},{key:"clear",value:u(function(){this._obj={}},"clear")},{key:"has",value:u(function(t){return this._obj[t]!==void 0},"has")},{key:"get",value:u(function(t){return this._obj[t]},"get")}]),e}(),Lt=typeof Map<"u"?Map:rh,ah="undefined",ih=function(){function e(t){if(Ht(this,e),this._obj=Object.create(null),this.size=0,t!=null){var n;t.instanceString!=null&&t.instanceString()===this.instanceString()?n=t.toArray():n=t;for(var r=0;r<n.length;r++)this.add(n[r])}}return u(e,"ObjectSet"),Ut(e,[{key:"instanceString",value:u(function(){return"set"},"instanceString")},{key:"add",value:u(function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)},"add")},{key:"delete",value:u(function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)},"_delete")},{key:"clear",value:u(function(){this._obj=Object.create(null)},"clear")},{key:"has",value:u(function(t){return this._obj[t]===1},"has")},{key:"toArray",value:u(function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})},"toArray")},{key:"forEach",value:u(function(t,n){return this.toArray().forEach(t,n)},"forEach")}]),e}(),$n=(typeof Set>"u"?"undefined":We(Set))!==ah?Set:ih,La=u(function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Yi(e)){ze("An element must have a core reference and parameters set");return}var r=t.group;if(r==null&&(t.data&&t.data.source!=null&&t.data.target!=null?r="edges":r="nodes"),r!=="nodes"&&r!=="edges"){ze("An element must be of type `nodes` or `edges`; you specified `"+r+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?r==="edges":!!t.pannable,active:!1,classes:new $n,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var i=t.renderedPosition,o=e.pan(),c=e.zoom();a.position={x:(i.x-o.x)/c,y:(i.y-o.y)/c}}var l=[];Me(t.classes)?l=t.classes:ce(t.classes)&&(l=t.classes.split(/\s+/));for(var s=0,d=l.length;s<d;s++){var h=l[s];!h||h===""||a.classes.add(h)}this.createEmitter();var f=t.style||t.css;f&&(_e("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(f)),(n===void 0||n)&&this.restore()},"Element"),Vo=u(function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},u(function(t,n,r){var a;ke(t)&&!wt(t)&&(a=t,t=a.roots||a.root,n=a.visit,r=a.directed),r=arguments.length===2&&!Fe(n)?n:r,n=Fe(n)?n:function(){};for(var i=this._private.cy,o=t=ce(t)?this.filter(t):t,c=[],l=[],s={},d={},h={},f=0,p,g=this.byGroup(),y=g.nodes,b=g.edges,v=0;v<o.length;v++){var m=o[v],x=m.id();m.isNode()&&(c.unshift(m),e.bfs&&(h[x]=!0,l.push(m)),d[x]=0)}for(var w=u(function(){var B=e.bfs?c.shift():c.pop(),k=B.id();if(e.dfs){if(h[k])return"continue";h[k]=!0,l.push(B)}var D=d[k],I=s[k],_=I!=null?I.source():null,R=I!=null?I.target():null,z=I==null?void 0:B.same(_)?R[0]:_[0],N=void 0;if(N=n(B,I,z,f++,D),N===!0)return p=B,"break";if(N===!1)return"break";for(var M=B.connectedEdges().filter(function(K){return(!r||K.source().same(B))&&b.has(K)}),L=0;L<M.length;L++){var q=M[L],Y=q.connectedNodes().filter(function(K){return!K.same(B)&&y.has(K)}),W=Y.id();Y.length!==0&&!h[W]&&(Y=Y[0],c.push(Y),e.bfs&&(h[W]=!0,l.push(Y)),s[W]=q,d[W]=d[k]+1)}},"_loop");c.length!==0;){var P=w();if(P!=="continue"&&P==="break")break}for(var T=i.collection(),E=0;E<l.length;E++){var S=l[E],A=s[S.id()];A!=null&&T.push(A),T.push(S)}return{path:i.collection(T),found:i.collection(p)}},"searchFn")},"defineSearch"),Tr={breadthFirstSearch:Vo({bfs:!0}),depthFirstSearch:Vo({dfs:!0})};Tr.bfs=Tr.breadthFirstSearch;Tr.dfs=Tr.depthFirstSearch;var oh=tl(function(e,t){(function(){var n,r,a,i,o,c,l,s,d,h,f,p,g,y,b;a=Math.floor,h=Math.min,r=u(function(v,m){return v<m?-1:v>m?1:0},"defaultCmp"),d=u(function(v,m,x,w,P){var T;if(x==null&&(x=0),P==null&&(P=r),x<0)throw new Error("lo must be non-negative");for(w==null&&(w=v.length);x<w;)T=a((x+w)/2),P(m,v[T])<0?w=T:x=T+1;return[].splice.apply(v,[x,x-x].concat(m)),m},"insort"),c=u(function(v,m,x){return x==null&&(x=r),v.push(m),y(v,0,v.length-1,x)},"heappush"),o=u(function(v,m){var x,w;return m==null&&(m=r),x=v.pop(),v.length?(w=v[0],v[0]=x,b(v,0,m)):w=x,w},"heappop"),s=u(function(v,m,x){var w;return x==null&&(x=r),w=v[0],v[0]=m,b(v,0,x),w},"heapreplace"),l=u(function(v,m,x){var w;return x==null&&(x=r),v.length&&x(v[0],m)<0&&(w=[v[0],m],m=w[0],v[0]=w[1],b(v,0,x)),m},"heappushpop"),i=u(function(v,m){var x,w,P,T,E,S;for(m==null&&(m=r),T=(function(){S=[];for(var A=0,B=a(v.length/2);0<=B?A<B:A>B;0<=B?A++:A--)S.push(A);return S}).apply(this).reverse(),E=[],w=0,P=T.length;w<P;w++)x=T[w],E.push(b(v,x,m));return E},"heapify"),g=u(function(v,m,x){var w;if(x==null&&(x=r),w=v.indexOf(m),w!==-1)return y(v,0,w,x),b(v,w,x)},"updateItem"),f=u(function(v,m,x){var w,P,T,E,S;if(x==null&&(x=r),P=v.slice(0,m),!P.length)return P;for(i(P,x),S=v.slice(m),T=0,E=S.length;T<E;T++)w=S[T],l(P,w,x);return P.sort(x).reverse()},"nlargest"),p=u(function(v,m,x){var w,P,T,E,S,A,B,k,D;if(x==null&&(x=r),m*10<=v.length){if(T=v.slice(0,m).sort(x),!T.length)return T;for(P=T[T.length-1],B=v.slice(m),E=0,A=B.length;E<A;E++)w=B[E],x(w,P)<0&&(d(T,w,0,null,x),T.pop(),P=T[T.length-1]);return T}for(i(v,x),D=[],S=0,k=h(m,v.length);0<=k?S<k:S>k;0<=k?++S:--S)D.push(o(v,x));return D},"nsmallest"),y=u(function(v,m,x,w){var P,T,E;for(w==null&&(w=r),P=v[x];x>m;){if(E=x-1>>1,T=v[E],w(P,T)<0){v[x]=T,x=E;continue}break}return v[x]=P},"_siftdown"),b=u(function(v,m,x){var w,P,T,E,S;for(x==null&&(x=r),P=v.length,S=m,T=v[m],w=2*m+1;w<P;)E=w+1,E<P&&!(x(v[w],v[E])<0)&&(w=E),v[m]=v[w],m=w,w=2*m+1;return v[m]=T,y(v,S,m,x)},"_siftup"),n=function(){v.push=c,v.pop=o,v.replace=s,v.pushpop=l,v.heapify=i,v.updateItem=g,v.nlargest=f,v.nsmallest=p;function v(m){this.cmp=m??r,this.nodes=[]}return u(v,"Heap"),v.prototype.push=function(m){return c(this.nodes,m,this.cmp)},v.prototype.pop=function(){return o(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},v.prototype.replace=function(m){return s(this.nodes,m,this.cmp)},v.prototype.pushpop=function(m){return l(this.nodes,m,this.cmp)},v.prototype.heapify=function(){return i(this.nodes,this.cmp)},v.prototype.updateItem=function(m){return g(this.nodes,m,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var m;return m=new v,m.nodes=this.nodes.slice(0),m},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,m){return e.exports=m()}(this,function(){return n})}).call(cr)}),Or=oh,sh=Je({root:null,weight:u(function(e){return 1},"weight"),directed:!1}),lh={dijkstra:u(function(e){if(!ke(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=sh(e),r=n.root,a=n.weight,i=n.directed,o=this,c=a,l=ce(r)?this.filter(r)[0]:r[0],s={},d={},h={},f=this.byGroup(),p=f.nodes,g=f.edges;g.unmergeBy(function(_){return _.isLoop()});for(var y=u(function(_){return s[_.id()]},"getDist"),b=u(function(_,R){s[_.id()]=R,v.updateItem(_)},"setDist"),v=new Or(function(_,R){return y(_)-y(R)}),m=0;m<p.length;m++){var x=p[m];s[x.id()]=x.same(l)?0:1/0,v.push(x)}for(var w=u(function(_,R){for(var z=(i?_.edgesTo(R):_.edgesWith(R)).intersect(g),N=1/0,M,L=0;L<z.length;L++){var q=z[L],Y=c(q);(Y<N||!M)&&(N=Y,M=q)}return{edge:M,dist:N}},"distBetween");v.size()>0;){var P=v.pop(),T=y(P),E=P.id();if(h[E]=T,T!==1/0)for(var S=P.neighborhood().intersect(p),A=0;A<S.length;A++){var B=S[A],k=B.id(),D=w(P,B),I=T+D.dist;I<y(B)&&(b(B,I),d[k]={node:P,edge:D.edge})}}return{distanceTo:u(function(_){var R=ce(_)?p.filter(_)[0]:_[0];return h[R.id()]},"distanceTo"),pathTo:u(function(_){var R=ce(_)?p.filter(_)[0]:_[0],z=[],N=R,M=N.id();if(R.length>0)for(z.unshift(R);d[M];){var L=d[M];z.unshift(L.edge),z.unshift(L.node),N=L.node,M=N.id()}return o.spawn(z)},"pathTo")}},"dijkstra")},uh={kruskal:u(function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,a=n.length,i=new Array(a),o=n,c=u(function(m){for(var x=0;x<i.length;x++){var w=i[x];if(w.has(m))return x}},"findSetIndex"),l=0;l<a;l++)i[l]=this.spawn(n[l]);for(var s=r.sort(function(m,x){return e(m)-e(x)}),d=0;d<s.length;d++){var h=s[d],f=h.source()[0],p=h.target()[0],g=c(f),y=c(p),b=i[g],v=i[y];g!==y&&(o.merge(h),b.merge(v),i.splice(y,1))}return o},"kruskal")},ch=Je({root:null,goal:null,weight:u(function(e){return 1},"weight"),heuristic:u(function(e){return 0},"heuristic"),directed:!1}),dh={aStar:u(function(e){var t=this.cy(),n=ch(e),r=n.root,a=n.goal,i=n.heuristic,o=n.directed,c=n.weight;r=t.collection(r)[0],a=t.collection(a)[0];var l=r.id(),s=a.id(),d={},h={},f={},p=new Or(function(L,q){return h[L.id()]-h[q.id()]}),g=new $n,y={},b={},v=u(function(L,q){p.push(L),g.add(q)},"addToOpenSet"),m,x,w=u(function(){m=p.pop(),x=m.id(),g.delete(x)},"popFromOpenSet"),P=u(function(L){return g.has(L)},"isInOpenSet");v(r,l),d[l]=0,h[l]=i(r);for(var T=0;p.size()>0;){if(w(),T++,x===s){for(var E=[],S=a,A=s,B=b[A];E.unshift(S),B!=null&&E.unshift(B),S=y[A],S!=null;)A=S.id(),B=b[A];return{found:!0,distance:d[x],path:this.spawn(E),steps:T}}f[x]=!0;for(var k=m._private.edges,D=0;D<k.length;D++){var I=k[D];if(this.hasElementWithId(I.id())&&!(o&&I.data("source")!==x)){var _=I.source(),R=I.target(),z=_.id()!==x?_:R,N=z.id();if(this.hasElementWithId(N)&&!f[N]){var M=d[x]+c(I);if(!P(N)){d[N]=M,h[N]=M+i(z),v(z,N),y[N]=m,b[N]=I;continue}M<d[N]&&(d[N]=M,h[N]=M+i(z),y[N]=m,b[N]=I)}}}}return{found:!1,distance:void 0,path:void 0,steps:T}},"aStar")},hh=Je({weight:u(function(e){return 1},"weight"),directed:!1}),fh={floydWarshall:u(function(e){for(var t=this.cy(),n=hh(e),r=n.weight,a=n.directed,i=r,o=this.byGroup(),c=o.nodes,l=o.edges,s=c.length,d=s*s,h=u(function(Y){return c.indexOf(Y)},"indexOf"),f=u(function(Y){return c[Y]},"atIndex"),p=new Array(d),g=0;g<d;g++){var y=g%s,b=(g-y)/s;b===y?p[g]=0:p[g]=1/0}for(var v=new Array(d),m=new Array(d),x=0;x<l.length;x++){var w=l[x],P=w.source()[0],T=w.target()[0];if(P!==T){var E=h(P),S=h(T),A=E*s+S,B=i(w);if(p[A]>B&&(p[A]=B,v[A]=S,m[A]=w),!a){var k=S*s+E;!a&&p[k]>B&&(p[k]=B,v[k]=E,m[k]=w)}}}for(var D=0;D<s;D++)for(var I=0;I<s;I++)for(var _=I*s+D,R=0;R<s;R++){var z=I*s+R,N=D*s+R;p[_]+p[N]<p[z]&&(p[z]=p[_]+p[N],v[z]=v[_])}var M=u(function(Y){return(ce(Y)?t.filter(Y):Y)[0]},"getArgEle"),L=u(function(Y){return h(M(Y))},"indexOfArgEle"),q={distance:u(function(Y,W){var K=L(Y),J=L(W);return p[K*s+J]},"distance"),path:u(function(Y,W){var K=L(Y),J=L(W),ee=f(K);if(K===J)return ee.collection();if(v[K*s+J]==null)return t.collection();var Z=t.collection(),Q=K,U;for(Z.merge(ee);K!==J;)Q=K,K=v[K*s+J],U=m[Q*s+K],Z.merge(U),Z.merge(f(K));return Z},"path")};return q},"floydWarshall")},ph=Je({weight:u(function(e){return 1},"weight"),directed:!1,root:null}),gh={bellmanFord:u(function(e){var t=this,n=ph(e),r=n.weight,a=n.directed,i=n.root,o=r,c=this,l=this.cy(),s=this.byGroup(),d=s.edges,h=s.nodes,f=h.length,p=new Lt,g=!1,y=[];i=l.collection(i)[0],d.unmergeBy(function(we){return we.isLoop()});for(var b=d.length,v=u(function(we){var Re=p.get(we.id());return Re||(Re={},p.set(we.id(),Re)),Re},"getInfo"),m=u(function(we){return(ce(we)?l.$(we):we)[0]},"getNodeFromTo"),x=u(function(we){return v(m(we)).dist},"distanceTo"),w=u(function(we){for(var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,re=m(we),de=[],ue=re;;){if(ue==null)return t.spawn();var xe=v(ue),ge=xe.edge,Te=xe.pred;if(de.unshift(ue[0]),ue.same(Re)&&de.length>0)break;ge!=null&&de.unshift(ge),ue=Te}return c.spawn(de)},"pathTo"),P=0;P<f;P++){var T=h[P],E=v(T);T.same(i)?E.dist=0:E.dist=1/0,E.pred=null,E.edge=null}for(var S=!1,A=u(function(we,Re,re,de,ue,xe){var ge=de.dist+xe;ge<ue.dist&&!re.same(de.edge)&&(ue.dist=ge,ue.pred=we,ue.edge=re,S=!0)},"checkForEdgeReplacement"),B=1;B<f;B++){S=!1;for(var k=0;k<b;k++){var D=d[k],I=D.source(),_=D.target(),R=o(D),z=v(I),N=v(_);A(I,_,D,z,N,R),a||A(_,I,D,N,z,R)}if(!S)break}if(S)for(var M=[],L=0;L<b;L++){var q=d[L],Y=q.source(),W=q.target(),K=o(q),J=v(Y).dist,ee=v(W).dist;if(J+K<ee||!a&&ee+K<J)if(g||(_e("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var Z=[];J+K<ee&&Z.push(Y),!a&&ee+K<J&&Z.push(W);for(var Q=Z.length,U=0;U<Q;U++){var O=Z[U],X=[O];X.push(v(O).edge);for(var $=v(O).pred;X.indexOf($)===-1;)X.push($),X.push(v($).edge),$=v($).pred;X=X.slice(X.indexOf($));for(var ie=X[0].id(),se=0,ve=2;ve<X.length;ve+=2)X[ve].id()<ie&&(ie=X[ve].id(),se=ve);X=X.slice(se).concat(X.slice(0,se)),X.push(X[0]);var Pe=X.map(function(we){return we.id()}).join(",");M.indexOf(Pe)===-1&&(y.push(c.spawn(X)),M.push(Pe))}}else break}return{distanceTo:x,pathTo:w,hasNegativeWeightCycle:g,negativeWeightCycles:y}},"bellmanFord")},vh=Math.sqrt(2),yh=u(function(e,t,n){n.length===0&&ze("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],a=r[1],i=r[2],o=t[a],c=t[i],l=n,s=l.length-1;s>=0;s--){var d=l[s],h=d[1],f=d[2];(t[h]===o&&t[f]===c||t[h]===c&&t[f]===o)&&l.splice(s,1)}for(var p=0;p<l.length;p++){var g=l[p];g[1]===c?(l[p]=g.slice(),l[p][1]=o):g[2]===c&&(l[p]=g.slice(),l[p][2]=o)}for(var y=0;y<t.length;y++)t[y]===c&&(t[y]=o);return l},"collapse"),ni=u(function(e,t,n,r){for(;n>r;){var a=Math.floor(Math.random()*t.length);t=yh(a,e,t),n--}return t},"contractUntil"),mh={kargerStein:u(function(){var e=this,t=this.byGroup(),n=t.nodes,r=t.edges;r.unmergeBy(function(N){return N.isLoop()});var a=n.length,i=r.length,o=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),c=Math.floor(a/vh);if(a<2){ze("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],s=0;s<i;s++){var d=r[s];l.push([s,n.indexOf(d.source()),n.indexOf(d.target())])}for(var h=1/0,f=[],p=new Array(a),g=new Array(a),y=new Array(a),b=u(function(N,M){for(var L=0;L<a;L++)M[L]=N[L]},"copyNodesMap"),v=0;v<=o;v++){for(var m=0;m<a;m++)g[m]=m;var x=ni(g,l.slice(),a,c),w=x.slice();b(g,y);var P=ni(g,x,c,2),T=ni(y,w,c,2);P.length<=T.length&&P.length<h?(h=P.length,f=P,b(g,p)):T.length<=P.length&&T.length<h&&(h=T.length,f=T,b(y,p))}for(var E=this.spawn(f.map(function(N){return r[N[0]]})),S=this.spawn(),A=this.spawn(),B=p[0],k=0;k<p.length;k++){var D=p[k],I=n[k];D===B?S.merge(I):A.merge(I)}var _=u(function(N){var M=e.spawn();return N.forEach(function(L){M.merge(L),L.connectedEdges().forEach(function(q){e.contains(q)&&!E.contains(q)&&M.merge(q)})}),M},"constructComponent"),R=[_(S),_(A)],z={cut:E,components:R,partition1:S,partition2:A};return z},"kargerStein")},bh=u(function(e){return{x:e.x,y:e.y}},"copyPosition"),Na=u(function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},"modelToRenderedPosition"),wl=u(function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},"renderedToModelPosition"),Fn=u(function(e){return{x:e[0],y:e[1]}},"array2point"),xh=u(function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=1/0,a=t;a<n;a++){var i=e[a];isFinite(i)&&(r=Math.min(i,r))}return r},"min"),wh=u(function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=-1/0,a=t;a<n;a++){var i=e[a];isFinite(i)&&(r=Math.max(i,r))}return r},"max"),Eh=u(function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=0,a=0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(r+=o,a++)}return r/a},"mean"),Ch=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;r?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var o=0,c=e.length-1;c>=0;c--){var l=e[c];i?isFinite(l)||(e[c]=-1/0,o++):e.splice(c,1)}a&&e.sort(function(h,f){return h-f});var s=e.length,d=Math.floor(s/2);return s%2!==0?e[d+1+o]:(e[d-1+o]+e[d+o])/2},"median"),Th=u(function(e){return Math.PI*e/180},"deg2rad"),$r=u(function(e,t){return Math.atan2(t,e)-Math.PI/2},"getAngleFromDisp"),Ui=Math.log2||function(e){return Math.log(e)/Math.log(2)},El=u(function(e){return e>0?1:e<0?-1:0},"signum"),En=u(function(e,t){return Math.sqrt(pn(e,t))},"dist"),pn=u(function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},"sqdist"),Sh=u(function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},"inPlaceSumNormalize"),Qe=u(function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},"qbezierAt"),jn=u(function(e,t,n,r){return{x:Qe(e.x,t.x,n.x,r),y:Qe(e.y,t.y,n.y,r)}},"qbezierPtAt"),Ph=u(function(e,t,n,r){var a={x:t.x-e.x,y:t.y-e.y},i=En(e,t),o={x:a.x/i,y:a.y/i};return n=n??0,r=r??n*i,{x:e.x+o.x*r,y:e.y+o.y*r}},"lineAt"),Sr=u(function(e,t,n){return Math.max(e,Math.min(n,t))},"bound"),yt=u(function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},"makeBoundingBox"),Dh=u(function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},"copyBoundingBox"),kh=u(function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},"clearBoundingBox"),Ah=u(function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},"shiftBoundingBox"),Cl=u(function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},"updateBoundingBox"),Bh=u(function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},"expandBoundingBoxByPoint"),sa=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},"expandBoundingBox"),la=u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,r,a,i;if(t.length===1)n=r=a=i=t[0];else if(t.length===2)n=a=t[0],i=r=t[1];else if(t.length===4){var o=Ye(t,4);n=o[0],r=o[1],a=o[2],i=o[3]}return e.x1-=i,e.x2+=r,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},"expandBoundingBoxSides"),jo=u(function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},"assignBoundingBox"),Ki=u(function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},"boundingBoxesIntersect"),Un=u(function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},"inBoundingBox"),_h=u(function(e,t){return Un(e,t.x,t.y)},"pointInBoundingBox"),Tl=u(function(e,t){return Un(e,t.x1,t.y1)&&Un(e,t.x2,t.y2)},"boundingBoxInBoundingBox"),Sl=u(function(e,t,n,r,a,i,o){var c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=c==="auto"?Cn(a,i):c,s=a/2,d=i/2;l=Math.min(l,s,d);var h=l!==s,f=l!==d,p;if(h){var g=n-s+l-o,y=r-d-o,b=n+s-l+o,v=y;if(p=en(e,t,n,r,g,y,b,v,!1),p.length>0)return p}if(f){var m=n+s+o,x=r-d+l-o,w=m,P=r+d-l+o;if(p=en(e,t,n,r,m,x,w,P,!1),p.length>0)return p}if(h){var T=n-s+l-o,E=r+d+o,S=n+s-l+o,A=E;if(p=en(e,t,n,r,T,E,S,A,!1),p.length>0)return p}if(f){var B=n-s-o,k=r-d+l-o,D=B,I=r+d-l+o;if(p=en(e,t,n,r,B,k,D,I,!1),p.length>0)return p}var _;{var R=n-s+l,z=r-d+l;if(_=hr(e,t,n,r,R,z,l+o),_.length>0&&_[0]<=R&&_[1]<=z)return[_[0],_[1]]}{var N=n+s-l,M=r-d+l;if(_=hr(e,t,n,r,N,M,l+o),_.length>0&&_[0]>=N&&_[1]<=M)return[_[0],_[1]]}{var L=n+s-l,q=r+d-l;if(_=hr(e,t,n,r,L,q,l+o),_.length>0&&_[0]>=L&&_[1]>=q)return[_[0],_[1]]}{var Y=n-s+l,W=r+d-l;if(_=hr(e,t,n,r,Y,W,l+o),_.length>0&&_[0]<=Y&&_[1]>=W)return[_[0],_[1]]}return[]},"roundRectangleIntersectLine"),Ih=u(function(e,t,n,r,a,i,o){var c=o,l=Math.min(n,a),s=Math.max(n,a),d=Math.min(r,i),h=Math.max(r,i);return l-c<=e&&e<=s+c&&d-c<=t&&t<=h+c},"inLineVicinity"),Mh=u(function(e,t,n,r,a,i,o,c,l){var s={x1:Math.min(n,o,a)-l,x2:Math.max(n,o,a)+l,y1:Math.min(r,c,i)-l,y2:Math.max(r,c,i)+l};return!(e<s.x1||e>s.x2||t<s.y1||t>s.y2)},"inBezierVicinity"),Rh=u(function(e,t,n,r){n-=r;var a=t*t-4*e*n;if(a<0)return[];var i=Math.sqrt(a),o=2*e,c=(-t+i)/o,l=(-t-i)/o;return[c,l]},"solveQuadratic"),Lh=u(function(e,t,n,r,a){var i=1e-5;e===0&&(e=i),t/=e,n/=e,r/=e;var o,c,l,s,d,h,f,p;if(c=(3*n-t*t)/9,l=-(27*r)+t*(9*n-2*(t*t)),l/=54,o=c*c*c+l*l,a[1]=0,f=t/3,o>0){d=l+Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),h=l-Math.sqrt(o),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),a[0]=-f+d+h,f+=(d+h)/2,a[4]=a[2]=-f,f=Math.sqrt(3)*(-h+d)/2,a[3]=f,a[5]=-f;return}if(a[5]=a[3]=0,o===0){p=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),a[0]=-f+2*p,a[4]=a[2]=-(p+f);return}c=-c,s=c*c*c,s=Math.acos(l/Math.sqrt(s)),p=2*Math.sqrt(c),a[0]=-f+p*Math.cos(s/3),a[2]=-f+p*Math.cos((s+2*Math.PI)/3),a[4]=-f+p*Math.cos((s+4*Math.PI)/3)},"solveCubic"),Nh=u(function(e,t,n,r,a,i,o,c){var l=1*n*n-4*n*a+2*n*o+4*a*a-4*a*o+o*o+r*r-4*r*i+2*r*c+4*i*i-4*i*c+c*c,s=1*9*n*a-3*n*n-3*n*o-6*a*a+3*a*o+9*r*i-3*r*r-3*r*c-6*i*i+3*i*c,d=1*3*n*n-6*n*a+n*o-n*e+2*a*a+2*a*e-o*e+3*r*r-6*r*i+r*c-r*t+2*i*i+2*i*t-c*t,h=1*n*a-n*n+n*e-a*e+r*i-r*r+r*t-i*t,f=[];Lh(l,s,d,h,f);for(var p=1e-7,g=[],y=0;y<6;y+=2)Math.abs(f[y+1])<p&&f[y]>=0&&f[y]<=1&&g.push(f[y]);g.push(1),g.push(0);for(var b=-1,v,m,x,w=0;w<g.length;w++)v=Math.pow(1-g[w],2)*n+2*(1-g[w])*g[w]*a+g[w]*g[w]*o,m=Math.pow(1-g[w],2)*r+2*(1-g[w])*g[w]*i+g[w]*g[w]*c,x=Math.pow(v-e,2)+Math.pow(m-t,2),b>=0?x<b&&(b=x):b=x;return b},"sqdistToQuadraticBezier"),Oh=u(function(e,t,n,r,a,i){var o=[e-n,t-r],c=[a-n,i-r],l=c[0]*c[0]+c[1]*c[1],s=o[0]*o[0]+o[1]*o[1],d=o[0]*c[0]+o[1]*c[1],h=d*d/l;return d<0?s:h>l?(e-a)*(e-a)+(t-i)*(t-i):s-h},"sqdistToFiniteLine"),gt=u(function(e,t,n){for(var r,a,i,o,c,l=0,s=0;s<n.length/2;s++)if(r=n[s*2],a=n[s*2+1],s+1<n.length/2?(i=n[(s+1)*2],o=n[(s+1)*2+1]):(i=n[(s+1-n.length/2)*2],o=n[(s+1-n.length/2)*2+1]),!(r==e&&i==e))if(r>=e&&e>=i||r<=e&&e<=i)c=(e-r)/(i-r)*(o-a)+a,c>t&&l++;else continue;return l%2!==0},"pointInsidePolygonPoints"),Wt=u(function(e,t,n,r,a,i,o,c,l){var s=new Array(n.length),d;c[0]!=null?(d=Math.atan(c[1]/c[0]),c[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=c;for(var h=Math.cos(-d),f=Math.sin(-d),p=0;p<s.length/2;p++)s[p*2]=i/2*(n[p*2]*h-n[p*2+1]*f),s[p*2+1]=o/2*(n[p*2+1]*h+n[p*2]*f),s[p*2]+=r,s[p*2+1]+=a;var g;if(l>0){var y=Sa(s,-l);g=Ta(y)}else g=s;return gt(e,t,g)},"pointInsidePolygon"),zh=u(function(e,t,n,r,a,i,o,c){for(var l=new Array(n.length*2),s=0;s<c.length;s++){var d=c[s];l[s*4+0]=d.startX,l[s*4+1]=d.startY,l[s*4+2]=d.stopX,l[s*4+3]=d.stopY;var h=Math.pow(d.cx-e,2)+Math.pow(d.cy-t,2);if(h<=Math.pow(d.radius,2))return!0}return gt(e,t,l)},"pointInsideRoundPolygon"),Ta=u(function(e){for(var t=new Array(e.length/2),n,r,a,i,o,c,l,s,d=0;d<e.length/4;d++){n=e[d*4],r=e[d*4+1],a=e[d*4+2],i=e[d*4+3],d<e.length/4-1?(o=e[(d+1)*4],c=e[(d+1)*4+1],l=e[(d+1)*4+2],s=e[(d+1)*4+3]):(o=e[0],c=e[1],l=e[2],s=e[3]);var h=en(n,r,a,i,o,c,l,s,!0);t[d*2]=h[0],t[d*2+1]=h[1]}return t},"joinLines"),Sa=u(function(e,t){for(var n=new Array(e.length*2),r,a,i,o,c=0;c<e.length/2;c++){r=e[c*2],a=e[c*2+1],c<e.length/2-1?(i=e[(c+1)*2],o=e[(c+1)*2+1]):(i=e[0],o=e[1]);var l=o-a,s=-(i-r),d=Math.sqrt(l*l+s*s),h=l/d,f=s/d;n[c*4]=r+h*t,n[c*4+1]=a+f*t,n[c*4+2]=i+h*t,n[c*4+3]=o+f*t}return n},"expandPolygon"),Fh=u(function(e,t,n,r,a,i){var o=n-e,c=r-t;o/=a,c/=i;var l=Math.sqrt(o*o+c*c),s=l-1;if(s<0)return[];var d=s/l;return[(n-e)*d+e,(r-t)*d+t]},"intersectLineEllipse"),xn=u(function(e,t,n,r,a,i,o){return e-=a,t-=i,e/=n/2+o,t/=r/2+o,e*e+t*t<=1},"checkInEllipse"),hr=u(function(e,t,n,r,a,i,o){var c=[n-e,r-t],l=[e-a,t-i],s=c[0]*c[0]+c[1]*c[1],d=2*(l[0]*c[0]+l[1]*c[1]),h=l[0]*l[0]+l[1]*l[1]-o*o,f=d*d-4*s*h;if(f<0)return[];var p=(-d+Math.sqrt(f))/(2*s),g=(-d-Math.sqrt(f))/(2*s),y=Math.min(p,g),b=Math.max(p,g),v=[];if(y>=0&&y<=1&&v.push(y),b>=0&&b<=1&&v.push(b),v.length===0)return[];var m=v[0]*c[0]+e,x=v[0]*c[1]+t;if(v.length>1){if(v[0]==v[1])return[m,x];var w=v[1]*c[0]+e,P=v[1]*c[1]+t;return[m,x,w,P]}else return[m,x]},"intersectLineCircle"),ri=u(function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},"midOfThree"),en=u(function(e,t,n,r,a,i,o,c,l){var s=e-a,d=n-e,h=o-a,f=t-i,p=r-t,g=c-i,y=h*f-g*s,b=d*f-p*s,v=g*d-h*p;if(v!==0){var m=y/v,x=b/v,w=.001,P=0-w,T=1+w;return P<=m&&m<=T&&P<=x&&x<=T?[e+m*d,t+m*p]:l?[e+m*d,t+m*p]:[]}else return y===0||b===0?ri(e,n,o)===o?[o,c]:ri(e,n,a)===a?[a,i]:ri(a,o,n)===n?[n,r]:[]:[]},"finiteLinesIntersect"),Pr=u(function(e,t,n,r,a,i,o,c){var l=[],s,d=new Array(n.length),h=!0;i==null&&(h=!1);var f;if(h){for(var p=0;p<d.length/2;p++)d[p*2]=n[p*2]*i+r,d[p*2+1]=n[p*2+1]*o+a;if(c>0){var g=Sa(d,-c);f=Ta(g)}else f=d}else f=n;for(var y,b,v,m,x=0;x<f.length/2;x++)y=f[x*2],b=f[x*2+1],x<f.length/2-1?(v=f[(x+1)*2],m=f[(x+1)*2+1]):(v=f[0],m=f[1]),s=en(e,t,r,a,y,b,v,m),s.length!==0&&l.push(s[0],s[1]);return l},"polygonIntersectLine"),Vh=u(function(e,t,n,r,a,i,o,c,l){var s=[],d,h=new Array(n.length*2);l.forEach(function(v,m){m===0?(h[h.length-2]=v.startX,h[h.length-1]=v.startY):(h[m*4-2]=v.startX,h[m*4-1]=v.startY),h[m*4]=v.stopX,h[m*4+1]=v.stopY,d=hr(e,t,r,a,v.cx,v.cy,v.radius),d.length!==0&&s.push(d[0],d[1])});for(var f=0;f<h.length/4;f++)d=en(e,t,r,a,h[f*4],h[f*4+1],h[f*4+2],h[f*4+3],!1),d.length!==0&&s.push(d[0],d[1]);if(s.length>2){for(var p=[s[0],s[1]],g=Math.pow(p[0]-e,2)+Math.pow(p[1]-t,2),y=1;y<s.length/2;y++){var b=Math.pow(s[y*2]-e,2)+Math.pow(s[y*2+1]-t,2);b<=g&&(p[0]=s[y*2],p[1]=s[y*2+1],g=b)}return p}return s},"roundPolygonIntersectLine"),Qr=u(function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]),i=(a-n)/a;return i<0&&(i=1e-5),[t[0]+i*r[0],t[1]+i*r[1]]},"shortenIntersection"),dt=u(function(e,t){var n=fi(e,t);return n=Pl(n),n},"generateUnitNgonPointsFitToSquare"),Pl=u(function(e){for(var t,n,r=e.length/2,a=1/0,i=1/0,o=-1/0,c=-1/0,l=0;l<r;l++)t=e[2*l],n=e[2*l+1],a=Math.min(a,t),o=Math.max(o,t),i=Math.min(i,n),c=Math.max(c,n);for(var s=2/(o-a),d=2/(c-i),h=0;h<r;h++)t=e[2*h]=e[2*h]*s,n=e[2*h+1]=e[2*h+1]*d,a=Math.min(a,t),o=Math.max(o,t),i=Math.min(i,n),c=Math.max(c,n);if(i<-1)for(var f=0;f<r;f++)n=e[2*f+1]=e[2*f+1]+(-1-i);return e},"fitPolygonToSquare"),fi=u(function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var a=new Array(e*2),i,o=0;o<e;o++)i=o*n+r,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a},"generateUnitNgonPoints"),Cn=u(function(e,t){return Math.min(e/4,t/4,8)},"getRoundRectangleRadius"),Dl=u(function(e,t){return Math.min(e/10,t/10,8)},"getRoundPolygonRadius"),Gi=u(function(){return 8},"getCutRectangleCornerLength"),jh=u(function(e,t,n){return[e-2*t+n,2*(t-e),e]},"bezierPtsToQuadCoeff"),pi=u(function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},"getBarrelCurveConstants"),Yh=Je({dampingFactor:.8,precision:1e-6,iterations:200,weight:u(function(e){return 1},"weight")}),Xh={pageRank:u(function(e){for(var t=Yh(e),n=t.dampingFactor,r=t.precision,a=t.iterations,i=t.weight,o=this._private.cy,c=this.byGroup(),l=c.nodes,s=c.edges,d=l.length,h=d*d,f=s.length,p=new Array(h),g=new Array(d),y=(1-n)/d,b=0;b<d;b++){for(var v=0;v<d;v++){var m=b*d+v;p[m]=0}g[b]=0}for(var x=0;x<f;x++){var w=s[x],P=w.data("source"),T=w.data("target");if(P!==T){var E=l.indexOfId(P),S=l.indexOfId(T),A=i(w),B=S*d+E;p[B]+=A,g[E]+=A}}for(var k=1/d+y,D=0;D<d;D++)if(g[D]===0)for(var I=0;I<d;I++){var _=I*d+D;p[_]=k}else for(var R=0;R<d;R++){var z=R*d+D;p[z]=p[z]/g[D]+y}for(var N=new Array(d),M=new Array(d),L,q=0;q<d;q++)N[q]=1;for(var Y=0;Y<a;Y++){for(var W=0;W<d;W++)M[W]=0;for(var K=0;K<d;K++)for(var J=0;J<d;J++){var ee=K*d+J;M[K]+=p[ee]*N[J]}Sh(M),L=N,N=M,M=L;for(var Z=0,Q=0;Q<d;Q++){var U=L[Q]-N[Q];Z+=U*U}if(Z<r)break}var O={rank:u(function(X){return X=o.collection(X)[0],N[l.indexOf(X)]},"rank")};return O},"pageRank")},Yo=Je({root:null,weight:u(function(e){return 1},"weight"),directed:!1,alpha:0}),Yn={degreeCentralityNormalized:u(function(e){e=Yo(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var a={},i={},o=0,c=0,l=0;l<r;l++){var s=n[l],d=s.id();e.root=s;var h=this.degreeCentrality(e);o<h.indegree&&(o=h.indegree),c<h.outdegree&&(c=h.outdegree),a[d]=h.indegree,i[d]=h.outdegree}return{indegree:u(function(v){return o==0?0:(ce(v)&&(v=t.filter(v)),a[v.id()]/o)},"indegree"),outdegree:u(function(v){return c===0?0:(ce(v)&&(v=t.filter(v)),i[v.id()]/c)},"outdegree")}}else{for(var f={},p=0,g=0;g<r;g++){var y=n[g];e.root=y;var b=this.degreeCentrality(e);p<b.degree&&(p=b.degree),f[y.id()]=b.degree}return{degree:u(function(v){return p===0?0:(ce(v)&&(v=t.filter(v)),f[v.id()]/p)},"degree")}}},"degreeCentralityNormalized"),degreeCentrality:u(function(e){e=Yo(e);var t=this.cy(),n=this,r=e,a=r.root,i=r.weight,o=r.directed,c=r.alpha;if(a=t.collection(a)[0],o){for(var l=a.connectedEdges(),s=l.filter(function(P){return P.target().same(a)&&n.has(P)}),d=l.filter(function(P){return P.source().same(a)&&n.has(P)}),h=s.length,f=d.length,p=0,g=0,y=0;y<s.length;y++)p+=i(s[y]);for(var b=0;b<d.length;b++)g+=i(d[b]);return{indegree:Math.pow(h,1-c)*Math.pow(p,c),outdegree:Math.pow(f,1-c)*Math.pow(g,c)}}else{for(var v=a.connectedEdges().intersection(n),m=v.length,x=0,w=0;w<v.length;w++)x+=i(v[w]);return{degree:Math.pow(m,1-c)*Math.pow(x,c)}}},"degreeCentrality")};Yn.dc=Yn.degreeCentrality;Yn.dcn=Yn.degreeCentralityNormalised=Yn.degreeCentralityNormalized;var Xo=Je({harmonic:!0,weight:u(function(){return 1},"weight"),directed:!1,root:null}),Xn={closenessCentralityNormalized:u(function(e){for(var t=Xo(e),n=t.harmonic,r=t.weight,a=t.directed,i=this.cy(),o={},c=0,l=this.nodes(),s=this.floydWarshall({weight:r,directed:a}),d=0;d<l.length;d++){for(var h=0,f=l[d],p=0;p<l.length;p++)if(d!==p){var g=s.distance(f,l[p]);n?h+=1/g:h+=g}n||(h=1/h),c<h&&(c=h),o[f.id()]=h}return{closeness:u(function(y){return c==0?0:(ce(y)?y=i.filter(y)[0].id():y=y.id(),o[y]/c)},"closeness")}},"closenessCentralityNormalized"),closenessCentrality:u(function(e){var t=Xo(e),n=t.root,r=t.weight,a=t.directed,i=t.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:a}),c=0,l=this.nodes(),s=0;s<l.length;s++){var d=l[s];if(!d.same(n)){var h=o.distanceTo(d);i?c+=1/h:c+=h}}return i?c:1/c},"closenessCentrality")};Xn.cc=Xn.closenessCentrality;Xn.ccn=Xn.closenessCentralityNormalised=Xn.closenessCentralityNormalized;var Wh=Je({weight:null,directed:!1}),gi={betweennessCentrality:u(function(e){for(var t=Wh(e),n=t.directed,r=t.weight,a=r!=null,i=this.cy(),o=this.nodes(),c={},l={},s=0,d={set:u(function(v,m){l[v]=m,m>s&&(s=m)},"set"),get:u(function(v){return l[v]},"get")},h=0;h<o.length;h++){var f=o[h],p=f.id();n?c[p]=f.outgoers().nodes():c[p]=f.openNeighborhood().nodes(),d.set(p,0)}for(var g=u(function(v){for(var m=o[v].id(),x=[],w={},P={},T={},E=new Or(function(K,J){return T[K]-T[J]}),S=0;S<o.length;S++){var A=o[S].id();w[A]=[],P[A]=0,T[A]=1/0}for(P[m]=1,T[m]=0,E.push(m);!E.empty();){var B=E.pop();if(x.push(B),a)for(var k=0;k<c[B].length;k++){var D=c[B][k],I=i.getElementById(B),_=void 0;I.edgesTo(D).length>0?_=I.edgesTo(D)[0]:_=D.edgesTo(I)[0];var R=r(_);D=D.id(),T[D]>T[B]+R&&(T[D]=T[B]+R,E.nodes.indexOf(D)<0?E.push(D):E.updateItem(D),P[D]=0,w[D]=[]),T[D]==T[B]+R&&(P[D]=P[D]+P[B],w[D].push(B))}else for(var z=0;z<c[B].length;z++){var N=c[B][z].id();T[N]==1/0&&(E.push(N),T[N]=T[B]+1),T[N]==T[B]+1&&(P[N]=P[N]+P[B],w[N].push(B))}}for(var M={},L=0;L<o.length;L++)M[o[L].id()]=0;for(;x.length>0;){for(var q=x.pop(),Y=0;Y<w[q].length;Y++){var W=w[q][Y];M[W]=M[W]+P[W]/P[q]*(1+M[q])}q!=o[v].id()&&d.set(q,d.get(q)+M[q])}},"_loop"),y=0;y<o.length;y++)g(y);var b={betweenness:u(function(v){var m=i.collection(v).id();return d.get(m)},"betweenness"),betweennessNormalized:u(function(v){if(s==0)return 0;var m=i.collection(v).id();return d.get(m)/s},"betweennessNormalized")};return b.betweennessNormalised=b.betweennessNormalized,b},"betweennessCentrality")};gi.bc=gi.betweennessCentrality;var qh=Je({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),Hh=u(function(e){return qh(e)},"setOptions"),Uh=u(function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},"getSimilarity"),Kh=u(function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n},"addLoops"),kl=u(function(e,t){for(var n,r=0;r<t;r++){n=0;for(var a=0;a<t;a++)n+=e[a*t+r];for(var i=0;i<t;i++)e[i*t+r]=e[i*t+r]/n}},"normalize"),Gh=u(function(e,t,n){for(var r=new Array(n*n),a=0;a<n;a++){for(var i=0;i<n;i++)r[a*n+i]=0;for(var o=0;o<n;o++)for(var c=0;c<n;c++)r[a*n+c]+=e[a*n+o]*t[o*n+c]}return r},"mmult"),Zh=u(function(e,t,n){for(var r=e.slice(0),a=1;a<n;a++)e=Gh(e,r,t);return e},"expand"),$h=u(function(e,t,n){for(var r=new Array(t*t),a=0;a<t*t;a++)r[a]=Math.pow(e[a],n);return kl(r,t),r},"inflate"),Qh=u(function(e,t,n,r){for(var a=0;a<n;a++){var i=Math.round(e[a]*Math.pow(10,r))/Math.pow(10,r),o=Math.round(t[a]*Math.pow(10,r))/Math.pow(10,r);if(i!==o)return!1}return!0},"hasConverged"),Jh=u(function(e,t,n,r){for(var a=[],i=0;i<t;i++){for(var o=[],c=0;c<t;c++)Math.round(e[i*t+c]*1e3)/1e3>0&&o.push(n[c]);o.length!==0&&a.push(r.collection(o))}return a},"assign"),ef=u(function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},"isDuplicate"),tf=u(function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&ef(e[t],e[n])&&e.splice(n,1);return e},"removeDuplicates"),Wo=u(function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),a=Hh(e),i={},o=0;o<t.length;o++)i[t[o].id()]=o;for(var c=t.length,l=c*c,s=new Array(l),d,h=0;h<l;h++)s[h]=0;for(var f=0;f<n.length;f++){var p=n[f],g=i[p.source().id()],y=i[p.target().id()],b=Uh(p,a.attributes);s[g*c+y]+=b,s[y*c+g]+=b}Kh(s,c,a.multFactor),kl(s,c);for(var v=!0,m=0;v&&m<a.maxIterations;)v=!1,d=Zh(s,c,a.expandFactor),s=$h(d,c,a.inflateFactor),Qh(s,d,l,4)||(v=!0),m++;var x=Jh(s,c,t,r);return x=tf(x),x},"markovClustering"),nf={markovClustering:Wo,mcl:Wo},rf=u(function(e){return e},"identity"),Al=u(function(e,t){return Math.abs(t-e)},"absDiff"),qo=u(function(e,t,n){return e+Al(t,n)},"addAbsDiff"),Ho=u(function(e,t,n){return e+Math.pow(n-t,2)},"addSquaredDiff"),af=u(function(e){return Math.sqrt(e)},"sqrt"),of=u(function(e,t,n){return Math.max(e,Al(t,n))},"maxAbsDiff"),or=u(function(e,t,n,r,a){for(var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:rf,o=r,c,l,s=0;s<e;s++)c=t(s),l=n(s),o=a(o,c,l);return i(o)},"getDistance"),Kn={euclidean:u(function(e,t,n){return e>=2?or(e,t,n,0,Ho,af):or(e,t,n,0,qo)},"euclidean"),squaredEuclidean:u(function(e,t,n){return or(e,t,n,0,Ho)},"squaredEuclidean"),manhattan:u(function(e,t,n){return or(e,t,n,0,qo)},"manhattan"),max:u(function(e,t,n){return or(e,t,n,-1/0,of)},"max")};Kn["squared-euclidean"]=Kn.squaredEuclidean;Kn.squaredeuclidean=Kn.squaredEuclidean;function zr(e,t,n,r,a,i){var o;return Fe(e)?o=e:o=Kn[e]||Kn.euclidean,t===0&&Fe(e)?o(a,i):o(t,n,r,a,i)}u(zr,"clusteringDistance");var sf=Je({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Zi=u(function(e){return sf(e)},"setOptions"),Pa=u(function(e,t,n,r,a){var i=a!=="kMedoids",o=i?function(d){return n[d]}:function(d){return r[d](n)},c=u(function(d){return r[d](t)},"getQ"),l=n,s=t;return zr(e,r.length,o,c,l,s)},"getDist"),ai=u(function(e,t,n){for(var r=n.length,a=new Array(r),i=new Array(r),o=new Array(t),c=null,l=0;l<r;l++)a[l]=e.min(n[l]).value,i[l]=e.max(n[l]).value;for(var s=0;s<t;s++){c=[];for(var d=0;d<r;d++)c[d]=Math.random()*(i[d]-a[d])+a[d];o[s]=c}return o},"randomCentroids"),Bl=u(function(e,t,n,r,a){for(var i=1/0,o=0,c=0;c<t.length;c++){var l=Pa(n,e,t[c],r,a);l<i&&(i=l,o=c)}return o},"classify"),_l=u(function(e,t,n){for(var r=[],a=null,i=0;i<t.length;i++)a=t[i],n[a.id()]===e&&r.push(a);return r},"buildCluster"),lf=u(function(e,t,n){return Math.abs(t-e)<=n},"haveValuesConverged"),uf=u(function(e,t,n){for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++){var i=Math.abs(e[r][a]-t[r][a]);if(i>n)return!1}return!0},"haveMatricesConverged"),cf=u(function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},"seenBefore"),Uo=u(function(e,t){var n=new Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var a=e[Math.floor(Math.random()*e.length)];cf(a,n,r);)a=e[Math.floor(Math.random()*e.length)];n[r]=a}else for(var i=0;i<t;i++)n[i]=e[Math.floor(Math.random()*e.length)];return n},"randomMedoids"),Ko=u(function(e,t,n){for(var r=0,a=0;a<t.length;a++)r+=Pa("manhattan",t[a],e,n,"kMedoids");return r},"findCost"),df=u(function(e){var t=this.cy(),n=this.nodes(),r=null,a=Zi(e),i=new Array(a.k),o={},c;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,c=ai(n,a.k,a.attributes)):We(a.testCentroids)==="object"?c=a.testCentroids:c=ai(n,a.k,a.attributes):c=ai(n,a.k,a.attributes);for(var l=!0,s=0;l&&s<a.maxIterations;){for(var d=0;d<n.length;d++)r=n[d],o[r.id()]=Bl(r,c,a.distance,a.attributes,"kMeans");l=!1;for(var h=0;h<a.k;h++){var f=_l(h,n,o);if(f.length!==0){for(var p=a.attributes.length,g=c[h],y=new Array(p),b=new Array(p),v=0;v<p;v++){b[v]=0;for(var m=0;m<f.length;m++)r=f[m],b[v]+=a.attributes[v](r);y[v]=b[v]/f.length,lf(y[v],g[v],a.sensitivityThreshold)||(l=!0)}c[h]=y,i[h]=t.collection(f)}}s++}return i},"kMeans"),hf=u(function(e){var t=this.cy(),n=this.nodes(),r=null,a=Zi(e),i=new Array(a.k),o,c={},l,s=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(We(a.testCentroids)==="object"?o=a.testCentroids:o=Uo(n,a.k)):o=Uo(n,a.k);for(var d=!0,h=0;d&&h<a.maxIterations;){for(var f=0;f<n.length;f++)r=n[f],c[r.id()]=Bl(r,o,a.distance,a.attributes,"kMedoids");d=!1;for(var p=0;p<o.length;p++){var g=_l(p,n,c);if(g.length!==0){s[p]=Ko(o[p],g,a.attributes);for(var y=0;y<g.length;y++)l=Ko(g[y],g,a.attributes),l<s[p]&&(s[p]=l,o[p]=g[y],d=!0);i[p]=t.collection(g)}}h++}return i},"kMedoids"),ff=u(function(e,t,n,r,a){for(var i,o,c=0;c<t.length;c++)for(var l=0;l<e.length;l++)r[c][l]=Math.pow(n[c][l],a.m);for(var s=0;s<e.length;s++)for(var d=0;d<a.attributes.length;d++){i=0,o=0;for(var h=0;h<t.length;h++)i+=r[h][s]*a.attributes[d](t[h]),o+=r[h][s];e[s][d]=i/o}},"updateCentroids"),pf=u(function(e,t,n,r,a){for(var i=0;i<e.length;i++)t[i]=e[i].slice();for(var o,c,l,s=2/(a.m-1),d=0;d<n.length;d++)for(var h=0;h<r.length;h++){o=0;for(var f=0;f<n.length;f++)c=Pa(a.distance,r[h],n[d],a.attributes,"cmeans"),l=Pa(a.distance,r[h],n[f],a.attributes,"cmeans"),o+=Math.pow(c/l,s);e[h][d]=1/o}},"updateMembership"),gf=u(function(e,t,n,r){for(var a=new Array(n.k),i=0;i<a.length;i++)a[i]=[];for(var o,c,l=0;l<t.length;l++){o=-1/0,c=-1;for(var s=0;s<t[0].length;s++)t[l][s]>o&&(o=t[l][s],c=s);a[c].push(e[l])}for(var d=0;d<a.length;d++)a[d]=r.collection(a[d]);return a},"assign"),Go=u(function(e){var t=this.cy(),n=this.nodes(),r=Zi(e),a,i,o,c,l;c=new Array(n.length);for(var s=0;s<n.length;s++)c[s]=new Array(r.k);o=new Array(n.length);for(var d=0;d<n.length;d++)o[d]=new Array(r.k);for(var h=0;h<n.length;h++){for(var f=0,p=0;p<r.k;p++)o[h][p]=Math.random(),f+=o[h][p];for(var g=0;g<r.k;g++)o[h][g]=o[h][g]/f}i=new Array(r.k);for(var y=0;y<r.k;y++)i[y]=new Array(r.attributes.length);l=new Array(n.length);for(var b=0;b<n.length;b++)l[b]=new Array(r.k);for(var v=!0,m=0;v&&m<r.maxIterations;)v=!1,ff(i,n,o,l,r),pf(o,c,i,n,r),uf(o,c,r.sensitivityThreshold)||(v=!0),m++;return a=gf(n,o,r,t),{clusters:a,degreeOfMembership:o}},"fuzzyCMeans"),vf={kMeans:df,kMedoids:hf,fuzzyCMeans:Go,fcm:Go},yf=Je({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),mf={single:"min",complete:"max"},bf=u(function(e){var t=yf(e),n=mf[t.linkage];return n!=null&&(t.linkage=n),t},"setOptions"),Zo=u(function(e,t,n,r,a){for(var i=0,o=1/0,c,l=a.attributes,s=u(function(E,S){return zr(a.distance,l.length,function(A){return l[A](E)},function(A){return l[A](S)},E,S)},"getDist"),d=0;d<e.length;d++){var h=e[d].key,f=n[h][r[h]];f<o&&(i=h,o=f)}if(a.mode==="threshold"&&o>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var p=t[i],g=t[r[i]],y;a.mode==="dendrogram"?y={left:p,right:g,key:p.key}:y={value:p.value.concat(g.value),key:p.key},e[p.index]=y,e.splice(g.index,1),t[p.key]=y;for(var b=0;b<e.length;b++){var v=e[b];p.key===v.key?c=1/0:a.linkage==="min"?(c=n[p.key][v.key],n[p.key][v.key]>n[g.key][v.key]&&(c=n[g.key][v.key])):a.linkage==="max"?(c=n[p.key][v.key],n[p.key][v.key]<n[g.key][v.key]&&(c=n[g.key][v.key])):a.linkage==="mean"?c=(n[p.key][v.key]*p.size+n[g.key][v.key]*g.size)/(p.size+g.size):a.mode==="dendrogram"?c=s(v.value,p.value):c=s(v.value[0],p.value[0]),n[p.key][v.key]=n[v.key][p.key]=c}for(var m=0;m<e.length;m++){var x=e[m].key;if(r[x]===p.key||r[x]===g.key){for(var w=x,P=0;P<e.length;P++){var T=e[P].key;n[x][T]<n[x][w]&&(w=T)}r[x]=w}e[m].index=m}return p.key=g.key=p.index=g.index=null,!0},"mergeClosest"),Jr=u(function e(t,n,r){t&&(t.value?n.push(t.value):(t.left&&e(t.left,n),t.right&&e(t.right,n)))},"getAllChildren"),xf=u(function e(t,n){if(!t)return"";if(t.left&&t.right){var r=e(t.left,n),a=e(t.right,n),i=n.add({group:"nodes",data:{id:r+","+a}});return n.add({group:"edges",data:{source:r,target:i.id()}}),n.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(t.value)return t.value.id()},"buildDendrogram"),wf=u(function e(t,n,r){if(!t)return[];var a=[],i=[],o=[];return n===0?(t.left&&Jr(t.left,a),t.right&&Jr(t.right,i),o=a.concat(i),[r.collection(o)]):n===1?t.value?[r.collection(t.value)]:(t.left&&Jr(t.left,a),t.right&&Jr(t.right,i),[r.collection(a),r.collection(i)]):t.value?[r.collection(t.value)]:(t.left&&(a=e(t.left,n-1,r)),t.right&&(i=e(t.right,n-1,r)),a.concat(i))},"buildClustersFromTree"),$o=u(function(e){for(var t=this.cy(),n=this.nodes(),r=bf(e),a=r.attributes,i=u(function(v,m){return zr(r.distance,a.length,function(x){return a[x](v)},function(x){return a[x](m)},v,m)},"getDist"),o=[],c=[],l=[],s=[],d=0;d<n.length;d++){var h={value:r.mode==="dendrogram"?n[d]:[n[d]],key:d,index:d};o[d]=h,s[d]=h,c[d]=[],l[d]=0}for(var f=0;f<o.length;f++)for(var p=0;p<=f;p++){var g=void 0;r.mode==="dendrogram"?g=f===p?1/0:i(o[f].value,o[p].value):g=f===p?1/0:i(o[f].value[0],o[p].value[0]),c[f][p]=g,c[p][f]=g,g<c[f][l[f]]&&(l[f]=p)}for(var y=Zo(o,s,c,l,r);y;)y=Zo(o,s,c,l,r);var b;return r.mode==="dendrogram"?(b=wf(o[0],r.dendrogramDepth,t),r.addDendrogram&&xf(o[0],t)):(b=new Array(o.length),o.forEach(function(v,m){v.key=v.index=null,b[m]=t.collection(v.value)})),b},"hierarchicalClustering"),Ef={hierarchicalClustering:$o,hca:$o},Cf=Je({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Tf=u(function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||ze("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(a){return a===n})||te(n)||ze("Preference must be one of [".concat(r.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Cf(e)},"setOptions"),Sf=u(function(e,t,n,r){var a=u(function(i,o){return r[o](i)},"attr");return-zr(e,r.length,function(i){return a(t,i)},function(i){return a(n,i)},t,n)},"getSimilarity"),Pf=u(function(e,t){var n=null;return t==="median"?n=Ch(e):t==="mean"?n=Eh(e):t==="min"?n=xh(e):t==="max"?n=wh(e):n=t,n},"getPreference"),Df=u(function(e,t,n){for(var r=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&r.push(a);return r},"findExemplars"),Qo=u(function(e,t,n){for(var r=[],a=0;a<e;a++){for(var i=-1,o=-1/0,c=0;c<n.length;c++){var l=n[c];t[a*e+l]>o&&(i=l,o=t[a*e+l])}i>0&&r.push(i)}for(var s=0;s<n.length;s++)r[n[s]]=n[s];return r},"assignClusters"),kf=u(function(e,t,n){for(var r=Qo(e,t,n),a=0;a<n.length;a++){for(var i=[],o=0;o<r.length;o++)r[o]===n[a]&&i.push(o);for(var c=-1,l=-1/0,s=0;s<i.length;s++){for(var d=0,h=0;h<i.length;h++)d+=t[i[h]*e+i[s]];d>l&&(c=s,l=d)}n[a]=i[c]}return r=Qo(e,t,n),r},"assign"),Jo=u(function(e){for(var t=this.cy(),n=this.nodes(),r=Tf(e),a={},i=0;i<n.length;i++)a[n[i].id()]=i;var o,c,l,s,d,h;o=n.length,c=o*o,l=new Array(c);for(var f=0;f<c;f++)l[f]=-1/0;for(var p=0;p<o;p++)for(var g=0;g<o;g++)p!==g&&(l[p*o+g]=Sf(r.distance,n[p],n[g],r.attributes));s=Pf(l,r.preference);for(var y=0;y<o;y++)l[y*o+y]=s;d=new Array(c);for(var b=0;b<c;b++)d[b]=0;h=new Array(c);for(var v=0;v<c;v++)h[v]=0;for(var m=new Array(o),x=new Array(o),w=new Array(o),P=0;P<o;P++)m[P]=0,x[P]=0,w[P]=0;for(var T=new Array(o*r.minIterations),E=0;E<T.length;E++)T[E]=0;var S;for(S=0;S<r.maxIterations;S++){for(var A=0;A<o;A++){for(var B=-1/0,k=-1/0,D=-1,I=0,_=0;_<o;_++)m[_]=d[A*o+_],I=h[A*o+_]+l[A*o+_],I>=B?(k=B,B=I,D=_):I>k&&(k=I);for(var R=0;R<o;R++)d[A*o+R]=(1-r.damping)*(l[A*o+R]-B)+r.damping*m[R];d[A*o+D]=(1-r.damping)*(l[A*o+D]-k)+r.damping*m[D]}for(var z=0;z<o;z++){for(var N=0,M=0;M<o;M++)m[M]=h[M*o+z],x[M]=Math.max(0,d[M*o+z]),N+=x[M];N-=x[z],x[z]=d[z*o+z],N+=x[z];for(var L=0;L<o;L++)h[L*o+z]=(1-r.damping)*Math.min(0,N-x[L])+r.damping*m[L];h[z*o+z]=(1-r.damping)*(N-x[z])+r.damping*m[z]}for(var q=0,Y=0;Y<o;Y++){var W=h[Y*o+Y]+d[Y*o+Y]>0?1:0;T[S%r.minIterations*o+Y]=W,q+=W}if(q>0&&(S>=r.minIterations-1||S==r.maxIterations-1)){for(var K=0,J=0;J<o;J++){w[J]=0;for(var ee=0;ee<r.minIterations;ee++)w[J]+=T[ee*o+J];(w[J]===0||w[J]===r.minIterations)&&K++}if(K===o)break}}for(var Z=Df(o,d,h),Q=kf(o,l,Z),U={},O=0;O<Z.length;O++)U[Z[O]]=[];for(var X=0;X<n.length;X++){var $=a[n[X].id()],ie=Q[$];ie!=null&&U[ie].push(n[X])}for(var se=new Array(Z.length),ve=0;ve<Z.length;ve++)se[ve]=t.collection(U[Z[ve]]);return se},"affinityPropagation"),Af={affinityPropagation:Jo,ap:Jo},Bf=Je({root:void 0,directed:!1}),_f={hierholzer:u(function(e){if(!ke(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=Bf(e),r=n.root,a=n.directed,i=this,o=!1,c,l,s;r&&(s=ce(r)?this.filter(r)[0].id():r[0].id());var d={},h={};a?i.forEach(function(v){var m=v.id();if(v.isNode()){var x=v.indegree(!0),w=v.outdegree(!0),P=x-w,T=w-x;P==1?c?o=!0:c=m:T==1?l?o=!0:l=m:(T>1||P>1)&&(o=!0),d[m]=[],v.outgoers().forEach(function(E){E.isEdge()&&d[m].push(E.id())})}else h[m]=[void 0,v.target().id()]}):i.forEach(function(v){var m=v.id();if(v.isNode()){var x=v.degree(!0);x%2&&(c?l?o=!0:l=m:c=m),d[m]=[],v.connectedEdges().forEach(function(w){return d[m].push(w.id())})}else h[m]=[v.source().id(),v.target().id()]});var f={found:!1,trail:void 0};if(o)return f;if(l&&c)if(a){if(s&&l!=s)return f;s=l}else{if(s&&l!=s&&c!=s)return f;s||(s=l)}else s||(s=i[0].id());var p=u(function(v){for(var m=v,x=[v],w,P,T;d[m].length;)w=d[m].shift(),P=h[w][0],T=h[w][1],m!=T?(d[T]=d[T].filter(function(E){return E!=w}),m=T):!a&&m!=P&&(d[P]=d[P].filter(function(E){return E!=w}),m=P),x.unshift(w),x.unshift(m);return x},"walk"),g=[],y=[];for(y=p(s);y.length!=1;)d[y[0]].length==0?(g.unshift(i.getElementById(y.shift())),g.unshift(i.getElementById(y.shift()))):y=p(y.shift()).concat(y);g.unshift(i.getElementById(y.shift()));for(var b in d)if(d[b].length)return f;return f.found=!0,f.trail=this.spawn(g,!0),f},"hierholzer")},ea=u(function(){var e=this,t={},n=0,r=0,a=[],i=[],o={},c=u(function(d,h){for(var f=i.length-1,p=[],g=e.spawn();i[f].x!=d||i[f].y!=h;)p.push(i.pop().edge),f--;p.push(i.pop().edge),p.forEach(function(y){var b=y.connectedNodes().intersection(e);g.merge(y),b.forEach(function(v){var m=v.id(),x=v.connectedEdges().intersection(e);g.merge(v),t[m].cutVertex?g.merge(x.filter(function(w){return w.isLoop()})):g.merge(x)})}),a.push(g)},"buildComponent"),l=u(function d(h,f,p){h===p&&(r+=1),t[f]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(f).connectedEdges().intersection(e);if(g.size()===0)a.push(e.spawn(e.getElementById(f)));else{var y,b,v,m;g.forEach(function(x){y=x.source().id(),b=x.target().id(),v=y===f?b:y,v!==p&&(m=x.id(),o[m]||(o[m]=!0,i.push({x:f,y:v,edge:x})),v in t?t[f].low=Math.min(t[f].low,t[v].id):(d(h,v,f),t[f].low=Math.min(t[f].low,t[v].low),t[f].id<=t[v].low&&(t[f].cutVertex=!0,c(f,v))))})}},"biconnectedSearch");e.forEach(function(d){if(d.isNode()){var h=d.id();h in t||(r=0,l(h,h),t[h].cutVertex=r>1)}});var s=Object.keys(t).filter(function(d){return t[d].cutVertex}).map(function(d){return e.getElementById(d)});return{cut:e.spawn(s),components:a}},"hopcroftTarjanBiconnected"),If={hopcroftTarjanBiconnected:ea,htbc:ea,htb:ea,hopcroftTarjanBiconnectedComponents:ea},ta=u(function(){var e=this,t={},n=0,r=[],a=[],i=e.spawn(e),o=u(function c(l){a.push(l),t[l]={index:n,low:n++,explored:!1};var s=e.getElementById(l).connectedEdges().intersection(e);if(s.forEach(function(g){var y=g.target().id();y!==l&&(y in t||c(y),t[y].explored||(t[l].low=Math.min(t[l].low,t[y].low)))}),t[l].index===t[l].low){for(var d=e.spawn();;){var h=a.pop();if(d.merge(e.getElementById(h)),t[h].low=t[l].index,t[h].explored=!0,h===l)break}var f=d.edgesWith(d),p=d.merge(f);r.push(p),i=i.difference(p)}},"stronglyConnectedSearch");return e.forEach(function(c){if(c.isNode()){var l=c.id();l in t||o(l)}}),{cut:i,components:r}},"tarjanStronglyConnected"),Mf={tarjanStronglyConnected:ta,tsc:ta,tscc:ta,tarjanStronglyConnectedComponents:ta},Il={};[Tr,lh,uh,dh,fh,gh,mh,Xh,Yn,Xn,gi,nf,vf,Ef,Af,_f,If,Mf].forEach(function(e){pe(Il,e)});var Ml=0,Rl=1,Ll=2,qt=u(function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=Ml,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof t=="function"&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))},"api");qt.prototype={fulfill:u(function(e){return es(this,Rl,"fulfillValue",e)},"fulfill"),reject:u(function(e){return es(this,Ll,"rejectReason",e)},"reject"),then:u(function(e,t){var n=this,r=new qt;return n.onFulfilled.push(ns(e,r,"fulfill")),n.onRejected.push(ns(t,r,"reject")),Nl(n),r.proxy},"then")};var es=u(function(e,t,n,r){return e.state===Ml&&(e.state=t,e[n]=r,Nl(e)),e},"deliver"),Nl=u(function(e){e.state===Rl?ts(e,"onFulfilled",e.fulfillValue):e.state===Ll&&ts(e,"onRejected",e.rejectReason)},"execute"),ts=u(function(e,t,n){if(e[t].length!==0){var r=e[t];e[t]=[];var a=u(function(){for(var i=0;i<r.length;i++)r[i](n)},"func");typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},"execute_handlers"),ns=u(function(e,t,n){return function(r){if(typeof e!="function")t[n].call(t,r);else{var a;try{a=e(r)}catch(i){t.reject(i);return}Rf(t,a)}}},"resolver"),Rf=u(function e(t,n){if(t===n||t.proxy===n){t.reject(new TypeError("cannot resolve promise with itself"));return}var r;if(We(n)==="object"&&n!==null||typeof n=="function")try{r=n.then}catch(i){t.reject(i);return}if(typeof r=="function"){var a=!1;try{r.call(n,function(i){a||(a=!0,i===n?t.reject(new TypeError("circular thenable chain")):e(t,i))},function(i){a||(a=!0,t.reject(i))})}catch(i){a||t.reject(i)}return}t.fulfill(n)},"resolve");qt.all=function(e){return new qt(function(t,n){for(var r=new Array(e.length),a=0,i=u(function(c,l){r[c]=l,a++,a===e.length&&t(r)},"fulfill"),o=0;o<e.length;o++)(function(c){var l=e[c],s=l!=null&&l.then!=null;if(s)l.then(function(h){i(c,h)},function(h){n(h)});else{var d=l;i(c,d)}})(o)})};qt.resolve=function(e){return new qt(function(t,n){t(e)})};qt.reject=function(e){return new qt(function(t,n){n(e)})};var Qn=typeof Promise<"u"?Promise:qt,vi=u(function(e,t,n){var r=Yi(e),a=!r,i=this._private=pe({duration:1e3},t,n);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&Fe(i.complete)&&i.completes.push(i.complete),a){var o=e.position();i.startPosition=i.startPosition||{x:o.x,y:o.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(r){var c=e.pan();i.startPan={x:c.x,y:c.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},"Animation"),Tn=vi.prototype;pe(Tn,{instanceString:u(function(){return"animation"},"instanceString"),hook:u(function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),wt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},"hook"),play:u(function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},"play"),playing:u(function(){return this._private.playing},"playing"),apply:u(function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},"apply"),applying:u(function(){return this._private.applying},"applying"),pause:u(function(){var e=this._private;return e.playing=!1,e.started=!1,this},"pause"),stop:u(function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},"stop"),rewind:u(function(){return this.progress(0)},"rewind"),fastforward:u(function(){return this.progress(1)},"fastforward"),time:u(function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},"time"),progress:u(function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},"progress"),completed:u(function(){return this._private.progress===1},"completed"),reverse:u(function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=u(function(c,l){var s=e[c];s!=null&&(e[c]=e[l],e[l]=s)},"swap");if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var a=e.style[r],i=a.name,o=e.startStyle[i];e.startStyle[i]=a,e.style[r]=o}return t&&this.play(),this},"reverse"),promise:u(function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Qn(function(r,a){n.push(function(){r()})})},"promise")});Tn.complete=Tn.completed;Tn.run=Tn.play;Tn.running=Tn.playing;var Lf={animated:u(function(){return u(function(){var e=this,t=e.length!==void 0,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var a=n[0];if(a)return a._private.animation.current.length>0},"animatedImpl")},"animated"),clearQueue:u(function(){return u(function(){var e=this,t=e.length!==void 0,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var a=0;a<n.length;a++){var i=n[a];i._private.animation.queue=[]}return this},"clearQueueImpl")},"clearQueue"),delay:u(function(){return u(function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this},"delayImpl")},"delay"),delayAnimation:u(function(){return u(function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this},"delayAnimationImpl")},"delayAnimation"),animation:u(function(){return u(function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],i=this._private.cy||this,o=!r,c=!o;if(!i.styleEnabled())return this;var l=i.style();e=pe({},e,t);var s=Object.keys(e).length===0;if(s)return new vi(a[0],e);switch(e.duration===void 0&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(c&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),c&&e.renderedPosition!=null){var d=e.renderedPosition,h=i.pan(),f=i.zoom();e.position=wl(d,f,h)}if(o&&e.panBy!=null){var p=e.panBy,g=i.pan();e.pan={x:g.x+p.x,y:g.y+p.y}}var y=e.center||e.centre;if(o&&y!=null){var b=i.getCenterPan(y.eles,e.zoom);b!=null&&(e.pan=b)}if(o&&e.fit!=null){var v=e.fit,m=i.getFitViewport(v.eles||v.boundingBox,v.padding);m!=null&&(e.pan=m.pan,e.zoom=m.zoom)}if(o&&ke(e.zoom)){var x=i.getZoomedViewport(e.zoom);x!=null?(x.zoomed&&(e.zoom=x.zoom),x.panned&&(e.pan=x.pan)):e.zoom=null}return new vi(a[0],e)},"animationImpl")},"animation"),animate:u(function(){return u(function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],i=this._private.cy||this;if(!i.styleEnabled())return this;t&&(e=pe({},e,t));for(var o=0;o<a.length;o++){var c=a[o],l=c.animated()&&(e.queue===void 0||e.queue),s=c.animation(e,l?{queue:!0}:void 0);s.play()}return this},"animateImpl")},"animate"),stop:u(function(){return u(function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){for(var c=a[o],l=c._private,s=l.animation.current,d=0;d<s.length;d++){var h=s[d],f=h._private;t&&(f.duration=0)}e&&(l.animation.queue=[]),t||(l.animation.current=[])}return i.notify("draw"),this},"stopImpl")},"stop")},Nf=Array.isArray,Oa=Nf,Of=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zf=/^\w*$/;function Ol(e,t){if(Oa(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Lr(e)?!0:zf.test(e)||!Of.test(e)||t!=null&&e in Object(t)}u(Ol,"isKey");var Ff=Ol,Vf="[object AsyncFunction]",jf="[object Function]",Yf="[object GeneratorFunction]",Xf="[object Proxy]";function zl(e){if(!wn(e))return!1;var t=ll(e);return t==jf||t==Yf||t==Vf||t==Xf}u(zl,"isFunction");var Wf=zl,qf=Ra["__core-js_shared__"],ii=qf,rs=function(){var e=/[^.]+$/.exec(ii&&ii.keys&&ii.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Fl(e){return!!rs&&rs in e}u(Fl,"isMasked");var Hf=Fl,Uf=Function.prototype,Kf=Uf.toString;function Vl(e){if(e!=null){try{return Kf.call(e)}catch{}try{return e+""}catch{}}return""}u(Vl,"toSource");var Gf=Vl,Zf=/[\\^$.*+?()[\]{}|]/g,$f=/^\[object .+?Constructor\]$/,Qf=Function.prototype,Jf=Object.prototype,ep=Qf.toString,tp=Jf.hasOwnProperty,np=RegExp("^"+ep.call(tp).replace(Zf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jl(e){if(!wn(e)||Hf(e))return!1;var t=Wf(e)?np:$f;return t.test(Gf(e))}u(jl,"baseIsNative");var rp=jl;function Yl(e,t){return e==null?void 0:e[t]}u(Yl,"getValue$1");var ap=Yl;function Xl(e,t){var n=ap(e,t);return rp(n)?n:void 0}u(Xl,"getNative");var $i=Xl,ip=$i(Object,"create"),Dr=ip;function Wl(){this.__data__=Dr?Dr(null):{},this.size=0}u(Wl,"hashClear");var op=Wl;function ql(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}u(ql,"hashDelete");var sp=ql,lp="__lodash_hash_undefined__",up=Object.prototype,cp=up.hasOwnProperty;function Hl(e){var t=this.__data__;if(Dr){var n=t[e];return n===lp?void 0:n}return cp.call(t,e)?t[e]:void 0}u(Hl,"hashGet");var dp=Hl,hp=Object.prototype,fp=hp.hasOwnProperty;function Ul(e){var t=this.__data__;return Dr?t[e]!==void 0:fp.call(t,e)}u(Ul,"hashHas");var pp=Ul,gp="__lodash_hash_undefined__";function Kl(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Dr&&t===void 0?gp:t,this}u(Kl,"hashSet");var vp=Kl;function Dn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u(Dn,"Hash");Dn.prototype.clear=op;Dn.prototype.delete=sp;Dn.prototype.get=dp;Dn.prototype.has=pp;Dn.prototype.set=vp;var as=Dn;function Gl(){this.__data__=[],this.size=0}u(Gl,"listCacheClear");var yp=Gl;function Zl(e,t){return e===t||e!==e&&t!==t}u(Zl,"eq");var $l=Zl;function Ql(e,t){for(var n=e.length;n--;)if($l(e[n][0],t))return n;return-1}u(Ql,"assocIndexOf");var za=Ql,mp=Array.prototype,bp=mp.splice;function Jl(e){var t=this.__data__,n=za(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():bp.call(t,n,1),--this.size,!0}u(Jl,"listCacheDelete");var xp=Jl;function eu(e){var t=this.__data__,n=za(t,e);return n<0?void 0:t[n][1]}u(eu,"listCacheGet");var wp=eu;function tu(e){return za(this.__data__,e)>-1}u(tu,"listCacheHas");var Ep=tu;function nu(e,t){var n=this.__data__,r=za(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}u(nu,"listCacheSet");var Cp=nu;function kn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u(kn,"ListCache");kn.prototype.clear=yp;kn.prototype.delete=xp;kn.prototype.get=wp;kn.prototype.has=Ep;kn.prototype.set=Cp;var Tp=kn,Sp=$i(Ra,"Map"),Pp=Sp;function ru(){this.size=0,this.__data__={hash:new as,map:new(Pp||Tp),string:new as}}u(ru,"mapCacheClear");var Dp=ru;function au(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}u(au,"isKeyable");var kp=au;function iu(e,t){var n=e.__data__;return kp(t)?n[typeof t=="string"?"string":"hash"]:n.map}u(iu,"getMapData");var Fa=iu;function ou(e){var t=Fa(this,e).delete(e);return this.size-=t?1:0,t}u(ou,"mapCacheDelete");var Ap=ou;function su(e){return Fa(this,e).get(e)}u(su,"mapCacheGet");var Bp=su;function lu(e){return Fa(this,e).has(e)}u(lu,"mapCacheHas");var _p=lu;function uu(e,t){var n=Fa(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}u(uu,"mapCacheSet");var Ip=uu;function An(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u(An,"MapCache");An.prototype.clear=Dp;An.prototype.delete=Ap;An.prototype.get=Bp;An.prototype.has=_p;An.prototype.set=Ip;var cu=An,Mp="Expected a function";function Va(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Mp);var n=u(function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o},"memoized");return n.cache=new(Va.Cache||cu),n}u(Va,"memoize");Va.Cache=cu;var Rp=Va,Lp=500;function du(e){var t=Rp(e,function(r){return n.size===Lp&&n.clear(),r}),n=t.cache;return t}u(du,"memoizeCapped");var Np=du,Op=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zp=/\\(\\)?/g,Fp=Np(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Op,function(n,r,a,i){t.push(a?i.replace(zp,"$1"):r||n)}),t}),hu=Fp;function fu(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}u(fu,"arrayMap");var pu=fu,is=Hn?Hn.prototype:void 0,os=is?is.toString:void 0;function Qi(e){if(typeof e=="string")return e;if(Oa(e))return pu(e,Qi)+"";if(Lr(e))return os?os.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}u(Qi,"baseToString");var Vp=Qi;function gu(e){return e==null?"":Vp(e)}u(gu,"toString$1");var vu=gu;function yu(e,t){return Oa(e)?e:Ff(e,t)?[e]:hu(vu(e))}u(yu,"castPath");var mu=yu;function bu(e){if(typeof e=="string"||Lr(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}u(bu,"toKey");var Ji=bu;function xu(e,t){t=mu(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Ji(t[n++])];return n&&n==r?e:void 0}u(xu,"baseGet");var jp=xu;function wu(e,t,n){var r=e==null?void 0:jp(e,t);return r===void 0?n:r}u(wu,"get");var Yp=wu,Xp=function(){try{var e=$i(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ss=Xp;function Eu(e,t,n){t=="__proto__"&&ss?ss(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}u(Eu,"baseAssignValue");var Wp=Eu,qp=Object.prototype,Hp=qp.hasOwnProperty;function Cu(e,t,n){var r=e[t];(!(Hp.call(e,t)&&$l(r,n))||n===void 0&&!(t in e))&&Wp(e,t,n)}u(Cu,"assignValue");var Up=Cu,Kp=9007199254740991,Gp=/^(?:0|[1-9]\d*)$/;function Tu(e,t){var n=typeof e;return t=t??Kp,!!t&&(n=="number"||n!="symbol"&&Gp.test(e))&&e>-1&&e%1==0&&e<t}u(Tu,"isIndex");var Zp=Tu;function Su(e,t,n,r){if(!wn(e))return e;t=mu(t,e);for(var a=-1,i=t.length,o=i-1,c=e;c!=null&&++a<i;){var l=Ji(t[a]),s=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(a!=o){var d=c[l];s=r?r(d,l,c):void 0,s===void 0&&(s=wn(d)?d:Zp(t[a+1])?[]:{})}Up(c,l,s),c=c[l]}return e}u(Su,"baseSet");var $p=Su;function Pu(e,t,n){return e==null?e:$p(e,t,n)}u(Pu,"set");var Qp=Pu;function Du(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}u(Du,"copyArray");var Jp=Du;function ku(e){return Oa(e)?pu(e,Ji):Lr(e)?[e]:Jp(hu(vu(e)))}u(ku,"toPath");var eg=ku,tg={data:u(function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:u(function(n){},"beforeGet"),beforeSet:u(function(n,r){},"beforeSet"),onSet:u(function(n){},"onSet"),canSet:u(function(n){return!0},"canSet")};return e=pe({},t,e),u(function(n,r){var a=e,i=this,o=i.length!==void 0,c=o?i:[i],l=o?i[0]:i;if(ce(n)){var s=n.indexOf(".")!==-1,d=s&&eg(n);if(a.allowGetting&&r===void 0){var h;return l&&(a.beforeGet(l),d&&l._private[a.field][n]===void 0?h=Yp(l._private[a.field],d):h=l._private[a.field][n]),h}else if(a.allowSetting&&r!==void 0){var f=!a.immutableKeys[n];if(f){var p=Vi({},n,r);a.beforeSet(i,p);for(var g=0,y=c.length;g<y;g++){var b=c[g];a.canSet(b)&&(d&&l._private[a.field][n]===void 0?Qp(b._private[a.field],d,r):b._private[a.field][n]=r)}a.updateStyle&&i.updateStyle(),a.onSet(i),a.settingTriggersEvent&&i[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&ke(n)){var v=n,m,x,w=Object.keys(v);a.beforeSet(i,v);for(var P=0;P<w.length;P++){m=w[P],x=v[m];var T=!a.immutableKeys[m];if(T)for(var E=0;E<c.length;E++){var S=c[E];a.canSet(S)&&(S._private[a.field][m]=x)}}a.updateStyle&&i.updateStyle(),a.onSet(i),a.settingTriggersEvent&&i[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&Fe(n)){var A=n;i.on(a.bindingEvent,A)}else if(a.allowGetting&&n===void 0){var B;return l&&(a.beforeGet(l),B=l._private[a.field]),B}return i},"dataImpl")},"data"),removeData:u(function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=pe({},t,e),u(function(n){var r=e,a=this,i=a.length!==void 0,o=i?a:[a];if(ce(n)){for(var c=n.split(/\s+/),l=c.length,s=0;s<l;s++){var d=c[s];if(!rn(d)){var h=!r.immutableKeys[d];if(h)for(var f=0,p=o.length;f<p;f++)o[f]._private[r.field][d]=void 0}}r.triggerEvent&&a[r.triggerFnName](r.event)}else if(n===void 0){for(var g=0,y=o.length;g<y;g++)for(var b=o[g]._private[r.field],v=Object.keys(b),m=0;m<v.length;m++){var x=v[m],w=!r.immutableKeys[x];w&&(b[x]=void 0)}r.triggerEvent&&a[r.triggerFnName](r.event)}return a},"removeDataImpl")},"removeData")},ng={eventAliasesOn:u(function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,r){var a=this,i=Array.prototype.slice.call(arguments,0);return new Qn(function(o,c){var l=u(function(h){a.off.apply(a,d),o(h)},"callback"),s=i.concat([l]),d=s.concat([]);a.on.apply(a,s)})}},"eventAliasesOn")},Be={};[Lf,tg,ng].forEach(function(e){pe(Be,e)});var rg={animate:Be.animate(),animation:Be.animation(),animated:Be.animated(),clearQueue:Be.clearQueue(),delay:Be.delay(),delayAnimation:Be.delayAnimation(),stop:Be.stop()},ua={classes:u(function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(p){return n.push(p)}),n}else Me(e)||(e=(e||"").match(/\S+/g)||[]);for(var r=[],a=new $n(e),i=0;i<t.length;i++){for(var o=t[i],c=o._private,l=c.classes,s=!1,d=0;d<e.length;d++){var h=e[d],f=l.has(h);if(!f){s=!0;break}}s||(s=l.size!==e.length),s&&(c.classes=a,r.push(o))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),t},"classes"),addClass:u(function(e){return this.toggleClass(e,!0)},"addClass"),hasClass:u(function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},"hasClass"),toggleClass:u(function(e,t){Me(e)||(e=e.match(/\S+/g)||[]);for(var n=this,r=t===void 0,a=[],i=0,o=n.length;i<o;i++)for(var c=n[i],l=c._private.classes,s=!1,d=0;d<e.length;d++){var h=e[d],f=l.has(h),p=!1;t||r&&!f?(l.add(h),p=!0):(!t||r&&f)&&(l.delete(h),p=!0),!s&&p&&(a.push(c),s=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},"toggleClass"),removeClass:u(function(e){return this.toggleClass(e,!1)},"removeClass"),flashClass:u(function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n},"flashClass")};ua.className=ua.classNames=ua.classes;var De={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Ke,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};De.variable="(?:[\\w-.]|(?:\\\\"+De.metaChar+"))+";De.className="(?:[\\w-]|(?:\\\\"+De.metaChar+"))+";De.value=De.string+"|"+De.number;De.id=De.variable;(function(){var e,t,n;for(e=De.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],De.comparatorOp+="|@"+t;for(e=De.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],!(t.indexOf("!")>=0)&&t!=="="&&(De.comparatorOp+="|\\!"+t)})();var Ie=u(function(){return{checks:[]}},"newQuery"),oe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},yi=[{selector:":selected",matches:u(function(e){return e.selected()},"matches")},{selector:":unselected",matches:u(function(e){return!e.selected()},"matches")},{selector:":selectable",matches:u(function(e){return e.selectable()},"matches")},{selector:":unselectable",matches:u(function(e){return!e.selectable()},"matches")},{selector:":locked",matches:u(function(e){return e.locked()},"matches")},{selector:":unlocked",matches:u(function(e){return!e.locked()},"matches")},{selector:":visible",matches:u(function(e){return e.visible()},"matches")},{selector:":hidden",matches:u(function(e){return!e.visible()},"matches")},{selector:":transparent",matches:u(function(e){return e.transparent()},"matches")},{selector:":grabbed",matches:u(function(e){return e.grabbed()},"matches")},{selector:":free",matches:u(function(e){return!e.grabbed()},"matches")},{selector:":removed",matches:u(function(e){return e.removed()},"matches")},{selector:":inside",matches:u(function(e){return!e.removed()},"matches")},{selector:":grabbable",matches:u(function(e){return e.grabbable()},"matches")},{selector:":ungrabbable",matches:u(function(e){return!e.grabbable()},"matches")},{selector:":animated",matches:u(function(e){return e.animated()},"matches")},{selector:":unanimated",matches:u(function(e){return!e.animated()},"matches")},{selector:":parent",matches:u(function(e){return e.isParent()},"matches")},{selector:":childless",matches:u(function(e){return e.isChildless()},"matches")},{selector:":child",matches:u(function(e){return e.isChild()},"matches")},{selector:":orphan",matches:u(function(e){return e.isOrphan()},"matches")},{selector:":nonorphan",matches:u(function(e){return e.isChild()},"matches")},{selector:":compound",matches:u(function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()},"matches")},{selector:":loop",matches:u(function(e){return e.isLoop()},"matches")},{selector:":simple",matches:u(function(e){return e.isSimple()},"matches")},{selector:":active",matches:u(function(e){return e.active()},"matches")},{selector:":inactive",matches:u(function(e){return!e.active()},"matches")},{selector:":backgrounding",matches:u(function(e){return e.backgrounding()},"matches")},{selector:":nonbackgrounding",matches:u(function(e){return!e.backgrounding()},"matches")}].sort(function(e,t){return pd(e.selector,t.selector)}),ag=function(){for(var e={},t,n=0;n<yi.length;n++)t=yi[n],e[t.selector]=t.matches;return e}(),ig=u(function(e,t){return ag[e](t)},"stateSelectorMatches"),og="("+yi.map(function(e){return e.selector}).join("|")+")",Mn=u(function(e){return e.replace(new RegExp("\\\\("+De.metaChar+")","g"),function(t,n){return n})},"cleanMetaChars"),Qt=u(function(e,t,n){e[e.length-1]=n},"replaceLastQuery"),mi=[{name:"group",query:!0,regex:"("+De.group+")",populate:u(function(e,t,n){var r=Ye(n,1),a=r[0];t.checks.push({type:oe.GROUP,value:a==="*"?a:a+"s"})},"populate")},{name:"state",query:!0,regex:og,populate:u(function(e,t,n){var r=Ye(n,1),a=r[0];t.checks.push({type:oe.STATE,value:a})},"populate")},{name:"id",query:!0,regex:"\\#("+De.id+")",populate:u(function(e,t,n){var r=Ye(n,1),a=r[0];t.checks.push({type:oe.ID,value:Mn(a)})},"populate")},{name:"className",query:!0,regex:"\\.("+De.className+")",populate:u(function(e,t,n){var r=Ye(n,1),a=r[0];t.checks.push({type:oe.CLASS,value:Mn(a)})},"populate")},{name:"dataExists",query:!0,regex:"\\[\\s*("+De.variable+")\\s*\\]",populate:u(function(e,t,n){var r=Ye(n,1),a=r[0];t.checks.push({type:oe.DATA_EXIST,field:Mn(a)})},"populate")},{name:"dataCompare",query:!0,regex:"\\[\\s*("+De.variable+")\\s*("+De.comparatorOp+")\\s*("+De.value+")\\s*\\]",populate:u(function(e,t,n){var r=Ye(n,3),a=r[0],i=r[1],o=r[2],c=new RegExp("^"+De.string+"$").exec(o)!=null;c?o=o.substring(1,o.length-1):o=parseFloat(o),t.checks.push({type:oe.DATA_COMPARE,field:Mn(a),operator:i,value:o})},"populate")},{name:"dataBool",query:!0,regex:"\\[\\s*("+De.boolOp+")\\s*("+De.variable+")\\s*\\]",populate:u(function(e,t,n){var r=Ye(n,2),a=r[0],i=r[1];t.checks.push({type:oe.DATA_BOOL,field:Mn(i),operator:a})},"populate")},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+De.meta+")\\s*("+De.comparatorOp+")\\s*("+De.number+")\\s*\\]\\]",populate:u(function(e,t,n){var r=Ye(n,3),a=r[0],i=r[1],o=r[2];t.checks.push({type:oe.META_COMPARE,field:Mn(a),operator:i,value:parseFloat(o)})},"populate")},{name:"nextQuery",separator:!0,regex:De.separator,populate:u(function(e,t){var n=e.currentSubject,r=e.edgeCount,a=e.compoundCount,i=e[e.length-1];n!=null&&(i.subject=n,e.currentSubject=null),i.edgeCount=r,i.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=Ie();return o},"populate")},{name:"directedEdge",separator:!0,regex:De.directedEdge,populate:u(function(e,t){if(e.currentSubject==null){var n=Ie(),r=t,a=Ie();return n.checks.push({type:oe.DIRECTED_EDGE,source:r,target:a}),Qt(e,t,n),e.edgeCount++,a}else{var i=Ie(),o=t,c=Ie();return i.checks.push({type:oe.NODE_SOURCE,source:o,target:c}),Qt(e,t,i),e.edgeCount++,c}},"populate")},{name:"undirectedEdge",separator:!0,regex:De.undirectedEdge,populate:u(function(e,t){if(e.currentSubject==null){var n=Ie(),r=t,a=Ie();return n.checks.push({type:oe.UNDIRECTED_EDGE,nodes:[r,a]}),Qt(e,t,n),e.edgeCount++,a}else{var i=Ie(),o=t,c=Ie();return i.checks.push({type:oe.NODE_NEIGHBOR,node:o,neighbor:c}),Qt(e,t,i),c}},"populate")},{name:"child",separator:!0,regex:De.child,populate:u(function(e,t){if(e.currentSubject==null){var n=Ie(),r=Ie(),a=e[e.length-1];return n.checks.push({type:oe.CHILD,parent:a,child:r}),Qt(e,t,n),e.compoundCount++,r}else if(e.currentSubject===t){var i=Ie(),o=e[e.length-1],c=Ie(),l=Ie(),s=Ie(),d=Ie();return i.checks.push({type:oe.COMPOUND_SPLIT,left:o,right:c,subject:l}),l.checks=t.checks,t.checks=[{type:oe.TRUE}],d.checks.push({type:oe.TRUE}),c.checks.push({type:oe.PARENT,parent:d,child:s}),Qt(e,o,i),e.currentSubject=l,e.compoundCount++,s}else{var h=Ie(),f=Ie(),p=[{type:oe.PARENT,parent:h,child:f}];return h.checks=t.checks,t.checks=p,e.compoundCount++,f}},"populate")},{name:"descendant",separator:!0,regex:De.descendant,populate:u(function(e,t){if(e.currentSubject==null){var n=Ie(),r=Ie(),a=e[e.length-1];return n.checks.push({type:oe.DESCENDANT,ancestor:a,descendant:r}),Qt(e,t,n),e.compoundCount++,r}else if(e.currentSubject===t){var i=Ie(),o=e[e.length-1],c=Ie(),l=Ie(),s=Ie(),d=Ie();return i.checks.push({type:oe.COMPOUND_SPLIT,left:o,right:c,subject:l}),l.checks=t.checks,t.checks=[{type:oe.TRUE}],d.checks.push({type:oe.TRUE}),c.checks.push({type:oe.ANCESTOR,ancestor:d,descendant:s}),Qt(e,o,i),e.currentSubject=l,e.compoundCount++,s}else{var h=Ie(),f=Ie(),p=[{type:oe.ANCESTOR,ancestor:h,descendant:f}];return h.checks=t.checks,t.checks=p,e.compoundCount++,f}},"populate")},{name:"subject",modifier:!0,regex:De.subject,populate:u(function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return _e("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],r=n.checks[0],a=r==null?null:r.type;a===oe.DIRECTED_EDGE?r.type=oe.NODE_TARGET:a===oe.UNDIRECTED_EDGE&&(r.type=oe.NODE_NEIGHBOR,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)},"populate")}];mi.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var sg=u(function(e){for(var t,n,r,a=0;a<mi.length;a++){var i=mi[a],o=i.name,c=e.match(i.regexObj);if(c!=null){n=c,t=i,r=o;var l=c[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:r,remaining:e}},"consumeExpr"),lg=u(function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},"consumeWhitespace"),ug=u(function(e){var t=this,n=t.inputText=e,r=t[0]=Ie();for(t.length=1,n=lg(n);;){var a=sg(n);if(a.expr==null)return _e("The selector `"+e+"`is invalid"),!1;var i=a.match.slice(1),o=a.expr.populate(t,r,i);if(o===!1)return!1;if(o!=null&&(r=o),n=a.remaining,n.match(/^\s*$/))break}var c=t[t.length-1];t.currentSubject!=null&&(c.subject=t.currentSubject),c.edgeCount=t.edgeCount,c.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var s=t[l];if(s.compoundCount>0&&s.edgeCount>0)return _e("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(s.edgeCount>1)return _e("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;s.edgeCount===1&&_e("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},"parse"),cg=u(function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=u(function(l){return l??""},"clean"),t=u(function(l){return ce(l)?'"'+l+'"':e(l)},"cleanVal"),n=u(function(l){return" "+l+" "},"space"),r=u(function(l,s){var d=l.type,h=l.value;switch(d){case oe.GROUP:{var f=e(h);return f.substring(0,f.length-1)}case oe.DATA_COMPARE:{var p=l.field,g=l.operator;return"["+p+n(e(g))+t(h)+"]"}case oe.DATA_BOOL:{var y=l.operator,b=l.field;return"["+e(y)+b+"]"}case oe.DATA_EXIST:{var v=l.field;return"["+v+"]"}case oe.META_COMPARE:{var m=l.operator,x=l.field;return"[["+x+n(e(m))+t(h)+"]]"}case oe.STATE:return h;case oe.ID:return"#"+h;case oe.CLASS:return"."+h;case oe.PARENT:case oe.CHILD:return a(l.parent,s)+n(">")+a(l.child,s);case oe.ANCESTOR:case oe.DESCENDANT:return a(l.ancestor,s)+" "+a(l.descendant,s);case oe.COMPOUND_SPLIT:{var w=a(l.left,s),P=a(l.subject,s),T=a(l.right,s);return w+(w.length>0?" ":"")+P+T}case oe.TRUE:return""}},"checkToString"),a=u(function(l,s){return l.checks.reduce(function(d,h,f){return d+(s===l&&f===0?"$":"")+r(h,s)},"")},"queryToString"),i="",o=0;o<this.length;o++){var c=this[o];i+=a(c,c.subject),this.length>1&&o<this.length-1&&(i+=", ")}return this.toStringCache=i,i},"toString"),dg={parse:ug,toString:cg},Au=u(function(e,t,n){var r,a=ce(e),i=te(e),o=ce(n),c,l,s=!1,d=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),d=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),s=!0),(a||o||s)&&(c=!a&&!i?"":""+e,l=""+n),s&&(e=c=c.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":r=c.indexOf(l)>=0;break;case"$=":r=c.indexOf(l,c.length-l.length)>=0;break;case"^=":r=c.indexOf(l)===0;break;case"=":r=e===n;break;case">":h=!0,r=e>n;break;case">=":h=!0,r=e>=n;break;case"<":h=!0,r=e<n;break;case"<=":h=!0,r=e<=n;break;default:r=!1;break}return d&&(e!=null||!h)&&(r=!r),r},"valCmp"),hg=u(function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},"boolCmp"),fg=u(function(e){return e!==void 0},"existCmp"),eo=u(function(e,t){return e.data(t)},"data"),pg=u(function(e,t){return e[t]()},"meta"),Ve=[],Oe=u(function(e,t){return e.checks.every(function(n){return Ve[n.type](n,t)})},"matches");Ve[oe.GROUP]=function(e,t){var n=e.value;return n==="*"||n===t.group()};Ve[oe.STATE]=function(e,t){var n=e.value;return ig(n,t)};Ve[oe.ID]=function(e,t){var n=e.value;return t.id()===n};Ve[oe.CLASS]=function(e,t){var n=e.value;return t.hasClass(n)};Ve[oe.META_COMPARE]=function(e,t){var n=e.field,r=e.operator,a=e.value;return Au(pg(t,n),r,a)};Ve[oe.DATA_COMPARE]=function(e,t){var n=e.field,r=e.operator,a=e.value;return Au(eo(t,n),r,a)};Ve[oe.DATA_BOOL]=function(e,t){var n=e.field,r=e.operator;return hg(eo(t,n),r)};Ve[oe.DATA_EXIST]=function(e,t){var n=e.field;return e.operator,fg(eo(t,n))};Ve[oe.UNDIRECTED_EDGE]=function(e,t){var n=e.nodes[0],r=e.nodes[1],a=t.source(),i=t.target();return Oe(n,a)&&Oe(r,i)||Oe(r,a)&&Oe(n,i)};Ve[oe.NODE_NEIGHBOR]=function(e,t){return Oe(e.node,t)&&t.neighborhood().some(function(n){return n.isNode()&&Oe(e.neighbor,n)})};Ve[oe.DIRECTED_EDGE]=function(e,t){return Oe(e.source,t.source())&&Oe(e.target,t.target())};Ve[oe.NODE_SOURCE]=function(e,t){return Oe(e.source,t)&&t.outgoers().some(function(n){return n.isNode()&&Oe(e.target,n)})};Ve[oe.NODE_TARGET]=function(e,t){return Oe(e.target,t)&&t.incomers().some(function(n){return n.isNode()&&Oe(e.source,n)})};Ve[oe.CHILD]=function(e,t){return Oe(e.child,t)&&Oe(e.parent,t.parent())};Ve[oe.PARENT]=function(e,t){return Oe(e.parent,t)&&t.children().some(function(n){return Oe(e.child,n)})};Ve[oe.DESCENDANT]=function(e,t){return Oe(e.descendant,t)&&t.ancestors().some(function(n){return Oe(e.ancestor,n)})};Ve[oe.ANCESTOR]=function(e,t){return Oe(e.ancestor,t)&&t.descendants().some(function(n){return Oe(e.descendant,n)})};Ve[oe.COMPOUND_SPLIT]=function(e,t){return Oe(e.subject,t)&&Oe(e.left,t)&&Oe(e.right,t)};Ve[oe.TRUE]=function(){return!0};Ve[oe.COLLECTION]=function(e,t){var n=e.value;return n.has(t)};Ve[oe.FILTER]=function(e,t){var n=e.value;return n(t)};var gg=u(function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===oe.ID)return e.getElementById(t[0].checks[0].value).collection();var n=u(function(r){for(var a=0;a<t.length;a++){var i=t[a];if(Oe(i,r))return!0}return!1},"selectorFunction");return t.text()==null&&(n=u(function(){return!0},"selectorFunction")),e.filter(n)},"filter"),vg=u(function(e){for(var t=this,n=0;n<t.length;n++){var r=t[n];if(Oe(r,e))return!0}return!1},"matches"),yg={matches:vg,filter:gg},sn=u(function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||ce(e)&&e.match(/^\s*$/)||(wt(e)?this.addQuery({checks:[{type:oe.COLLECTION,value:e.collection()}]}):Fe(e)?this.addQuery({checks:[{type:oe.FILTER,value:e}]}):ce(e)?this.parse(e)||(this.invalid=!0):ze("A selector must be created from a string; found "))},"Selector"),ln=sn.prototype;[dg,yg].forEach(function(e){return pe(ln,e)});ln.text=function(){return this.inputText};ln.size=function(){return this.length};ln.eq=function(e){return this[e]};ln.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()};ln.addQuery=function(e){this[this.length++]=e};ln.selector=ln.toString;var tn={allAre:u(function(e){var t=new sn(e);return this.every(function(n){return t.matches(n)})},"allAre"),is:u(function(e){var t=new sn(e);return this.some(function(n){return t.matches(n)})},"is"),some:u(function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},"some"),every:u(function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},"every"),same:u(function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(r){return e.hasElementWithId(r.id())})},"same"),anySame:u(function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},"anySame"),allAreNeighbors:u(function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},"allAreNeighbors"),contains:u(function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})},"contains")};tn.allAreNeighbours=tn.allAreNeighbors;tn.has=tn.contains;tn.equal=tn.equals=tn.same;var St=u(function(e,t){return u(function(n,r,a,i){var o=n,c=this,l;if(o==null?l="":wt(o)&&o.length===1&&(l=o.id()),c.length===1&&l){var s=c[0]._private,d=s.traversalCache=s.traversalCache||{},h=d[t]=d[t]||[],f=an(l),p=h[f];return p||(h[f]=e.call(c,n,r,a,i))}else return e.call(c,n,r,a,i)},"traversalCache")},"cache"),Gn={parent:u(function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var a=this[r],i=a._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)},"parent"),parents:u(function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var a=n[r];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},"parents"),commonAncestors:u(function(e){for(var t,n=0;n<this.length;n++){var r=this[n],a=r.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},"commonAncestors"),orphans:u(function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},"orphans"),nonorphans:u(function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},"nonorphans"),children:St(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n],a=r._private.children,i=0;i<a.length;i++)t.push(a[i]);return this.spawn(t,!0).filter(e)},"children"),siblings:u(function(e){return this.parent().children().not(this).filter(e)},"siblings"),isParent:u(function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},"isParent"),isChildless:u(function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},"isChildless"),isChild:u(function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},"isChild"),isOrphan:u(function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},"isOrphan"),descendants:u(function(e){var t=[];function n(r){for(var a=0;a<r.length;a++){var i=r[a];t.push(i),i.children().nonempty()&&n(i.children())}}return u(n,"add"),n(this.children()),this.spawn(t,!0).filter(e)},"descendants")};function ja(e,t,n,r){for(var a=[],i=new $n,o=e.cy(),c=o.hasCompoundNodes(),l=0;l<e.length;l++){var s=e[l];n?a.push(s):c&&r(a,i,s)}for(;a.length>0;){var d=a.shift();t(d),i.add(d.id()),c&&r(a,i,d)}return e}u(ja,"forEachCompound");function to(e,t,n){if(n.isParent())for(var r=n._private.children,a=0;a<r.length;a++){var i=r[a];t.has(i.id())||e.push(i)}}u(to,"addChildren");Gn.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ja(this,e,t,to)};function no(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}u(no,"addParent");Gn.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ja(this,e,t,no)};function Bu(e,t,n){no(e,t,n),to(e,t,n)}u(Bu,"addParentAndChildren");Gn.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ja(this,e,t,Bu)};Gn.ancestors=Gn.parents;var kr,_u;kr=_u={data:Be.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Be.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Be.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Be.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Be.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Be.removeData({field:"rscratch",triggerEvent:!1}),id:u(function(){var e=this[0];if(e)return e._private.data.id},"id")};kr.attr=kr.data;kr.removeAttr=kr.removeData;var mg=_u,Ya={};function ca(e){return function(t){var n=this;if(t===void 0&&(t=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var r=0,a=n[0],i=a._private.edges,o=0;o<i.length;o++){var c=i[o];!t&&c.isLoop()||(r+=e(a,c))}return r}else return}}u(ca,"defineDegreeFunction");pe(Ya,{degree:ca(function(e,t){return t.source().same(t.target())?2:1}),indegree:ca(function(e,t){return t.target().same(e)?1:0}),outdegree:ca(function(e,t){return t.source().same(e)?1:0})});function gn(e,t){return function(n){for(var r,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],c=o[e](n);c!==void 0&&(r===void 0||t(c,r))&&(r=c)}return r}}u(gn,"defineDegreeBoundsFunction");pe(Ya,{minDegree:gn("degree",function(e,t){return e<t}),maxDegree:gn("degree",function(e,t){return e>t}),minIndegree:gn("indegree",function(e,t){return e<t}),maxIndegree:gn("indegree",function(e,t){return e>t}),minOutdegree:gn("outdegree",function(e,t){return e<t}),maxOutdegree:gn("outdegree",function(e,t){return e>t})});pe(Ya,{totalDegree:u(function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t},"totalDegree")});var Bt,Iu,Mu=u(function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if(!a.locked()){var i=a._private.position,o={x:t.x!=null?t.x-i.x:0,y:t.y!=null?t.y-i.y:0};a.isParent()&&!(o.x===0&&o.y===0)&&a.children().shift(o,n),a.dirtyBoundingBoxCache()}}},"beforePositionSet"),ls={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:u(function(e){e.updateCompoundBounds()},"beforeGet"),beforeSet:u(function(e,t){Mu(e,t,!1)},"beforeSet"),onSet:u(function(e){e.dirtyCompoundBoundsCache()},"onSet"),canSet:u(function(e){return!e.locked()},"canSet")};Bt=Iu={position:Be.data(ls),silentPosition:Be.data(pe({},ls,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:u(function(e,t){Mu(e,t,!0)},"beforeSet"),onSet:u(function(e){e.dirtyCompoundBoundsCache()},"onSet")})),positions:u(function(e,t){if(ke(e))t?this.silentPosition(e):this.position(e);else if(Fe(e)){var n=e,r=this.cy();r.startBatch();for(var a=0;a<this.length;a++){var i=this[a],o=void 0;(o=n(i,a))&&(t?i.silentPosition(o):i.position(o))}r.endBatch()}return this},"positions"),silentPositions:u(function(e){return this.positions(e,!0)},"silentPositions"),shift:u(function(e,t,n){var r;if(ke(e)?(r={x:te(e.x)?e.x:0,y:te(e.y)?e.y:0},n=t):ce(e)&&te(t)&&(r={x:0,y:0},r[e]=t),r!=null){var a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i];if(!(a.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var c=o.position(),l={x:c.x+r.x,y:c.y+r.y};n?o.silentPosition(l):o.position(l)}}a.endBatch()}return this},"shift"),silentShift:u(function(e,t){return ke(e)?this.shift(e,!0):ce(e)&&te(t)&&this.shift(e,t,!0),this},"silentShift"),renderedPosition:u(function(e,t){var n=this[0],r=this.cy(),a=r.zoom(),i=r.pan(),o=ke(e)?e:void 0,c=o!==void 0||t!==void 0&&ce(e);if(n&&n.isNode())if(c)for(var l=0;l<this.length;l++){var s=this[l];t!==void 0?s.position(e,(t-i[e])/a):o!==void 0&&s.position(wl(o,a,i))}else{var d=n.position();return o=Na(d,a,i),e===void 0?o:o[e]}else if(!c)return;return this},"renderedPosition"),relativePosition:u(function(e,t){var n=this[0],r=this.cy(),a=ke(e)?e:void 0,i=a!==void 0||t!==void 0&&ce(e),o=r.hasCompoundNodes();if(n&&n.isNode())if(i)for(var c=0;c<this.length;c++){var l=this[c],s=o?l.parent():null,d=s&&s.length>0,h=d;d&&(s=s[0]);var f=h?s.position():{x:0,y:0};t!==void 0?l.position(e,t+f[e]):a!==void 0&&l.position({x:a.x+f.x,y:a.y+f.y})}else{var p=n.position(),g=o?n.parent():null,y=g&&g.length>0,b=y;y&&(g=g[0]);var v=b?g.position():{x:0,y:0};return a={x:p.x-v.x,y:p.y-v.y},e===void 0?a:a[e]}else if(!i)return;return this},"relativePosition")};Bt.modelPosition=Bt.point=Bt.position;Bt.modelPositions=Bt.points=Bt.positions;Bt.renderedPoint=Bt.renderedPosition;Bt.relativePoint=Bt.relativePosition;var bg=Iu,Wn,cn;Wn=cn={};cn.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),a=n.pan(),i=t.x1*r+a.x,o=t.x2*r+a.x,c=t.y1*r+a.y,l=t.y2*r+a.y;return{x1:i,x2:o,y1:c,y2:l,w:o-i,h:l-c}};cn.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();return!t.styleEnabled()||!t.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,e||n.emitAndNotify("bounds")}}),this)};cn.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function n(o){if(!o.isParent())return;var c=o._private,l=o.children(),s=o.pstyle("compound-sizing-wrt-labels").value==="include",d={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},h=l.boundingBox({includeLabels:s,includeOverlays:!1,useCache:!1}),f=c.position;(h.w===0||h.h===0)&&(h={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},h.x1=f.x-h.w/2,h.x2=f.x+h.w/2,h.y1=f.y-h.h/2,h.y2=f.y+h.h/2);function p(A,B,k){var D=0,I=0,_=B+k;return A>0&&_>0&&(D=B/_*A,I=k/_*A),{biasDiff:D,biasComplementDiff:I}}u(p,"computeBiasValues");function g(A,B,k,D){if(k.units==="%")switch(D){case"width":return A>0?k.pfValue*A:0;case"height":return B>0?k.pfValue*B:0;case"average":return A>0&&B>0?k.pfValue*(A+B)/2:0;case"min":return A>0&&B>0?A>B?k.pfValue*B:k.pfValue*A:0;case"max":return A>0&&B>0?A>B?k.pfValue*A:k.pfValue*B:0;default:return 0}else return k.units==="px"?k.pfValue:0}u(g,"computePaddingValues");var y=d.width.left.value;d.width.left.units==="px"&&d.width.val>0&&(y=y*100/d.width.val);var b=d.width.right.value;d.width.right.units==="px"&&d.width.val>0&&(b=b*100/d.width.val);var v=d.height.top.value;d.height.top.units==="px"&&d.height.val>0&&(v=v*100/d.height.val);var m=d.height.bottom.value;d.height.bottom.units==="px"&&d.height.val>0&&(m=m*100/d.height.val);var x=p(d.width.val-h.w,y,b),w=x.biasDiff,P=x.biasComplementDiff,T=p(d.height.val-h.h,v,m),E=T.biasDiff,S=T.biasComplementDiff;c.autoPadding=g(h.w,h.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),c.autoWidth=Math.max(h.w,d.width.val),f.x=(-w+h.x1+h.x2+P)/2,c.autoHeight=Math.max(h.h,d.height.val),f.y=(-E+h.y1+h.y2+S)/2}u(n,"update");for(var r=0;r<this.length;r++){var a=this[r],i=a._private;(!i.compoundBoundsClean||e)&&(n(a),t.batching()||(i.compoundBoundsClean=!0))}return this};var Tt=u(function(e){return e===1/0||e===-1/0?0:e},"noninf"),kt=u(function(e,t,n,r,a){r-t===0||a-n===0||t==null||n==null||r==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},"updateBounds"),vn=u(function(e,t){return t==null?e:kt(e,t.x1,t.y1,t.x2,t.y2)},"updateBoundsFromBox"),sr=u(function(e,t,n){return At(e,t,n)},"prefixedProperty"),na=u(function(e,t,n){if(!t.cy().headless()){var r=t._private,a=r.rstyle,i=a.arrowWidth/2,o=t.pstyle(n+"-arrow-shape").value,c,l;if(o!=="none"){n==="source"?(c=a.srcX,l=a.srcY):n==="target"?(c=a.tgtX,l=a.tgtY):(c=a.midX,l=a.midY);var s=r.arrowBounds=r.arrowBounds||{},d=s[n]=s[n]||{};d.x1=c-i,d.y1=l-i,d.x2=c+i,d.y2=l+i,d.w=d.x2-d.x1,d.h=d.y2-d.y1,sa(d,1),kt(e,d.x1,d.y1,d.x2,d.y2)}}},"updateBoundsFromArrow"),oi=u(function(e,t,n){if(!t.cy().headless()){var r;n?r=n+"-":r="";var a=t._private,i=a.rstyle,o=t.pstyle(r+"label").strValue;if(o){var c=t.pstyle("text-halign"),l=t.pstyle("text-valign"),s=sr(i,"labelWidth",n),d=sr(i,"labelHeight",n),h=sr(i,"labelX",n),f=sr(i,"labelY",n),p=t.pstyle(r+"text-margin-x").pfValue,g=t.pstyle(r+"text-margin-y").pfValue,y=t.isEdge(),b=t.pstyle(r+"text-rotation"),v=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,x=m/2,w=t.pstyle("text-background-padding").pfValue,P=2,T=d,E=s,S=E/2,A=T/2,B,k,D,I;if(y)B=h-S,k=h+S,D=f-A,I=f+A;else{switch(c.value){case"left":B=h-E,k=h;break;case"center":B=h-S,k=h+S;break;case"right":B=h,k=h+E;break}switch(l.value){case"top":D=f-T,I=f;break;case"center":D=f-A,I=f+A;break;case"bottom":D=f,I=f+T;break}}var _=p-Math.max(v,x)-w-P,R=p+Math.max(v,x)+w+P,z=g-Math.max(v,x)-w-P,N=g+Math.max(v,x)+w+P;B+=_,k+=R,D+=z,I+=N;var M=n||"main",L=a.labelBounds,q=L[M]=L[M]||{};q.x1=B,q.y1=D,q.x2=k,q.y2=I,q.w=k-B,q.h=I-D,q.leftPad=_,q.rightPad=R,q.topPad=z,q.botPad=N;var Y=y&&b.strValue==="autorotate",W=b.pfValue!=null&&b.pfValue!==0;if(Y||W){var K=Y?sr(a.rstyle,"labelAngle",n):b.pfValue,J=Math.cos(K),ee=Math.sin(K),Z=(B+k)/2,Q=(D+I)/2;if(!y){switch(c.value){case"left":Z=k;break;case"right":Z=B;break}switch(l.value){case"top":Q=I;break;case"bottom":Q=D;break}}var U=u(function(Pe,we){return Pe=Pe-Z,we=we-Q,{x:Pe*J-we*ee+Z,y:Pe*ee+we*J+Q}},"rotate"),O=U(B,D),X=U(B,I),$=U(k,D),ie=U(k,I);B=Math.min(O.x,X.x,$.x,ie.x),k=Math.max(O.x,X.x,$.x,ie.x),D=Math.min(O.y,X.y,$.y,ie.y),I=Math.max(O.y,X.y,$.y,ie.y)}var se=M+"Rot",ve=L[se]=L[se]||{};ve.x1=B,ve.y1=D,ve.x2=k,ve.y2=I,ve.w=k-B,ve.h=I-D,kt(e,B,D,k,I),kt(a.labelBounds.all,B,D,k,I)}return e}},"updateBoundsFromLabel"),xg=u(function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,r=t.pstyle("outline-width").value;if(n>0&&r>0){var a=t.pstyle("outline-offset").value,i=t.pstyle("shape").value,o=r+a,c=(e.w+o*2)/e.w,l=(e.h+o*2)/e.h,s=0,d=0;["diamond","pentagon","round-triangle"].includes(i)?(c=(e.w+o*2.4)/e.w,d=-o/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(i)?c=(e.w+o*2.4)/e.w:i==="star"?(c=(e.w+o*2.8)/e.w,l=(e.h+o*2.6)/e.h,d=-o/3.8):i==="triangle"?(c=(e.w+o*2.8)/e.w,l=(e.h+o*2.4)/e.h,d=-o/1.4):i==="vee"&&(c=(e.w+o*4.4)/e.w,l=(e.h+o*3.8)/e.h,d=-o*.5);var h=e.h*l-e.h,f=e.w*c-e.w;if(la(e,[Math.ceil(h/2),Math.ceil(f/2)]),s!=0||d!==0){var p=Ah(e,s,d);Cl(e,p)}}}},"updateBoundsFromOutline"),wg=u(function(e,t){var n=e._private.cy,r=n.styleEnabled(),a=n.headless(),i=yt(),o=e._private,c=e.isNode(),l=e.isEdge(),s,d,h,f,p,g,y=o.rstyle,b=c&&r?e.pstyle("bounds-expansion").pfValue:[0],v=u(function(ve){return ve.pstyle("display").value!=="none"},"isDisplayed"),m=!r||v(e)&&(!l||v(e.source())&&v(e.target()));if(m){var x=0,w=0;r&&t.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(w=e.pstyle("overlay-padding").value));var P=0,T=0;r&&t.includeUnderlays&&(P=e.pstyle("underlay-opacity").value,P!==0&&(T=e.pstyle("underlay-padding").value));var E=Math.max(w,T),S=0,A=0;if(r&&(S=e.pstyle("width").pfValue,A=S/2),c&&t.includeNodes){var B=e.position();p=B.x,g=B.y;var k=e.outerWidth(),D=k/2,I=e.outerHeight(),_=I/2;s=p-D,d=p+D,h=g-_,f=g+_,kt(i,s,h,d,f),r&&t.includeOutlines&&xg(i,e)}else if(l&&t.includeEdges)if(r&&!a){var R=e.pstyle("curve-style").strValue;if(s=Math.min(y.srcX,y.midX,y.tgtX),d=Math.max(y.srcX,y.midX,y.tgtX),h=Math.min(y.srcY,y.midY,y.tgtY),f=Math.max(y.srcY,y.midY,y.tgtY),s-=A,d+=A,h-=A,f+=A,kt(i,s,h,d,f),R==="haystack"){var z=y.haystackPts;if(z&&z.length===2){if(s=z[0].x,h=z[0].y,d=z[1].x,f=z[1].y,s>d){var N=s;s=d,d=N}if(h>f){var M=h;h=f,f=M}kt(i,s-A,h-A,d+A,f+A)}}else if(R==="bezier"||R==="unbundled-bezier"||R.endsWith("segments")||R.endsWith("taxi")){var L;switch(R){case"bezier":case"unbundled-bezier":L=y.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":L=y.linePts;break}if(L!=null)for(var q=0;q<L.length;q++){var Y=L[q];s=Y.x-A,d=Y.x+A,h=Y.y-A,f=Y.y+A,kt(i,s,h,d,f)}}}else{var W=e.source(),K=W.position(),J=e.target(),ee=J.position();if(s=K.x,d=ee.x,h=K.y,f=ee.y,s>d){var Z=s;s=d,d=Z}if(h>f){var Q=h;h=f,f=Q}s-=A,d+=A,h-=A,f+=A,kt(i,s,h,d,f)}if(r&&t.includeEdges&&l&&(na(i,e,"mid-source"),na(i,e,"mid-target"),na(i,e,"source"),na(i,e,"target")),r){var U=e.pstyle("ghost").value==="yes";if(U){var O=e.pstyle("ghost-offset-x").pfValue,X=e.pstyle("ghost-offset-y").pfValue;kt(i,i.x1+O,i.y1+X,i.x2+O,i.y2+X)}}var $=o.bodyBounds=o.bodyBounds||{};jo($,i),la($,b),sa($,1),r&&(s=i.x1,d=i.x2,h=i.y1,f=i.y2,kt(i,s-E,h-E,d+E,f+E));var ie=o.overlayBounds=o.overlayBounds||{};jo(ie,i),la(ie,b),sa(ie,1);var se=o.labelBounds=o.labelBounds||{};se.all!=null?kh(se.all):se.all=yt(),r&&t.includeLabels&&(t.includeMainLabels&&oi(i,e,null),l&&(t.includeSourceLabels&&oi(i,e,"source"),t.includeTargetLabels&&oi(i,e,"target")))}return i.x1=Tt(i.x1),i.y1=Tt(i.y1),i.x2=Tt(i.x2),i.y2=Tt(i.y2),i.w=Tt(i.x2-i.x1),i.h=Tt(i.y2-i.y1),i.w>0&&i.h>0&&m&&(la(i,b),sa(i,1)),i},"boundingBoxImpl"),Ru=u(function(e){var t=0,n=u(function(a){return(a?1:0)<<t++},"tf"),r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeMainLabels),r+=n(e.includeSourceLabels),r+=n(e.includeTargetLabels),r+=n(e.includeOverlays),r+=n(e.includeOutlines),r},"getKey"),Lu=u(function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),r=u(function(a){return Math.round(a)},"r");return Gd([r(t.x),r(t.y),r(n.x),r(n.y)])}else return 0},"getBoundingBoxPosKey"),us=u(function(e,t){var n=e._private,r,a=e.isEdge(),i=t==null?cs:Ru(t),o=i===cs,c=Lu(e),l=n.bbCachePosKey===c,s=t.useCache&&l,d=u(function(p){return p._private.bbCache==null||p._private.styleDirty},"isDirty"),h=!s||d(e)||a&&(d(e.source())||d(e.target()));if(h?(l||e.recalculateRenderedStyle(s),r=wg(e,Ar),n.bbCache=r,n.bbCachePosKey=c):r=n.bbCache,!o){var f=e.isNode();r=yt(),(t.includeNodes&&f||t.includeEdges&&!f)&&(t.includeOverlays?vn(r,n.overlayBounds):vn(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?vn(r,n.labelBounds.all):(t.includeMainLabels&&vn(r,n.labelBounds.mainRot),t.includeSourceLabels&&vn(r,n.labelBounds.sourceRot),t.includeTargetLabels&&vn(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},"cachedBoundingBoxImpl"),Ar={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},cs=Ru(Ar),ds=Je(Ar);cn.boundingBox=function(e){var t;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(e===void 0||e.useCache===void 0||e.useCache===!0))e===void 0?e=Ar:e=ds(e),t=us(this[0],e);else{t=yt(),e=e||Ar;var n=ds(e),r=this,a=r.cy(),i=a.styleEnabled();if(i)for(var o=0;o<r.length;o++){var c=r[o],l=c._private,s=Lu(c),d=l.bbCachePosKey===s,h=n.useCache&&d&&!l.styleDirty;c.recalculateRenderedStyle(h)}this.updateCompoundBounds(!e.useCache);for(var f=0;f<r.length;f++){var p=r[f];vn(t,us(p,n))}}return t.x1=Tt(t.x1),t.y1=Tt(t.y1),t.x2=Tt(t.x2),t.y2=Tt(t.y2),t.w=Tt(t.x2-t.x1),t.h=Tt(t.y2-t.y1),t};cn.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};cn.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),a=n.collection();if(r&&(a=t.filter(function(s){return s.isParent()}),t=t.not(a)),ke(e)){var i=e;e=u(function(){return i},"fn")}var o=u(function(s,d){return s._private.bbAtOldPos=e(s,d)},"storeOldPos"),c=u(function(s){return s._private.bbAtOldPos},"getOldPos");n.startBatch(),t.forEach(o).silentPositions(e),r&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=Dh(this.boundingBox({useCache:!1}));return t.silentPositions(c),r&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),n.endBatch(),l};Wn.boundingbox=Wn.bb=Wn.boundingBox;Wn.renderedBoundingbox=Wn.renderedBoundingBox;var Eg=cn,fr,Fr;fr=Fr={};var Nu=u(function(e){e.uppercaseName=Ro(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Ro(e.outerName),fr[e.name]=u(function(){var t=this[0],n=t._private,r=n.cy,a=r._private.styleEnabled;if(t)if(a){if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var i=t.pstyle(e.name);switch(i.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return i.pfValue}}else return 1},"dimImpl"),fr["outer"+e.uppercaseName]=u(function(){var t=this[0],n=t._private,r=n.cy,a=r._private.styleEnabled;if(t)if(a){var i=t[e.name](),o=t.pstyle("border-width").pfValue,c=2*t.padding();return i+o+c}else return 1},"outerDimImpl"),fr["rendered"+e.uppercaseName]=u(function(){var t=this[0];if(t){var n=t[e.name]();return n*this.cy().zoom()}},"renderedDimImpl"),fr["rendered"+e.uppercaseOuterName]=u(function(){var t=this[0];if(t){var n=t[e.outerName]();return n*this.cy().zoom()}},"renderedOuterDimImpl")},"defineDimFns");Nu({name:"width"});Nu({name:"height"});Fr.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),t.autoPadding!==void 0?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue};Fr.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()};Fr.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Cg=Fr,Tg=u(function(e,t){if(e.isEdge())return t(e)},"ifEdge"),Sg=u(function(e,t){if(e.isEdge()){var n=e.cy();return Na(t(e),n.zoom(),n.pan())}},"ifEdgeRenderedPosition"),Pg=u(function(e,t){if(e.isEdge()){var n=e.cy(),r=n.pan(),a=n.zoom();return t(e).map(function(i){return Na(i,a,r)})}},"ifEdgeRenderedPositions"),Dg=u(function(e){return e.renderer().getControlPoints(e)},"controlPoints"),kg=u(function(e){return e.renderer().getSegmentPoints(e)},"segmentPoints"),Ag=u(function(e){return e.renderer().getSourceEndpoint(e)},"sourceEndpoint"),Bg=u(function(e){return e.renderer().getTargetEndpoint(e)},"targetEndpoint"),_g=u(function(e){return e.renderer().getEdgeMidpoint(e)},"midpoint"),hs={controlPoints:{get:Dg,mult:!0},segmentPoints:{get:kg,mult:!0},sourceEndpoint:{get:Ag},targetEndpoint:{get:Bg},midpoint:{get:_g}},Ig=u(function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},"renderedName"),Mg=Object.keys(hs).reduce(function(e,t){var n=hs[t],r=Ig(t);return e[t]=function(){return Tg(this,n.get)},n.mult?e[r]=function(){return Pg(this,n.get)}:e[r]=function(){return Sg(this,n.get)},e},{}),Rg=pe({},bg,Eg,Cg,Mg),Ou=u(function(e,t){this.recycle(e,t)},"Event");function Nn(){return!1}u(Nn,"returnFalse");function pr(){return!0}u(pr,"returnTrue");Ou.prototype={instanceString:u(function(){return"event"},"instanceString"),recycle:u(function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Nn,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?pr:Nn):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,r=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*r+a.x,y:n.y*r+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},"recycle"),preventDefault:u(function(){this.isDefaultPrevented=pr;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},"preventDefault"),stopPropagation:u(function(){this.isPropagationStopped=pr;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},"stopPropagation"),stopImmediatePropagation:u(function(){this.isImmediatePropagationStopped=pr,this.stopPropagation()},"stopImmediatePropagation"),isDefaultPrevented:Nn,isPropagationStopped:Nn,isImmediatePropagationStopped:Nn};var zu=/^([^.]+)(\.(?:[^.]+))?$/,Lg=".*",Fu={qualifierCompare:u(function(e,t){return e===t},"qualifierCompare"),eventMatches:u(function(){return!0},"eventMatches"),addEventFields:u(function(){},"addEventFields"),callbackContext:u(function(e){return e},"callbackContext"),beforeEmit:u(function(){},"beforeEmit"),afterEmit:u(function(){},"afterEmit"),bubble:u(function(){return!1},"bubble"),parent:u(function(){return null},"parent"),context:null},fs=Object.keys(Fu),Ng={};function Vr(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ng,t=arguments.length>1?arguments[1]:void 0,n=0;n<fs.length;n++){var r=fs[n];this[r]=e[r]||Fu[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}u(Vr,"Emitter");var un=Vr.prototype,Vu=u(function(e,t,n,r,a,i,o){Fe(r)&&(a=r,r=null),o&&(i==null?i=o:i=pe({},i,o));for(var c=Me(n)?n:n.split(/\s+/),l=0;l<c.length;l++){var s=c[l];if(!rn(s)){var d=s.match(zu);if(d){var h=d[1],f=d[2]?d[2]:null,p=t(e,s,h,f,r,a,i);if(p===!1)break}}}},"forEachEvent"),ps=u(function(e,t){return e.addEventFields(e.context,t),new Ou(t.type,t)},"makeEventObj"),Og=u(function(e,t,n){if(rd(n)){t(e,n);return}else if(ke(n)){t(e,ps(e,n));return}for(var r=Me(n)?n:n.split(/\s+/),a=0;a<r.length;a++){var i=r[a];if(!rn(i)){var o=i.match(zu);if(o){var c=o[1],l=o[2]?o[2]:null,s=ps(e,{type:c,namespace:l,target:e.context});t(e,s)}}}},"forEachEventObj");un.on=un.addListener=function(e,t,n,r,a){return Vu(this,function(i,o,c,l,s,d,h){Fe(d)&&i.listeners.push({event:o,callback:d,type:c,namespace:l,qualifier:s,conf:h})},e,t,n,r,a),this};un.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})};un.removeListener=un.off=function(e,t,n,r){var a=this;this.emitting!==0&&(this.listeners=eh(this.listeners));for(var i=this.listeners,o=u(function(l){var s=i[l];Vu(a,function(d,h,f,p,g,y){if((s.type===f||e==="*")&&(!p&&s.namespace!==".*"||s.namespace===p)&&(!g||d.qualifierCompare(s.qualifier,g))&&(!y||s.callback===y))return i.splice(l,1),!1},e,t,n,r)},"_loop"),c=i.length-1;c>=0;c--)o(c);return this};un.removeAllListeners=function(){return this.removeListener("*")};un.emit=un.trigger=function(e,t,n){var r=this.listeners,a=r.length;return this.emitting++,Me(t)||(t=[t]),Og(this,function(i,o){n!=null&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],a=r.length);for(var c=u(function(s){var d=r[s];if(d.type===o.type&&(!d.namespace||d.namespace===o.namespace||d.namespace===Lg)&&i.eventMatches(i.context,d,o)){var h=[o];t!=null&&nh(h,t),i.beforeEmit(i.context,d,o),d.conf&&d.conf.one&&(i.listeners=i.listeners.filter(function(g){return g!==d}));var f=i.callbackContext(i.context,d,o),p=d.callback.apply(f,h);i.afterEmit(i.context,d,o),p===!1&&(o.stopPropagation(),o.preventDefault())}},"_loop2"),l=0;l<a;l++)c(l);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,t)},e),this.emitting--,this};var zg={qualifierCompare:u(function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},"qualifierCompare"),eventMatches:u(function(e,t,n){var r=t.qualifier;return r!=null?e!==n.target&&Rr(n.target)&&r.matches(n.target):!0},"eventMatches"),addEventFields:u(function(e,t){t.cy=e.cy(),t.target=e},"addEventFields"),callbackContext:u(function(e,t,n){return t.qualifier!=null?n.target:e},"callbackContext"),beforeEmit:u(function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},"beforeEmit"),bubble:u(function(){return!0},"bubble"),parent:u(function(e){return e.isChild()?e.parent():e.cy()},"parent")},ra=u(function(e){return ce(e)?new sn(e):e},"argSelector"),ju={createEmitter:u(function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Vr(zg,t))}return this},"createEmitter"),emitter:u(function(){return this._private.emitter},"emitter"),on:u(function(e,t,n){for(var r=ra(t),a=0;a<this.length;a++){var i=this[a];i.emitter().on(e,r,n)}return this},"on"),removeListener:u(function(e,t,n){for(var r=ra(t),a=0;a<this.length;a++){var i=this[a];i.emitter().removeListener(e,r,n)}return this},"removeListener"),removeAllListeners:u(function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},"removeAllListeners"),one:u(function(e,t,n){for(var r=ra(t),a=0;a<this.length;a++){var i=this[a];i.emitter().one(e,r,n)}return this},"one"),once:u(function(e,t,n){for(var r=ra(t),a=0;a<this.length;a++){var i=this[a];i.emitter().on(e,r,n,{once:!0,onceCollection:this})}},"once"),emit:u(function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.emitter().emit(e,t)}return this},"emit"),emitAndNotify:u(function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this},"emitAndNotify")};Be.eventAliasesOn(ju);var Yu={nodes:u(function(e){return this.filter(function(t){return t.isNode()}).filter(e)},"nodes"),edges:u(function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},"edges"),byGroup:u(function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):t.push(r)}return{nodes:e,edges:t}},"byGroup"),filter:u(function(e,t){if(e===void 0)return this;if(ce(e)||wt(e))return new sn(e).filter(this);if(Fe(e)){for(var n=this.spawn(),r=this,a=0;a<r.length;a++){var i=r[a],o=t?e.apply(t,[i,a,r]):e(i,a,r);o&&n.push(i)}return n}return this.spawn()},"filter"),not:u(function(e){if(e){ce(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var r=this[n],a=e.has(r);a||t.push(r)}return t}else return this},"not"),absoluteComplement:u(function(){var e=this.cy();return e.mutableElements().not(this)},"absoluteComplement"),intersect:u(function(e){if(ce(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),r=this,a=e,i=this.length<e.length,o=i?r:a,c=i?a:r,l=0;l<o.length;l++){var s=o[l];c.has(s)&&n.push(s)}return n},"intersect"),xor:u(function(e){var t=this._private.cy;ce(e)&&(e=t.$(e));var n=this.spawn(),r=this,a=e,i=u(function(o,c){for(var l=0;l<o.length;l++){var s=o[l],d=s._private.data.id,h=c.hasElementWithId(d);h||n.push(s)}},"add");return i(r,a),i(a,r),n},"xor"),diff:u(function(e){var t=this._private.cy;ce(e)&&(e=t.$(e));var n=this.spawn(),r=this.spawn(),a=this.spawn(),i=this,o=e,c=u(function(l,s,d){for(var h=0;h<l.length;h++){var f=l[h],p=f._private.data.id,g=s.hasElementWithId(p);g?a.merge(f):d.push(f)}},"add");return c(i,o,n),c(o,i,r),{left:n,right:r,both:a}},"diff"),add:u(function(e){var t=this._private.cy;if(!e)return this;if(ce(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=this.spawnSelf(),a=0;a<e.length;a++){var i=e[a],o=!this.has(i);o&&r.push(i)}return r},"add"),merge:u(function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&ce(e)){var r=e;e=n.mutableElements().filter(r)}for(var a=t.map,i=0;i<e.length;i++){var o=e[i],c=o._private.data.id,l=!a.has(c);if(l){var s=this.length++;this[s]=o,a.set(c,{ele:o,index:s})}}return this},"merge"),unmergeAt:u(function(e){var t=this[e],n=t.id(),r=this._private,a=r.map;this[e]=void 0,a.delete(n);var i=e===this.length-1;if(this.length>1&&!i){var o=this.length-1,c=this[o],l=c._private.data.id;this[o]=void 0,this[e]=c,a.set(l,{ele:c,index:e})}return this.length--,this},"unmergeAt"),unmergeOne:u(function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map,a=r.get(n);if(!a)return this;var i=a.index;return this.unmergeAt(i),this},"unmergeOne"),unmerge:u(function(e){var t=this._private.cy;if(!e)return this;if(e&&ce(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},"unmerge"),unmergeBy:u(function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},"unmergeBy"),map:u(function(e,t){for(var n=[],r=this,a=0;a<r.length;a++){var i=r[a],o=t?e.apply(t,[i,a,r]):e(i,a,r);n.push(o)}return n},"map"),reduce:u(function(e,t){for(var n=t,r=this,a=0;a<r.length;a++)n=e(n,r[a],a,r);return n},"reduce"),max:u(function(e,t){for(var n=-1/0,r,a=this,i=0;i<a.length;i++){var o=a[i],c=t?e.apply(t,[o,i,a]):e(o,i,a);c>n&&(n=c,r=o)}return{value:n,ele:r}},"max"),min:u(function(e,t){for(var n=1/0,r,a=this,i=0;i<a.length;i++){var o=a[i],c=t?e.apply(t,[o,i,a]):e(o,i,a);c<n&&(n=c,r=o)}return{value:n,ele:r}},"min")},Ae=Yu;Ae.u=Ae["|"]=Ae["+"]=Ae.union=Ae.or=Ae.add;Ae["\\"]=Ae["!"]=Ae["-"]=Ae.difference=Ae.relativeComplement=Ae.subtract=Ae.not;Ae.n=Ae["&"]=Ae["."]=Ae.and=Ae.intersection=Ae.intersect;Ae["^"]=Ae["(+)"]=Ae["(-)"]=Ae.symmetricDifference=Ae.symdiff=Ae.xor;Ae.fnFilter=Ae.filterFn=Ae.stdFilter=Ae.filter;Ae.complement=Ae.abscomp=Ae.absoluteComplement;var Fg={isNode:u(function(){return this.group()==="nodes"},"isNode"),isEdge:u(function(){return this.group()==="edges"},"isEdge"),isLoop:u(function(){return this.isEdge()&&this.source()[0]===this.target()[0]},"isLoop"),isSimple:u(function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},"isSimple"),group:u(function(){var e=this[0];if(e)return e._private.group},"group")},Xu=u(function(e,t){var n=e.cy(),r=n.hasCompoundNodes();function a(s){var d=s.pstyle("z-compound-depth");return d.value==="auto"?r?s.zDepth():0:d.value==="bottom"?-1:d.value==="top"?Wi:0}u(a,"getDepth");var i=a(e)-a(t);if(i!==0)return i;function o(s){var d=s.pstyle("z-index-compare");return d.value==="auto"&&s.isNode()?1:0}u(o,"getEleDepth");var c=o(e)-o(t);if(c!==0)return c;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},"zIndexSort"),Da={forEach:u(function(e,t){if(Fe(e))for(var n=this.length,r=0;r<n;r++){var a=this[r],i=t?e.apply(t,[a,r,this]):e(a,r,this);if(i===!1)break}return this},"forEach"),toArray:u(function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},"toArray"),slice:u(function(e,t){var n=[],r=this.length;t==null&&(t=r),e==null&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var a=e;a>=0&&a<t&&a<r;a++)n.push(this[a]);return this.spawn(n)},"slice"),size:u(function(){return this.length},"size"),eq:u(function(e){return this[e]||this.spawn()},"eq"),first:u(function(){return this[0]||this.spawn()},"first"),last:u(function(){return this[this.length-1]||this.spawn()},"last"),empty:u(function(){return this.length===0},"empty"),nonempty:u(function(){return!this.empty()},"nonempty"),sort:u(function(e){if(!Fe(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},"sort"),sortByZIndex:u(function(){return this.sort(Xu)},"sortByZIndex"),zDepth:u(function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:Wi-1}else{var a=t.source,i=t.target,o=a.zDepth(),c=i.zDepth();return Math.max(o,c,0)}}},"zDepth")};Da.each=Da.forEach;var Vg=u(function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":We(Symbol))!=e&&We(Symbol.iterator)!=e;t&&(Da[Symbol.iterator]=function(){var n=this,r={value:void 0,done:!1},a=0,i=this.length;return Vi({next:u(function(){return a<i?r.value=n[a++]:(r.value=void 0,r.done=!0),r},"next")},Symbol.iterator,function(){return this})})},"defineSymbolIterator");Vg();var jg=Je({nodeDimensionsIncludeLabels:!1}),da={layoutDimensions:u(function(e){e=jg(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},"layoutDimensions"),layoutPositions:u(function(e,t,n){var r=this.nodes().filter(function(w){return!w.isParent()}),a=this.cy(),i=t.eles,o=u(function(w){return w.id()},"getMemoizeKey"),c=wr(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=u(function(w,P,T){var E={x:P.x1+P.w/2,y:P.y1+P.h/2},S={x:(T.x-E.x)*w,y:(T.y-E.y)*w};return{x:E.x+S.x,y:E.y+S.y}},"calculateSpacing"),s=t.spacingFactor&&t.spacingFactor!==1,d=u(function(){if(!s)return null;for(var w=yt(),P=0;P<r.length;P++){var T=r[P],E=c(T,P);Bh(w,E.x,E.y)}return w},"spacingBb"),h=d(),f=wr(function(w,P){var T=c(w,P);if(s){var E=Math.abs(t.spacingFactor);T=l(E,h,T)}return t.transform!=null&&(T=t.transform(w,T)),T},o);if(t.animate){for(var p=0;p<r.length;p++){var g=r[p],y=f(g,p),b=t.animateFilter==null||t.animateFilter(g,p);if(b){var v=g.animation({position:y,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}else g.position(y)}if(t.fit){var m=a.animation({fit:{boundingBox:i.boundingBoxAt(f),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var x=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}e.animations.forEach(function(w){return w.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Qn.all(e.animations.map(function(w){return w.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(f),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},"layoutPositions"),layout:u(function(e){var t=this.cy();return t.makeLayout(pe({},e,{eles:this}))},"layout")};da.createLayout=da.makeLayout=da.layout;function ro(e,t,n){var r=n._private,a=r.styleCache=r.styleCache||[],i;return(i=a[e])!=null||(i=a[e]=t(n)),i}u(ro,"styleCache");function jr(e,t){return e=an(e),u(function(n){return ro(e,t,n)},"cachedStyleFunction")}u(jr,"cacheStyleFunction");function Yr(e,t){e=an(e);var n=u(function(r){return t.call(r)},"selfFn");return u(function(){var r=this[0];if(r)return ro(e,n,r)},"cachedPrototypeStyleFunction")}u(Yr,"cachePrototypeStyleFunction");var tt={recalculateRenderedStyle:u(function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},"recalculateRenderedStyle"),dirtyStyleCache:u(function(){var e=this.cy(),t=u(function(r){return r._private.styleCache=null},"dirty");if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(r){t(r),r.connectedEdges().forEach(t)});return this},"dirtyStyleCache"),updateStyle:u(function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var r=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),r&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=a;return e?i.emitAndNotify("style"):i.emit("style"),a.forEach(function(o){return o._private.styleDirty=!0}),this},"updateStyle"),cleanStyle:u(function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},"cleanStyle"),parsedStyle:u(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],r=n.cy();if(r.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,r.style().apply(n));var a=n._private.style[e];return a??(t?r.style().getDefaultProperty(e):null)}},"parsedStyle"),numericStyle:u(function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},"numericStyle"),numericStyleUnits:u(function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},"numericStyleUnits"),renderedStyle:u(function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},"renderedStyle"),style:u(function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,a=n.style();if(ke(e)){var i=e;a.applyBypass(this,i,r),this.emitAndNotify("style")}else if(ce(e))if(t===void 0){var o=this[0];return o?a.getStylePropertyValue(o,e):void 0}else a.applyBypass(this,e,t,r),this.emitAndNotify("style");else if(e===void 0){var c=this[0];return c?a.getRawStyle(c):void 0}return this},"style"),removeStyle:u(function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),a=this;if(e===void 0)for(var i=0;i<a.length;i++){var o=a[i];r.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var c=0;c<a.length;c++){var l=a[c];r.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},"removeStyle"),show:u(function(){return this.css("display","element"),this},"show"),hide:u(function(){return this.css("display","none"),this},"hide"),effectiveOpacity:u(function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,a=n.pstyle("opacity").value;if(!t)return a;var i=r.data.parent?n.parents():null;if(i)for(var o=0;o<i.length;o++){var c=i[o],l=c.pstyle("opacity").value;a=l*a}return a}},"effectiveOpacity"),transparent:u(function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},"transparent"),backgrounding:u(function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding},"backgrounding")};function ha(e,t){var n=e._private,r=n.data.parent?e.parents():null;if(r)for(var a=0;a<r.length;a++){var i=r[a];if(!t(i))return!1}return!0}u(ha,"checkCompound");function Xa(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var c=i._private;if(!t(i))return!1;if(i.isNode())return!o||ha(i,r);var l=c.source,s=c.target;return n(l)&&(!o||ha(l,n))&&(l===s||n(s)&&(!o||ha(s,n)))}}}u(Xa,"defineDerivedStateFunction");var Jn=jr("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:!0)});tt.takesUpSpace=Yr("takesUpSpace",Xa({ok:Jn}));var Yg=jr("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&Jn(e)}),Xg=jr("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&Jn(e)});tt.interactive=Yr("interactive",Xa({ok:Yg,parentOk:Xg,edgeOkViaNode:Jn}));tt.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var Wg=jr("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&Jn(e)}),qg=Jn;tt.visible=Yr("visible",Xa({ok:Wg,edgeOkViaNode:qg}));tt.hidden=function(){var e=this[0];if(e)return!e.visible()};tt.isBundledBezier=Yr("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});tt.bypass=tt.css=tt.style;tt.renderedCss=tt.renderedStyle;tt.removeBypass=tt.removeCss=tt.removeStyle;tt.pstyle=tt.parsedStyle;var nn={};function bi(e){return function(){var t=arguments,n=[];if(t.length===2){var r=t[0],a=t[1];this.on(e.event,r,a)}else if(t.length===1&&Fe(t[0])){var i=t[0];this.on(e.event,i)}else if(t.length===0||t.length===1&&Me(t[0])){for(var o=t.length===1?t[0]:null,c=0;c<this.length;c++){var l=this[c],s=!e.ableField||l._private[e.ableField],d=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(h!==void 0&&(s=h,!h))return this}s&&(l._private[e.field]=e.value,d&&n.push(l))}var f=this.spawn(n);f.updateStyle(),f.emit(e.event),o&&f.emit(o)}return this}}u(bi,"defineSwitchFunction");function Bn(e){nn[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(n!==void 0)return n}return t._private[e.field]}},nn[e.on]=bi({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),nn[e.off]=bi({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}u(Bn,"defineSwitchSet");Bn({field:"locked",overrideField:u(function(e){return e.cy().autolock()?!0:void 0},"overrideField"),on:"lock",off:"unlock"});Bn({field:"grabbable",overrideField:u(function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},"overrideField"),on:"grabify",off:"ungrabify"});Bn({field:"selected",ableField:"selectable",overrideAble:u(function(e){return e.cy().autounselectify()?!1:void 0},"overrideAble"),on:"select",off:"unselect"});Bn({field:"selectable",overrideField:u(function(e){return e.cy().autounselectify()?!1:void 0},"overrideField"),on:"selectify",off:"unselectify"});nn.deselect=nn.unselect;nn.grabbed=function(){var e=this[0];if(e)return e._private.grabbed};Bn({field:"active",on:"activate",off:"unactivate"});Bn({field:"pannable",on:"panify",off:"unpanify"});nn.inactive=function(){var e=this[0];if(e)return!e._private.active};var ot={},gs=u(function(e){return u(function(t){for(var n=this,r=[],a=0;a<n.length;a++){var i=n[a];if(i.isNode()){for(var o=!1,c=i.connectedEdges(),l=0;l<c.length;l++){var s=c[l],d=s.source(),h=s.target();if(e.noIncomingEdges&&h===i&&d!==i||e.noOutgoingEdges&&d===i&&h!==i){o=!0;break}}o||r.push(i)}}return this.spawn(r,!0).filter(t)},"dagExtremityImpl")},"defineDagExtremity"),vs=u(function(e){return function(t){for(var n=this,r=[],a=0;a<n.length;a++){var i=n[a];if(i.isNode())for(var o=i.connectedEdges(),c=0;c<o.length;c++){var l=o[c],s=l.source(),d=l.target();e.outgoing&&s===i?(r.push(l),r.push(d)):e.incoming&&d===i&&(r.push(l),r.push(s))}}return this.spawn(r,!0).filter(t)}},"defineDagOneHop"),ys=u(function(e){return function(t){for(var n=this,r=[],a={};;){var i=e.outgoing?n.outgoers():n.incomers();if(i.length===0)break;for(var o=!1,c=0;c<i.length;c++){var l=i[c],s=l.id();a[s]||(a[s]=!0,r.push(l),o=!0)}if(!o)break;n=i}return this.spawn(r,!0).filter(t)}},"defineDagAllHops");ot.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null};pe(ot,{roots:gs({noIncomingEdges:!0}),leaves:gs({noOutgoingEdges:!0}),outgoers:St(vs({outgoing:!0}),"outgoers"),successors:ys({outgoing:!0}),incomers:St(vs({incoming:!0}),"incomers"),predecessors:ys({incoming:!0})});pe(ot,{neighborhood:St(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var a=n[r],i=a.connectedEdges(),o=0;o<i.length;o++){var c=i[o],l=c.source(),s=c.target(),d=a===l?s:l;d.length>0&&t.push(d[0]),t.push(c[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:u(function(e){return this.neighborhood().add(this).filter(e)},"closedNeighborhood"),openNeighborhood:u(function(e){return this.neighborhood(e)},"openNeighborhood")});ot.neighbourhood=ot.neighborhood;ot.closedNeighbourhood=ot.closedNeighborhood;ot.openNeighbourhood=ot.openNeighborhood;pe(ot,{source:St(u(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"sourceImpl"),"source"),target:St(u(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"targetImpl"),"target"),sources:xi({attr:"source"}),targets:xi({attr:"target"})});function xi(e){return u(function(t){for(var n=[],r=0;r<this.length;r++){var a=this[r],i=a._private[e.attr];i&&n.push(i)}return this.spawn(n,!0).filter(t)},"sourceImpl")}u(xi,"defineSourceFunction");pe(ot,{edgesWith:St(wi(),"edgesWith"),edgesTo:St(wi({thisIsSrc:!0}),"edgesTo")});function wi(e){return u(function(t){var n=[],r=this._private.cy,a=e||{};ce(t)&&(t=r.$(t));for(var i=0;i<t.length;i++)for(var o=t[i]._private.edges,c=0;c<o.length;c++){var l=o[c],s=l._private.data,d=this.hasElementWithId(s.source)&&t.hasElementWithId(s.target),h=t.hasElementWithId(s.source)&&this.hasElementWithId(s.target),f=d||h;f&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!d||a.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)},"edgesWithImpl")}u(wi,"defineEdgesWithFunction");pe(ot,{connectedEdges:St(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var a=n[r];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var c=i[o];t.push(c)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:St(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var a=n[r];a.isEdge()&&(t.push(a.source()[0]),t.push(a.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:St(Ei(),"parallelEdges"),codirectedEdges:St(Ei({codirected:!0}),"codirectedEdges")});function Ei(e){var t={codirected:!1};return e=pe({},t,e),u(function(n){for(var r=[],a=this.edges(),i=e,o=0;o<a.length;o++)for(var c=a[o],l=c._private,s=l.source,d=s._private.data.id,h=l.data.target,f=s._private.edges,p=0;p<f.length;p++){var g=f[p],y=g._private.data,b=y.target,v=y.source,m=b===h&&v===d,x=d===b&&h===v;(i.codirected&&m||!i.codirected&&(m||x))&&r.push(g)}return this.spawn(r,!0).filter(n)},"parallelEdgesImpl")}u(Ei,"defineParallelEdgesFunction");pe(ot,{components:u(function(e){var t=this,n=t.cy(),r=n.collection(),a=e==null?t.nodes():e.nodes(),i=[];e!=null&&a.empty()&&(a=e.sources());var o=u(function(l,s){r.merge(l),a.unmerge(l),s.merge(l)},"visitInComponent");if(a.empty())return t.spawn();var c=u(function(){var l=n.collection();i.push(l);var s=a[0];o(s,l),t.bfs({directed:!1,roots:s,visit:u(function(d){return o(d,l)},"visit")}),l.forEach(function(d){d.connectedEdges().forEach(function(h){t.has(h)&&l.has(h.source())&&l.has(h.target())&&l.merge(h)})})},"_loop");do c();while(a.length>0);return i},"components"),component:u(function(){var e=this[0];return e.cy().mutableElements().components(e)[0]},"component")});ot.componentsOf=ot.components;var nt=u(function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){ze("A collection must have a reference to the core");return}var a=new Lt,i=!1;if(!t)t=[];else if(t.length>0&&ke(t[0])&&!Rr(t[0])){i=!0;for(var o=[],c=new $n,l=0,s=t.length;l<s;l++){var d=t[l];d.data==null&&(d.data={});var h=d.data;if(h.id==null)h.id=bl();else if(e.hasElementWithId(h.id)||c.has(h.id))continue;var f=new La(e,d,!1);o.push(f),c.add(h.id)}t=o}this.length=0;for(var p=0,g=t.length;p<g;p++){var y=t[p][0];if(y!=null){var b=y._private.data.id;(!n||!a.has(b))&&(n&&a.set(b,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(v){this.lazyMap=v},rebuildMap:u(function(){for(var v=this.lazyMap=new Lt,m=this.eles,x=0;x<m.length;x++){var w=m[x];v.set(w.id(),{index:x,ele:w})}},"rebuildMap")},n&&(this._private.map=a),i&&!r&&this.restore()},"Collection"),Ne=La.prototype=nt.prototype=Object.create(Array.prototype);Ne.instanceString=function(){return"collection"};Ne.spawn=function(e,t){return new nt(this.cy(),e,t)};Ne.spawnSelf=function(){return this.spawn(this)};Ne.cy=function(){return this._private.cy};Ne.renderer=function(){return this._private.cy.renderer()};Ne.element=function(){return this[0]};Ne.collection=function(){return Us(this)?this:new nt(this._private.cy,[this])};Ne.unique=function(){return new nt(this._private.cy,this,!0)};Ne.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)};Ne.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new nt(t)};Ne.$id=Ne.getElementById;Ne.poolIndex=function(){var e=this._private.cy,t=e._private.elements,n=this[0]._private.data.id;return t._private.map.get(n).index};Ne.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index};Ne.indexOfId=function(e){return e=""+e,this._private.map.get(e).index};Ne.json=function(e){var t=this.element(),n=this.cy();if(t==null&&e)return this;if(t!=null){var r=t._private;if(ke(e)){if(n.startBatch(),e.data){t.data(e.data);var a=r.data;if(t.isEdge()){var i=!1,o={},c=e.data.source,l=e.data.target;c!=null&&c!=a.source&&(o.source=""+c,i=!0),l!=null&&l!=a.target&&(o.target=""+l,i=!0),i&&(t=t.move(o))}else{var s="parent"in e.data,d=e.data.parent;s&&(d!=null||a.parent!=null)&&d!=a.parent&&(d===void 0&&(d=null),d!=null&&(d=""+d),t=t.move({parent:d}))}}e.position&&t.position(e.position);var h=u(function(g,y,b){var v=e[g];v!=null&&v!==r[g]&&(v?t[y]():t[b]())},"checkSwitch");return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),e.classes!=null&&t.classes(e.classes),n.endBatch(),this}else if(e===void 0){var f={data:Rt(r.data),position:Rt(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};f.classes="";var p=0;return r.classes.forEach(function(g){return f.classes+=p++===0?g:" "+g}),f}}};Ne.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e};Ne.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n],a=r.json(),i=new La(e,a,!1);t.push(i)}return new nt(e,t)};Ne.copy=Ne.clone;Ne.restore=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=n.cy(),a=r._private,i=[],o=[],c,l=0,s=n.length;l<s;l++){var d=n[l];t&&!d.removed()||(d.isNode()?i.push(d):o.push(d))}c=i.concat(o);var h,f=u(function(){c.splice(h,1),h--},"removeFromElements");for(h=0;h<c.length;h++){var p=c[h],g=p._private,y=g.data;if(p.clearTraversalCache(),!(!t&&!g.removed)){if(y.id===void 0)y.id=bl();else if(te(y.id))y.id=""+y.id;else if(rn(y.id)||!ce(y.id)){ze("Can not create element with invalid string ID `"+y.id+"`"),f();continue}else if(r.hasElementWithId(y.id)){ze("Can not create second element with ID `"+y.id+"`"),f();continue}}var b=y.id;if(p.isNode()){var v=g.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(p.isEdge()){for(var m=p,x=["source","target"],w=x.length,P=!1,T=0;T<w;T++){var E=x[T],S=y[E];te(S)&&(S=y[E]=""+y[E]),S==null||S===""?(ze("Can not create edge `"+b+"` with unspecified "+E),P=!0):r.hasElementWithId(S)||(ze("Can not create edge `"+b+"` with nonexistant "+E+" `"+S+"`"),P=!0)}if(P){f();continue}var A=r.getElementById(y.source),B=r.getElementById(y.target);A.same(B)?A._private.edges.push(m):(A._private.edges.push(m),B._private.edges.push(m)),m._private.source=A,m._private.target=B}g.map=new Lt,g.map.set(b,{ele:p,index:0}),g.removed=!1,t&&r.addToPool(p)}for(var k=0;k<i.length;k++){var D=i[k],I=D._private.data;te(I.parent)&&(I.parent=""+I.parent);var _=I.parent,R=_!=null;if(R||D._private.parent){var z=D._private.parent?r.collection().merge(D._private.parent):r.getElementById(_);if(z.empty())I.parent=void 0;else if(z[0].removed())_e("Node added with missing parent, reference to parent removed"),I.parent=void 0,D._private.parent=null;else{for(var N=!1,M=z;!M.empty();){if(D.same(M)){N=!0,I.parent=void 0;break}M=M.parent()}N||(z[0]._private.children.push(D),D._private.parent=z[0],a.hasCompoundNodes=!0)}}}if(c.length>0){for(var L=c.length===n.length?n:new nt(r,c),q=0;q<L.length;q++){var Y=L[q];Y.isNode()||(Y.parallelEdges().clearTraversalCache(),Y.source().clearTraversalCache(),Y.target().clearTraversalCache())}var W;a.hasCompoundNodes?W=r.collection().merge(L).merge(L.connectedNodes()).merge(L.parent()):W=L,W.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?L.emitAndNotify("add"):t&&L.emit("add")}return n};Ne.removed=function(){var e=this[0];return e&&e._private.removed};Ne.inside=function(){var e=this[0];return e&&!e._private.removed};Ne.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=[],a={},i=n._private.cy;function o(_){for(var R=_._private.edges,z=0;z<R.length;z++)l(R[z])}u(o,"addConnectedEdges");function c(_){for(var R=_._private.children,z=0;z<R.length;z++)l(R[z])}u(c,"addChildren");function l(_){var R=a[_.id()];t&&_.removed()||R||(a[_.id()]=!0,_.isNode()?(r.push(_),o(_),c(_)):r.unshift(_))}u(l,"add");for(var s=0,d=n.length;s<d;s++){var h=n[s];l(h)}function f(_,R){var z=_._private.edges;on(z,R),_.clearTraversalCache()}u(f,"removeEdgeRef");function p(_){_.clearTraversalCache()}u(p,"removeParallelRef");var g=[];g.ids={};function y(_,R){R=R[0],_=_[0];var z=_._private.children,N=_.id();on(z,R),R._private.parent=null,g.ids[N]||(g.ids[N]=!0,g.push(_))}u(y,"removeChildRef"),n.dirtyCompoundBoundsCache(),t&&i.removeFromPool(r);for(var b=0;b<r.length;b++){var v=r[b];if(v.isEdge()){var m=v.source()[0],x=v.target()[0];f(m,v),f(x,v);for(var w=v.parallelEdges(),P=0;P<w.length;P++){var T=w[P];p(T),T.isBundledBezier()&&T.dirtyBoundingBoxCache()}}else{var E=v.parent();E.length!==0&&y(E,v)}t&&(v._private.removed=!0)}var S=i._private.elements;i._private.hasCompoundNodes=!1;for(var A=0;A<S.length;A++){var B=S[A];if(B.isParent()){i._private.hasCompoundNodes=!0;break}}var k=new nt(this.cy(),r);k.size()>0&&(e?k.emitAndNotify("remove"):t&&k.emit("remove"));for(var D=0;D<g.length;D++){var I=g[D];(!t||!I.removed())&&I.updateStyle()}return k};Ne.move=function(e){var t=this._private.cy,n=this,r=!1,a=!1,i=u(function(p){return p==null?p:""+p},"toString");if(e.source!==void 0||e.target!==void 0){var o=i(e.source),c=i(e.target),l=o!=null&&t.hasElementWithId(o),s=c!=null&&t.hasElementWithId(c);(l||s)&&(t.batch(function(){n.remove(r,a),n.emitAndNotify("moveout");for(var p=0;p<n.length;p++){var g=n[p],y=g._private.data;g.isEdge()&&(l&&(y.source=o),s&&(y.target=c))}n.restore(r,a)}),n.emitAndNotify("move"))}else if(e.parent!==void 0){var d=i(e.parent),h=d===null||t.hasElementWithId(d);if(h){var f=d===null?void 0:d;t.batch(function(){var p=n.remove(r,a);p.emitAndNotify("moveout");for(var g=0;g<n.length;g++){var y=n[g],b=y._private.data;y.isNode()&&(b.parent=f)}p.restore(r,a)}),n.emitAndNotify("move")}}return this};[Il,rg,ua,tn,Gn,mg,Ya,Rg,ju,Yu,Fg,Da,da,tt,nn,ot].forEach(function(e){pe(Ne,e)});var Hg={add:u(function(e){var t,n=this;if(wt(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var a=[],i=0;i<r.length;i++){var o=r[i];a.push(o.json())}t=new nt(n,a)}}else if(Me(e)){var c=e;t=new nt(n,c)}else if(ke(e)&&(Me(e.nodes)||Me(e.edges))){for(var l=e,s=[],d=["nodes","edges"],h=0,f=d.length;h<f;h++){var p=d[h],g=l[p];if(Me(g))for(var y=0,b=g.length;y<b;y++){var v=pe({group:p},g[y]);s.push(v)}}t=new nt(n,s)}else{var m=e;t=new La(n,m).collection()}return t},"add"),remove:u(function(e){if(!wt(e)&&ce(e)){var t=e;e=this.$(t)}return e.remove()},"remove")};function Wu(e,t,n,r){var a=4,i=.001,o=1e-7,c=10,l=11,s=1/(l-1),d=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var f=d?new Float32Array(l):new Array(l);function p(B,k){return 1-3*k+3*B}u(p,"A");function g(B,k){return 3*k-6*B}u(g,"B");function y(B){return 3*B}u(y,"C");function b(B,k,D){return((p(k,D)*B+g(k,D))*B+y(k))*B}u(b,"calcBezier");function v(B,k,D){return 3*p(k,D)*B*B+2*g(k,D)*B+y(k)}u(v,"getSlope");function m(B,k){for(var D=0;D<a;++D){var I=v(k,e,n);if(I===0)return k;var _=b(k,e,n)-B;k-=_/I}return k}u(m,"newtonRaphsonIterate");function x(){for(var B=0;B<l;++B)f[B]=b(B*s,e,n)}u(x,"calcSampleValues");function w(B,k,D){var I,_,R=0;do _=k+(D-k)/2,I=b(_,e,n)-B,I>0?D=_:k=_;while(Math.abs(I)>o&&++R<c);return _}u(w,"binarySubdivide");function P(B){for(var k=0,D=1,I=l-1;D!==I&&f[D]<=B;++D)k+=s;--D;var _=(B-f[D])/(f[D+1]-f[D]),R=k+_*s,z=v(R,e,n);return z>=i?m(B,R):z===0?R:w(B,k,k+s)}u(P,"getTForX");var T=!1;function E(){T=!0,(e!==t||n!==r)&&x()}u(E,"precompute");var S=u(function(B){return T||E(),e===t&&n===r?B:B===0?0:B===1?1:b(P(B),t,r)},"f");S.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var A="generateBezier("+[e,t,n,r]+")";return S.toString=function(){return A},S}u(Wu,"generateCubicBezier");var Ug=function(){function e(r){return-r.tension*r.x-r.friction*r.v}u(e,"springAccelerationForState");function t(r,a,i){var o={x:r.x+i.dx*a,v:r.v+i.dv*a,tension:r.tension,friction:r.friction};return{dx:o.v,dv:e(o)}}u(t,"springEvaluateStateWithDerivative");function n(r,a){var i={dx:r.v,dv:e(r)},o=t(r,a*.5,i),c=t(r,a*.5,o),l=t(r,a,c),s=1/6*(i.dx+2*(o.dx+c.dx)+l.dx),d=1/6*(i.dv+2*(o.dv+c.dv)+l.dv);return r.x=r.x+s*a,r.v=r.v+d*a,r}return u(n,"springIntegrateState"),u(function r(a,i,o){var c={x:-1,v:0,tension:null,friction:null},l=[0],s=0,d=1/1e4,h=16/1e3,f,p,g;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,c.tension=a,c.friction=i,f=o!==null,f?(s=r(a,i),p=s/o*h):p=h;g=n(g||c,p),l.push(1+g.x),s+=16,Math.abs(g.x)>d&&Math.abs(g.v)>d;);return f?function(y){return l[y*(l.length-1)|0]}:s},"springRK4Factory")}(),Le=u(function(e,t,n,r){var a=Wu(e,t,n,r);return function(i,o,c){return i+(o-i)*a(c)}},"cubicBezier"),fa={linear:u(function(e,t,n){return e+(t-e)*n},"linear"),ease:Le(.25,.1,.25,1),"ease-in":Le(.42,0,1,1),"ease-out":Le(0,0,.58,1),"ease-in-out":Le(.42,0,.58,1),"ease-in-sine":Le(.47,0,.745,.715),"ease-out-sine":Le(.39,.575,.565,1),"ease-in-out-sine":Le(.445,.05,.55,.95),"ease-in-quad":Le(.55,.085,.68,.53),"ease-out-quad":Le(.25,.46,.45,.94),"ease-in-out-quad":Le(.455,.03,.515,.955),"ease-in-cubic":Le(.55,.055,.675,.19),"ease-out-cubic":Le(.215,.61,.355,1),"ease-in-out-cubic":Le(.645,.045,.355,1),"ease-in-quart":Le(.895,.03,.685,.22),"ease-out-quart":Le(.165,.84,.44,1),"ease-in-out-quart":Le(.77,0,.175,1),"ease-in-quint":Le(.755,.05,.855,.06),"ease-out-quint":Le(.23,1,.32,1),"ease-in-out-quint":Le(.86,0,.07,1),"ease-in-expo":Le(.95,.05,.795,.035),"ease-out-expo":Le(.19,1,.22,1),"ease-in-out-expo":Le(1,0,0,1),"ease-in-circ":Le(.6,.04,.98,.335),"ease-out-circ":Le(.075,.82,.165,1),"ease-in-out-circ":Le(.785,.135,.15,.86),spring:u(function(e,t,n){if(n===0)return fa.linear;var r=Ug(e,t,n);return function(a,i,o){return a+(i-a)*r(o)}},"spring"),"cubic-bezier":Le};function Ci(e,t,n,r,a){if(r===1||t===n)return n;var i=a(t,n,r);return e==null||((e.roundValue||e.color)&&(i=Math.round(i)),e.min!==void 0&&(i=Math.max(i,e.min)),e.max!==void 0&&(i=Math.min(i,e.max))),i}u(Ci,"getEasedValue");function Ti(e,t){return e.pfValue!=null||e.value!=null?e.pfValue!=null&&(t==null||t.type.units!=="%")?e.pfValue:e.value:e}u(Ti,"getValue");function yn(e,t,n,r,a){var i=a!=null?a.type:null;n<0?n=0:n>1&&(n=1);var o=Ti(e,a),c=Ti(t,a);if(te(o)&&te(c))return Ci(i,o,c,n,r);if(Me(o)&&Me(c)){for(var l=[],s=0;s<c.length;s++){var d=o[s],h=c[s];if(d!=null&&h!=null){var f=Ci(i,d,h,n,r);l.push(f)}else l.push(h)}return l}}u(yn,"ease");function qu(e,t,n,r){var a=!r,i=e._private,o=t._private,c=o.easing,l=o.startTime,s=r?e:e.cy(),d=s.style();if(!o.easingImpl)if(c==null)o.easingImpl=fa.linear;else{var h;if(ce(c)){var f=d.parse("transition-timing-function",c);h=f.value}else h=c;var p,g;ce(h)?(p=h,g=[]):(p=h[1],g=h.slice(2).map(function(L){return+L})),g.length>0?(p==="spring"&&g.push(o.duration),o.easingImpl=fa[p].apply(null,g)):o.easingImpl=fa[p]}var y=o.easingImpl,b;if(o.duration===0?b=1:b=(n-l)/o.duration,o.applying&&(b=o.progress),b<0?b=0:b>1&&(b=1),o.delay==null){var v=o.startPosition,m=o.position;if(m&&a&&!e.locked()){var x={};On(v.x,m.x)&&(x.x=yn(v.x,m.x,b,y)),On(v.y,m.y)&&(x.y=yn(v.y,m.y,b,y)),e.position(x)}var w=o.startPan,P=o.pan,T=i.pan,E=P!=null&&r;E&&(On(w.x,P.x)&&(T.x=yn(w.x,P.x,b,y)),On(w.y,P.y)&&(T.y=yn(w.y,P.y,b,y)),e.emit("pan"));var S=o.startZoom,A=o.zoom,B=A!=null&&r;B&&(On(S,A)&&(i.zoom=Sr(i.minZoom,yn(S,A,b,y),i.maxZoom)),e.emit("zoom")),(E||B)&&e.emit("viewport");var k=o.style;if(k&&k.length>0&&a){for(var D=0;D<k.length;D++){var I=k[D],_=I.name,R=I,z=o.startStyle[_],N=d.properties[z.name],M=yn(z,R,b,y,N);d.overrideBypass(e,_,M)}e.emit("style")}}return o.progress=b,b}u(qu,"step$1");function On(e,t){return e==null||t==null?!1:te(e)&&te(t)?!0:!!(e&&t)}u(On,"valid");function Hu(e,t,n,r){var a=t._private;a.started=!0,a.startTime=n-a.progress*a.duration}u(Hu,"startAnimation");function Si(e,t){var n=t._private.aniEles,r=[];function a(d,h){var f=d._private,p=f.animation.current,g=f.animation.queue,y=!1;if(p.length===0){var b=g.shift();b&&p.push(b)}for(var v=u(function(P){for(var T=P.length-1;T>=0;T--){var E=P[T];E()}P.splice(0,P.length)},"callbacks"),m=p.length-1;m>=0;m--){var x=p[m],w=x._private;if(w.stopped){p.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||Hu(d,x,e),qu(d,x,e,h),w.applying&&(w.applying=!1),v(w.frames),w.step!=null&&w.step(e),x.completed()&&(p.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.completes)),y=!0)}return!h&&p.length===0&&g.length===0&&r.push(d),y}u(a,"stepOne");for(var i=!1,o=0;o<n.length;o++){var c=n[o],l=a(c);i=i||l}var s=a(t,!0);(i||s)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}u(Si,"stepAll");var Kg={animate:Be.animate(),animation:Be.animation(),animated:Be.animated(),clearQueue:Be.clearQueue(),delay:Be.delay(),delayAnimation:Be.delayAnimation(),stop:Be.stop(),addToAnimationPool:u(function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},"addToAnimationPool"),stopAnimationLoop:u(function(){this._private.animationsRunning=!1},"stopAnimationLoop"),startAnimationLoop:u(function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&Ea(u(function(r){Si(r,e),t()},"animationStep"))}u(t,"headlessStep");var n=e.renderer();n&&n.beforeRender?n.beforeRender(u(function(r,a){Si(a,e)},"rendererAnimationStep"),n.beforeRenderPriorities.animations):t()},"startAnimationLoop")},Gg={qualifierCompare:u(function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},"qualifierCompare"),eventMatches:u(function(e,t,n){var r=t.qualifier;return r!=null?e!==n.target&&Rr(n.target)&&r.matches(n.target):!0},"eventMatches"),addEventFields:u(function(e,t){t.cy=e,t.target=e},"addEventFields"),callbackContext:u(function(e,t,n){return t.qualifier!=null?n.target:e},"callbackContext")},aa=u(function(e){return ce(e)?new sn(e):e},"argSelector"),Uu={createEmitter:u(function(){var e=this._private;return e.emitter||(e.emitter=new Vr(Gg,this)),this},"createEmitter"),emitter:u(function(){return this._private.emitter},"emitter"),on:u(function(e,t,n){return this.emitter().on(e,aa(t),n),this},"on"),removeListener:u(function(e,t,n){return this.emitter().removeListener(e,aa(t),n),this},"removeListener"),removeAllListeners:u(function(){return this.emitter().removeAllListeners(),this},"removeAllListeners"),one:u(function(e,t,n){return this.emitter().one(e,aa(t),n),this},"one"),once:u(function(e,t,n){return this.emitter().one(e,aa(t),n),this},"once"),emit:u(function(e,t){return this.emitter().emit(e,t),this},"emit"),emitAndNotify:u(function(e,t){return this.emit(e),this.notify(e,t),this},"emitAndNotify")};Be.eventAliasesOn(Uu);var Pi={png:u(function(e){var t=this._private.renderer;return e=e||{},t.png(e)},"png"),jpg:u(function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)},"jpg")};Pi.jpeg=Pi.jpg;var pa={layout:u(function(e){var t=this;if(e==null){ze("Layout options must be specified to make a layout");return}if(e.name==null){ze("A `name` must be specified to make a layout");return}var n=e.name,r=t.extension("layout",n);if(r==null){ze("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;ce(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var i=new r(pe({},e,{cy:t,eles:a}));return i},"layout")};pa.createLayout=pa.makeLayout=pa.layout;var Zg={notify:u(function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&r.merge(t);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},"notify"),notifications:u(function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},"notifications"),noNotifications:u(function(e){this.notifications(!1),e(),this.notifications(!0)},"noNotifications"),batching:u(function(){return this._private.batchCount>0},"batching"),startBatch:u(function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},"startBatch"),endBatch:u(function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},"endBatch"),batch:u(function(e){return this.startBatch(),e(),this.endBatch(),this},"batch"),batchData:u(function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var a=n[r],i=e[a],o=t.getElementById(a);o.data(i)}})},"batchData")},$g=Je({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:12,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Di={renderTo:u(function(e,t,n,r){var a=this._private.renderer;return a.renderTo(e,t,n,r),this},"renderTo"),renderer:u(function(){return this._private.renderer},"renderer"),forceRender:u(function(){return this.notify("draw"),this},"forceRender"),resize:u(function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},"resize"),initRenderer:u(function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){ze("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&_e("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=$g(e);r.cy=t,t._private.renderer=new n(r),this.notify("init")},"initRenderer"),destroyRenderer:u(function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var r=n._private;r.rscratch={},r.rstyle={},r.animation.current=[],r.animation.queue=[]})},"destroyRenderer"),onRender:u(function(e){return this.on("render",e)},"onRender"),offRender:u(function(e){return this.off("render",e)},"offRender")};Di.invalidateDimensions=Di.resize;var ga={collection:u(function(e,t){return ce(e)?this.$(e):wt(e)?e.collection():Me(e)?(t||(t={}),new nt(this,e,t.unique,t.removed)):new nt(this)},"collection"),nodes:u(function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},"nodes"),edges:u(function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},"edges"),$:u(function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},"$"),mutableElements:u(function(){return this._private.elements},"mutableElements")};ga.elements=ga.filter=ga.$;var lt={},mr="t",Qg="f";lt.apply=function(e){for(var t=this,n=t._private,r=n.cy,a=r.collection(),i=0;i<e.length;i++){var o=e[i],c=t.getContextMeta(o);if(!c.empty){var l=t.getContextStyle(c),s=t.applyContextStyle(c,l,o);o._private.appliedInitStyle?t.updateTransitions(o,s.diffProps):o._private.appliedInitStyle=!0;var d=t.updateStyleHints(o);d&&a.push(o)}}return a};lt.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},a=e+"-"+t,i=r[a];if(i)return i;for(var o=[],c={},l=0;l<n.length;l++){var s=n[l],d=e[l]===mr,h=t[l]===mr,f=d!==h,p=s.mappedProperties.length>0;if(f||h&&p){var g=void 0;f&&p||f?g=s.properties:p&&(g=s.mappedProperties);for(var y=0;y<g.length;y++){for(var b=g[y],v=b.name,m=!1,x=l+1;x<n.length;x++){var w=n[x],P=t[x]===mr;if(P&&(m=w.properties[b.name]!=null,m))break}!c[v]&&!m&&(c[v]=!0,o.push(v))}}}return r[a]=o,o};lt.getContextMeta=function(e){for(var t=this,n="",r,a=e._private.styleCxtKey||"",i=0;i<t.length;i++){var o=t[i],c=o.selector&&o.selector.matches(e);c?n+=mr:n+=Qg}return r=t.getPropertiesDiff(a,n),e._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:r.length===0}};lt.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var a={_private:{key:t}},i=0;i<n.length;i++){var o=n[i],c=t[i]===mr;if(c)for(var l=0;l<o.properties.length;l++){var s=o.properties[l];a[s.name]=s}}return r[t]=a,a};lt.applyContextStyle=function(e,t,n){for(var r=this,a=e.diffPropNames,i={},o=r.types,c=0;c<a.length;c++){var l=a[c],s=t[l],d=n.pstyle(l);if(!s)if(d)d.bypass?s={name:l,deleteBypassed:!0}:s={name:l,delete:!0};else continue;if(d!==s){if(s.mapped===o.fn&&d!=null&&d.mapping!=null&&d.mapping.value===s.value){var h=d.mapping,f=h.fnValue=s.value(n);if(f===h.prevFnValue)continue}var p=i[l]={prev:d};r.applyParsedProperty(n,s),p.next=n.pstyle(l),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:i}};lt.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,a=n.propertyGroupKeys,i=u(function(X,$,ie){return n.getPropertiesHash(X,$,ie)},"propHash"),o=t.styleKey;if(e.removed())return!1;var c=t.group==="nodes",l=e._private.style;r=Object.keys(l);for(var s=0;s<a.length;s++){var d=a[s];t.styleKeys[d]=[zn,dr]}for(var h=u(function(X,$){return t.styleKeys[$][0]=Er(X,t.styleKeys[$][0])},"updateGrKey1"),f=u(function(X,$){return t.styleKeys[$][1]=Cr(X,t.styleKeys[$][1])},"updateGrKey2"),p=u(function(X,$){h(X,$),f(X,$)},"updateGrKey"),g=u(function(X,$){for(var ie=0;ie<X.length;ie++){var se=X.charCodeAt(ie);h(se,$),f(se,$)}},"updateGrKeyWStr"),y=2e9,b=u(function(X){return-128<X&&X<128&&Math.floor(X)!==X?y-(X*1024|0):X},"cleanNum"),v=0;v<r.length;v++){var m=r[v],x=l[m];if(x!=null){var w=this.properties[m],P=w.type,T=w.groupKey,E=void 0;w.hashOverride!=null?E=w.hashOverride(e,x):x.pfValue!=null&&(E=x.pfValue);var S=w.enums==null?x.value:null,A=E!=null,B=S!=null,k=A||B,D=x.units;if(P.number&&k&&!P.multiple){var I=A?E:S;p(b(I),T),!A&&D!=null&&g(D,T)}else g(x.strValue,T)}}for(var _=[zn,dr],R=0;R<a.length;R++){var z=a[R],N=t.styleKeys[z];_[0]=Er(N[0],_[0]),_[1]=Cr(N[1],_[1])}t.styleKey=Kd(_[0],_[1]);var M=t.styleKeys;t.labelDimsKey=$t(M.labelDimensions);var L=i(e,["label"],M.labelDimensions);if(t.labelKey=$t(L),t.labelStyleKey=$t(Zr(M.commonLabel,L)),!c){var q=i(e,["source-label"],M.labelDimensions);t.sourceLabelKey=$t(q),t.sourceLabelStyleKey=$t(Zr(M.commonLabel,q));var Y=i(e,["target-label"],M.labelDimensions);t.targetLabelKey=$t(Y),t.targetLabelStyleKey=$t(Zr(M.commonLabel,Y))}if(c){var W=t.styleKeys,K=W.nodeBody,J=W.nodeBorder,ee=W.nodeOutline,Z=W.backgroundImage,Q=W.compound,U=W.pie,O=[K,J,ee,Z,Q,U].filter(function(X){return X!=null}).reduce(Zr,[zn,dr]);t.nodeKey=$t(O),t.hasPie=U!=null&&U[0]!==zn&&U[1]!==dr}return o!==t.styleKey};lt.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null};lt.applyParsedProperty=function(e,t){var n=this,r=t,a=e._private.style,i,o=n.types,c=n.properties[r.name].type,l=r.bypass,s=a[r.name],d=s&&s.bypass,h=e._private,f="mapping",p=u(function(W){return W==null?null:W.pfValue!=null?W.pfValue:W.value},"getVal"),g=u(function(){var W=p(s),K=p(r);n.checkTriggers(e,r.name,W,K)},"checkTriggers");if(t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))&&(r=t=this.parse(t.name,"bezier",l)),r.delete)return a[r.name]=void 0,g(),!0;if(r.deleteBypassed)return s?s.bypass?(s.bypassed=void 0,g(),!0):!1:(g(),!0);if(r.deleteBypass)return s?s.bypass?(a[r.name]=s.bypassed,g(),!0):!1:(g(),!0);var y=u(function(){_e("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")},"printMappingErr");switch(r.mapped){case o.mapData:{for(var b=r.field.split("."),v=h.data,m=0;m<b.length&&v;m++){var x=b[m];v=v[x]}if(v==null)return y(),!1;var w;if(te(v)){var P=r.fieldMax-r.fieldMin;P===0?w=0:w=(v-r.fieldMin)/P}else return _e("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+v+"` for `"+e.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),c.color){var T=r.valueMin[0],E=r.valueMax[0],S=r.valueMin[1],A=r.valueMax[1],B=r.valueMin[2],k=r.valueMax[2],D=r.valueMin[3]==null?1:r.valueMin[3],I=r.valueMax[3]==null?1:r.valueMax[3],_=[Math.round(T+(E-T)*w),Math.round(S+(A-S)*w),Math.round(B+(k-B)*w),Math.round(D+(I-D)*w)];i={bypass:r.bypass,name:r.name,value:_,strValue:"rgb("+_[0]+", "+_[1]+", "+_[2]+")"}}else if(c.number){var R=r.valueMin+(r.valueMax-r.valueMin)*w;i=this.parse(r.name,R,r.bypass,f)}else return!1;if(!i)return y(),!1;i.mapping=r,r=i;break}case o.data:{for(var z=r.field.split("."),N=h.data,M=0;M<z.length&&N;M++){var L=z[M];N=N[L]}if(N!=null&&(i=this.parse(r.name,N,r.bypass,f)),!i)return y(),!1;i.mapping=r,r=i;break}case o.fn:{var q=r.value,Y=r.fnValue!=null?r.fnValue:q(e);if(r.prevFnValue=Y,Y==null)return _e("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+e.id()+"` is null)"),!1;if(i=this.parse(r.name,Y,r.bypass,f),!i)return _e("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+e.id()+"` is invalid)"),!1;i.mapping=Rt(r),r=i;break}case void 0:break;default:return!1}return l?(d?r.bypassed=s.bypassed:r.bypassed=s,a[r.name]=r):d?s.bypassed=r:a[r.name]=r,g(),!0};lt.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),!t)r._private.style={};else for(var a=r._private.style,i=Object.keys(a),o=0;o<i.length;o++){var c=i[o],l=a[c];l!=null&&(l.bypass?l.bypassed=null:a[c]=null)}}};lt.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()};lt.updateTransitions=function(e,t){var n=this,r=e._private,a=e.pstyle("transition-property").value,i=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var c={},l=!1,s=0;s<a.length;s++){var d=a[s],h=e.pstyle(d),f=t[d];if(f){var p=f.prev,g=p,y=f.next!=null?f.next:h,b=!1,v=void 0,m=1e-6;g&&(te(g.pfValue)&&te(y.pfValue)?(b=y.pfValue-g.pfValue,v=g.pfValue+m*b):te(g.value)&&te(y.value)?(b=y.value-g.value,v=g.value+m*b):Me(g.value)&&Me(y.value)&&(b=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2],v=g.strValue),b&&(c[d]=y.strValue,this.applyBypass(e,d,v),l=!0))}}if(!l)return;r.transitioning=!0,new Qn(function(x){o>0?e.delayAnimation(o).play().promise().then(x):x()}).then(function(){return e.animation({style:c,duration:i,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,a),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,a),e.emitAndNotify("style"),r.transitioning=!1)};lt.checkTrigger=function(e,t,n,r,a,i){var o=this.properties[t],c=a(o);c!=null&&c(n,r)&&i(o)};lt.checkZOrderTrigger=function(e,t,n,r){var a=this;this.checkTrigger(e,t,n,r,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",e)})};lt.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(a){return a.triggersBounds},function(a){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&t==="curve-style"&&(n==="bezier"||r==="bezier")&&e.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()}),a.triggersBoundsOfConnectedEdges&&t==="display"&&(n==="none"||r==="none")&&e.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};lt.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r)};var Xr={};Xr.applyBypass=function(e,t,n,r){var a=this,i=[],o=!0;if(t==="*"||t==="**"){if(n!==void 0)for(var c=0;c<a.properties.length;c++){var l=a.properties[c],s=l.name,d=this.parse(s,n,!0);d&&i.push(d)}}else if(ce(t)){var h=this.parse(t,n,!0);h&&i.push(h)}else if(ke(t)){var f=t;r=n;for(var p=Object.keys(f),g=0;g<p.length;g++){var y=p[g],b=f[y];if(b===void 0&&(b=f[Ma(y)]),b!==void 0){var v=this.parse(y,b,!0);v&&i.push(v)}}}else return!1;if(i.length===0)return!1;for(var m=!1,x=0;x<e.length;x++){for(var w=e[x],P={},T=void 0,E=0;E<i.length;E++){var S=i[E];if(r){var A=w.pstyle(S.name);T=P[S.name]={prev:A}}m=this.applyParsedProperty(w,Rt(S))||m,r&&(T.next=w.pstyle(S.name))}m&&this.updateStyleHints(w),r&&this.updateTransitions(w,P,o)}return m};Xr.overrideBypass=function(e,t,n){t=Xi(t);for(var r=0;r<e.length;r++){var a=e[r],i=a._private.style[t],o=this.properties[t].type,c=o.color,l=o.mutiple,s=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,t,n):(i.value=n,i.pfValue!=null&&(i.pfValue=n),c?i.strValue="rgb("+n.join(",")+")":l?i.strValue=n.join(" "):i.strValue=""+n,this.updateStyleHints(a)),this.checkTriggers(a,t,s,n)}};Xr.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)};Xr.removeBypasses=function(e,t,n){for(var r=!0,a=0;a<e.length;a++){for(var i=e[a],o={},c=0;c<t.length;c++){var l=t[c],s=this.properties[l],d=i.pstyle(s.name);if(!(!d||!d.bypass)){var h="",f=this.parse(l,h,!0),p=o[s.name]={prev:d};this.applyParsedProperty(i,f),p.next=i.pstyle(s.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,r)}};var ao={};ao.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return e!=null?parseFloat(e):1};ao.containerCss=function(e){var t=this._private.cy,n=t.container(),r=t.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(e)};var Nt={};Nt.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)};Nt.getRawStyle=function(e,t){var n=this;if(e=e[0],e){for(var r={},a=0;a<n.properties.length;a++){var i=n.properties[a],o=n.getStylePropertyValue(e,i.name,t);o!=null&&(r[i.name]=o,r[Ma(i.name)]=o)}return r}};Nt.getIndexedStyle=function(e,t,n,r){var a=e.pstyle(t)[n][r];return a??e.cy().style().getDefaultProperty(t)[n][0]};Nt.getStylePropertyValue=function(e,t,n){var r=this;if(e=e[0],e){var a=r.properties[t];a.alias&&(a=a.pointsTo);var i=a.type,o=e.pstyle(a.name);if(o){var c=o.value,l=o.units,s=o.strValue;if(n&&i.number&&c!=null&&te(c)){var d=e.cy().zoom(),h=u(function(y){return y*d},"getRenderedValue"),f=u(function(y,b){return h(y)+b},"getValueStringWithUnits"),p=Me(c),g=p?l.every(function(y){return y!=null}):l!=null;return g?p?c.map(function(y,b){return f(y,l[b])}).join(" "):f(c,l):p?c.map(function(y){return ce(y)?y:""+h(y)}).join(" "):""+h(c)}else if(s!=null)return s}return null}};Nt.getAnimationStartStyle=function(e,t){for(var n={},r=0;r<t.length;r++){var a=t[r],i=a.name,o=e.pstyle(i);o!==void 0&&(ke(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(n[i]=o)}return n};Nt.getPropsList=function(e){var t=this,n=[],r=e,a=t.properties;if(r)for(var i=Object.keys(r),o=0;o<i.length;o++){var c=i[o],l=r[c],s=a[c]||a[Xi(c)],d=this.parse(s.name,l);d&&n.push(d)}return n};Nt.getNonDefaultPropertiesHash=function(e,t,n){var r=n.slice(),a,i,o,c,l,s;for(l=0;l<t.length;l++)if(a=t[l],i=e.pstyle(a,!1),i!=null)if(i.pfValue!=null)r[0]=Er(c,r[0]),r[1]=Cr(c,r[1]);else for(o=i.strValue,s=0;s<o.length;s++)c=o.charCodeAt(s),r[0]=Er(c,r[0]),r[1]=Cr(c,r[1]);return r};Nt.getPropertiesHash=Nt.getNonDefaultPropertiesHash;var Wa={};Wa.appendFromJson=function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],a=r.selector,i=r.style||r.css,o=Object.keys(i);t.selector(a);for(var c=0;c<o.length;c++){var l=o[c],s=i[l];t.css(l,s)}}return t};Wa.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t};Wa.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,a=n.properties,i={},o=0;o<a.length;o++){var c=a[o];i[c.name]=c.strValue}e.push({selector:r?r.toString():"core",style:i})}return e};var io={};io.appendFromString=function(e){var t=this,n=this,r=""+e,a,i,o;r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");function c(){r.length>a.length?r=r.substr(a.length):r=""}u(c,"removeSelAndBlockFromRemaining");function l(){i.length>o.length?i=i.substr(o.length):i=""}for(u(l,"removePropAndValFromRem");;){var s=r.match(/^\s*$/);if(s)break;var d=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!d){_e("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}a=d[0];var h=d[1];if(h!=="core"){var f=new sn(h);if(f.invalid){_e("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),c();continue}}var p=d[2],g=!1;i=p;for(var y=[];;){var b=i.match(/^\s*$/);if(b)break;var v=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){_e("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),g=!0;break}o=v[0];var m=v[1],x=v[2],w=t.properties[m];if(!w){_e("Skipping property: Invalid property name in: "+o),l();continue}var P=n.parse(m,x);if(!P){_e("Skipping property: Invalid property definition in: "+o),l();continue}y.push({name:m,val:x}),l()}if(g){c();break}n.selector(h);for(var T=0;T<y.length;T++){var E=y[T];n.css(E.name,E.val)}c()}return n};io.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t};var et={};(function(){var e=Ke,t=ud,n=dd,r=hd,a=fd,i=u(function(U){return"^"+U+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},"data"),o=u(function(U){var O=e+"|\\w+|"+t+"|"+n+"|"+r+"|"+a;return"^"+U+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+O+")\\s*\\,\\s*("+O+")\\)$"},"mapData"),c=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];et.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:c,singleRegexMatchValue:!0},urls:{regexes:c,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:u(function(U,O){switch(U.length){case 2:return O[0]!=="deg"&&O[0]!=="rad"&&O[1]!=="deg"&&O[1]!=="rad";case 1:return ce(U[0])||O[0]==="deg"||O[0]==="rad";default:return!1}},"validate")},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:u(function(U){var O=U.length;return O===1||O===2||O===4},"validate")}};var l={zeroNonZero:u(function(U,O){return(U==null||O==null)&&U!==O||U==0&&O!=0?!0:U!=0&&O==0},"zeroNonZero"),any:u(function(U,O){return U!=O},"any"),emptyNonEmpty:u(function(U,O){var X=rn(U),$=rn(O);return X&&!$||!X&&$},"emptyNonEmpty")},s=et.types,d=[{name:"label",type:s.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any}],h=[{name:"source-label",type:s.text,triggersBounds:l.any},{name:"source-text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:s.size,triggersBounds:l.any}],f=[{name:"target-label",type:s.text,triggersBounds:l.any},{name:"target-text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:s.size,triggersBounds:l.any}],p=[{name:"font-family",type:s.fontFamily,triggersBounds:l.any},{name:"font-style",type:s.fontStyle,triggersBounds:l.any},{name:"font-weight",type:s.fontWeight,triggersBounds:l.any},{name:"font-size",type:s.size,triggersBounds:l.any},{name:"text-transform",type:s.textTransform,triggersBounds:l.any},{name:"text-wrap",type:s.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:s.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:s.size,triggersBounds:l.any},{name:"text-outline-width",type:s.size,triggersBounds:l.any},{name:"line-height",type:s.positiveNumber,triggersBounds:l.any}],g=[{name:"text-valign",type:s.valign,triggersBounds:l.any},{name:"text-halign",type:s.halign,triggersBounds:l.any},{name:"color",type:s.color},{name:"text-outline-color",type:s.color},{name:"text-outline-opacity",type:s.zeroOneNumber},{name:"text-background-color",type:s.color},{name:"text-background-opacity",type:s.zeroOneNumber},{name:"text-background-padding",type:s.size,triggersBounds:l.any},{name:"text-border-opacity",type:s.zeroOneNumber},{name:"text-border-color",type:s.color},{name:"text-border-width",type:s.size,triggersBounds:l.any},{name:"text-border-style",type:s.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:s.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:s.justification}],y=[{name:"events",type:s.bool,triggersZOrder:l.any},{name:"text-events",type:s.bool,triggersZOrder:l.any}],b=[{name:"display",type:s.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:s.visibility,triggersZOrder:l.any},{name:"opacity",type:s.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:s.zeroOneNumber},{name:"min-zoomed-font-size",type:s.size},{name:"z-compound-depth",type:s.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:s.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:s.number,triggersZOrder:l.any}],v=[{name:"overlay-padding",type:s.size,triggersBounds:l.any},{name:"overlay-color",type:s.color},{name:"overlay-opacity",type:s.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:s.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:s.cornerRadius}],m=[{name:"underlay-padding",type:s.size,triggersBounds:l.any},{name:"underlay-color",type:s.color},{name:"underlay-opacity",type:s.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:s.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:s.cornerRadius}],x=[{name:"transition-property",type:s.propList},{name:"transition-duration",type:s.time},{name:"transition-delay",type:s.time},{name:"transition-timing-function",type:s.easing}],w=u(function(U,O){return O.value==="label"?-U.poolIndex():O.pfValue},"nodeSizeHashOverride"),P=[{name:"height",type:s.nodeSize,triggersBounds:l.any,hashOverride:w},{name:"width",type:s.nodeSize,triggersBounds:l.any,hashOverride:w},{name:"shape",type:s.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:s.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:s.cornerRadius},{name:"background-color",type:s.color},{name:"background-fill",type:s.fill},{name:"background-opacity",type:s.zeroOneNumber},{name:"background-blacken",type:s.nOneOneNumber},{name:"background-gradient-stop-colors",type:s.colors},{name:"background-gradient-stop-positions",type:s.percentages},{name:"background-gradient-direction",type:s.gradientDirection},{name:"padding",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:s.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:s.boundsExpansion,triggersBounds:l.any}],T=[{name:"border-color",type:s.color},{name:"border-opacity",type:s.zeroOneNumber},{name:"border-width",type:s.size,triggersBounds:l.any},{name:"border-style",type:s.borderStyle},{name:"border-cap",type:s.lineCap},{name:"border-join",type:s.lineJoin},{name:"border-dash-pattern",type:s.numbers},{name:"border-dash-offset",type:s.number},{name:"border-position",type:s.linePosition}],E=[{name:"outline-color",type:s.color},{name:"outline-opacity",type:s.zeroOneNumber},{name:"outline-width",type:s.size,triggersBounds:l.any},{name:"outline-style",type:s.borderStyle},{name:"outline-offset",type:s.size,triggersBounds:l.any}],S=[{name:"background-image",type:s.urls},{name:"background-image-crossorigin",type:s.bgCrossOrigin},{name:"background-image-opacity",type:s.zeroOneNumbers},{name:"background-image-containment",type:s.bgContainment},{name:"background-image-smoothing",type:s.bools},{name:"background-position-x",type:s.bgPos},{name:"background-position-y",type:s.bgPos},{name:"background-width-relative-to",type:s.bgRelativeTo},{name:"background-height-relative-to",type:s.bgRelativeTo},{name:"background-repeat",type:s.bgRepeat},{name:"background-fit",type:s.bgFit},{name:"background-clip",type:s.bgClip},{name:"background-width",type:s.bgWH},{name:"background-height",type:s.bgWH},{name:"background-offset-x",type:s.bgPos},{name:"background-offset-y",type:s.bgPos}],A=[{name:"position",type:s.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:s.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:s.size,triggersBounds:l.any},{name:"min-width-bias-left",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:s.size,triggersBounds:l.any},{name:"min-height-bias-top",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:s.sizeMaybePercent,triggersBounds:l.any}],B=[{name:"line-style",type:s.lineStyle},{name:"line-color",type:s.color},{name:"line-fill",type:s.fill},{name:"line-cap",type:s.lineCap},{name:"line-opacity",type:s.zeroOneNumber},{name:"line-dash-pattern",type:s.numbers},{name:"line-dash-offset",type:s.number},{name:"line-outline-width",type:s.size},{name:"line-outline-color",type:s.color},{name:"line-gradient-stop-colors",type:s.colors},{name:"line-gradient-stop-positions",type:s.percentages},{name:"curve-style",type:s.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:s.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:s.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:s.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:s.size,triggersBounds:l.any},{name:"control-point-distances",type:s.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:s.numbers,triggersBounds:l.any},{name:"segment-distances",type:s.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:s.numbers,triggersBounds:l.any},{name:"segment-radii",type:s.numbers,triggersBounds:l.any},{name:"radius-type",type:s.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:s.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:s.size,triggersBounds:l.any},{name:"taxi-direction",type:s.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:s.number,triggersBounds:l.any},{name:"edge-distances",type:s.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:s.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:s.angle,triggersBounds:l.any},{name:"loop-sweep",type:s.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:s.size,triggersBounds:l.any},{name:"target-distance-from-node",type:s.size,triggersBounds:l.any}],k=[{name:"ghost",type:s.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:s.zeroOneNumber}],D=[{name:"selection-box-color",type:s.color},{name:"selection-box-opacity",type:s.zeroOneNumber},{name:"selection-box-border-color",type:s.color},{name:"selection-box-border-width",type:s.size},{name:"active-bg-color",type:s.color},{name:"active-bg-opacity",type:s.zeroOneNumber},{name:"active-bg-size",type:s.size},{name:"outside-texture-bg-color",type:s.color},{name:"outside-texture-bg-opacity",type:s.zeroOneNumber}],I=[];et.pieBackgroundN=16,I.push({name:"pie-size",type:s.sizeMaybePercent});for(var _=1;_<=et.pieBackgroundN;_++)I.push({name:"pie-"+_+"-background-color",type:s.color}),I.push({name:"pie-"+_+"-background-size",type:s.percent}),I.push({name:"pie-"+_+"-background-opacity",type:s.zeroOneNumber});var R=[],z=et.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:s.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:s.color},{name:"arrow-fill",type:s.arrowFill},{name:"arrow-width",type:s.arrowWidth}].forEach(function(U){z.forEach(function(O){var X=O+"-"+U.name,$=U.type,ie=U.triggersBounds;R.push({name:X,type:$,triggersBounds:ie})})},{});var N=et.properties=[].concat(y,x,b,v,m,k,g,p,d,h,f,P,T,E,S,I,A,B,R,D),M=et.propertyGroups={behavior:y,transition:x,visibility:b,overlay:v,underlay:m,ghost:k,commonLabel:g,labelDimensions:p,mainLabel:d,sourceLabel:h,targetLabel:f,nodeBody:P,nodeBorder:T,nodeOutline:E,backgroundImage:S,pie:I,compound:A,edgeLine:B,edgeArrow:R,core:D},L=et.propertyGroupNames={},q=et.propertyGroupKeys=Object.keys(M);q.forEach(function(U){L[U]=M[U].map(function(O){return O.name}),M[U].forEach(function(O){return O.groupKey=U})});var Y=et.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];et.propertyNames=N.map(function(U){return U.name});for(var W=0;W<N.length;W++){var K=N[W];N[K.name]=K}for(var J=0;J<Y.length;J++){var ee=Y[J],Z=N[ee.pointsTo],Q={name:ee.name,alias:!0,pointsTo:Z};N.push(Q),N[ee.name]=Q}})();et.getDefaultProperty=function(e){return this.getDefaultProperties()[e]};et.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;for(var t=pe({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,s){for(var d=1;d<=et.pieBackgroundN;d++){var h=s.name.replace("{{i}}",d),f=s.value;l[h]=f}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,s){return et.arrowPrefixes.forEach(function(d){var h=d+"-"+s.name,f=s.value;l[h]=f}),l},{})),n={},r=0;r<this.properties.length;r++){var a=this.properties[r];if(!a.pointsTo){var i=a.name,o=t[i],c=this.parse(i,o);n[i]=c}}return e.defaultProperties=n,e.defaultProperties};et.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var qa={};qa.parse=function(e,t,n,r){var a=this;if(Fe(t))return a.parseImplWarn(e,t,n,r);var i=r==="mapping"||r===!0||r===!1||r==null?"dontcare":r,o=n?"t":"f",c=""+t,l=vl(e,c,o,i),s=a.propCache=a.propCache||[],d;return(d=s[l])||(d=s[l]=a.parseImplWarn(e,t,n,r)),(n||r==="mapping")&&(d=Rt(d),d&&(d.value=Rt(d.value))),d};qa.parseImplWarn=function(e,t,n,r){var a=this.parseImpl(e,t,n,r);return!a&&t!=null&&_e("The style property `".concat(e,": ").concat(t,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&t==="label"&&_e("The style value of `label` is deprecated for `"+a.name+"`"),a};qa.parseImpl=function(e,t,n,r){var a=this;e=Xi(e);var i=a.properties[e],o=t,c=a.types;if(!i||t===void 0)return null;i.alias&&(i=i.pointsTo,e=i.name);var l=ce(t);l&&(t=t.trim());var s=i.type;if(!s)return null;if(n&&(t===""||t===null))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(Fe(t))return{name:e,value:t,strValue:"fn",mapped:c.fn,bypass:n};var d,h;if(!(!l||r||t.length<7||t[1]!=="a")){if(t.length>=7&&t[0]==="d"&&(d=new RegExp(c.data.regex).exec(t))){if(n)return!1;var f=c.data;return{name:e,value:d,strValue:""+t,mapped:f,field:d[1],bypass:n}}else if(t.length>=10&&t[0]==="m"&&(h=new RegExp(c.mapData.regex).exec(t))){if(n||s.multiple)return!1;var p=c.mapData;if(!(s.color||s.number))return!1;var g=this.parse(e,h[4]);if(!g||g.mapped)return!1;var y=this.parse(e,h[5]);if(!y||y.mapped)return!1;if(g.pfValue===y.pfValue||g.strValue===y.strValue)return _e("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+g.strValue+"`"),this.parse(e,g.strValue);if(s.color){var b=g.value,v=y.value,m=b[0]===v[0]&&b[1]===v[1]&&b[2]===v[2]&&(b[3]===v[3]||(b[3]==null||b[3]===1)&&(v[3]==null||v[3]===1));if(m)return!1}return{name:e,value:h,strValue:""+t,mapped:p,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:g.value,valueMax:y.value,bypass:n}}}if(s.multiple&&r!=="multiple"){var x;if(l?x=t.split(/\s+/):Me(t)?x=t:x=[t],s.evenMultiple&&x.length%2!==0)return null;for(var w=[],P=[],T=[],E="",S=!1,A=0;A<x.length;A++){var B=a.parse(e,x[A],n,"multiple");S=S||ce(B.value),w.push(B.value),T.push(B.pfValue!=null?B.pfValue:B.value),P.push(B.units),E+=(A>0?" ":"")+B.strValue}return s.validate&&!s.validate(w,P)?null:s.singleEnum&&S?w.length===1&&ce(w[0])?{name:e,value:w[0],strValue:w[0],bypass:n}:null:{name:e,value:w,pfValue:T,strValue:E,bypass:n,units:P}}var k=u(function(){for(var U=0;U<s.enums.length;U++){var O=s.enums[U];if(O===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null},"checkEnums");if(s.number){var D,I="px";if(s.units&&(D=s.units),s.implicitUnits&&(I=s.implicitUnits),!s.unitless)if(l){var _="px|em"+(s.allowPercent?"|\\%":"");D&&(_=D);var R=t.match("^("+Ke+")("+_+")?$");R&&(t=R[1],D=R[2]||I)}else(!D||s.implicitUnits)&&(D=I);if(t=parseFloat(t),isNaN(t)&&s.enums===void 0)return null;if(isNaN(t)&&s.enums!==void 0)return t=o,k();if(s.integer&&!nd(t)||s.min!==void 0&&(t<s.min||s.strictMin&&t===s.min)||s.max!==void 0&&(t>s.max||s.strictMax&&t===s.max))return null;var z={name:e,value:t,strValue:""+t+(D||""),units:D,bypass:n};return s.unitless||D!=="px"&&D!=="em"?z.pfValue=t:z.pfValue=D==="px"||!D?t:this.getEmSizeInPixels()*t,(D==="ms"||D==="s")&&(z.pfValue=D==="ms"?t:1e3*t),(D==="deg"||D==="rad")&&(z.pfValue=D==="rad"?t:Th(t)),D==="%"&&(z.pfValue=t/100),z}else if(s.propList){var N=[],M=""+t;if(M!=="none"){for(var L=M.split(/\s*,\s*|\s+/),q=0;q<L.length;q++){var Y=L[q].trim();a.properties[Y]?N.push(Y):_e("`"+Y+"` is not a valid property name")}if(N.length===0)return null}return{name:e,value:N,strValue:N.length===0?"none":N.join(" "),bypass:n}}else if(s.color){var W=$s(t);return W?{name:e,value:W,pfValue:W,strValue:"rgb("+W[0]+","+W[1]+","+W[2]+")",bypass:n}:null}else if(s.regex||s.regexes){if(s.enums){var K=k();if(K)return K}for(var J=s.regexes?s.regexes:[s.regex],ee=0;ee<J.length;ee++){var Z=new RegExp(J[ee]),Q=Z.exec(t);if(Q)return{name:e,value:s.singleRegexMatchValue?Q[1]:Q,strValue:""+t,bypass:n}}return null}else return s.string?{name:e,value:""+t,strValue:""+t,bypass:n}:s.enums?k():null};var it=u(function e(t){if(!(this instanceof e))return new e(t);if(!Yi(t)){ze("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},"Style"),st=it.prototype;st.instanceString=function(){return"style"};st.clear=function(){for(var e=this._private,t=e.cy,n=t.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(n,!0),n.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};st.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};st.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)};st.selector=function(e){var t=e==="core"?null:new sn(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this};st.css=function(){var e=this,t=arguments;if(t.length===1)for(var n=t[0],r=0;r<e.properties.length;r++){var a=e.properties[r],i=n[a.name];i===void 0&&(i=n[Ma(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else t.length===2&&this.cssRule(t[0],t[1]);return this};st.style=st.css;st.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var a=!this[r].selector;a&&(this._private.coreStyle[n.name]=n)}return this};st.append=function(e){return Ks(e)?e.appendToStyle(this):Me(e)?this.appendFromJson(e):ce(e)&&this.appendFromString(e),this};it.fromJson=function(e,t){var n=new it(e);return n.fromJson(t),n};it.fromString=function(e,t){return new it(e).fromString(t)};[lt,Xr,ao,Nt,Wa,io,et,qa].forEach(function(e){pe(st,e)});it.types=st.types;it.properties=st.properties;it.propertyGroups=st.propertyGroups;it.propertyGroupNames=st.propertyGroupNames;it.propertyGroupKeys=st.propertyGroupKeys;var Jg={style:u(function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},"style"),setStyle:u(function(e){var t=this._private;return Ks(e)?t.style=e.generateStyle(this):Me(e)?t.style=it.fromJson(this,e):ce(e)?t.style=it.fromString(this,e):t.style=it(this),t.style},"setStyle"),updateStyle:u(function(){this.mutableElements().updateStyle()},"updateStyle")},ev="single",Sn={autolock:u(function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},"autolock"),autoungrabify:u(function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},"autoungrabify"),autounselectify:u(function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},"autounselectify"),selectionType:u(function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=ev),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},"selectionType"),panningEnabled:u(function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},"panningEnabled"),userPanningEnabled:u(function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},"userPanningEnabled"),zoomingEnabled:u(function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},"zoomingEnabled"),userZoomingEnabled:u(function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},"userZoomingEnabled"),boxSelectionEnabled:u(function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},"boxSelectionEnabled"),pan:u(function(){var e=arguments,t=this._private.pan,n,r,a,i,o;switch(e.length){case 0:return t;case 1:if(ce(e[0]))return n=e[0],t[n];if(ke(e[0])){if(!this._private.panningEnabled)return this;a=e[0],i=a.x,o=a.y,te(i)&&(t.x=i),te(o)&&(t.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],r=e[1],(n==="x"||n==="y")&&te(r)&&(t[n]=r),this.emit("pan viewport");break}return this.notify("viewport"),this},"pan"),panBy:u(function(e,t){var n=arguments,r=this._private.pan,a,i,o,c,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:ke(e)&&(o=n[0],c=o.x,l=o.y,te(c)&&(r.x+=c),te(l)&&(r.y+=l),this.emit("pan viewport"));break;case 2:a=e,i=t,(a==="x"||a==="y")&&te(i)&&(r[a]+=i),this.emit("pan viewport");break}return this.notify("viewport"),this},"panBy"),gc:u(function(){this.notify("gc")},"gc"),fit:u(function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},"fit"),getFitViewport:u(function(e,t){if(te(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(ce(e)){var r=e;e=this.$(r)}else if(id(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else wt(e)||(e=this.mutableElements());if(!(wt(e)&&e.empty())){n=n||e.boundingBox();var i=this.width(),o=this.height(),c;if(t=te(t)?t:0,!isNaN(i)&&!isNaN(o)&&i>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){c=Math.min((i-2*t)/n.w,(o-2*t)/n.h),c=c>this._private.maxZoom?this._private.maxZoom:c,c=c<this._private.minZoom?this._private.minZoom:c;var l={x:(i-c*(n.x1+n.x2))/2,y:(o-c*(n.y1+n.y2))/2};return{zoom:c,pan:l}}}}},"getFitViewport"),zoomRange:u(function(e,t){var n=this._private;if(t==null){var r=e;e=r.min,t=r.max}return te(e)&&te(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):te(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:te(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},"zoomRange"),minZoom:u(function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},"minZoom"),maxZoom:u(function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},"maxZoom"),getZoomedViewport:u(function(e){var t=this._private,n=t.pan,r=t.zoom,a,i,o=!1;if(t.zoomingEnabled||(o=!0),te(e)?i=e:ke(e)&&(i=e.level,e.position!=null?a=Na(e.position,r,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(o=!0)),i=i>t.maxZoom?t.maxZoom:i,i=i<t.minZoom?t.minZoom:i,o||!te(i)||i===r||a!=null&&(!te(a.x)||!te(a.y)))return null;if(a!=null){var c=n,l=r,s=i,d={x:-s/l*(a.x-c.x)+a.x,y:-s/l*(a.y-c.y)+a.y};return{zoomed:!0,panned:!0,zoom:s,pan:d}}else return{zoomed:!0,panned:!1,zoom:i,pan:n}},"getZoomedViewport"),zoom:u(function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},"zoom"),viewport:u(function(e){var t=this._private,n=!0,r=!0,a=[],i=!1,o=!1;if(!e)return this;if(te(e.zoom)||(n=!1),ke(e.pan)||(r=!1),!n&&!r)return this;if(n){var c=e.zoom;c<t.minZoom||c>t.maxZoom||!t.zoomingEnabled?i=!0:(t.zoom=c,a.push("zoom"))}if(r&&(!i||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;te(l.x)&&(t.pan.x=l.x,o=!1),te(l.y)&&(t.pan.y=l.y,o=!1),o||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},"viewport"),center:u(function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},"center"),getCenterPan:u(function(e,t){if(this._private.panningEnabled){if(ce(e)){var n=e;e=this.mutableElements().filter(n)}else wt(e)||(e=this.mutableElements());if(e.length!==0){var r=e.boundingBox(),a=this.width(),i=this.height();t=t===void 0?this._private.zoom:t;var o={x:(a-t*(r.x1+r.x2))/2,y:(i-t*(r.y1+r.y2))/2};return o}}},"getCenterPan"),reset:u(function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},"reset"),invalidateSize:u(function(){this._private.sizeCache=null},"invalidateSize"),size:u(function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var r=n.window().getComputedStyle(t),a=u(function(i){return parseFloat(r.getPropertyValue(i))},"val");return{width:t.clientWidth-a("padding-left")-a("padding-right"),height:t.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},"size"),width:u(function(){return this.size().width},"width"),height:u(function(){return this.size().height},"height"),extent:u(function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},"extent"),renderedExtent:u(function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},"renderedExtent"),multiClickDebounceTime:u(function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this},"multiClickDebounceTime")};Sn.centre=Sn.center;Sn.autolockNodes=Sn.autolock;Sn.autoungrabifyNodes=Sn.autoungrabify;var Br={data:Be.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Be.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Be.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Be.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Br.attr=Br.data;Br.removeAttr=Br.removeData;var _r=u(function(e){var t=this;e=pe({},e);var n=e.container;n&&!wa(n)&&wa(n[0])&&(n=n[0]);var r=n?n._cyreg:null;r=r||{},r&&r.cy&&(r.cy.destroy(),r={});var a=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var i=Ue!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=pe({name:i?"grid":"null"},o.layout),o.renderer=pe({name:i?"canvas":"null"},o.renderer);var c=u(function(f,p,g){return p!==void 0?p:g!==void 0?g:f},"defVal"),l=this._private={container:n,ready:!1,options:o,elements:new nt(this),listeners:[],aniEles:new nt(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,o.zoomingEnabled),userZoomingEnabled:c(!0,o.userZoomingEnabled),panningEnabled:c(!0,o.panningEnabled),userPanningEnabled:c(!0,o.userPanningEnabled),boxSelectionEnabled:c(!0,o.boxSelectionEnabled),autolock:c(!1,o.autolock,o.autolockNodes),autoungrabify:c(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:c(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?i:o.styleEnabled,zoom:te(o.zoom)?o.zoom:1,pan:{x:ke(o.pan)&&te(o.pan.x)?o.pan.x:0,y:ke(o.pan)&&te(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:c(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var s=u(function(f,p){var g=f.some(od);if(g)return Qn.all(f).then(p);p(f)},"loadExtData");l.styleEnabled&&t.setStyle([]);var d=pe({},o,o.renderer);t.initRenderer(d);var h=u(function(f,p,g){t.notifications(!1);var y=t.mutableElements();y.length>0&&y.remove(),f!=null&&(ke(f)||Me(f))&&t.add(f),t.one("layoutready",function(v){t.notifications(!0),t.emit(v),t.one("load",p),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",g),t.emit("done")});var b=pe({},t._private.options.layout);b.eles=t.elements(),t.layout(b).run()},"setElesAndLayout");s([o.style,o.elements],function(f){var p=f[0],g=f[1];l.styleEnabled&&t.style().append(p),h(g,function(){t.startAnimationLoop(),l.ready=!0,Fe(o.ready)&&t.on("ready",o.ready);for(var y=0;y<a.length;y++){var b=a[y];t.on("ready",b)}r&&(r.readies=[]),t.emit("ready")},o.done)})},"Core"),ka=_r.prototype;pe(ka,{instanceString:u(function(){return"core"},"instanceString"),isReady:u(function(){return this._private.ready},"isReady"),destroyed:u(function(){return this._private.destroyed},"destroyed"),ready:u(function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},"ready"),destroy:u(function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},"destroy"),hasElementWithId:u(function(e){return this._private.elements.hasElementWithId(e)},"hasElementWithId"),getElementById:u(function(e){return this._private.elements.getElementById(e)},"getElementById"),hasCompoundNodes:u(function(){return this._private.hasCompoundNodes},"hasCompoundNodes"),headless:u(function(){return this._private.renderer.isHeadless()},"headless"),styleEnabled:u(function(){return this._private.styleEnabled},"styleEnabled"),addToPool:u(function(e){return this._private.elements.merge(e),this},"addToPool"),removeFromPool:u(function(e){return this._private.elements.unmerge(e),this},"removeFromPool"),container:u(function(){return this._private.container||null},"container"),window:u(function(){var e=this._private.container;if(e==null)return Ue;var t=this._private.container.ownerDocument;return t===void 0||t==null?Ue:t.defaultView||Ue},"window"),mount:u(function(e){if(e!=null){var t=this,n=t._private,r=n.options;return!wa(e)&&wa(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(pe({},r,r.renderer,{name:r.renderer.name==="null"?"canvas":r.renderer.name})),t.startAnimationLoop(),t.style(r.style),t.emit("mount"),t}},"mount"),unmount:u(function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},"unmount"),options:u(function(){return Rt(this._private.options)},"options"),json:u(function(e){var t=this,n=t._private,r=t.mutableElements(),a=u(function(m){return t.getElementById(m.id())},"getFreshRef");if(ke(e)){if(t.startBatch(),e.elements){var i={},o=u(function(m,x){for(var w=[],P=[],T=0;T<m.length;T++){var E=m[T];if(!E.data.id){_e("cy.json() cannot handle elements without an ID attribute");continue}var S=""+E.data.id,A=t.getElementById(S);i[S]=!0,A.length!==0?P.push({ele:A,json:E}):(x&&(E.group=x),w.push(E))}t.add(w);for(var B=0;B<P.length;B++){var k=P[B],D=k.ele,I=k.json;D.json(I)}},"updateEles");if(Me(e.elements))o(e.elements);else for(var c=["nodes","edges"],l=0;l<c.length;l++){var s=c[l],d=e.elements[s];Me(d)&&o(d,s)}var h=t.collection();r.filter(function(m){return!i[m.id()]}).forEach(function(m){m.isParent()?h.merge(m):m.remove()}),h.forEach(function(m){return m.children().move({parent:null})}),h.forEach(function(m){return a(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<f.length;p++){var g=f[p];e[g]!=null&&t[g](e[g])}return t.endBatch(),this}else{var y=!!e,b={};y?b.elements=this.elements().map(function(m){return m.json()}):(b.elements={},r.forEach(function(m){var x=m.group();b.elements[x]||(b.elements[x]=[]),b.elements[x].push(m.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=Rt(t.data());var v=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=Rt(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=Rt(v.renderer),b.hideEdgesOnViewport=v.hideEdgesOnViewport,b.textureOnViewport=v.textureOnViewport,b.wheelSensitivity=v.wheelSensitivity,b.motionBlur=v.motionBlur,b.multiClickDebounceTime=v.multiClickDebounceTime,b}},"json")});ka.$id=ka.getElementById;[Hg,Kg,Uu,Pi,pa,Zg,Di,ga,Jg,Sn,Br].forEach(function(e){pe(ka,e)});var tv={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")},nv={maximal:!1,acyclic:!1},Rn=u(function(e){return e.scratch("breadthfirst")},"getInfo"),ms=u(function(e,t){return e.scratch("breadthfirst",t)},"setInfo");function oo(e){this.options=pe({},tv,nv,e)}u(oo,"BreadthFirstLayout");oo.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=n.nodes().filter(function(re){return re.isChildless()}),a=n,i=e.directed,o=e.acyclic||e.maximal||e.maximalAdjustments>0,c=!!e.boundingBox,l=t.extent(),s=yt(c?e.boundingBox:{x1:l.x1,y1:l.y1,w:l.w,h:l.h}),d;if(wt(e.roots))d=e.roots;else if(Me(e.roots)){for(var h=[],f=0;f<e.roots.length;f++){var p=e.roots[f],g=t.getElementById(p);h.push(g)}d=t.collection(h)}else if(ce(e.roots))d=t.$(e.roots);else if(i)d=r.roots();else{var y=n.components();d=t.collection();for(var b=u(function(re){var de=y[re],ue=de.maxDegree(!1),xe=de.filter(function(ge){return ge.degree(!1)===ue});d=d.add(xe)},"_loop"),v=0;v<y.length;v++)b(v)}var m=[],x={},w=u(function(re,de){m[de]==null&&(m[de]=[]);var ue=m[de].length;m[de].push(re),ms(re,{index:ue,depth:de})},"addToDepth"),P=u(function(re,de){var ue=Rn(re),xe=ue.depth,ge=ue.index;m[xe][ge]=null,re.isChildless()&&w(re,de)},"changeDepth");a.bfs({roots:d,directed:e.directed,visit:u(function(re,de,ue,xe,ge){var Te=re[0],Se=Te.id();Te.isChildless()&&w(Te,ge),x[Se]=!0},"visit")});for(var T=[],E=0;E<r.length;E++){var S=r[E];x[S.id()]||T.push(S)}var A=u(function(re){for(var de=m[re],ue=0;ue<de.length;ue++){var xe=de[ue];if(xe==null){de.splice(ue,1),ue--;continue}ms(xe,{depth:re,index:ue})}},"assignDepthsAt"),B=u(function(re,de){for(var ue=Rn(re),xe=re.incomers().filter(function(H){return H.isNode()&&n.has(H)}),ge=-1,Te=re.id(),Se=0;Se<xe.length;Se++){var Ce=xe[Se],C=Rn(Ce);ge=Math.max(ge,C.depth)}if(ue.depth<=ge){if(!e.acyclic&&de[Te])return null;var F=ge+1;return P(re,F),de[Te]=F,!0}return!1},"adjustMaximally");if(i&&o){var k=[],D={},I=u(function(re){return k.push(re)},"enqueue"),_=u(function(){return k.shift()},"dequeue");for(r.forEach(function(re){return k.push(re)});k.length>0;){var R=_(),z=B(R,D);if(z)R.outgoers().filter(function(re){return re.isNode()&&n.has(re)}).forEach(I);else if(z===null){_e("Detected double maximal shift for node `"+R.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var N=0;if(e.avoidOverlap)for(var M=0;M<r.length;M++){var L=r[M],q=L.layoutDimensions(e),Y=q.w,W=q.h;N=Math.max(N,Y,W)}var K={},J=u(function(re){if(K[re.id()])return K[re.id()];for(var de=Rn(re).depth,ue=re.neighborhood(),xe=0,ge=0,Te=0;Te<ue.length;Te++){var Se=ue[Te];if(!(Se.isEdge()||Se.isParent()||!r.has(Se))){var Ce=Rn(Se);if(Ce!=null){var C=Ce.index,F=Ce.depth;if(!(C==null||F==null)){var H=m[F].length;F<de&&(xe+=C/H,ge++)}}}}return ge=Math.max(1,ge),xe=xe/ge,ge===0&&(xe=0),K[re.id()]=xe,xe},"getWeightedPercent"),ee=u(function(re,de){var ue=J(re),xe=J(de),ge=ue-xe;return ge===0?Zs(re.id(),de.id()):ge},"sortFn");e.depthSort!==void 0&&(ee=e.depthSort);for(var Z=m.length,Q=0;Q<Z;Q++)m[Q].sort(ee),A(Q);for(var U=[],O=0;O<T.length;O++)U.push(T[O]);var X=u(function(){for(var re=0;re<Z;re++)A(re)},"assignDepths");U.length&&(m.unshift(U),Z=m.length,X());for(var $=0,ie=0;ie<Z;ie++)$=Math.max(m[ie].length,$);var se={x:s.x1+s.w/2,y:s.y1+s.h/2},ve=r.reduce(function(re,de){return function(ue){return{w:re.w===-1?ue.w:(re.w+ue.w)/2,h:re.h===-1?ue.h:(re.h+ue.h)/2}}(de.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),Pe=Math.max(Z===1?0:c?(s.h-e.padding*2-ve.h)/(Z-1):(s.h-e.padding*2-ve.h)/(Z+1),N),we=m.reduce(function(re,de){return Math.max(re,de.length)},0),Re=u(function(re){var de=Rn(re),ue=de.depth,xe=de.index;if(e.circle){var ge=Math.min(s.w/2/Z,s.h/2/Z);ge=Math.max(ge,N);var Te=ge*ue+ge-(Z>0&&m[0].length<=3?ge/2:0),Se=2*Math.PI/m[ue].length*xe;return ue===0&&m[0].length===1&&(Te=1),{x:se.x+Te*Math.cos(Se),y:se.y+Te*Math.sin(Se)}}else{var Ce=m[ue].length,C=Math.max(Ce===1?0:c?(s.w-e.padding*2-ve.w)/((e.grid?we:Ce)-1):(s.w-e.padding*2-ve.w)/((e.grid?we:Ce)+1),N),F={x:se.x+(xe+1-(Ce+1)/2)*C,y:se.y+(ue+1-(Z+1)/2)*Pe};return F}},"getPosition");return n.nodes().layoutPositions(this,e,Re),this};var rv={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function so(e){this.options=pe({},rv,e)}u(so,"CircleLayout");so.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));for(var o=yt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c={x:o.x1+o.w/2,y:o.y1+o.h/2},l=t.sweep===void 0?2*Math.PI-2*Math.PI/i.length:t.sweep,s=l/Math.max(1,i.length-1),d,h=0,f=0;f<i.length;f++){var p=i[f],g=p.layoutDimensions(t),y=g.w,b=g.h;h=Math.max(h,y,b)}if(te(t.radius)?d=t.radius:i.length<=1?d=0:d=Math.min(o.h,o.w)/2-h,i.length>1&&t.avoidOverlap){h*=1.75;var v=Math.cos(s)-Math.cos(0),m=Math.sin(s)-Math.sin(0),x=Math.sqrt(h*h/(v*v+m*m));d=Math.max(x,d)}var w=u(function(P,T){var E=t.startAngle+T*s*(a?1:-1),S=d*Math.cos(E),A=d*Math.sin(E),B={x:c.x+S,y:c.y+A};return B},"getPos");return r.nodes().layoutPositions(this,t,w),this};var av={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:u(function(e){return e.degree()},"concentric"),levelWidth:u(function(e){return e.maxDegree()/4},"levelWidth"),animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function lo(e){this.options=pe({},av,e)}u(lo,"ConcentricLayout");lo.prototype.run=function(){for(var e=this.options,t=e,n=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,r=e.cy,a=t.eles,i=a.nodes().not(":parent"),o=yt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),c={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],s=0,d=0;d<i.length;d++){var h=i[d],f=void 0;f=t.concentric(h),l.push({value:f,node:h}),h._private.scratch.concentric=f}i.updateStyle();for(var p=0;p<i.length;p++){var g=i[p],y=g.layoutDimensions(t);s=Math.max(s,y.w,y.h)}l.sort(function(ve,Pe){return Pe.value-ve.value});for(var b=t.levelWidth(i),v=[[]],m=v[0],x=0;x<l.length;x++){var w=l[x];if(m.length>0){var P=Math.abs(m[0].value-w.value);P>=b&&(m=[],v.push(m))}m.push(w)}var T=s+t.minNodeSpacing;if(!t.avoidOverlap){var E=v.length>0&&v[0].length>1,S=Math.min(o.w,o.h)/2-T,A=S/(v.length+E?1:0);T=Math.min(T,A)}for(var B=0,k=0;k<v.length;k++){var D=v[k],I=t.sweep===void 0?2*Math.PI-2*Math.PI/D.length:t.sweep,_=D.dTheta=I/Math.max(1,D.length-1);if(D.length>1&&t.avoidOverlap){var R=Math.cos(_)-Math.cos(0),z=Math.sin(_)-Math.sin(0),N=Math.sqrt(T*T/(R*R+z*z));B=Math.max(N,B)}D.r=B,B+=T}if(t.equidistant){for(var M=0,L=0,q=0;q<v.length;q++){var Y=v[q],W=Y.r-L;M=Math.max(M,W)}L=0;for(var K=0;K<v.length;K++){var J=v[K];K===0&&(L=J.r),J.r=L,L+=M}}for(var ee={},Z=0;Z<v.length;Z++)for(var Q=v[Z],U=Q.dTheta,O=Q.r,X=0;X<Q.length;X++){var $=Q[X],ie=t.startAngle+(n?1:-1)*U*X,se={x:c.x+O*Math.cos(ie),y:c.y+O*Math.sin(ie)};ee[$.node.id()]=se}return a.nodes().layoutPositions(this,t,function(ve){var Pe=ve.id();return ee[Pe]}),this};var si,iv={ready:u(function(){},"ready"),stop:u(function(){},"stop"),animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:u(function(e){return 2048},"nodeRepulsion"),nodeOverlap:4,idealEdgeLength:u(function(e){return 32},"idealEdgeLength"),edgeElasticity:u(function(e){return 32},"edgeElasticity"),nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Wr(e){this.options=pe({},iv,e),this.options.layout=this;var t=this.options.eles.nodes(),n=this.options.eles.edges(),r=n.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),c=t.some(function(s){return s.data("id")===i}),l=t.some(function(s){return s.data("id")===o});return!c||!l});this.options.eles=this.options.eles.not(r)}u(Wr,"CoseLayout");Wr.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,(e.animate===!0||e.animate===!1)&&n.emit({type:"layoutstart",layout:n}),e.debug===!0?si=!0:si=!1;var r=ov(t,n,e);si&&uv(r),e.randomize&&cv(r);var a=Xt(),i=u(function(){dv(r,t,e),e.fit===!0&&t.fit(e.padding)},"refresh"),o=u(function(h){return!(n.stopped||h>=e.numIter||(hv(r,e),r.temperature=r.temperature*e.coolingFactor,r.temperature<e.minTemp))},"mainLoop"),c=u(function(){if(e.animate===!0||e.animate===!1)i(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var h=e.eles.nodes(),f=Ku(r,e,h);h.layoutPositions(n,e,f)}},"done"),l=0,s=!0;if(e.animate===!0){var d=u(function h(){for(var f=0;s&&f<e.refresh;)s=o(l),l++,f++;if(!s)xs(r,e),c();else{var p=Xt();p-a>=e.animationThreshold&&i(),Ea(h)}},"frame");d()}else{for(;s;)s=o(l),l++;xs(r,e),c()}return this};Wr.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Wr.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var ov=u(function(e,t,n){for(var r=n.eles.edges(),a=n.eles.nodes(),i=yt(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:i.w,clientHeight:i.h,boundingBox:i},c=n.eles.components(),l={},s=0;s<c.length;s++)for(var d=c[s],h=0;h<d.length;h++){var f=d[h];l[f.id()]=s}for(var s=0;s<o.nodeSize;s++){var p=a[s],g=p.layoutDimensions(n),y={};y.isLocked=p.locked(),y.id=p.data("id"),y.parentId=p.data("parent"),y.cmptId=l[p.id()],y.children=[],y.positionX=p.position("x"),y.positionY=p.position("y"),y.offsetX=0,y.offsetY=0,y.height=g.w,y.width=g.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(p.style("padding")),y.padRight=parseFloat(p.style("padding")),y.padTop=parseFloat(p.style("padding")),y.padBottom=parseFloat(p.style("padding")),y.nodeRepulsion=Fe(n.nodeRepulsion)?n.nodeRepulsion(p):n.nodeRepulsion,o.layoutNodes.push(y),o.idToIndex[y.id]=s}for(var b=[],v=0,m=-1,x=[],s=0;s<o.nodeSize;s++){var p=o.layoutNodes[s],w=p.parentId;w!=null?o.layoutNodes[o.idToIndex[w]].children.push(p.id):(b[++m]=p.id,x.push(p.id))}for(o.graphSet.push(x);v<=m;){var P=b[v++],T=o.idToIndex[P],f=o.layoutNodes[T],E=f.children;if(E.length>0){o.graphSet.push(E);for(var s=0;s<E.length;s++)b[++m]=E[s]}}for(var s=0;s<o.graphSet.length;s++)for(var S=o.graphSet[s],h=0;h<S.length;h++){var A=o.idToIndex[S[h]];o.indexToGraph[A]=s}for(var s=0;s<o.edgeSize;s++){var B=r[s],k={};k.id=B.data("id"),k.sourceId=B.data("source"),k.targetId=B.data("target");var D=Fe(n.idealEdgeLength)?n.idealEdgeLength(B):n.idealEdgeLength,I=Fe(n.edgeElasticity)?n.edgeElasticity(B):n.edgeElasticity,_=o.idToIndex[k.sourceId],R=o.idToIndex[k.targetId],z=o.indexToGraph[_],N=o.indexToGraph[R];if(z!=N){for(var M=sv(k.sourceId,k.targetId,o),L=o.graphSet[M],q=0,y=o.layoutNodes[_];L.indexOf(y.id)===-1;)y=o.layoutNodes[o.idToIndex[y.parentId]],q++;for(y=o.layoutNodes[R];L.indexOf(y.id)===-1;)y=o.layoutNodes[o.idToIndex[y.parentId]],q++;D*=q*n.nestingFactor}k.idealLength=D,k.elasticity=I,o.layoutEdges.push(k)}return o},"createLayoutInfo"),sv=u(function(e,t,n){var r=lv(e,t,0,n);return 2>r.count?0:r.graph},"findLCA"),lv=u(function e(t,n,r,a){var i=a.graphSet[r];if(-1<i.indexOf(t)&&-1<i.indexOf(n))return{count:2,graph:r};for(var o=0,c=0;c<i.length;c++){var l=i[c],s=a.idToIndex[l],d=a.layoutNodes[s].children;if(d.length!==0){var h=a.indexToGraph[a.idToIndex[d[0]]],f=e(t,n,h,a);if(f.count!==0)if(f.count===1){if(o++,o===2)break}else return f}}return{count:o,graph:r}},"findLCA_aux"),uv,cv=u(function(e,t){for(var n=e.clientWidth,r=e.clientHeight,a=0;a<e.nodeSize;a++){var i=e.layoutNodes[a];i.children.length===0&&!i.isLocked&&(i.positionX=Math.random()*n,i.positionY=Math.random()*r)}},"randomizePositions"),Ku=u(function(e,t,n){var r=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(i){var o=e.layoutNodes[e.idToIndex[i.data("id")]];a.x1=Math.min(a.x1,o.positionX),a.x2=Math.max(a.x2,o.positionX),a.y1=Math.min(a.y1,o.positionY),a.y2=Math.max(a.y2,o.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(i,o){var c=e.layoutNodes[e.idToIndex[i.data("id")]];if(t.boundingBox){var l=(c.positionX-a.x1)/a.w,s=(c.positionY-a.y1)/a.h;return{x:r.x1+l*r.w,y:r.y1+s*r.h}}else return{x:c.positionX,y:c.positionY}}},"getScaleInBoundsFn"),dv=u(function(e,t,n){var r=n.layout,a=n.eles.nodes(),i=Ku(e,n,a);a.positions(i),e.ready!==!0&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},"refreshPositions"),hv=u(function(e,t,n){fv(e,t),vv(e),yv(e,t),mv(e),bv(e)},"step"),fv=u(function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],a=r.length,i=0;i<a;i++)for(var o=e.layoutNodes[e.idToIndex[r[i]]],c=i+1;c<a;c++){var l=e.layoutNodes[e.idToIndex[r[c]]];pv(o,l,e,t)}},"calculateNodeForces"),bs=u(function(e){return-e+2*e*Math.random()},"randomDistance"),pv=u(function(e,t,n,r){var a=e.cmptId,i=t.cmptId;if(!(a!==i&&!n.isCompound)){var o=t.positionX-e.positionX,c=t.positionY-e.positionY,l=1;o===0&&c===0&&(o=bs(l),c=bs(l));var s=gv(e,t,o,c);if(s>0)var b=r.nodeOverlap*s,y=Math.sqrt(o*o+c*c),v=b*o/y,m=b*c/y;else var d=Aa(e,o,c),h=Aa(t,-1*o,-1*c),f=h.x-d.x,p=h.y-d.y,g=f*f+p*p,y=Math.sqrt(g),b=(e.nodeRepulsion+t.nodeRepulsion)/g,v=b*f/y,m=b*p/y;e.isLocked||(e.offsetX-=v,e.offsetY-=m),t.isLocked||(t.offsetX+=v,t.offsetY+=m)}},"nodeRepulsion"),gv=u(function(e,t,n,r){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(r>0)var i=e.maxY-t.minY;else var i=t.maxY-e.minY;return a>=0&&i>=0?Math.sqrt(a*a+i*i):0},"nodesOverlap"),Aa=u(function(e,t,n){var r=e.positionX,a=e.positionY,i=e.height||1,o=e.width||1,c=n/t,l=i/o,s={};return t===0&&0<n||t===0&&0>n?(s.x=r,s.y=a+i/2,s):0<t&&-1*l<=c&&c<=l?(s.x=r+o/2,s.y=a+o*n/2/t,s):0>t&&-1*l<=c&&c<=l?(s.x=r-o/2,s.y=a-o*n/2/t,s):0<n&&(c<=-1*l||c>=l)?(s.x=r+i*t/2/n,s.y=a+i/2,s):(0>n&&(c<=-1*l||c>=l)&&(s.x=r-i*t/2/n,s.y=a-i/2),s)},"findClippingPoint"),vv=u(function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],a=e.idToIndex[r.sourceId],i=e.layoutNodes[a],o=e.idToIndex[r.targetId],c=e.layoutNodes[o],l=c.positionX-i.positionX,s=c.positionY-i.positionY;if(!(l===0&&s===0)){var d=Aa(i,l,s),h=Aa(c,-1*l,-1*s),f=h.x-d.x,p=h.y-d.y,g=Math.sqrt(f*f+p*p),y=Math.pow(r.idealLength-g,2)/r.elasticity;if(g!==0)var b=y*f/g,v=y*p/g;else var b=0,v=0;i.isLocked||(i.offsetX+=b,i.offsetY+=v),c.isLocked||(c.offsetX-=b,c.offsetY-=v)}}},"calculateEdgeForces"),yv=u(function(e,t){if(t.gravity!==0)for(var n=1,r=0;r<e.graphSet.length;r++){var a=e.graphSet[r],i=a.length;if(r===0)var l=e.clientHeight/2,s=e.clientWidth/2;else var o=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[o.parentId]],l=c.positionX,s=c.positionY;for(var d=0;d<i;d++){var h=e.layoutNodes[e.idToIndex[a[d]]];if(!h.isLocked){var f=l-h.positionX,p=s-h.positionY,g=Math.sqrt(f*f+p*p);if(g>n){var y=t.gravity*f/g,b=t.gravity*p/g;h.offsetX+=y,h.offsetY+=b}}}}},"calculateGravityForces"),mv=u(function(e,t){var n=[],r=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;r<=a;){var i=n[r++],o=e.idToIndex[i],c=e.layoutNodes[o],l=c.children;if(0<l.length&&!c.isLocked){for(var s=c.offsetX,d=c.offsetY,h=0;h<l.length;h++){var f=e.layoutNodes[e.idToIndex[l[h]]];f.offsetX+=s,f.offsetY+=d,n[++a]=l[h]}c.offsetX=0,c.offsetY=0}}},"propagateForces"),bv=u(function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var a=xv(r.offsetX,r.offsetY,e.temperature);r.positionX+=a.x,r.positionY+=a.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,wv(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},"updatePositions"),xv=u(function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var a={x:n*e/r,y:n*t/r};else var a={x:e,y:t};return a},"limitForce"),wv=u(function e(t,n){var r=t.parentId;if(r!=null){var a=n.layoutNodes[n.idToIndex[r]],i=!1;if((a.maxX==null||t.maxX+a.padRight>a.maxX)&&(a.maxX=t.maxX+a.padRight,i=!0),(a.minX==null||t.minX-a.padLeft<a.minX)&&(a.minX=t.minX-a.padLeft,i=!0),(a.maxY==null||t.maxY+a.padBottom>a.maxY)&&(a.maxY=t.maxY+a.padBottom,i=!0),(a.minY==null||t.minY-a.padTop<a.minY)&&(a.minY=t.minY-a.padTop,i=!0),i)return e(a,n)}},"updateAncestryBoundaries"),xs=u(function(e,t){for(var n=e.layoutNodes,r=[],a=0;a<n.length;a++){var i=n[a],o=i.cmptId,c=r[o]=r[o]||[];c.push(i)}for(var l=0,a=0;a<r.length;a++){var s=r[a];if(s){s.x1=1/0,s.x2=-1/0,s.y1=1/0,s.y2=-1/0;for(var d=0;d<s.length;d++){var h=s[d];s.x1=Math.min(s.x1,h.positionX-h.width/2),s.x2=Math.max(s.x2,h.positionX+h.width/2),s.y1=Math.min(s.y1,h.positionY-h.height/2),s.y2=Math.max(s.y2,h.positionY+h.height/2)}s.w=s.x2-s.x1,s.h=s.y2-s.y1,l+=s.w*s.h}}r.sort(function(v,m){return m.w*m.h-v.w*v.h});for(var f=0,p=0,g=0,y=0,b=Math.sqrt(l)*e.clientWidth/e.clientHeight,a=0;a<r.length;a++){var s=r[a];if(s){for(var d=0;d<s.length;d++){var h=s[d];h.isLocked||(h.positionX+=f-s.x1,h.positionY+=p-s.y1)}f+=s.w+t.componentSpacing,g+=s.w+t.componentSpacing,y=Math.max(y,s.h),g>b&&(p+=y+t.componentSpacing,f=0,g=0,y=0)}}},"separateComponents"),Ev={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:u(function(e){},"position"),sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function uo(e){this.options=pe({},Ev,e)}u(uo,"GridLayout");uo.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=r.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));var i=yt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(i.h===0||i.w===0)r.nodes().layoutPositions(this,t,function(K){return{x:i.x1,y:i.y1}});else{var o=a.size(),c=Math.sqrt(o*i.h/i.w),l=Math.round(c),s=Math.round(i.w/i.h*c),d=u(function(K){if(K==null)return Math.min(l,s);var J=Math.min(l,s);J==l?l=K:s=K},"small"),h=u(function(K){if(K==null)return Math.max(l,s);var J=Math.max(l,s);J==l?l=K:s=K},"large"),f=t.rows,p=t.cols!=null?t.cols:t.columns;if(f!=null&&p!=null)l=f,s=p;else if(f!=null&&p==null)l=f,s=Math.ceil(o/l);else if(f==null&&p!=null)s=p,l=Math.ceil(o/s);else if(s*l>o){var g=d(),y=h();(g-1)*y>=o?d(g-1):(y-1)*g>=o&&h(y-1)}else for(;s*l<o;){var b=d(),v=h();(v+1)*b>=o?h(v+1):d(b+1)}var m=i.w/s,x=i.h/l;if(t.condense&&(m=0,x=0),t.avoidOverlap)for(var w=0;w<a.length;w++){var P=a[w],T=P._private.position;(T.x==null||T.y==null)&&(T.x=0,T.y=0);var E=P.layoutDimensions(t),S=t.avoidOverlapPadding,A=E.w+S,B=E.h+S;m=Math.max(m,A),x=Math.max(x,B)}for(var k={},D=u(function(K,J){return!!k["c-"+K+"-"+J]},"used"),I=u(function(K,J){k["c-"+K+"-"+J]=!0},"use"),_=0,R=0,z=u(function(){R++,R>=s&&(R=0,_++)},"moveToNextCell"),N={},M=0;M<a.length;M++){var L=a[M],q=t.position(L);if(q&&(q.row!==void 0||q.col!==void 0)){var Y={row:q.row,col:q.col};if(Y.col===void 0)for(Y.col=0;D(Y.row,Y.col);)Y.col++;else if(Y.row===void 0)for(Y.row=0;D(Y.row,Y.col);)Y.row++;N[L.id()]=Y,I(Y.row,Y.col)}}var W=u(function(K,J){var ee,Z;if(K.locked()||K.isParent())return!1;var Q=N[K.id()];if(Q)ee=Q.col*m+m/2+i.x1,Z=Q.row*x+x/2+i.y1;else{for(;D(_,R);)z();ee=R*m+m/2+i.x1,Z=_*x+x/2+i.y1,I(_,R),z()}return{x:ee,y:Z}},"getPos");a.layoutPositions(this,t,W)}return this};var Cv={ready:u(function(){},"ready"),stop:u(function(){},"stop")};function Ha(e){this.options=pe({},Cv,e)}u(Ha,"NullLayout");Ha.prototype.run=function(){var e=this.options,t=e.eles,n=this;return e.cy,n.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.emit("layoutready"),n.one("layoutstop",e.stop),n.emit("layoutstop"),this};Ha.prototype.stop=function(){return this};var Tv={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function co(e){this.options=pe({},Tv,e)}u(co,"PresetLayout");co.prototype.run=function(){var e=this.options,t=e.eles,n=t.nodes(),r=Fe(e.positions);function a(i){if(e.positions==null)return bh(i.position());if(r)return e.positions(i);var o=e.positions[i._private.data.id];return o??null}return u(a,"getPosition"),n.layoutPositions(this,e,function(i,o){var c=a(i);return i.locked()||c==null?!1:c}),this};var Sv={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:u(function(e,t){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:u(function(e,t){return t},"transform")};function ho(e){this.options=pe({},Sv,e)}u(ho,"RandomLayout");ho.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=yt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),a=u(function(i,o){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}},"getPos");return n.nodes().layoutPositions(this,e,a),this};var Pv=[{name:"breadthfirst",impl:oo},{name:"circle",impl:so},{name:"concentric",impl:lo},{name:"cose",impl:Wr},{name:"grid",impl:uo},{name:"null",impl:Ha},{name:"preset",impl:co},{name:"random",impl:ho}];function fo(e){this.options=e,this.notifications=0}u(fo,"NullRenderer");var ws=u(function(){},"noop"),Es=u(function(){throw new Error("A headless instance can not render images")},"throwImgErr");fo.prototype={recalculateRenderedStyle:ws,notify:u(function(){this.notifications++},"notify"),init:ws,isHeadless:u(function(){return!0},"isHeadless"),png:Es,jpg:Es};var po={};po.arrowShapeWidth=.3;po.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=u(function(l,s,d,h,f,p,g){var y=f.x-d/2-g,b=f.x+d/2+g,v=f.y-d/2-g,m=f.y+d/2+g,x=y<=l&&l<=b&&v<=s&&s<=m;return x},"bbCollide"),r=u(function(l,s,d,h,f){var p=l*Math.cos(h)-s*Math.sin(h),g=l*Math.sin(h)+s*Math.cos(h),y=p*d,b=g*d,v=y+f.x,m=b+f.y;return{x:v,y:m}},"transform"),a=u(function(l,s,d,h){for(var f=[],p=0;p<l.length;p+=2){var g=l[p],y=l[p+1];f.push(r(g,y,s,d,h))}return f},"transformPoints"),i=u(function(l){for(var s=[],d=0;d<l.length;d++){var h=l[d];s.push(h.x,h.y)}return s},"pointsToArr"),o=u(function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},"standardGap"),c=u(function(l,s){ce(s)&&(s=e[s]),e[l]=pe({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:u(function(d,h,f,p,g,y){var b=i(a(this.points,f+2*y,p,g)),v=gt(d,h,b);return v},"collide"),roughCollide:n,draw:u(function(d,h,f,p){var g=a(this.points,h,f,p);t.arrowShapeImpl("polygon")(d,g)},"draw"),spacing:u(function(d){return 0},"spacing"),gap:o},s)},"defineArrowShape");c("none",{collide:Ca,roughCollide:Ca,draw:qi,spacing:Fo,gap:Fo}),c("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),c("arrow","triangle"),c("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:u(function(l,s,d,h,f){var p=a(this.points,s,d,h),g=this.controlPoint,y=r(g[0],g[1],s,d,h);t.arrowShapeImpl(this.name)(l,p,y)},"draw"),gap:u(function(l){return o(l)*.8},"gap")}),c("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:u(function(l,s,d,h,f,p,g){var y=i(a(this.points,d+2*g,h,f)),b=i(a(this.pointsTee,d+2*g,h,f)),v=gt(l,s,y)||gt(l,s,b);return v},"collide"),draw:u(function(l,s,d,h,f){var p=a(this.points,s,d,h),g=a(this.pointsTee,s,d,h);t.arrowShapeImpl(this.name)(l,p,g)},"draw")}),c("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:u(function(l,s,d,h,f,p,g){var y=f,b=Math.pow(y.x-l,2)+Math.pow(y.y-s,2)<=Math.pow((d+2*g)*this.radius,2),v=i(a(this.points,d+2*g,h,f));return gt(l,s,v)||b},"collide"),draw:u(function(l,s,d,h,f){var p=a(this.pointsTr,s,d,h);t.arrowShapeImpl(this.name)(l,p,h.x,h.y,this.radius*s)},"draw"),spacing:u(function(l){return t.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius},"spacing")}),c("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:u(function(l,s){var d=this.baseCrossLinePts.slice(),h=s/l,f=3,p=5;return d[f]=d[f]-h,d[p]=d[p]-h,d},"crossLinePts"),collide:u(function(l,s,d,h,f,p,g){var y=i(a(this.points,d+2*g,h,f)),b=i(a(this.crossLinePts(d,p),d+2*g,h,f)),v=gt(l,s,y)||gt(l,s,b);return v},"collide"),draw:u(function(l,s,d,h,f){var p=a(this.points,s,d,h),g=a(this.crossLinePts(s,f),s,d,h);t.arrowShapeImpl(this.name)(l,p,g)},"draw")}),c("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:u(function(l){return o(l)*.525},"gap")}),c("circle",{radius:.15,collide:u(function(l,s,d,h,f,p,g){var y=f,b=Math.pow(y.x-l,2)+Math.pow(y.y-s,2)<=Math.pow((d+2*g)*this.radius,2);return b},"collide"),draw:u(function(l,s,d,h,f){t.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*s)},"draw"),spacing:u(function(l){return t.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius},"spacing")}),c("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:u(function(l){return 1},"spacing"),gap:u(function(l){return 1},"gap")}),c("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),c("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:u(function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value},"gap")}),c("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:u(function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value},"gap")})};var _n={};_n.projectIntoViewport=function(e,t){var n=this.cy,r=this.findContainerClientCoords(),a=r[0],i=r[1],o=r[4],c=n.pan(),l=n.zoom(),s=((e-a)/o-c.x)/l,d=((t-i)/o-c.y)/l;return[s,d]};_n.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=this.cy.window().getComputedStyle(e),r=u(function(b){return parseFloat(n.getPropertyValue(b))},"styleValue"),a={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},i={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},o=e.clientWidth,c=e.clientHeight,l=a.left+a.right,s=a.top+a.bottom,d=i.left+i.right,h=t.width/(o+d),f=o-l,p=c-s,g=t.left+a.left+i.left,y=t.top+a.top+i.top;return this.containerBB=[g,y,f,p,h]};_n.invalidateContainerClientCoordsCache=function(){this.containerBB=null};_n.findNearestElement=function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]};_n.findNearestElements=function(e,t,n,r){var a=this,i=this,o=i.getCachedZSortedEles(),c=[],l=i.cy.zoom(),s=i.cy.hasCompoundNodes(),d=(r?24:8)/l,h=(r?8:2)/l,f=(r?8:2)/l,p=1/0,g,y;n&&(o=o.interactive);function b(E,S){if(E.isNode()){if(y)return;y=E,c.push(E)}if(E.isEdge()&&(S==null||S<p))if(g){if(g.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value&&g.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value){for(var A=0;A<c.length;A++)if(c[A].isEdge()){c[A]=E,g=E,p=S??p;break}}}else c.push(E),g=E,p=S??p}u(b,"addEle");function v(E){var S=E.outerWidth()+2*h,A=E.outerHeight()+2*h,B=S/2,k=A/2,D=E.position(),I=E.pstyle("corner-radius").value==="auto"?"auto":E.pstyle("corner-radius").pfValue,_=E._private.rscratch;if(D.x-B<=e&&e<=D.x+B&&D.y-k<=t&&t<=D.y+k){var R=i.nodeShapes[a.getNodeShape(E)];if(R.checkPoint(e,t,0,S,A,D.x,D.y,I,_))return b(E,0),!0}}u(v,"checkNode");function m(E){var S=E._private,A=S.rscratch,B=E.pstyle("width").pfValue,k=E.pstyle("arrow-scale").value,D=B/2+d,I=D*D,_=D*2,R=S.source,z=S.target,N;if(A.edgeType==="segments"||A.edgeType==="straight"||A.edgeType==="haystack"){for(var M=A.allpts,L=0;L+3<M.length;L+=2)if(Ih(e,t,M[L],M[L+1],M[L+2],M[L+3],_)&&I>(N=Oh(e,t,M[L],M[L+1],M[L+2],M[L+3])))return b(E,N),!0}else if(A.edgeType==="bezier"||A.edgeType==="multibezier"||A.edgeType==="self"||A.edgeType==="compound"){for(var M=A.allpts,L=0;L+5<A.allpts.length;L+=4)if(Mh(e,t,M[L],M[L+1],M[L+2],M[L+3],M[L+4],M[L+5],_)&&I>(N=Nh(e,t,M[L],M[L+1],M[L+2],M[L+3],M[L+4],M[L+5])))return b(E,N),!0}for(var R=R||S.source,z=z||S.target,q=a.getArrowWidth(B,k),Y=[{name:"source",x:A.arrowStartX,y:A.arrowStartY,angle:A.srcArrowAngle},{name:"target",x:A.arrowEndX,y:A.arrowEndY,angle:A.tgtArrowAngle},{name:"mid-source",x:A.midX,y:A.midY,angle:A.midsrcArrowAngle},{name:"mid-target",x:A.midX,y:A.midY,angle:A.midtgtArrowAngle}],L=0;L<Y.length;L++){var W=Y[L],K=i.arrowShapes[E.pstyle(W.name+"-arrow-shape").value],J=E.pstyle("width").pfValue;if(K.roughCollide(e,t,q,W.angle,{x:W.x,y:W.y},J,d)&&K.collide(e,t,q,W.angle,{x:W.x,y:W.y},J,d))return b(E),!0}s&&c.length>0&&(v(R),v(z))}u(m,"checkEdge");function x(E,S,A){return At(E,S,A)}u(x,"preprop");function w(E,S){var A=E._private,B=f,k;S?k=S+"-":k="",E.boundingBox();var D=A.labelBounds[S||"main"],I=E.pstyle(k+"label").value,_=E.pstyle("text-events").strValue==="yes";if(!(!_||!I)){var R=x(A.rscratch,"labelX",S),z=x(A.rscratch,"labelY",S),N=x(A.rscratch,"labelAngle",S),M=E.pstyle(k+"text-margin-x").pfValue,L=E.pstyle(k+"text-margin-y").pfValue,q=D.x1-B-M,Y=D.x2+B-M,W=D.y1-B-L,K=D.y2+B-L;if(N){var J=Math.cos(N),ee=Math.sin(N),Z=u(function(ie,se){return ie=ie-R,se=se-z,{x:ie*J-se*ee+R,y:ie*ee+se*J+z}},"rotate"),Q=Z(q,W),U=Z(q,K),O=Z(Y,W),X=Z(Y,K),$=[Q.x+M,Q.y+L,O.x+M,O.y+L,X.x+M,X.y+L,U.x+M,U.y+L];if(gt(e,t,$))return b(E),!0}else if(Un(D,e,t))return b(E),!0}}u(w,"checkLabel");for(var P=o.length-1;P>=0;P--){var T=o[P];T.isNode()?v(T)||w(T):m(T)||w(T)||w(T,"source")||w(T,"target")}return c};_n.getAllInBox=function(e,t,n,r){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(e,n),c=Math.max(e,n),l=Math.min(t,r),s=Math.max(t,r);e=o,n=c,t=l,r=s;for(var d=yt({x1:e,y1:t,x2:n,y2:r}),h=0;h<a.length;h++){var f=a[h];if(f.isNode()){var p=f,g=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Ki(d,g)&&!Tl(g,d)&&i.push(p)}else{var y=f,b=y._private,v=b.rscratch;if(v.startX!=null&&v.startY!=null&&!Un(d,v.startX,v.startY)||v.endX!=null&&v.endY!=null&&!Un(d,v.endX,v.endY))continue;if(v.edgeType==="bezier"||v.edgeType==="multibezier"||v.edgeType==="self"||v.edgeType==="compound"||v.edgeType==="segments"||v.edgeType==="haystack"){for(var m=b.rstyle.bezierPts||b.rstyle.linePts||b.rstyle.haystackPts,x=!0,w=0;w<m.length;w++)if(!_h(d,m[w])){x=!1;break}x&&i.push(y)}else(v.edgeType==="haystack"||v.edgeType==="straight")&&i.push(y)}}return i};var Ba={};Ba.calculateArrowAngles=function(e){var t=e._private.rscratch,n=t.edgeType==="haystack",r=t.edgeType==="bezier",a=t.edgeType==="multibezier",i=t.edgeType==="segments",o=t.edgeType==="compound",c=t.edgeType==="self",l,s,d,h,f,p,v,m;if(n?(d=t.haystackPts[0],h=t.haystackPts[1],f=t.haystackPts[2],p=t.haystackPts[3]):(d=t.arrowStartX,h=t.arrowStartY,f=t.arrowEndX,p=t.arrowEndY),v=t.midX,m=t.midY,i)l=d-t.segpts[0],s=h-t.segpts[1];else if(a||o||c||r){var g=t.allpts,y=Qe(g[0],g[2],g[4],.1),b=Qe(g[1],g[3],g[5],.1);l=d-y,s=h-b}else l=d-v,s=h-m;t.srcArrowAngle=$r(l,s);var v=t.midX,m=t.midY;if(n&&(v=(d+f)/2,m=(h+p)/2),l=f-d,s=p-h,i){var g=t.allpts;if(g.length/2%2===0){var x=g.length/2,w=x-2;l=g[x]-g[w],s=g[x+1]-g[w+1]}else if(t.isRound)l=t.midVector[1],s=-t.midVector[0];else{var x=g.length/2-1,w=x-2;l=g[x]-g[w],s=g[x+1]-g[w+1]}}else if(a||o||c){var g=t.allpts,P=t.ctrlpts,T,E,S,A;if(P.length/2%2===0){var B=g.length/2-1,k=B+2,D=k+2;T=Qe(g[B],g[k],g[D],0),E=Qe(g[B+1],g[k+1],g[D+1],0),S=Qe(g[B],g[k],g[D],1e-4),A=Qe(g[B+1],g[k+1],g[D+1],1e-4)}else{var k=g.length/2-1,B=k-2,D=k+2;T=Qe(g[B],g[k],g[D],.4999),E=Qe(g[B+1],g[k+1],g[D+1],.4999),S=Qe(g[B],g[k],g[D],.5),A=Qe(g[B+1],g[k+1],g[D+1],.5)}l=S-T,s=A-E}if(t.midtgtArrowAngle=$r(l,s),t.midDispX=l,t.midDispY=s,l*=-1,s*=-1,i){var g=t.allpts;if(g.length/2%2!==0&&!t.isRound){var x=g.length/2-1,I=x+2;l=-(g[I]-g[x]),s=-(g[I+1]-g[x+1])}}if(t.midsrcArrowAngle=$r(l,s),i)l=f-t.segpts[t.segpts.length-2],s=p-t.segpts[t.segpts.length-1];else if(a||o||c||r){var g=t.allpts,_=g.length,y=Qe(g[_-6],g[_-4],g[_-2],.9),b=Qe(g[_-5],g[_-3],g[_-1],.9);l=f-y,s=p-b}else l=f-v,s=p-m;t.tgtArrowAngle=$r(l,s)};Ba.getArrowWidth=Ba.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(e*13.37,.9),29)*t,n[e+", "+t]=r,r)};var ki,Ai,Mt={},Ct={},Cs,Ts,bn,va,Yt,hn,mn,It,Ln,ia,Gu,Zu,Bi,_i,Ss,Ps=u(function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},"asVec"),Dv=u(function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},"invertVec"),kv=u(function(e,t,n,r,a){if(e!==Ss?Ps(t,e,Mt):Dv(Ct,Mt),Ps(t,n,Ct),Cs=Mt.nx*Ct.ny-Mt.ny*Ct.nx,Ts=Mt.nx*Ct.nx-Mt.ny*-Ct.ny,Yt=Math.asin(Math.max(-1,Math.min(1,Cs))),Math.abs(Yt)<1e-6){ki=t.x,Ai=t.y,mn=Ln=0;return}bn=1,va=!1,Ts<0?Yt<0?Yt=Math.PI+Yt:(Yt=Math.PI-Yt,bn=-1,va=!0):Yt>0&&(bn=-1,va=!0),t.radius!==void 0?Ln=t.radius:Ln=r,hn=Yt/2,ia=Math.min(Mt.len/2,Ct.len/2),a?(It=Math.abs(Math.cos(hn)*Ln/Math.sin(hn)),It>ia?(It=ia,mn=Math.abs(It*Math.sin(hn)/Math.cos(hn))):mn=Ln):(It=Math.min(ia,Ln),mn=Math.abs(It*Math.sin(hn)/Math.cos(hn))),Bi=t.x+Ct.nx*It,_i=t.y+Ct.ny*It,ki=Bi-Ct.ny*mn*bn,Ai=_i+Ct.nx*mn*bn,Gu=t.x+Mt.nx*It,Zu=t.y+Mt.ny*It,Ss=t},"calcCornerArc");function go(e,t){t.radius===0?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}u(go,"drawPreparedRoundCorner");function Ua(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return r===0||t.radius===0?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(kv(e,t,n,r,a),{cx:ki,cy:Ai,radius:mn,startX:Gu,startY:Zu,stopX:Bi,stopY:_i,startAngle:Mt.ang+Math.PI/2*bn,endAngle:Ct.ang-Math.PI/2*bn,counterClockwise:va})}u(Ua,"getRoundCorner");var ut={};ut.findMidptPtsEtc=function(e,t){var n=t.posPts,r=t.intersectionPts,a=t.vectorNormInverse,i,o=e.pstyle("source-endpoint"),c=e.pstyle("target-endpoint"),l=o.units!=null&&c.units!=null,s=u(function(w,P,T,E){var S=E-P,A=T-w,B=Math.sqrt(A*A+S*S);return{x:-S/B,y:A/B}},"recalcVectorNormInverse"),d=e.pstyle("edge-distances").value;switch(d){case"node-position":i=n;break;case"intersection":i=r;break;case"endpoints":{if(l){var h=this.manualEndptToPx(e.source()[0],o),f=Ye(h,2),p=f[0],g=f[1],y=this.manualEndptToPx(e.target()[0],c),b=Ye(y,2),v=b[0],m=b[1],x={x1:p,y1:g,x2:v,y2:m};a=s(p,g,v,m),i=x}else _e("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=r;break}}return{midptPts:i,vectorNormInverse:a}};ut.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,a=r.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=r.source,c=r.target,l=o.position(),s=c.position(),d=o.width(),h=c.width(),f=o.height(),p=c.height(),g=n.pstyle("haystack-radius").value,y=g/2;a.haystackPts=a.allpts=[a.source.x*d*y+l.x,a.source.y*f*y+l.y,a.target.x*h*y+s.x,a.target.y*p*y+s.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};ut.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=e.pstyle("segment-weights"),a=e.pstyle("segment-distances"),i=e.pstyle("segment-radii"),o=e.pstyle("radius-type"),c=Math.min(r.pfValue.length,a.pfValue.length),l=i.pfValue[i.pfValue.length-1],s=o.pfValue[o.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var d=0;d<c;d++){var h=r.pfValue[d],f=a.pfValue[d],p=1-h,g=h,y=this.findMidptPtsEtc(e,t),b=y.midptPts,v=y.vectorNormInverse,m={x:b.x1*p+b.x2*g,y:b.y1*p+b.y2*g};n.segpts.push(m.x+v.x*f,m.y+v.y*f),n.radii.push(i.pfValue[d]!==void 0?i.pfValue[d]:l),n.isArcRadius.push((o.pfValue[d]!==void 0?o.pfValue[d]:s)==="arc-radius")}};ut.findLoopPoints=function(e,t,n,r){var a=e._private.rscratch,i=t.dirCounts,o=t.srcPos,c=e.pstyle("control-point-distances"),l=c?c.pfValue[0]:void 0,s=e.pstyle("loop-direction").pfValue,d=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;a.edgeType="self";var f=n,p=h;r&&(f=0,p=l);var g=s-Math.PI/2,y=g-d/2,b=g+d/2,v=s+"_"+d;f=i[v]===void 0?i[v]=0:++i[v],a.ctrlpts=[o.x+Math.cos(y)*1.4*p*(f/3+1),o.y+Math.sin(y)*1.4*p*(f/3+1),o.x+Math.cos(b)*1.4*p*(f/3+1),o.y+Math.sin(b)*1.4*p*(f/3+1)]};ut.findCompoundLoopPoints=function(e,t,n,r){var a=e._private.rscratch;a.edgeType="compound";var i=t.srcPos,o=t.tgtPos,c=t.srcW,l=t.srcH,s=t.tgtW,d=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,f=e.pstyle("control-point-distances"),p=f?f.pfValue[0]:void 0,g=n,y=h;r&&(g=0,y=p);var b=50,v={x:i.x-c/2,y:i.y-l/2},m={x:o.x-s/2,y:o.y-d/2},x={x:Math.min(v.x,m.x),y:Math.min(v.y,m.y)},w=.5,P=Math.max(w,Math.log(c*.01)),T=Math.max(w,Math.log(s*.01));a.ctrlpts=[x.x,x.y-(1+Math.pow(b,1.12)/100)*y*(g/3+1)*P,x.x-(1+Math.pow(b,1.12)/100)*y*(g/3+1)*T,x.y]};ut.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"};ut.findBezierPoints=function(e,t,n,r,a){var i=e._private.rscratch,o=e.pstyle("control-point-step-size").pfValue,c=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),s=c&&l?Math.min(c.value.length,l.value.length):1,d=c?c.pfValue[0]:void 0,h=l.value[0],f=r;i.edgeType=f?"multibezier":"bezier",i.ctrlpts=[];for(var p=0;p<s;p++){var g=(.5-t.eles.length/2+n)*o*(a?-1:1),y=void 0,b=El(g);f&&(d=c?c.pfValue[p]:o,h=l.value[p]),r?y=d:y=d!==void 0?b*d:void 0;var v=y!==void 0?y:g,m=1-h,x=h,w=this.findMidptPtsEtc(e,t),P=w.midptPts,T=w.vectorNormInverse,E={x:P.x1*m+P.x2*x,y:P.y1*m+P.y2*x};i.ctrlpts.push(E.x+T.x*v,E.y+T.y*v)}};ut.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var r="vertical",a="horizontal",i="leftward",o="rightward",c="downward",l="upward",s="auto",d=t.posPts,h=t.srcW,f=t.srcH,p=t.tgtW,g=t.tgtH,y=e.pstyle("edge-distances").value,b=y!=="node-position",v=e.pstyle("taxi-direction").value,m=v,x=e.pstyle("taxi-turn"),w=x.units==="%",P=x.pfValue,T=P<0,E=e.pstyle("taxi-turn-min-distance").pfValue,S=b?(h+p)/2:0,A=b?(f+g)/2:0,B=d.x2-d.x1,k=d.y2-d.y1,D=u(function(G,ae){return G>0?Math.max(G-ae,0):Math.min(G+ae,0)},"subDWH"),I=D(B,S),_=D(k,A),R=!1;m===s?v=Math.abs(I)>Math.abs(_)?a:r:m===l||m===c?(v=r,R=!0):(m===i||m===o)&&(v=a,R=!0);var z=v===r,N=z?_:I,M=z?k:B,L=El(M),q=!1;!(R&&(w||T))&&(m===c&&M<0||m===l&&M>0||m===i&&M>0||m===o&&M<0)&&(L*=-1,N=L*Math.abs(N),q=!0);var Y;if(w){var W=P<0?1+P:P;Y=W*N}else{var K=P<0?N:0;Y=K+P*L}var J=u(function(G){return Math.abs(G)<E||Math.abs(G)>=Math.abs(N)},"getIsTooClose"),ee=J(Y),Z=J(Math.abs(N)-Math.abs(Y)),Q=ee||Z;if(Q&&!q)if(z){var U=Math.abs(M)<=f/2,O=Math.abs(B)<=p/2;if(U){var X=(d.x1+d.x2)/2,$=d.y1,ie=d.y2;n.segpts=[X,$,X,ie]}else if(O){var se=(d.y1+d.y2)/2,ve=d.x1,Pe=d.x2;n.segpts=[ve,se,Pe,se]}else n.segpts=[d.x1,d.y2]}else{var we=Math.abs(M)<=h/2,Re=Math.abs(k)<=g/2;if(we){var re=(d.y1+d.y2)/2,de=d.x1,ue=d.x2;n.segpts=[de,re,ue,re]}else if(Re){var xe=(d.x1+d.x2)/2,ge=d.y1,Te=d.y2;n.segpts=[xe,ge,xe,Te]}else n.segpts=[d.x2,d.y1]}else if(z){var Se=d.y1+Y+(b?f/2*L:0),Ce=d.x1,C=d.x2;n.segpts=[Ce,Se,C,Se]}else{var F=d.x1+Y+(b?h/2*L:0),H=d.y1,V=d.y2;n.segpts=[F,H,F,V]}if(n.isRound){var j=e.pstyle("taxi-radius").value,ne=e.pstyle("radius-type").value[0]==="arc-radius";n.radii=new Array(n.segpts.length/2).fill(j),n.isArcRadius=new Array(n.segpts.length/2).fill(ne)}};ut.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if(n.edgeType==="bezier"){var r=t.srcPos,a=t.tgtPos,i=t.srcW,o=t.srcH,c=t.tgtW,l=t.tgtH,s=t.srcShape,d=t.tgtShape,h=t.srcCornerRadius,f=t.tgtCornerRadius,p=t.srcRs,g=t.tgtRs,y=!te(n.startX)||!te(n.startY),b=!te(n.arrowStartX)||!te(n.arrowStartY),v=!te(n.endX)||!te(n.endY),m=!te(n.arrowEndX)||!te(n.arrowEndY),x=3,w=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth,P=x*w,T=En({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),E=T<P,S=En({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),A=S<P,B=!1;if(y||b||E){B=!0;var k={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},D=Math.sqrt(k.x*k.x+k.y*k.y),I={x:k.x/D,y:k.y/D},_=Math.max(i,o),R={x:n.ctrlpts[0]+I.x*2*_,y:n.ctrlpts[1]+I.y*2*_},z=s.intersectLine(r.x,r.y,i,o,R.x,R.y,0,h,p);E?(n.ctrlpts[0]=n.ctrlpts[0]+I.x*(P-T),n.ctrlpts[1]=n.ctrlpts[1]+I.y*(P-T)):(n.ctrlpts[0]=z[0]+I.x*P,n.ctrlpts[1]=z[1]+I.y*P)}if(v||m||A){B=!0;var N={x:n.ctrlpts[0]-a.x,y:n.ctrlpts[1]-a.y},M=Math.sqrt(N.x*N.x+N.y*N.y),L={x:N.x/M,y:N.y/M},q=Math.max(i,o),Y={x:n.ctrlpts[0]+L.x*2*q,y:n.ctrlpts[1]+L.y*2*q},W=d.intersectLine(a.x,a.y,c,l,Y.x,Y.y,0,f,g);A?(n.ctrlpts[0]=n.ctrlpts[0]+L.x*(P-S),n.ctrlpts[1]=n.ctrlpts[1]+L.y*(P-S)):(n.ctrlpts[0]=W[0]+L.x*P,n.ctrlpts[1]=W[1]+L.y*P)}B&&this.findEndpoints(e)}};ut.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);t.allpts.push(t.endX,t.endY);var r,a;t.ctrlpts.length/2%2===0?(r=t.allpts.length/2-1,t.midX=t.allpts[r],t.midY=t.allpts[r+1]):(r=t.allpts.length/2-3,a=.5,t.midX=Qe(t.allpts[r],t.allpts[r+2],t.allpts[r+4],a),t.midY=Qe(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],a))}else if(t.edgeType==="straight")t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if(t.edgeType==="segments"){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var i=2;i+3<t.allpts.length;i+=2){var o=t.radii[i/2-1],c=t.isArcRadius[i/2-1];t.roundCorners.push(Ua({x:t.allpts[i-2],y:t.allpts[i-1]},{x:t.allpts[i],y:t.allpts[i+1],radius:o},{x:t.allpts[i+2],y:t.allpts[i+3]},o,c))}}if(t.segpts.length%4===0){var l=t.segpts.length/2,s=l-2;t.midX=(t.segpts[s]+t.segpts[l])/2,t.midY=(t.segpts[s+1]+t.segpts[l+1])/2}else{var d=t.segpts.length/2-1;if(!t.isRound)t.midX=t.segpts[d],t.midY=t.segpts[d+1];else{var h={x:t.segpts[d],y:t.segpts[d+1]},f=t.roundCorners[d/2],p=[h.x-f.cx,h.y-f.cy],g=f.radius/Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2));p=p.map(function(y){return y*g}),t.midX=f.cx+p[0],t.midY=f.cy+p[1],t.midVector=p}}}};ut.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||te(t.startX)&&te(t.startY)&&te(t.endX)&&te(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,_e("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};ut.findEdgeControlPoints=function(e){var t=this;if(!(!e||e.length===0)){for(var n=this,r=n.cy,a=r.hasCompoundNodes(),i={map:new Lt,get:u(function(T){var E=this.map.get(T[0]);return E!=null?E.get(T[1]):null},"get"),set:u(function(T,E){var S=this.map.get(T[0]);S==null&&(S=new Lt,this.map.set(T[0],S)),S.set(T[1],E)},"set")},o=[],c=[],l=0;l<e.length;l++){var s=e[l],d=s._private,h=s.pstyle("curve-style").value;if(!(s.removed()||!s.takesUpSpace())){if(h==="haystack"){c.push(s);continue}var f=h==="unbundled-bezier"||h.endsWith("segments")||h==="straight"||h==="straight-triangle"||h.endsWith("taxi"),p=h==="unbundled-bezier"||h==="bezier",g=d.source,y=d.target,b=g.poolIndex(),v=y.poolIndex(),m=[b,v].sort(),x=i.get(m);x==null&&(x={eles:[]},i.set(m,x),o.push(m)),x.eles.push(s),f&&(x.hasUnbundled=!0),p&&(x.hasBezier=!0)}}for(var w=u(function(T){var E=o[T],S=i.get(E),A=void 0;if(!S.hasUnbundled){var B=S.eles[0].parallelEdges().filter(function(C){return C.isBundledBezier()});Hi(S.eles),B.forEach(function(C){return S.eles.push(C)}),S.eles.sort(function(C,F){return C.poolIndex()-F.poolIndex()})}var k=S.eles[0],D=k.source(),I=k.target();if(D.poolIndex()>I.poolIndex()){var _=D;D=I,I=_}var R=S.srcPos=D.position(),z=S.tgtPos=I.position(),N=S.srcW=D.outerWidth(),M=S.srcH=D.outerHeight(),L=S.tgtW=I.outerWidth(),q=S.tgtH=I.outerHeight(),Y=S.srcShape=n.nodeShapes[t.getNodeShape(D)],W=S.tgtShape=n.nodeShapes[t.getNodeShape(I)],K=S.srcCornerRadius=D.pstyle("corner-radius").value==="auto"?"auto":D.pstyle("corner-radius").pfValue,J=S.tgtCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,ee=S.tgtRs=I._private.rscratch,Z=S.srcRs=D._private.rscratch;S.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Q=0;Q<S.eles.length;Q++){var U=S.eles[Q],O=U[0]._private.rscratch,X=U.pstyle("curve-style").value,$=X==="unbundled-bezier"||X.endsWith("segments")||X.endsWith("taxi"),ie=!D.same(U.source());if(!S.calculatedIntersection&&D!==I&&(S.hasBezier||S.hasUnbundled)){S.calculatedIntersection=!0;var se=Y.intersectLine(R.x,R.y,N,M,z.x,z.y,0,K,Z),ve=S.srcIntn=se,Pe=W.intersectLine(z.x,z.y,L,q,R.x,R.y,0,J,ee),we=S.tgtIntn=Pe,Re=S.intersectionPts={x1:se[0],x2:Pe[0],y1:se[1],y2:Pe[1]},re=S.posPts={x1:R.x,x2:z.x,y1:R.y,y2:z.y},de=Pe[1]-se[1],ue=Pe[0]-se[0],xe=Math.sqrt(ue*ue+de*de),ge=S.vector={x:ue,y:de},Te=S.vectorNorm={x:ge.x/xe,y:ge.y/xe},Se={x:-Te.y,y:Te.x};S.nodesOverlap=!te(xe)||W.checkPoint(se[0],se[1],0,L,q,z.x,z.y,J,ee)||Y.checkPoint(Pe[0],Pe[1],0,N,M,R.x,R.y,K,Z),S.vectorNormInverse=Se,A={nodesOverlap:S.nodesOverlap,dirCounts:S.dirCounts,calculatedIntersection:!0,hasBezier:S.hasBezier,hasUnbundled:S.hasUnbundled,eles:S.eles,srcPos:z,srcRs:ee,tgtPos:R,tgtRs:Z,srcW:L,srcH:q,tgtW:N,tgtH:M,srcIntn:we,tgtIntn:ve,srcShape:W,tgtShape:Y,posPts:{x1:re.x2,y1:re.y2,x2:re.x1,y2:re.y1},intersectionPts:{x1:Re.x2,y1:Re.y2,x2:Re.x1,y2:Re.y1},vector:{x:-ge.x,y:-ge.y},vectorNorm:{x:-Te.x,y:-Te.y},vectorNormInverse:{x:-Se.x,y:-Se.y}}}var Ce=ie?A:S;O.nodesOverlap=Ce.nodesOverlap,O.srcIntn=Ce.srcIntn,O.tgtIntn=Ce.tgtIntn,O.isRound=X.startsWith("round"),a&&(D.isParent()||D.isChild()||I.isParent()||I.isChild())&&(D.parents().anySame(I)||I.parents().anySame(D)||D.same(I)&&D.isParent())?t.findCompoundLoopPoints(U,Ce,Q,$):D===I?t.findLoopPoints(U,Ce,Q,$):X.endsWith("segments")?t.findSegmentsPoints(U,Ce):X.endsWith("taxi")?t.findTaxiPoints(U,Ce):X==="straight"||!$&&S.eles.length%2===1&&Q===Math.floor(S.eles.length/2)?t.findStraightEdgePoints(U):t.findBezierPoints(U,Ce,Q,$,ie),t.findEndpoints(U),t.tryToCorrectInvalidPoints(U,Ce),t.checkForInvalidEdgeWarning(U),t.storeAllpts(U),t.storeEdgeProjections(U),t.calculateArrowAngles(U),t.recalculateEdgeLabelProjections(U),t.calculateLabelAngles(U)}},"_loop"),P=0;P<o.length;P++)w(P);this.findHaystackPoints(c)}};function vo(e){var t=[];if(e!=null){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];t.push({x:r,y:a})}return t}}u(vo,"getPts");ut.getSegmentPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var n=t.edgeType;if(n==="segments")return vo(t.segpts)};ut.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var n=t.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return vo(t.ctrlpts)};ut.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var qr={};qr.manualEndptToPx=function(e,t){var n=this,r=e.position(),a=e.outerWidth(),i=e.outerHeight(),o=e._private.rscratch;if(t.value.length===2){var c=[t.pfValue[0],t.pfValue[1]];return t.units[0]==="%"&&(c[0]=c[0]*a),t.units[1]==="%"&&(c[1]=c[1]*i),c[0]+=r.x,c[1]+=r.y,c}else{var l=t.pfValue[0];l=-Math.PI/2+l;var s=2*Math.max(a,i),d=[r.x+Math.cos(l)*s,r.y+Math.sin(l)*s];return n.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,a,i,d[0],d[1],0,e.pstyle("corner-radius").value==="auto"?"auto":e.pstyle("corner-radius").pfValue,o)}};qr.findEndpoints=function(e){var t=this,n,r=e.source()[0],a=e.target()[0],i=r.position(),o=a.position(),c=e.pstyle("target-arrow-shape").value,l=e.pstyle("source-arrow-shape").value,s=e.pstyle("target-distance-from-node").pfValue,d=e.pstyle("source-distance-from-node").pfValue,h=r._private.rscratch,f=a._private.rscratch,p=e.pstyle("curve-style").value,g=e._private.rscratch,y=g.edgeType,b=p==="taxi",v=y==="self"||y==="compound",m=y==="bezier"||y==="multibezier"||v,x=y!=="bezier",w=y==="straight"||y==="segments",P=y==="segments",T=m||x||w,E=v||b,S=e.pstyle("source-endpoint"),A=E?"outside-to-node":S.value,B=r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,k=e.pstyle("target-endpoint"),D=E?"outside-to-node":k.value,I=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;g.srcManEndpt=S,g.tgtManEndpt=k;var _,R,z,N;if(m){var M=[g.ctrlpts[0],g.ctrlpts[1]],L=x?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:M;_=L,R=M}else if(w){var q=P?g.segpts.slice(0,2):[o.x,o.y],Y=P?g.segpts.slice(g.segpts.length-2):[i.x,i.y];_=Y,R=q}if(D==="inside-to-node")n=[o.x,o.y];else if(k.units)n=this.manualEndptToPx(a,k);else if(D==="outside-to-line")n=g.tgtIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?z=_:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(z=[i.x,i.y]),n=t.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),z[0],z[1],0,I,f),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var W=a._private.rscratch,K=W.labelWidth,J=W.labelHeight,ee=W.labelX,Z=W.labelY,Q=K/2,U=J/2,O=a.pstyle("text-valign").value;O==="top"?Z-=U:O==="bottom"&&(Z+=U);var X=a.pstyle("text-halign").value;X==="left"?ee-=Q:X==="right"&&(ee+=Q);var $=Pr(z[0],z[1],[ee-Q,Z-U,ee+Q,Z-U,ee+Q,Z+U,ee-Q,Z+U],o.x,o.y);if($.length>0){var ie=i,se=pn(ie,Fn(n)),ve=pn(ie,Fn($)),Pe=se;if(ve<se&&(n=$,Pe=ve),$.length>2){var we=pn(ie,{x:$[2],y:$[3]});we<Pe&&(n=[$[2],$[3]])}}}var Re=Qr(n,_,t.arrowShapes[c].spacing(e)+s),re=Qr(n,_,t.arrowShapes[c].gap(e)+s);if(g.endX=re[0],g.endY=re[1],g.arrowEndX=Re[0],g.arrowEndY=Re[1],A==="inside-to-node")n=[i.x,i.y];else if(S.units)n=this.manualEndptToPx(r,S);else if(A==="outside-to-line")n=g.srcIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?N=R:(A==="outside-to-line"||A==="outside-to-line-or-label")&&(N=[o.x,o.y]),n=t.nodeShapes[this.getNodeShape(r)].intersectLine(i.x,i.y,r.outerWidth(),r.outerHeight(),N[0],N[1],0,B,h),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var de=r._private.rscratch,ue=de.labelWidth,xe=de.labelHeight,ge=de.labelX,Te=de.labelY,Se=ue/2,Ce=xe/2,C=r.pstyle("text-valign").value;C==="top"?Te-=Ce:C==="bottom"&&(Te+=Ce);var F=r.pstyle("text-halign").value;F==="left"?ge-=Se:F==="right"&&(ge+=Se);var H=Pr(N[0],N[1],[ge-Se,Te-Ce,ge+Se,Te-Ce,ge+Se,Te+Ce,ge-Se,Te+Ce],i.x,i.y);if(H.length>0){var V=o,j=pn(V,Fn(n)),ne=pn(V,Fn(H)),G=j;if(ne<j&&(n=[H[0],H[1]],G=ne),H.length>2){var ae=pn(V,{x:H[2],y:H[3]});ae<G&&(n=[H[2],H[3]])}}}var fe=Qr(n,R,t.arrowShapes[l].spacing(e)+d),ye=Qr(n,R,t.arrowShapes[l].gap(e)+d);g.startX=ye[0],g.startY=ye[1],g.arrowStartX=fe[0],g.arrowStartY=fe[1],T&&(!te(g.startX)||!te(g.startY)||!te(g.endX)||!te(g.endY)?g.badLine=!0:g.badLine=!1)};qr.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}};qr.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var yo={};function $u(e,t,n){for(var r=u(function(l,s,d,h){return Qe(l,s,d,h)},"qbezierAt$1"),a=t._private,i=a.rstyle.bezierPts,o=0;o<e.bezierProjPcts.length;o++){var c=e.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],c),y:r(n[1],n[3],n[5],c)})}}u($u,"pushBezierPts");yo.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,r==="multibezier"||r==="bezier"||r==="self"||r==="compound"){t.rstyle.bezierPts=[];for(var a=0;a+5<n.allpts.length;a+=4)$u(this,e,n.allpts.slice(a,a+6))}else if(r==="segments")for(var i=t.rstyle.linePts=[],a=0;a+1<n.allpts.length;a+=2)i.push({x:n.allpts[a],y:n.allpts[a+1]});else if(r==="haystack"){var o=n.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth};yo.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Ot={};Ot.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!rn(t)){var n,r,a=e._private,i=e.width(),o=e.height(),c=e.padding(),l=e.position(),s=e.pstyle("text-halign").strValue,d=e.pstyle("text-valign").strValue,h=a.rscratch,f=a.rstyle;switch(s){case"left":n=l.x-i/2-c;break;case"right":n=l.x+i/2+c;break;default:n=l.x}switch(d){case"top":r=l.y-o/2-c;break;case"bottom":r=l.y+o/2+c;break;default:r=l.y}h.labelX=n,h.labelY=r,f.labelX=n,f.labelY=r,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var Qu=u(function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},"lineAngleFromDelta"),Ju=u(function(e,t){var n=t.x-e.x,r=t.y-e.y;return Qu(n,r)},"lineAngle"),Av=u(function(e,t,n,r){var a=Sr(0,r-.001,1),i=Sr(0,r+.001,1),o=jn(e,t,n,a),c=jn(e,t,n,i);return Ju(o,c)},"bezierAngle");Ot.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,a=this,i={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(i.mid||i.source||i.target){t={x:r.midX,y:r.midY};var o=u(function(d,h,f){Jt(n.rscratch,d,h,f),Jt(n.rstyle,d,h,f)},"setRs");o("labelX",null,t.x),o("labelY",null,t.y);var c=Qu(r.midDispX,r.midDispY);o("labelAutoAngle",null,c);var l=u(function d(){if(d.cache)return d.cache;for(var h=[],f=0;f+5<r.allpts.length;f+=4){var p={x:r.allpts[f],y:r.allpts[f+1]},g={x:r.allpts[f+2],y:r.allpts[f+3]},y={x:r.allpts[f+4],y:r.allpts[f+5]};h.push({p0:p,p1:g,p2:y,startDist:0,length:0,segments:[]})}var b=n.rstyle.bezierPts,v=a.bezierProjPcts.length;function m(E,S,A,B,k){var D=En(S,A),I=E.segments[E.segments.length-1],_={p0:S,p1:A,t0:B,t1:k,startDist:I?I.startDist+I.length:0,length:D};E.segments.push(_),E.length+=D}u(m,"addSegment");for(var x=0;x<h.length;x++){var w=h[x],P=h[x-1];P&&(w.startDist=P.startDist+P.length),m(w,w.p0,b[x*v],0,a.bezierProjPcts[0]);for(var T=0;T<v-1;T++)m(w,b[x*v+T],b[x*v+T+1],a.bezierProjPcts[T],a.bezierProjPcts[T+1]);m(w,b[x*v+v-1],w.p2,a.bezierProjPcts[v-1],1)}return d.cache=h},"createControlPointInfo"),s=u(function(d){var h,f=d==="source";if(i[d]){var p=e.pstyle(d+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=l(),y,b=0,v=0,m=0;m<g.length;m++){for(var x=g[f?m:g.length-1-m],w=0;w<x.segments.length;w++){var P=x.segments[f?w:x.segments.length-1-w],T=m===g.length-1&&w===x.segments.length-1;if(b=v,v+=P.length,v>=p||T){y={cp:x,segment:P};break}}if(y)break}var E=y.cp,S=y.segment,A=(p-b)/S.length,B=S.t1-S.t0,k=f?S.t0+B*A:S.t1-B*A;k=Sr(0,k,1),t=jn(E.p0,E.p1,E.p2,k),h=Av(E.p0,E.p1,E.p2,k);break}case"straight":case"segments":case"haystack":{for(var D=0,I,_,R,z,N=r.allpts.length,M=0;M+3<N&&(f?(R={x:r.allpts[M],y:r.allpts[M+1]},z={x:r.allpts[M+2],y:r.allpts[M+3]}):(R={x:r.allpts[N-2-M],y:r.allpts[N-1-M]},z={x:r.allpts[N-4-M],y:r.allpts[N-3-M]}),I=En(R,z),_=D,D+=I,!(D>=p));M+=2);var L=p-_,q=L/I;q=Sr(0,q,1),t=Ph(R,z,q),h=Ju(R,z);break}}o("labelX",d,t.x),o("labelY",d,t.y),o("labelAutoAngle",d,h)}},"calculateEndProjection");s("source"),s("target"),this.applyLabelDimensions(e)}};Ot.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))};Ot.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),a=this.calculateLabelDimensions(e,r),i=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,c=At(n.rscratch,"labelWrapCachedLines",t)||[],l=o!=="wrap"?1:Math.max(c.length,1),s=a.height/l,d=s*i,h=a.width,f=a.height+(l-1)*(i-1)*s;Jt(n.rstyle,"labelWidth",t,h),Jt(n.rscratch,"labelWidth",t,h),Jt(n.rstyle,"labelHeight",t,f),Jt(n.rscratch,"labelHeight",t,f),Jt(n.rscratch,"labelLineHeight",t,d)};Ot.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",a=e.pstyle(r+"label").strValue,i=e.pstyle("text-transform").value,o=u(function(W,K){return K?(Jt(n.rscratch,W,t,K),K):At(n.rscratch,W,t)},"rscratch");if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var c=e.pstyle("text-wrap").value;if(c==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var s="​",d=a.split(`
`),h=e.pstyle("text-max-width").pfValue,f=e.pstyle("text-overflow-wrap").value,p=f==="anywhere",g=[],y=/[\s\u200b]+|$/g,b=0;b<d.length;b++){var v=d[b],m=this.calculateLabelDimensions(e,v),x=m.width;if(p){var w=v.split("").join(s);v=w}if(x>h){var P=v.matchAll(y),T="",E=0,S=vt(P),A;try{for(S.s();!(A=S.n()).done;){var B=A.value,k=B[0],D=v.substring(E,B.index);E=B.index+k.length;var I=T.length===0?D:T+D+k,_=this.calculateLabelDimensions(e,I),R=_.width;R<=h?T+=D+k:(T&&g.push(T),T=D+k)}}catch(W){S.e(W)}finally{S.f()}T.match(/^[\s\u200b]+$/)||g.push(T)}else g.push(v)}o("labelWrapCachedLines",g),a=o("labelWrapCachedText",g.join(`
`)),o("labelWrapKey",l)}else if(c==="ellipsis"){var z=e.pstyle("text-max-width").pfValue,N="",M="…",L=!1;if(this.calculateLabelDimensions(e,a).width<z)return a;for(var q=0;q<a.length;q++){var Y=this.calculateLabelDimensions(e,N+a[q]+M).width;if(Y>z)break;N+=a[q],q===a.length-1&&(L=!0)}return L||(N+=M),N}return a};Ot.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t};Ot.calculateLabelDimensions=function(e,t){var n=this,r=n.cy.window(),a=r.document,i=an(t,e._private.labelDimsKey),o=n.labelDimCache||(n.labelDimCache=[]),c=o[i];if(c!=null)return c;var l=0,s=e.pstyle("font-style").strValue,d=e.pstyle("font-size").pfValue,h=e.pstyle("font-family").strValue,f=e.pstyle("font-weight").strValue,p=this.labelCalcCanvas,g=this.labelCalcCanvasContext;if(!p){p=this.labelCalcCanvas=a.createElement("canvas"),g=this.labelCalcCanvasContext=p.getContext("2d");var y=p.style;y.position="absolute",y.left="-9999px",y.top="-9999px",y.zIndex="-1",y.visibility="hidden",y.pointerEvents="none"}g.font="".concat(s," ").concat(f," ").concat(d,"px ").concat(h);for(var b=0,v=0,m=t.split(`
`),x=0;x<m.length;x++){var w=m[x],P=g.measureText(w),T=Math.ceil(P.width),E=d;b=Math.max(T,b),v+=E}return b+=l,v+=l,o[i]={width:b,height:v}};Ot.calculateLabelAngle=function(e,t){var n=e._private,r=n.rscratch,a=e.isEdge(),i=t?t+"-":"",o=e.pstyle(i+"text-rotation"),c=o.strValue;return c==="none"?0:a&&c==="autorotate"?r.labelAutoAngle:c==="autorotate"?0:o.pfValue};Ot.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),r=e._private,a=r.rscratch;a.labelAngle=t.calculateLabelAngle(e),n&&(a.sourceLabelAngle=t.calculateLabelAngle(e,"source"),a.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var ec={},Ds=28,ks=!1;ec.getNodeShape=function(e){var t=this,n=e.pstyle("shape").value;if(n==="cutrectangle"&&(e.width()<Ds||e.height()<Ds))return ks||(_e("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ks=!0),"rectangle";if(e.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var r=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(r).name}return n};var Ka={};Ka.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),n=this,r=u(function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.merge(i),o)for(var c=0;c<i.length;c++){var l=i[c],s=l._private,d=s.rstyle;d.clean=!1,d.cleanConnected=!1}},"enqueue");n.binder(e).on("bounds.* dirty.*",u(function(i){var o=i.target;r(o)},"onDirtyBounds")).on("style.* background.*",u(function(i){var o=i.target;r(o,!1)},"onDirtyStyle"));var a=u(function(i){if(i){var o=n.onUpdateEleCalcsFns;t.cleanStyle();for(var c=0;c<t.length;c++){var l=t[c],s=l._private.rstyle;l.isNode()&&!s.cleanConnected&&(r(l.connectedEdges()),s.cleanConnected=!0)}if(o)for(var d=0;d<o.length;d++){var h=o[d];h(i,t)}n.recalculateRenderedStyle(t),t=e.collection()}},"updateEleCalcs");n.flushRenderedStyleQueue=function(){a(!0)},n.beforeRender(a,n.beforeRenderPriorities.eleCalcs)};Ka.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)};Ka.recalculateRenderedStyle=function(e,t){var n=u(function(x){return x._private.rstyle.cleanConnected},"isCleanConnected"),r=[],a=[];if(!this.destroyed){t===void 0&&(t=!0);for(var i=0;i<e.length;i++){var o=e[i],c=o._private,l=c.rstyle;o.isEdge()&&(!n(o.source())||!n(o.target()))&&(l.clean=!1),!(t&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(c.group==="nodes"?a.push(o):r.push(o),l.clean=!0)}for(var s=0;s<a.length;s++){var d=a[s],h=d._private,f=h.rstyle,p=d.position();this.recalculateNodeLabelProjection(d),f.nodeX=p.x,f.nodeY=p.y,f.nodeW=d.pstyle("width").pfValue,f.nodeH=d.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var g=0;g<r.length;g++){var y=r[g],b=y._private,v=b.rstyle,m=b.rscratch;v.srcX=m.arrowStartX,v.srcY=m.arrowStartY,v.tgtX=m.arrowEndX,v.tgtY=m.arrowEndY,v.midX=m.midX,v.midY=m.midY,v.labelAngle=m.labelAngle,v.sourceLabelAngle=m.sourceLabelAngle,v.targetLabelAngle=m.targetLabelAngle}}};var Ga={};Ga.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=e[n],a=r._private.rscratch;r.grabbed()&&!r.isParent()?t.push(r):a.inDragLayer?e.drag.push(r):e.nondrag.push(r)}for(var n=0;n<t.length;n++){var r=t[n];e.drag.push(r)}}};Ga.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Ga.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(Xu),t.interactive=t.filter(function(n){return n.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var tc={};[_n,Ba,ut,qr,yo,Ot,ec,Ka,Ga].forEach(function(e){pe(tc,e)});var nc={};nc.getCachedImage=function(e,t,n){var r=this,a=r.imageCache=r.imageCache||{},i=a[e];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;i=a[e]=a[e]||{};var o=i.image=new Image;o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0});var c="data:",l=e.substring(0,c.length).toLowerCase()===c;return l||(t=t==="null"?null:t,o.crossOrigin=t),o.src=e,o};var er={};er.registerBinding=function(e,t,n,r){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var i=[],o=0;o<e.length;o++){var c=e[o];if(c!==void 0){var l=this.binder(c);i.push(l.on.apply(l,a))}}return i}var l=this.binder(e);return l.on.apply(l,a)};er.binder=function(e){var t=this,n=t.cy.window(),r=e===n||e===n.document||e===n.document.body||ad(e);if(t.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:u(function(){return a=!0,!0},"get")});n.addEventListener("test",null,i)}catch{}t.supportsPassiveEvents=a}var o=u(function(c,l,s){var d=Array.prototype.slice.call(arguments);return r&&t.supportsPassiveEvents&&(d[2]={capture:s??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:d}),(e.addEventListener||e.on).apply(e,d),this},"on");return{on:o,addEventListener:o,addListener:o,bind:o}};er.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()};er.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()};er.load=function(){var e=this,t=e.cy.window(),n=u(function(C){return C.selected()},"isSelected"),r=u(function(C){var F=C.getRootNode();if(F&&F.nodeType===11&&F.host!==void 0)return F},"getShadowRoot"),a=u(function(C,F,H,V){C==null&&(C=e.cy);for(var j=0;j<F.length;j++){var ne=F[j];C.emit({originalEvent:H,type:ne,position:V})}},"triggerEvents"),i=u(function(C){return C.shiftKey||C.metaKey||C.ctrlKey},"isMultSelKeyDown"),o=u(function(C,F){var H=!0;if(e.cy.hasCompoundNodes()&&C&&C.pannable())for(var V=0;F&&V<F.length;V++){var C=F[V];if(C.isNode()&&C.isParent()&&!C.pannable()){H=!1;break}}else H=!0;return H},"allowPanningPassthrough"),c=u(function(C){C[0]._private.grabbed=!0},"setGrabbed"),l=u(function(C){C[0]._private.grabbed=!1},"setFreed"),s=u(function(C){C[0]._private.rscratch.inDragLayer=!0},"setInDragLayer"),d=u(function(C){C[0]._private.rscratch.inDragLayer=!1},"setOutDragLayer"),h=u(function(C){C[0]._private.rscratch.isGrabTarget=!0},"setGrabTarget"),f=u(function(C){C[0]._private.rscratch.isGrabTarget=!1},"removeGrabTarget"),p=u(function(C,F){var H=F.addToList,V=H.has(C);!V&&C.grabbable()&&!C.locked()&&(H.merge(C),c(C))},"addToDragList"),g=u(function(C,F){if(C.cy().hasCompoundNodes()&&!(F.inDragLayer==null&&F.addToList==null)){var H=C.descendants();F.inDragLayer&&(H.forEach(s),H.connectedEdges().forEach(s)),F.addToList&&p(H,F)}},"addDescendantsToDrag"),y=u(function(C,F){F=F||{};var H=C.cy().hasCompoundNodes();F.inDragLayer&&(C.forEach(s),C.neighborhood().stdFilter(function(V){return!H||V.isEdge()}).forEach(s)),F.addToList&&C.forEach(function(V){p(V,F)}),g(C,F),m(C,{inDragLayer:F.inDragLayer}),e.updateCachedGrabbedEles()},"addNodesToDrag"),b=y,v=u(function(C){C&&(e.getCachedZSortedEles().forEach(function(F){l(F),d(F),f(F)}),e.updateCachedGrabbedEles())},"freeDraggedElements"),m=u(function(C,F){if(!(F.inDragLayer==null&&F.addToList==null)&&C.cy().hasCompoundNodes()){var H=C.ancestors().orphans();if(!H.same(C)){var V=H.descendants().spawnSelf().merge(H).unmerge(C).unmerge(C.descendants()),j=V.connectedEdges();F.inDragLayer&&(j.forEach(s),V.forEach(s)),F.addToList&&V.forEach(function(ne){p(ne,F)})}}},"updateAncestorsInDragLayer"),x=u(function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},"blurActiveDomElement"),w=typeof MutationObserver<"u",P=typeof ResizeObserver<"u";w?(e.removeObserver=new MutationObserver(function(C){for(var F=0;F<C.length;F++){var H=C[F],V=H.removedNodes;if(V)for(var j=0;j<V.length;j++){var ne=V[j];if(ne===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(C){e.destroy()});var T=Nr(function(){e.cy.resize()},100);w&&(e.styleObserver=new MutationObserver(T),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",T),P&&(e.resizeObserver=new ResizeObserver(T),e.resizeObserver.observe(e.container));var E=u(function(C,F){for(;C!=null;)F(C),C=C.parentNode},"forEachUp"),S=u(function(){e.invalidateContainerClientCoordsCache()},"invalidateCoords");E(e.container,function(C){e.registerBinding(C,"transitionend",S),e.registerBinding(C,"animationend",S),e.registerBinding(C,"scroll",S)}),e.registerBinding(e.container,"contextmenu",function(C){C.preventDefault()});var A=u(function(){return e.selection[4]!==0},"inBoxSelection"),B=u(function(C){for(var F=e.findContainerClientCoords(),H=F[0],V=F[1],j=F[2],ne=F[3],G=C.touches?C.touches:[C],ae=!1,fe=0;fe<G.length;fe++){var ye=G[fe];if(H<=ye.clientX&&ye.clientX<=H+j&&V<=ye.clientY&&ye.clientY<=V+ne){ae=!0;break}}if(!ae)return!1;for(var le=e.container,me=C.target,be=me.parentNode,he=!1;be;){if(be===le){he=!0;break}be=be.parentNode}return!!he},"eventInContainer");e.registerBinding(e.container,"mousedown",u(function(C){if(B(C)&&!(e.hoverData.which===1&&C.which!==1)){C.preventDefault(),x(),e.hoverData.capture=!0,e.hoverData.which=C.which;var F=e.cy,H=[C.clientX,C.clientY],V=e.projectIntoViewport(H[0],H[1]),j=e.selection,ne=e.findNearestElements(V[0],V[1],!0,!1),G=ne[0],ae=e.dragData.possibleDragElements;e.hoverData.mdownPos=V,e.hoverData.mdownGPos=H;var fe=u(function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var he=e.hoverData.down;he?he.emit({originalEvent:C,type:"taphold",position:{x:V[0],y:V[1]}}):F.emit({originalEvent:C,type:"taphold",position:{x:V[0],y:V[1]}})}},e.tapholdDuration)},"checkForTaphold");if(C.which==3){e.hoverData.cxtStarted=!0;var ye={originalEvent:C,type:"cxttapstart",position:{x:V[0],y:V[1]}};G?(G.activate(),G.emit(ye),e.hoverData.down=G):F.emit(ye),e.hoverData.downTime=new Date().getTime(),e.hoverData.cxtDragged=!1}else if(C.which==1){G&&G.activate();{if(G!=null&&e.nodeIsGrabbable(G)){var le=u(function(he){return{originalEvent:C,type:he,position:{x:V[0],y:V[1]}}},"makeEvent"),me=u(function(he){he.emit(le("grab"))},"triggerGrab");if(h(G),!G.selected())ae=e.dragData.possibleDragElements=F.collection(),b(G,{addToList:ae}),G.emit(le("grabon")).emit(le("grab"));else{ae=e.dragData.possibleDragElements=F.collection();var be=F.$(function(he){return he.isNode()&&he.selected()&&e.nodeIsGrabbable(he)});y(be,{addToList:ae}),G.emit(le("grabon")),be.forEach(me)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=G,e.hoverData.downs=ne,e.hoverData.downTime=new Date().getTime()}a(G,["mousedown","tapstart","vmousedown"],C,{x:V[0],y:V[1]}),G==null?(j[4]=1,e.data.bgActivePosistion={x:V[0],y:V[1]},e.redrawHint("select",!0),e.redraw()):G.pannable()&&(j[4]=1),fe()}j[0]=j[2]=V[0],j[1]=j[3]=V[1]}},"mousedownHandler"),!1);var k=r(e.container);e.registerBinding([t,k],"mousemove",u(function(C){var F=e.hoverData.capture;if(!(!F&&!B(C))){var H=!1,V=e.cy,j=V.zoom(),ne=[C.clientX,C.clientY],G=e.projectIntoViewport(ne[0],ne[1]),ae=e.hoverData.mdownPos,fe=e.hoverData.mdownGPos,ye=e.selection,le=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(le=e.findNearestElement(G[0],G[1],!0,!1));var me=e.hoverData.last,be=e.hoverData.down,he=[G[0]-ye[2],G[1]-ye[3]],je=e.dragData.possibleDragElements,Xe;if(fe){var mt=ne[0]-fe[0],bt=mt*mt,qe=ne[1]-fe[1],Ze=qe*qe,He=bt+Ze;e.hoverData.isOverThresholdDrag=Xe=He>=e.desktopTapThreshold2}var xt=i(C);Xe&&(e.hoverData.tapholdCancelled=!0);var ct=u(function(){var Zt=e.hoverData.dragDelta=e.hoverData.dragDelta||[];Zt.length===0?(Zt.push(he[0]),Zt.push(he[1])):(Zt[0]+=he[0],Zt[1]+=he[1])},"updateDragDelta");H=!0,a(le,["mousemove","vmousemove","tapdrag"],C,{x:G[0],y:G[1]});var Et=u(function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||V.emit({originalEvent:C,type:"boxstart",position:{x:G[0],y:G[1]}}),ye[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()},"goIntoBoxMode");if(e.hoverData.which===3){if(Xe){var Ft={originalEvent:C,type:"cxtdrag",position:{x:G[0],y:G[1]}};be?be.emit(Ft):V.emit(Ft),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||le!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:C,type:"cxtdragout",position:{x:G[0],y:G[1]}}),e.hoverData.cxtOver=le,le&&le.emit({originalEvent:C,type:"cxtdragover",position:{x:G[0],y:G[1]}}))}}else if(e.hoverData.dragging){if(H=!0,V.panningEnabled()&&V.userPanningEnabled()){var _t;if(e.hoverData.justStartedPan){var Vt=e.hoverData.mdownPos;_t={x:(G[0]-Vt[0])*j,y:(G[1]-Vt[1])*j},e.hoverData.justStartedPan=!1}else _t={x:he[0]*j,y:he[1]*j};V.panBy(_t),V.emit("dragpan"),e.hoverData.dragged=!0}G=e.projectIntoViewport(C.clientX,C.clientY)}else if(ye[4]==1&&(be==null||be.pannable())){if(Xe){if(!e.hoverData.dragging&&V.boxSelectionEnabled()&&(xt||!V.panningEnabled()||!V.userPanningEnabled()))Et();else if(!e.hoverData.selecting&&V.panningEnabled()&&V.userPanningEnabled()){var jt=o(be,e.hoverData.downs);jt&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,ye[4]=0,e.data.bgActivePosistion=Fn(ae),e.redrawHint("select",!0),e.redraw())}be&&be.pannable()&&be.active()&&be.unactivate()}}else{if(be&&be.pannable()&&be.active()&&be.unactivate(),(!be||!be.grabbed())&&le!=me&&(me&&a(me,["mouseout","tapdragout"],C,{x:G[0],y:G[1]}),le&&a(le,["mouseover","tapdragover"],C,{x:G[0],y:G[1]}),e.hoverData.last=le),be)if(Xe){if(V.boxSelectionEnabled()&&xt)be&&be.grabbed()&&(v(je),be.emit("freeon"),je.emit("free"),e.dragData.didDrag&&(be.emit("dragfreeon"),je.emit("dragfree"))),Et();else if(be&&be.grabbed()&&e.nodeIsDraggable(be)){var at=!e.dragData.didDrag;at&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||y(je,{inDragLayer:!0});var $e={x:0,y:0};if(te(he[0])&&te(he[1])&&($e.x+=he[0],$e.y+=he[1],at)){var ft=e.hoverData.dragDelta;ft&&te(ft[0])&&te(ft[1])&&($e.x+=ft[0],$e.y+=ft[1])}e.hoverData.draggingEles=!0,je.silentShift($e).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else ct();H=!0}if(ye[2]=G[0],ye[3]=G[1],H)return C.stopPropagation&&C.stopPropagation(),C.preventDefault&&C.preventDefault(),!1}},"mousemoveHandler"),!1);var D,I,_;e.registerBinding(t,"mouseup",u(function(C){if(!(e.hoverData.which===1&&C.which!==1&&e.hoverData.capture)){var F=e.hoverData.capture;if(F){e.hoverData.capture=!1;var H=e.cy,V=e.projectIntoViewport(C.clientX,C.clientY),j=e.selection,ne=e.findNearestElement(V[0],V[1],!0,!1),G=e.dragData.possibleDragElements,ae=e.hoverData.down,fe=i(C);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,ae&&ae.unactivate(),e.hoverData.which===3){var ye={originalEvent:C,type:"cxttapend",position:{x:V[0],y:V[1]}};if(ae?ae.emit(ye):H.emit(ye),!e.hoverData.cxtDragged){var le={originalEvent:C,type:"cxttap",position:{x:V[0],y:V[1]}};ae?ae.emit(le):H.emit(le)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(e.hoverData.which===1){if(a(ne,["mouseup","tapend","vmouseup"],C,{x:V[0],y:V[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(a(ae,["click","tap","vclick"],C,{x:V[0],y:V[1]}),I=!1,C.timeStamp-_<=H.multiClickDebounceTime()?(D&&clearTimeout(D),I=!0,_=null,a(ae,["dblclick","dbltap","vdblclick"],C,{x:V[0],y:V[1]})):(D=setTimeout(function(){I||a(ae,["oneclick","onetap","voneclick"],C,{x:V[0],y:V[1]})},H.multiClickDebounceTime()),_=C.timeStamp)),ae==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!i(C)&&(H.$(n).unselect(["tapunselect"]),G.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=G=H.collection()),ne==ae&&!e.dragData.didDrag&&!e.hoverData.selecting&&ne!=null&&ne._private.selectable&&(e.hoverData.dragging||(H.selectionType()==="additive"||fe?ne.selected()?ne.unselect(["tapunselect"]):ne.select(["tapselect"]):fe||(H.$(n).unmerge(ne).unselect(["tapunselect"]),ne.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var me=H.collection(e.getAllInBox(j[0],j[1],j[2],j[3]));e.redrawHint("select",!0),me.length>0&&e.redrawHint("eles",!0),H.emit({type:"boxend",originalEvent:C,position:{x:V[0],y:V[1]}});var be=u(function(je){return je.selectable()&&!je.selected()},"eleWouldBeSelected");H.selectionType()==="additive"||fe||H.$(n).unmerge(me).unselect(),me.emit("box").stdFilter(be).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!j[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var he=ae&&ae.grabbed();v(G),he&&(ae.emit("freeon"),G.emit("free"),e.dragData.didDrag&&(ae.emit("dragfreeon"),G.emit("dragfree")))}}j[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}},"mouseupHandler"),!1);var R=u(function(C){if(!e.scrollingPage){var F=e.cy,H=F.zoom(),V=F.pan(),j=e.projectIntoViewport(C.clientX,C.clientY),ne=[j[0]*H+V.x,j[1]*H+V.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||A()){C.preventDefault();return}if(F.panningEnabled()&&F.userPanningEnabled()&&F.zoomingEnabled()&&F.userZoomingEnabled()){C.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var G;C.deltaY!=null?G=C.deltaY/-250:C.wheelDeltaY!=null?G=C.wheelDeltaY/1e3:G=C.wheelDelta/1e3,G=G*e.wheelSensitivity;var ae=C.deltaMode===1;ae&&(G*=33);var fe=F.zoom()*Math.pow(10,G);C.type==="gesturechange"&&(fe=e.gestureStartZoom*C.scale),F.zoom({level:fe,renderedPosition:{x:ne[0],y:ne[1]}}),F.emit(C.type==="gesturechange"?"pinchzoom":"scrollzoom")}}},"wheelHandler");e.registerBinding(e.container,"wheel",R,!0),e.registerBinding(t,"scroll",u(function(C){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},"scrollHandler"),!0),e.registerBinding(e.container,"gesturestart",u(function(C){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||C.preventDefault()},"gestureStartHandler"),!0),e.registerBinding(e.container,"gesturechange",function(C){e.hasTouchStarted||R(C)},!0),e.registerBinding(e.container,"mouseout",u(function(C){var F=e.projectIntoViewport(C.clientX,C.clientY);e.cy.emit({originalEvent:C,type:"mouseout",position:{x:F[0],y:F[1]}})},"mouseOutHandler"),!1),e.registerBinding(e.container,"mouseover",u(function(C){var F=e.projectIntoViewport(C.clientX,C.clientY);e.cy.emit({originalEvent:C,type:"mouseover",position:{x:F[0],y:F[1]}})},"mouseOverHandler"),!1);var z,N,M,L,q,Y,W,K,J,ee,Z,Q,U,O=u(function(C,F,H,V){return Math.sqrt((H-C)*(H-C)+(V-F)*(V-F))},"distance"),X=u(function(C,F,H,V){return(H-C)*(H-C)+(V-F)*(V-F)},"distanceSq"),$;e.registerBinding(e.container,"touchstart",$=u(function(C){if(e.hasTouchStarted=!0,!!B(C)){x(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var F=e.cy,H=e.touchData.now,V=e.touchData.earlier;if(C.touches[0]){var j=e.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);H[0]=j[0],H[1]=j[1]}if(C.touches[1]){var j=e.projectIntoViewport(C.touches[1].clientX,C.touches[1].clientY);H[2]=j[0],H[3]=j[1]}if(C.touches[2]){var j=e.projectIntoViewport(C.touches[2].clientX,C.touches[2].clientY);H[4]=j[0],H[5]=j[1]}if(C.touches[1]){e.touchData.singleTouchMoved=!0,v(e.dragData.touchDragEles);var ne=e.findContainerClientCoords();J=ne[0],ee=ne[1],Z=ne[2],Q=ne[3],z=C.touches[0].clientX-J,N=C.touches[0].clientY-ee,M=C.touches[1].clientX-J,L=C.touches[1].clientY-ee,U=0<=z&&z<=Z&&0<=M&&M<=Z&&0<=N&&N<=Q&&0<=L&&L<=Q;var G=F.pan(),ae=F.zoom();q=O(z,N,M,L),Y=X(z,N,M,L),W=[(z+M)/2,(N+L)/2],K=[(W[0]-G.x)/ae,(W[1]-G.y)/ae];var fe=200,ye=fe*fe;if(Y<ye&&!C.touches[2]){var le=e.findNearestElement(H[0],H[1],!0,!0),me=e.findNearestElement(H[2],H[3],!0,!0);le&&le.isNode()?(le.activate().emit({originalEvent:C,type:"cxttapstart",position:{x:H[0],y:H[1]}}),e.touchData.start=le):me&&me.isNode()?(me.activate().emit({originalEvent:C,type:"cxttapstart",position:{x:H[0],y:H[1]}}),e.touchData.start=me):F.emit({originalEvent:C,type:"cxttapstart",position:{x:H[0],y:H[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,e.redraw();return}}if(C.touches[2])F.boxSelectionEnabled()&&C.preventDefault();else if(!C.touches[1]&&C.touches[0]){var be=e.findNearestElements(H[0],H[1],!0,!0),he=be[0];if(he!=null&&(he.activate(),e.touchData.start=he,e.touchData.starts=be,e.nodeIsGrabbable(he))){var je=e.dragData.touchDragEles=F.collection(),Xe=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),he.selected()?(Xe=F.$(function(He){return He.selected()&&e.nodeIsGrabbable(He)}),y(Xe,{addToList:je})):b(he,{addToList:je}),h(he);var mt=u(function(He){return{originalEvent:C,type:He,position:{x:H[0],y:H[1]}}},"makeEvent");he.emit(mt("grabon")),Xe?Xe.forEach(function(He){He.emit(mt("grab"))}):he.emit(mt("grab"))}a(he,["touchstart","tapstart","vmousedown"],C,{x:H[0],y:H[1]}),he==null&&(e.data.bgActivePosistion={x:j[0],y:j[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved===!1&&!e.pinching&&!e.touchData.selecting&&a(e.touchData.start,["taphold"],C,{x:H[0],y:H[1]})},e.tapholdDuration)}if(C.touches.length>=1){for(var bt=e.touchData.startPosition=[null,null,null,null,null,null],qe=0;qe<H.length;qe++)bt[qe]=V[qe]=H[qe];var Ze=C.touches[0];e.touchData.startGPosition=[Ze.clientX,Ze.clientY]}}},"touchstartHandler"),!1);var ie;e.registerBinding(t,"touchmove",ie=u(function(C){var F=e.touchData.capture;if(!(!F&&!B(C))){var H=e.selection,V=e.cy,j=e.touchData.now,ne=e.touchData.earlier,G=V.zoom();if(C.touches[0]){var ae=e.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);j[0]=ae[0],j[1]=ae[1]}if(C.touches[1]){var ae=e.projectIntoViewport(C.touches[1].clientX,C.touches[1].clientY);j[2]=ae[0],j[3]=ae[1]}if(C.touches[2]){var ae=e.projectIntoViewport(C.touches[2].clientX,C.touches[2].clientY);j[4]=ae[0],j[5]=ae[1]}var fe=e.touchData.startGPosition,ye;if(F&&C.touches[0]&&fe){for(var le=[],me=0;me<j.length;me++)le[me]=j[me]-ne[me];var be=C.touches[0].clientX-fe[0],he=be*be,je=C.touches[0].clientY-fe[1],Xe=je*je,mt=he+Xe;ye=mt>=e.touchTapThreshold2}if(F&&e.touchData.cxt){C.preventDefault();var bt=C.touches[0].clientX-J,qe=C.touches[0].clientY-ee,Ze=C.touches[1].clientX-J,He=C.touches[1].clientY-ee,xt=X(bt,qe,Ze,He),ct=xt/Y,Et=150,Ft=Et*Et,_t=1.5,Vt=_t*_t;if(ct>=Vt||xt>=Ft){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var jt={originalEvent:C,type:"cxttapend",position:{x:j[0],y:j[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(jt),e.touchData.start=null):V.emit(jt)}}if(F&&e.touchData.cxt){var jt={originalEvent:C,type:"cxtdrag",position:{x:j[0],y:j[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(jt):V.emit(jt),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var at=e.findNearestElement(j[0],j[1],!0,!0);(!e.touchData.cxtOver||at!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:C,type:"cxtdragout",position:{x:j[0],y:j[1]}}),e.touchData.cxtOver=at,at&&at.emit({originalEvent:C,type:"cxtdragover",position:{x:j[0],y:j[1]}}))}else if(F&&C.touches[2]&&V.boxSelectionEnabled())C.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||V.emit({originalEvent:C,type:"boxstart",position:{x:j[0],y:j[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,H[4]=1,!H||H.length===0||H[0]===void 0?(H[0]=(j[0]+j[2]+j[4])/3,H[1]=(j[1]+j[3]+j[5])/3,H[2]=(j[0]+j[2]+j[4])/3+1,H[3]=(j[1]+j[3]+j[5])/3+1):(H[2]=(j[0]+j[2]+j[4])/3,H[3]=(j[1]+j[3]+j[5])/3),e.redrawHint("select",!0),e.redraw();else if(F&&C.touches[1]&&!e.touchData.didSelect&&V.zoomingEnabled()&&V.panningEnabled()&&V.userZoomingEnabled()&&V.userPanningEnabled()){C.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var $e=e.dragData.touchDragEles;if($e){e.redrawHint("drag",!0);for(var ft=0;ft<$e.length;ft++){var Zt=$e[ft]._private;Zt.grabbed=!1,Zt.rscratch.inDragLayer=!1}}var Kr=e.touchData.start,bt=C.touches[0].clientX-J,qe=C.touches[0].clientY-ee,Ze=C.touches[1].clientX-J,He=C.touches[1].clientY-ee,Ao=O(bt,qe,Ze,He),Xc=Ao/q;if(U){var Wc=bt-z,qc=qe-N,Hc=Ze-M,Uc=He-L,Kc=(Wc+Hc)/2,Gc=(qc+Uc)/2,rr=V.zoom(),Qa=rr*Xc,Gr=V.pan(),Bo=K[0]*rr+Gr.x,_o=K[1]*rr+Gr.y,Zc={x:-Qa/rr*(Bo-Gr.x-Kc)+Bo,y:-Qa/rr*(_o-Gr.y-Gc)+_o};if(Kr&&Kr.active()){var $e=e.dragData.touchDragEles;v($e),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Kr.unactivate().emit("freeon"),$e.emit("free"),e.dragData.didDrag&&(Kr.emit("dragfreeon"),$e.emit("dragfree"))}V.viewport({zoom:Qa,pan:Zc,cancelOnFailedZoom:!0}),V.emit("pinchzoom"),q=Ao,z=bt,N=qe,M=Ze,L=He,e.pinching=!0}if(C.touches[0]){var ae=e.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);j[0]=ae[0],j[1]=ae[1]}if(C.touches[1]){var ae=e.projectIntoViewport(C.touches[1].clientX,C.touches[1].clientY);j[2]=ae[0],j[3]=ae[1]}if(C.touches[2]){var ae=e.projectIntoViewport(C.touches[2].clientX,C.touches[2].clientY);j[4]=ae[0],j[5]=ae[1]}}else if(C.touches[0]&&!e.touchData.didSelect){var Pt=e.touchData.start,Ja=e.touchData.last,at;if(!e.hoverData.draggingEles&&!e.swipePanning&&(at=e.findNearestElement(j[0],j[1],!0,!0)),F&&Pt!=null&&C.preventDefault(),F&&Pt!=null&&e.nodeIsDraggable(Pt))if(ye){var $e=e.dragData.touchDragEles,Io=!e.dragData.didDrag;Io&&y($e,{inDragLayer:!0}),e.dragData.didDrag=!0;var ar={x:0,y:0};if(te(le[0])&&te(le[1])&&(ar.x+=le[0],ar.y+=le[1],Io)){e.redrawHint("eles",!0);var Dt=e.touchData.dragDelta;Dt&&te(Dt[0])&&te(Dt[1])&&(ar.x+=Dt[0],ar.y+=Dt[1])}e.hoverData.draggingEles=!0,$e.silentShift(ar).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==ne[0]&&e.touchData.startPosition[1]==ne[1]&&e.redrawHint("eles",!0),e.redraw()}else{var Dt=e.touchData.dragDelta=e.touchData.dragDelta||[];Dt.length===0?(Dt.push(le[0]),Dt.push(le[1])):(Dt[0]+=le[0],Dt[1]+=le[1])}if(a(Pt||at,["touchmove","tapdrag","vmousemove"],C,{x:j[0],y:j[1]}),(!Pt||!Pt.grabbed())&&at!=Ja&&(Ja&&Ja.emit({originalEvent:C,type:"tapdragout",position:{x:j[0],y:j[1]}}),at&&at.emit({originalEvent:C,type:"tapdragover",position:{x:j[0],y:j[1]}})),e.touchData.last=at,F)for(var ft=0;ft<j.length;ft++)j[ft]&&e.touchData.startPosition[ft]&&ye&&(e.touchData.singleTouchMoved=!0);if(F&&(Pt==null||Pt.pannable())&&V.panningEnabled()&&V.userPanningEnabled()){var $c=o(Pt,e.touchData.starts);$c&&(C.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=Fn(e.touchData.startPosition)),e.swipePanning?(V.panBy({x:le[0]*G,y:le[1]*G}),V.emit("dragpan")):ye&&(e.swipePanning=!0,V.panBy({x:be*G,y:je*G}),V.emit("dragpan"),Pt&&(Pt.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));var ae=e.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);j[0]=ae[0],j[1]=ae[1]}}for(var me=0;me<j.length;me++)ne[me]=j[me];F&&C.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},"touchmoveHandler"),!1);var se;e.registerBinding(t,"touchcancel",se=u(function(C){var F=e.touchData.start;e.touchData.capture=!1,F&&F.unactivate()},"touchcancelHandler"));var ve,Pe,we,Re;if(e.registerBinding(t,"touchend",ve=u(function(C){var F=e.touchData.start,H=e.touchData.capture;if(H)C.touches.length===0&&(e.touchData.capture=!1),C.preventDefault();else return;var V=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var j=e.cy,ne=j.zoom(),G=e.touchData.now,ae=e.touchData.earlier;if(C.touches[0]){var fe=e.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);G[0]=fe[0],G[1]=fe[1]}if(C.touches[1]){var fe=e.projectIntoViewport(C.touches[1].clientX,C.touches[1].clientY);G[2]=fe[0],G[3]=fe[1]}if(C.touches[2]){var fe=e.projectIntoViewport(C.touches[2].clientX,C.touches[2].clientY);G[4]=fe[0],G[5]=fe[1]}F&&F.unactivate();var ye;if(e.touchData.cxt){if(ye={originalEvent:C,type:"cxttapend",position:{x:G[0],y:G[1]}},F?F.emit(ye):j.emit(ye),!e.touchData.cxtDragged){var le={originalEvent:C,type:"cxttap",position:{x:G[0],y:G[1]}};F?F.emit(le):j.emit(le)}e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,e.redraw();return}if(!C.touches[2]&&j.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var me=j.collection(e.getAllInBox(V[0],V[1],V[2],V[3]));V[0]=void 0,V[1]=void 0,V[2]=void 0,V[3]=void 0,V[4]=0,e.redrawHint("select",!0),j.emit({type:"boxend",originalEvent:C,position:{x:G[0],y:G[1]}});var be=u(function(Et){return Et.selectable()&&!Et.selected()},"eleWouldBeSelected");me.emit("box").stdFilter(be).select().emit("boxselect"),me.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(F==null||F.unactivate(),C.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!C.touches[1]&&!C.touches[0]&&!C.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var he=e.dragData.touchDragEles;if(F!=null){var je=F._private.grabbed;v(he),e.redrawHint("drag",!0),e.redrawHint("eles",!0),je&&(F.emit("freeon"),he.emit("free"),e.dragData.didDrag&&(F.emit("dragfreeon"),he.emit("dragfree"))),a(F,["touchend","tapend","vmouseup","tapdragout"],C,{x:G[0],y:G[1]}),F.unactivate(),e.touchData.start=null}else{var Xe=e.findNearestElement(G[0],G[1],!0,!0);a(Xe,["touchend","tapend","vmouseup","tapdragout"],C,{x:G[0],y:G[1]})}var mt=e.touchData.startPosition[0]-G[0],bt=mt*mt,qe=e.touchData.startPosition[1]-G[1],Ze=qe*qe,He=bt+Ze,xt=He*ne*ne;e.touchData.singleTouchMoved||(F||j.$(":selected").unselect(["tapunselect"]),a(F,["tap","vclick"],C,{x:G[0],y:G[1]}),Pe=!1,C.timeStamp-Re<=j.multiClickDebounceTime()?(we&&clearTimeout(we),Pe=!0,Re=null,a(F,["dbltap","vdblclick"],C,{x:G[0],y:G[1]})):(we=setTimeout(function(){Pe||a(F,["onetap","voneclick"],C,{x:G[0],y:G[1]})},j.multiClickDebounceTime()),Re=C.timeStamp)),F!=null&&!e.dragData.didDrag&&F._private.selectable&&xt<e.touchTapThreshold2&&!e.pinching&&(j.selectionType()==="single"?(j.$(n).unmerge(F).unselect(["tapunselect"]),F.select(["tapselect"])):F.selected()?F.unselect(["tapunselect"]):F.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var ct=0;ct<G.length;ct++)ae[ct]=G[ct];e.dragData.didDrag=!1,C.touches.length===0&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),C.touches.length<2&&(C.touches.length===1&&(e.touchData.startGPosition=[C.touches[0].clientX,C.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())},"touchendHandler"),!1),typeof TouchEvent>"u"){var re=[],de=u(function(C){return{clientX:C.clientX,clientY:C.clientY,force:1,identifier:C.pointerId,pageX:C.pageX,pageY:C.pageY,radiusX:C.width/2,radiusY:C.height/2,screenX:C.screenX,screenY:C.screenY,target:C.target}},"makeTouch"),ue=u(function(C){return{event:C,touch:de(C)}},"makePointer"),xe=u(function(C){re.push(ue(C))},"addPointer"),ge=u(function(C){for(var F=0;F<re.length;F++){var H=re[F];if(H.event.pointerId===C.pointerId){re.splice(F,1);return}}},"removePointer"),Te=u(function(C){var F=re.filter(function(H){return H.event.pointerId===C.pointerId})[0];F.event=C,F.touch=de(C)},"updatePointer"),Se=u(function(C){C.touches=re.map(function(F){return F.touch})},"addTouchesToEvent"),Ce=u(function(C){return C.pointerType==="mouse"||C.pointerType===4},"pointerIsMouse");e.registerBinding(e.container,"pointerdown",function(C){Ce(C)||(C.preventDefault(),xe(C),Se(C),$(C))}),e.registerBinding(e.container,"pointerup",function(C){Ce(C)||(ge(C),Se(C),ve(C))}),e.registerBinding(e.container,"pointercancel",function(C){Ce(C)||(ge(C),Se(C),se(C))}),e.registerBinding(e.container,"pointermove",function(C){Ce(C)||(C.preventDefault(),Te(C),Se(C),ie(C))})}};var Kt={};Kt.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:u(function(n,r,a,i,o,c){this.renderer.nodeShapeImpl("polygon",n,r,a,i,o,this.points)},"draw"),intersectLine:u(function(n,r,a,i,o,c,l,s){return Pr(o,c,this.points,n,r,a/2,i/2,l)},"intersectLine"),checkPoint:u(function(n,r,a,i,o,c,l,s){return Wt(n,r,this.points,c,l,i,o,[0,-1],a)},"checkPoint")}};Kt.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:u(function(e,t,n,r,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},"draw"),intersectLine:u(function(e,t,n,r,a,i,o,c){return Fh(a,i,e,t,n/2+o,r/2+o)},"intersectLine"),checkPoint:u(function(e,t,n,r,a,i,o,c){return xn(e,t,r,a,i,o,n)},"checkPoint")}};Kt.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:u(function(n,r,a,i,o,c,l){if(c[l]!==void 0&&c[l+"-cx"]===n&&c[l+"-cy"]===r)return c[l];c[l]=new Array(t.length/2),c[l+"-cx"]=n,c[l+"-cy"]=r;var s=a/2,d=i/2;o=o==="auto"?Dl(a,i):o;for(var h=new Array(t.length/2),f=0;f<t.length/2;f++)h[f]={x:n+s*t[f*2],y:r+d*t[f*2+1]};var p,g,y,b,v=h.length;for(g=h[v-1],p=0;p<v;p++)y=h[p%v],b=h[(p+1)%v],c[l][p]=Ua(g,y,b,o),g=y,y=b;return c[l]},"getOrCreateCorners"),draw:u(function(n,r,a,i,o,c,l){this.renderer.nodeShapeImpl("round-polygon",n,r,a,i,o,this.points,this.getOrCreateCorners(r,a,i,o,c,l,"drawCorners"))},"draw"),intersectLine:u(function(n,r,a,i,o,c,l,s,d){return Vh(o,c,this.points,n,r,a,i,l,this.getOrCreateCorners(n,r,a,i,s,d,"corners"))},"intersectLine"),checkPoint:u(function(n,r,a,i,o,c,l,s,d){return zh(n,r,this.points,c,l,i,o,this.getOrCreateCorners(c,l,i,o,s,d,"corners"))},"checkPoint")}};Kt.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:dt(4,0),draw:u(function(e,t,n,r,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a,this.points,i)},"draw"),intersectLine:u(function(e,t,n,r,a,i,o,c){return Sl(a,i,e,t,n,r,o,c)},"intersectLine"),checkPoint:u(function(e,t,n,r,a,i,o,c){var l=r/2,s=a/2;c=c==="auto"?Cn(r,a):c,c=Math.min(l,s,c);var d=c*2;return!!(Wt(e,t,this.points,i,o,r,a-d,[0,-1],n)||Wt(e,t,this.points,i,o,r-d,a,[0,-1],n)||xn(e,t,d,d,i-l+c,o-s+c,n)||xn(e,t,d,d,i+l-c,o-s+c,n)||xn(e,t,d,d,i+l-c,o+s-c,n)||xn(e,t,d,d,i-l+c,o+s-c,n))},"checkPoint")}};Kt.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Gi(),points:dt(4,0),draw:u(function(e,t,n,r,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a,null,i)},"draw"),generateCutTrianglePts:u(function(e,t,n,r,a){var i=a==="auto"?this.cornerLength:a,o=t/2,c=e/2,l=n-c,s=n+c,d=r-o,h=r+o;return{topLeft:[l,d+i,l+i,d,l+i,d+i],topRight:[s-i,d,s,d+i,s-i,d+i],bottomRight:[s,h-i,s-i,h,s-i,h-i],bottomLeft:[l+i,h,l,h-i,l+i,h-i]}},"generateCutTrianglePts"),intersectLine:u(function(e,t,n,r,a,i,o,c){var l=this.generateCutTrianglePts(n+2*o,r+2*o,e,t,c),s=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Pr(a,i,s,e,t)},"intersectLine"),checkPoint:u(function(e,t,n,r,a,i,o,c){var l=c==="auto"?this.cornerLength:c;if(Wt(e,t,this.points,i,o,r,a-2*l,[0,-1],n)||Wt(e,t,this.points,i,o,r-2*l,a,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,a,i,o);return gt(e,t,s.topLeft)||gt(e,t,s.topRight)||gt(e,t,s.bottomRight)||gt(e,t,s.bottomLeft)},"checkPoint")}};Kt.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:dt(4,0),draw:u(function(e,t,n,r,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},"draw"),intersectLine:u(function(e,t,n,r,a,i,o,c){var l=.15,s=.5,d=.85,h=this.generateBarrelBezierPts(n+2*o,r+2*o,e,t),f=u(function(g){var y=jn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),b=jn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},s),v=jn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},d);return[g[0],g[1],y.x,y.y,b.x,b.y,v.x,v.y,g[4],g[5]]},"approximateBarrelCurvePts"),p=[].concat(f(h.topLeft),f(h.topRight),f(h.bottomRight),f(h.bottomLeft));return Pr(a,i,p,e,t)},"intersectLine"),generateBarrelBezierPts:u(function(e,t,n,r){var a=t/2,i=e/2,o=n-i,c=n+i,l=r-a,s=r+a,d=pi(e,t),h=d.heightOffset,f=d.widthOffset,p=d.ctrlPtOffsetPct*e,g={topLeft:[o,l+h,o+p,l,o+f,l],topRight:[c-f,l,c-p,l,c,l+h],bottomRight:[c,s-h,c-p,s,c-f,s],bottomLeft:[o+f,s,o+p,s,o,s-h]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},"generateBarrelBezierPts"),checkPoint:u(function(e,t,n,r,a,i,o,c){var l=pi(r,a),s=l.heightOffset,d=l.widthOffset;if(Wt(e,t,this.points,i,o,r,a-2*s,[0,-1],n)||Wt(e,t,this.points,i,o,r-2*d,a,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(r,a,i,o),f=u(function(T,E,S){var A=S[4],B=S[2],k=S[0],D=S[5],I=S[1],_=Math.min(A,k),R=Math.max(A,k),z=Math.min(D,I),N=Math.max(D,I);if(_<=T&&T<=R&&z<=E&&E<=N){var M=jh(A,B,k),L=Rh(M[0],M[1],M[2],T),q=L.filter(function(Y){return 0<=Y&&Y<=1});if(q.length>0)return q[0]}return null},"getCurveT"),p=Object.keys(h),g=0;g<p.length;g++){var y=p[g],b=h[y],v=f(e,t,b);if(v!=null){var m=b[5],x=b[3],w=b[1],P=Qe(m,x,w,v);if(b.isTop&&P<=t||b.isBottom&&t<=P)return!0}}return!1},"checkPoint")}};Kt.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:dt(4,0),draw:u(function(e,t,n,r,a,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a,this.points,i)},"draw"),intersectLine:u(function(e,t,n,r,a,i,o,c){var l=e-(n/2+o),s=t-(r/2+o),d=s,h=e+(n/2+o),f=en(a,i,e,t,l,s,h,d,!1);return f.length>0?f:Sl(a,i,e,t,n,r,o,c)},"intersectLine"),checkPoint:u(function(e,t,n,r,a,i,o,c){c=c==="auto"?Cn(r,a):c;var l=2*c;if(Wt(e,t,this.points,i,o,r,a-l,[0,-1],n)||Wt(e,t,this.points,i,o,r-l,a,[0,-1],n))return!0;var s=r/2+2*n,d=a/2+2*n,h=[i-s,o-d,i-s,o,i+s,o,i+s,o-d];return!!(gt(e,t,h)||xn(e,t,l,l,i+r/2-c,o+a/2-c,n)||xn(e,t,l,l,i-r/2+c,o+a/2-c,n))},"checkPoint")}};Kt.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",dt(3,0)),this.generateRoundPolygon("round-triangle",dt(3,0)),this.generatePolygon("rectangle",dt(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",dt(5,0)),this.generateRoundPolygon("round-pentagon",dt(5,0)),this.generatePolygon("hexagon",dt(6,0)),this.generateRoundPolygon("round-hexagon",dt(6,0)),this.generatePolygon("heptagon",dt(7,0)),this.generateRoundPolygon("round-heptagon",dt(7,0)),this.generatePolygon("octagon",dt(8,0)),this.generateRoundPolygon("round-octagon",dt(8,0));var r=new Array(20);{var a=fi(5,0),i=fi(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var c=0;c<i.length/2;c++)i[c*2]*=o,i[c*2+1]*=o;for(var c=0;c<20/4;c++)r[c*4]=a[c*2],r[c*4+1]=a[c*2+1],r[c*4+2]=i[c*2],r[c*4+3]=i[c*2+1]}r=Pl(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}e.makePolygon=function(s){var d=s.join("$"),h="polygon-"+d,f;return(f=this[h])?f:t.generatePolygon(h,s)}};var Hr={};Hr.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Hr.redraw=function(e){e=e||xl();var t=this;t.averageRedrawTime===void 0&&(t.averageRedrawTime=0),t.lastRedrawTime===void 0&&(t.lastRedrawTime=0),t.lastDrawTime===void 0&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e};Hr.beforeRender=function(e,t){if(!this.destroyed){t==null&&ze("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(r,a){return a.priority-r.priority})}};var As=u(function(e,t,n){for(var r=e.beforeRenderCallbacks,a=0;a<r.length;a++)r[a].fn(t,n)},"beforeRenderCallbacks");Hr.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var n=u(function r(a){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){As(e,!0,a);var i=Xt();e.render(e.renderOptions);var o=e.lastDrawTime=Xt();e.averageRedrawTime===void 0&&(e.averageRedrawTime=o-i),e.redrawCount===void 0&&(e.redrawCount=0),e.redrawCount++,e.redrawTotalTime===void 0&&(e.redrawTotalTime=0);var c=o-i;e.redrawTotalTime+=c,e.lastRedrawTime=c,e.averageRedrawTime=e.averageRedrawTime/2+c/2,e.requestedFrame=!1}else As(e,!1,a);e.skipFrame=!1,Ea(r)}},"renderFn");Ea(n)}};var Bv=u(function(e){this.init(e)},"BaseRenderer"),rc=Bv,tr=rc.prototype;tr.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];tr.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container(),r=t.cy.window();if(r){var a=r.document,i=a.head,o="__________cytoscape_stylesheet",c="__________cytoscape_container",l=a.getElementById(o)!=null;if(n.className.indexOf(c)<0&&(n.className=(n.className||"")+" "+c),!l){var s=a.createElement("style");s.id=o,s.textContent="."+c+" { position: relative; }",i.insertBefore(s,i.children[0])}var d=r.getComputedStyle(n),h=d.getPropertyValue("position");h==="static"&&_e("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=te(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()};tr.notify=function(e,t){var n=this,r=n.cy;if(!this.destroyed){if(e==="init"){n.load();return}if(e==="destroy"){n.destroy();return}(e==="add"||e==="remove"||e==="move"&&r.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")&&n.invalidateCachedZSortedEles(),e==="viewport"&&n.redrawHint("select",!0),e==="gc"&&n.redrawHint("gc",!0),(e==="load"||e==="resize"||e==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};tr.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n,a=r.target;(a.off||a.removeEventListener).apply(a,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}};tr.isHeadless=function(){return!1};[po,tc,nc,er,Kt,Hr].forEach(function(e){pe(tr,e)});var li=1e3/60,ac={setupDequeueing:u(function(e){return u(function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=Nr(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),a=u(function(o,c){var l=Xt(),s=n.averageRedrawTime,d=n.lastRedrawTime,h=[],f=n.cy.extent(),p=n.getPixelRatio();for(o||n.flushRenderedStyleQueue();;){var g=Xt(),y=g-l,b=g-c;if(d<li){var v=li-(o?s:0);if(b>=e.deqFastCost*v)break}else if(o){if(y>=e.deqCost*d||y>=e.deqAvgCost*s)break}else if(b>=e.deqNoDrawCost*li)break;var m=e.deq(t,p,f);if(m.length>0)for(var x=0;x<m.length;x++)h.push(m[x]);else break}h.length>0&&(e.onDeqd(t,h),!o&&e.shouldRedraw(t,h,p,f)&&r())},"dequeue"),i=e.priority||qi;n.beforeRender(a,i(t))}},"setupDequeueingImpl")},"setupDequeueing")},_v=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ca;Ht(this,e),this.idsByKey=new Lt,this.keyForId=new Lt,this.cachesByLvl=new Lt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n}return u(e,"ElementTextureCacheLookup"),Ut(e,[{key:"getIdsFor",value:u(function(t){t==null&&ze("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(t);return r||(r=new $n,n.set(t,r)),r},"getIdsFor")},{key:"addIdForKey",value:u(function(t,n){t!=null&&this.getIdsFor(t).add(n)},"addIdForKey")},{key:"deleteIdForKey",value:u(function(t,n){t!=null&&this.getIdsFor(t).delete(n)},"deleteIdForKey")},{key:"getNumberOfIdsForKey",value:u(function(t){return t==null?0:this.getIdsFor(t).size},"getNumberOfIdsForKey")},{key:"updateKeyMappingFor",value:u(function(t){var n=t.id(),r=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(r,n),this.addIdForKey(a,n),this.keyForId.set(n,a)},"updateKeyMappingFor")},{key:"deleteKeyMappingFor",value:u(function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)},"deleteKeyMappingFor")},{key:"keyHasChangedFor",value:u(function(t){var n=t.id(),r=this.keyForId.get(n),a=this.getKey(t);return r!==a},"keyHasChangedFor")},{key:"isInvalid",value:u(function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)},"isInvalid")},{key:"getCachesAt",value:u(function(t){var n=this.cachesByLvl,r=this.lvls,a=n.get(t);return a||(a=new Lt,n.set(t,a),r.push(t)),a},"getCachesAt")},{key:"getCache",value:u(function(t,n){return this.getCachesAt(n).get(t)},"getCache")},{key:"get",value:u(function(t,n){var r=this.getKey(t),a=this.getCache(r,n);return a!=null&&this.updateKeyMappingFor(t),a},"get")},{key:"getForCachedKey",value:u(function(t,n){var r=this.keyForId.get(t.id()),a=this.getCache(r,n);return a},"getForCachedKey")},{key:"hasCache",value:u(function(t,n){return this.getCachesAt(n).has(t)},"hasCache")},{key:"has",value:u(function(t,n){var r=this.getKey(t);return this.hasCache(r,n)},"has")},{key:"setCache",value:u(function(t,n,r){r.key=t,this.getCachesAt(n).set(t,r)},"setCache")},{key:"set",value:u(function(t,n,r){var a=this.getKey(t);this.setCache(a,n,r),this.updateKeyMappingFor(t)},"set")},{key:"deleteCache",value:u(function(t,n){this.getCachesAt(n).delete(t)},"deleteCache")},{key:"delete",value:u(function(t,n){var r=this.getKey(t);this.deleteCache(r,n)},"_delete")},{key:"invalidateKey",value:u(function(t){var n=this;this.lvls.forEach(function(r){return n.deleteCache(t,r)})},"invalidateKey")},{key:"invalidate",value:u(function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(r),a||this.getNumberOfIdsForKey(r)===0},"invalidate")}]),e}(),Bs=25,oa=50,ya=-4,Ii=3,ic=7.99,Iv=8,Mv=1024,Rv=1024,Lv=1024,Nv=.2,Ov=.8,zv=10,Fv=.15,Vv=.1,jv=.9,Yv=.9,Xv=100,Wv=1,Vn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},qv=Je({getKey:null,doesEleInvalidateKey:Ca,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:yl,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),gr=u(function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var r=qv(t);pe(n,r),n.lookup=new _v(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},"ElementTextureCache"),Ge=gr.prototype;Ge.reasons=Vn;Ge.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]};Ge.getRetiredTextureQueue=function(e){var t=this,n=t.eleImgCaches.retired=t.eleImgCaches.retired||{},r=n[e]=n[e]||[];return r};Ge.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new Or(function(n,r){return r.reqs-n.reqs});return t};Ge.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t};Ge.getElement=function(e,t,n,r,a){var i=this,o=this.renderer,c=o.cy.zoom(),l=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!i.allowEdgeTxrCaching&&e.isEdge()||!i.allowParentTxrCaching&&e.isParent())return null;if(r==null&&(r=Math.ceil(Ui(c*n))),r<ya)r=ya;else if(c>=ic||r>Ii)return null;var s=Math.pow(2,r),d=t.h*s,h=t.w*s,f=o.eleTextBiggerThanMin(e,s);if(!this.isVisible(e,f))return null;var p=l.get(e,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;var g;if(d<=Bs?g=Bs:d<=oa?g=oa:g=Math.ceil(d/oa)*oa,d>Lv||h>Rv)return null;var y=i.getTextureQueue(g),b=y[y.length-2],v=u(function(){return i.recycleTexture(g,h)||i.addTexture(g,h)},"addNewTxr");b||(b=y[y.length-1]),b||(b=v()),b.width-b.usedWidth<h&&(b=v());for(var m=u(function(R){return R&&R.scaledLabelShown===f},"scalableFrom"),x=a&&a===Vn.dequeue,w=a&&a===Vn.highQuality,P=a&&a===Vn.downscale,T,E=r+1;E<=Ii;E++){var S=l.get(e,E);if(S){T=S;break}}var A=T&&T.level===r+1?T:null,B=u(function(){b.context.drawImage(A.texture.canvas,A.x,0,A.width,A.height,b.usedWidth,0,h,d)},"downscale");if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,h,g),m(A))B();else if(m(T))if(w){for(var k=T.level;k>r;k--)A=i.getElement(e,t,n,k,Vn.downscale);B()}else return i.queueElement(e,T.level-1),T;else{var D;if(!x&&!w&&!P)for(var I=r-1;I>=ya;I--){var _=l.get(e,I);if(_){D=_;break}}if(m(D))return i.queueElement(e,r),D;b.context.translate(b.usedWidth,0),b.context.scale(s,s),this.drawElement(b.context,e,t,f,!1),b.context.scale(1/s,1/s),b.context.translate(-b.usedWidth,0)}return p={x:b.usedWidth,texture:b,level:r,scale:s,width:h,height:d,scaledLabelShown:f},b.usedWidth+=Math.ceil(h+Iv),b.eleCaches.push(p),l.set(e,r,p),i.checkTextureFullness(b),p};Ge.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])};Ge.invalidateElement=function(e){var t=this,n=t.lookup,r=[],a=n.isInvalid(e);if(a){for(var i=ya;i<=Ii;i++){var o=n.getForCachedKey(e,i);o&&r.push(o)}var c=n.invalidate(e);if(c)for(var l=0;l<r.length;l++){var s=r[l],d=s.texture;d.invalidatedWidth+=s.width,s.invalidated=!0,t.checkTextureUtility(d)}t.removeFromQueue(e)}};Ge.checkTextureUtility=function(e){e.invalidatedWidth>=Nv*e.width&&this.retireTexture(e)};Ge.checkTextureFullness=function(e){var t=this,n=t.getTextureQueue(e.height);e.usedWidth/e.width>Ov&&e.fullnessChecks>=zv?on(n,e):e.fullnessChecks++};Ge.retireTexture=function(e){var t=this,n=e.height,r=t.getTextureQueue(n),a=this.lookup;on(r,e),e.retired=!0;for(var i=e.eleCaches,o=0;o<i.length;o++){var c=i[o];a.deleteCache(c.key,c.level)}Hi(i);var l=t.getRetiredTextureQueue(n);l.push(e)};Ge.addTexture=function(e,t){var n=this,r=n.getTextureQueue(e),a={};return r.push(a),a.eleCaches=[],a.height=e,a.width=Math.max(Mv,t),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=n.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};Ge.recycleTexture=function(e,t){for(var n=this,r=n.getTextureQueue(e),a=n.getRetiredTextureQueue(e),i=0;i<a.length;i++){var o=a[i];if(o.width>=t)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Hi(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),on(a,o),r.push(o),o}};Ge.queueElement=function(e,t){var n=this,r=n.getElementQueue(),a=n.getElementKeyToQueue(),i=this.getKey(e),o=a[i];if(o)o.level=Math.max(o.level,t),o.eles.merge(e),o.reqs++,r.updateItem(o);else{var c={eles:e.spawn().merge(e),level:t,reqs:1,key:i};r.push(c),a[i]=c}};Ge.dequeue=function(e){for(var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),a=[],i=t.lookup,o=0;o<Wv&&n.size()>0;o++){var c=n.pop(),l=c.key,s=c.eles[0],d=i.hasCache(s,c.level);if(r[l]=null,!d){a.push(c);var h=t.getBoundingBox(s);t.getElement(s,h,e,c.level,Vn.dequeue)}}return a};Ge.removeFromQueue=function(e){var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),a=this.getKey(e),i=r[a];i!=null&&(i.eles.length===1?(i.reqs=Wi,n.updateItem(i),n.pop(),r[a]=null):i.eles.unmerge(e))};Ge.onDequeue=function(e){this.onDequeues.push(e)};Ge.offDequeue=function(e){on(this.onDequeues,e)};Ge.setupDequeueing=ac.setupDequeueing({deqRedrawThreshold:Xv,deqCost:Fv,deqAvgCost:Vv,deqNoDrawCost:jv,deqFastCost:Yv,deq:u(function(e,t,n){return e.dequeue(t,n)},"deq"),onDeqd:u(function(e,t){for(var n=0;n<e.onDequeues.length;n++){var r=e.onDequeues[n];r(t)}},"onDeqd"),shouldRedraw:u(function(e,t,n,r){for(var a=0;a<t.length;a++)for(var i=t[a].eles,o=0;o<i.length;o++){var c=i[o].boundingBox();if(Ki(c,r))return!0}return!1},"shouldRedraw"),priority:u(function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq},"priority")});var Hv=1,br=-4,_a=2,Uv=3.99,Kv=50,Gv=50,Zv=.15,$v=.1,Qv=.9,Jv=.9,ey=1,_s=250,ty=4e3*4e3,Is=32767,ny=!0,oc=u(function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Xt()-2*_s,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=Nr(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},Gv),n.beforeRender(function(i,o){o-t.lastInvalidationTime<=_s?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=u(function(i,o){return o.reqs-i.reqs},"qSort");t.layersQueue=new Or(a),t.setupDequeueing()},"LayeredTextureCache"),rt=oc.prototype,Ms=0,ry=Math.pow(2,53)-1;rt.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),a=Math.ceil(e.h*n),i=this.renderer.makeOffscreenCanvas(r,a),o={id:Ms=++Ms%ry,bb:e,level:t,width:r,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},c=o.context,l=-o.bb.x1,s=-o.bb.y1;return c.scale(n,n),c.translate(l,s),o};rt.getLayers=function(e,t,n){var r=this,a=r.renderer,i=a.cy,o=i.zoom(),c=r.firstGet;if(r.firstGet=!1,n==null){if(n=Math.ceil(Ui(o*t)),n<br)n=br;else if(o>=Uv||n>_a)return null}r.validateLayersElesOrdering(n,e);var l=r.layersByLevel,s=Math.pow(2,n),d=l[n]=l[n]||[],h,f=r.levelIsComplete(n,e),p,g=u(function(){var A=u(function(I){if(r.validateLayersElesOrdering(I,e),r.levelIsComplete(I,e))return p=l[I],!0},"canUseAsTmpLvl"),B=u(function(I){if(!p)for(var _=n+I;br<=_&&_<=_a&&!A(_);_+=I);},"checkLvls");B(1),B(-1);for(var k=d.length-1;k>=0;k--){var D=d[k];D.invalid&&on(d,D)}},"checkTempLevels");if(!f)g();else return d;var y=u(function(){if(!h){h=yt();for(var A=0;A<e.length;A++)Cl(h,e[A].boundingBox())}return h},"getBb"),b=u(function(A){A=A||{};var B=A.after;y();var k=Math.ceil(h.w*s),D=Math.ceil(h.h*s);if(k>Is||D>Is)return null;var I=k*D;if(I>ty)return null;var _=r.makeLayer(h,n);if(B!=null){var R=d.indexOf(B)+1;d.splice(R,0,_)}else(A.insert===void 0||A.insert)&&d.unshift(_);return _},"makeLayer");if(r.skipping&&!c)return null;for(var v=null,m=e.length/Hv,x=!c,w=0;w<e.length;w++){var P=e[w],T=P._private.rscratch,E=T.imgLayerCaches=T.imgLayerCaches||{},S=E[n];if(S){v=S;continue}if((!v||v.eles.length>=m||!Tl(v.bb,P.boundingBox()))&&(v=b({insert:!0,after:v}),!v))return null;p||x?r.queueLayer(v,P):r.drawEleInLayer(v,P,n,t),v.eles.push(P),E[n]=v}return p||(x?null:d)};rt.getEleLevelForLayerLevel=function(e,t){return e};rt.drawEleInLayer=function(e,t,n,r){var a=this,i=this.renderer,o=e.context,c=t.boundingBox();c.w===0||c.h===0||!t.visible()||(n=a.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,t,null,null,n,ny),i.setImgSmoothing(o,!0))};rt.levelIsComplete=function(e,t){var n=this,r=n.layersByLevel[e];if(!r||r.length===0)return!1;for(var a=0,i=0;i<r.length;i++){var o=r[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===t.length};rt.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var a=n[r],i=-1,o=0;o<t.length;o++)if(a.eles[0]===t[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var c=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==t[c+o]){this.invalidateLayer(a);break}}};rt.updateElementsInLayers=function(e,t){for(var n=this,r=Rr(e[0]),a=0;a<e.length;a++)for(var i=r?null:e[a],o=r?e[a]:e[a].ele,c=o._private.rscratch,l=c.imgLayerCaches=c.imgLayerCaches||{},s=br;s<=_a;s++){var d=l[s];d&&(i&&n.getEleLevelForLayerLevel(d.level)!==i.level||t(d,o,i))}};rt.haveLayers=function(){for(var e=this,t=!1,n=br;n<=_a;n++){var r=e.layersByLevel[n];if(r&&r.length>0){t=!0;break}}return t};rt.invalidateElements=function(e){var t=this;e.length!==0&&(t.lastInvalidationTime=Xt(),!(e.length===0||!t.haveLayers())&&t.updateElementsInLayers(e,u(function(n,r,a){t.invalidateLayer(n)},"invalAssocLayers")))};rt.invalidateLayer=function(e){if(this.lastInvalidationTime=Xt(),!e.invalid){var t=e.level,n=e.eles,r=this.layersByLevel[t];on(r,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var a=0;a<n.length;a++){var i=n[a]._private.rscratch.imgLayerCaches;i&&(i[t]=null)}}};rt.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,u(function(n,r,a){var i=n.replacement;if(i||(i=n.replacement=t.makeLayer(n.bb,n.level),i.replaces=n,i.eles=n.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)t.queueLayer(i,i.eles[o])},"refineEachEle"))};rt.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()};rt.queueLayer=function(e,t){var n=this,r=n.layersQueue,a=e.elesQueue,i=a.hasId=a.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;a.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}};rt.dequeue=function(e){for(var t=this,n=t.layersQueue,r=[],a=0;a<ey&&n.size()!==0;){var i=n.peek();if(i.replacement){n.pop();continue}if(i.replaces&&i!==i.replaces.replacement){n.pop();continue}if(i.invalid){n.pop();continue}var o=i.elesQueue.shift();o&&(t.drawEleInLayer(i,o,i.level,e),a++),r.length===0&&r.push(!0),i.elesQueue.length===0&&(n.pop(),i.reqs=0,i.replaces&&t.applyLayerReplacement(i),t.requestRedraw())}return r};rt.applyLayerReplacement=function(e){var t=this,n=t.layersByLevel[e.level],r=e.replaces,a=n.indexOf(r);if(!(a<0||r.invalid)){n[a]=e;for(var i=0;i<e.eles.length;i++){var o=e.eles[i]._private,c=o.imgLayerCaches=o.imgLayerCaches||{};c&&(c[e.level]=e)}t.requestRedraw()}};rt.requestRedraw=Nr(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100);rt.setupDequeueing=ac.setupDequeueing({deqRedrawThreshold:Kv,deqCost:Zv,deqAvgCost:$v,deqNoDrawCost:Qv,deqFastCost:Jv,deq:u(function(e,t){return e.dequeue(t)},"deq"),onDeqd:qi,shouldRedraw:yl,priority:u(function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq},"priority")});var sc={},Rs;function lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}u(lc,"polygon");function uc(e,t,n){for(var r,a=0;a<t.length;a++){var i=t[a];a===0&&(r=i),e.lineTo(i.x,i.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}u(uc,"triangleBackcurve");function Mi(e,t,n){e.beginPath&&e.beginPath();for(var r=t,a=0;a<r.length;a++){var i=r[a];e.lineTo(i.x,i.y)}var o=n,c=n[0];e.moveTo(c.x,c.y);for(var a=1;a<o.length;a++){var i=o[a];e.lineTo(i.x,i.y)}e.closePath&&e.closePath()}u(Mi,"triangleTee");function cc(e,t,n,r,a){e.beginPath&&e.beginPath(),e.arc(n,r,a,0,Math.PI*2,!1);var i=t,o=i[0];e.moveTo(o.x,o.y);for(var c=0;c<i.length;c++){var l=i[c];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}u(cc,"circleTriangle");function dc(e,t,n,r){e.arc(t,n,r,0,Math.PI*2,!1)}u(dc,"circle");sc.arrowShapeImpl=function(e){return(Rs||(Rs={polygon:lc,"triangle-backcurve":uc,"triangle-tee":Mi,"circle-triangle":cc,"triangle-cross":Mi,circle:dc}))[e]};var zt={};zt.drawElement=function(e,t,n,r,a,i){var o=this;t.isNode()?o.drawNode(e,t,n,r,a,i):o.drawEdge(e,t,n,r,a,i)};zt.drawElementOverlay=function(e,t){var n=this;t.isNode()?n.drawNodeOverlay(e,t):n.drawEdgeOverlay(e,t)};zt.drawElementUnderlay=function(e,t){var n=this;t.isNode()?n.drawNodeUnderlay(e,t):n.drawEdgeUnderlay(e,t)};zt.drawCachedElementPortion=function(e,t,n,r,a,i,o,c){var l=this,s=n.getBoundingBox(t);if(!(s.w===0||s.h===0)){var d=n.getElement(t,s,r,a,i);if(d!=null){var h=c(l,t);if(h===0)return;var f=o(l,t),p=s.x1,g=s.y1,y=s.w,b=s.h,v,m,x,w,P;if(f!==0){var T=n.getRotationPoint(t);x=T.x,w=T.y,e.translate(x,w),e.rotate(f),P=l.getImgSmoothing(e),P||l.setImgSmoothing(e,!0);var E=n.getRotationOffset(t);v=E.x,m=E.y}else v=p,m=g;var S;h!==1&&(S=e.globalAlpha,e.globalAlpha=S*h),e.drawImage(d.texture.canvas,d.x,0,d.width,d.height,v,m,y,b),h!==1&&(e.globalAlpha=S),f!==0&&(e.rotate(-f),e.translate(-x,-w),P||l.setImgSmoothing(e,!1))}else n.drawElement(e,t)}};var ay=u(function(){return 0},"getZeroRotation"),iy=u(function(e,t){return e.getTextAngle(t,null)},"getLabelRotation"),oy=u(function(e,t){return e.getTextAngle(t,"source")},"getSourceLabelRotation"),sy=u(function(e,t){return e.getTextAngle(t,"target")},"getTargetLabelRotation"),ly=u(function(e,t){return t.effectiveOpacity()},"getOpacity"),ui=u(function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()},"getTextOpacity");zt.drawCachedElement=function(e,t,n,r,a,i){var o=this,c=o.data,l=c.eleTxrCache,s=c.lblTxrCache,d=c.slbTxrCache,h=c.tlbTxrCache,f=t.boundingBox(),p=i===!0?l.reasons.highQuality:null;if(!(f.w===0||f.h===0||!t.visible())&&(!r||Ki(f,r))){var g=t.isEdge(),y=t.element()._private.rscratch.badLine;o.drawElementUnderlay(e,t),o.drawCachedElementPortion(e,t,l,n,a,p,ay,ly),(!g||!y)&&o.drawCachedElementPortion(e,t,s,n,a,p,iy,ui),g&&!y&&(o.drawCachedElementPortion(e,t,d,n,a,p,oy,ui),o.drawCachedElementPortion(e,t,h,n,a,p,sy,ui)),o.drawElementOverlay(e,t)}};zt.drawElements=function(e,t){for(var n=this,r=0;r<t.length;r++){var a=t[r];n.drawElement(e,a)}};zt.drawCachedElements=function(e,t,n,r){for(var a=this,i=0;i<t.length;i++){var o=t[i];a.drawCachedElement(e,o,n,r)}};zt.drawCachedNodes=function(e,t,n,r){for(var a=this,i=0;i<t.length;i++){var o=t[i];o.isNode()&&a.drawCachedElement(e,o,n,r)}};zt.drawLayeredElements=function(e,t,n,r){var a=this,i=a.data.lyrTxrCache.getLayers(t,n);if(i)for(var o=0;o<i.length;o++){var c=i[o],l=c.bb;l.w===0||l.h===0||e.drawImage(c.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(e,t,n,r)};var Gt={};Gt.drawEdge=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,c=t._private.rscratch;if(!(i&&!t.visible())&&!(c.badLine||c.allpts==null||isNaN(c.allpts[0]))){var l;n&&(l=n,e.translate(-l.x1,-l.y1));var s=i?t.pstyle("opacity").value:1,d=i?t.pstyle("line-opacity").value:1,h=t.pstyle("curve-style").value,f=t.pstyle("line-style").value,p=t.pstyle("width").pfValue,g=t.pstyle("line-cap").value,y=t.pstyle("line-outline-width").value,b=t.pstyle("line-outline-color").value,v=s*d,m=s*d,x=u(function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;h==="straight-triangle"?(o.eleStrokeStyle(e,t,_),o.drawEdgeTrianglePath(t,e,c.allpts)):(e.lineWidth=p,e.lineCap=g,o.eleStrokeStyle(e,t,_),o.drawEdgePath(t,e,c.allpts,f),e.lineCap="butt")},"drawLine"),w=u(function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(e.lineWidth=p+y,e.lineCap=g,y>0)o.colorStrokeStyle(e,b[0],b[1],b[2],_);else{e.lineCap="butt";return}h==="straight-triangle"?o.drawEdgeTrianglePath(t,e,c.allpts):(o.drawEdgePath(t,e,c.allpts,f),e.lineCap="butt")},"drawLineOutline"),P=u(function(){a&&o.drawEdgeOverlay(e,t)},"drawOverlay"),T=u(function(){a&&o.drawEdgeUnderlay(e,t)},"drawUnderlay"),E=u(function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;o.drawArrowheads(e,t,_)},"drawArrows"),S=u(function(){o.drawElementText(e,t,null,r)},"drawText");e.lineJoin="round";var A=t.pstyle("ghost").value==="yes";if(A){var B=t.pstyle("ghost-offset-x").pfValue,k=t.pstyle("ghost-offset-y").pfValue,D=t.pstyle("ghost-opacity").value,I=v*D;e.translate(B,k),x(I),E(I),e.translate(-B,-k)}else w();T(),x(),E(),P(),S(),n&&e.translate(l.x1,l.y1)}};var hc=u(function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(r!==0){var a=this,i=a.usePaths(),o=n._private.rscratch,c=n.pstyle("".concat(e,"-padding")).pfValue,l=2*c,s=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,o.edgeType==="self"&&!i?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,s[0],s[1],s[2],r),a.drawEdgePath(n,t,o.allpts,"solid")}}}},"drawEdgeOverlayUnderlay");Gt.drawEdgeOverlay=hc("overlay");Gt.drawEdgeUnderlay=hc("underlay");Gt.drawEdgePath=function(e,t,n,r){var a=e._private.rscratch,i=t,o,c=!1,l=this.usePaths(),s=e.pstyle("line-dash-pattern").pfValue,d=e.pstyle("line-dash-offset").pfValue;if(l){var h=n.join("$"),f=a.pathCacheKey&&a.pathCacheKey===h;f?(o=t=a.pathCache,c=!0):(o=t=new Path2D,a.pathCacheKey=h,a.pathCache=o)}if(i.setLineDash)switch(r){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(s),i.lineDashOffset=d;break;case"solid":i.setLineDash([]);break}if(!c&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<n.length;p+=4)t.quadraticCurveTo(n[p],n[p+1],n[p+2],n[p+3]);break;case"straight":case"haystack":for(var g=2;g+1<n.length;g+=2)t.lineTo(n[g],n[g+1]);break;case"segments":if(a.isRound){var y=vt(a.roundCorners),b;try{for(y.s();!(b=y.n()).done;){var v=b.value;go(t,v)}}catch(x){y.e(x)}finally{y.f()}t.lineTo(n[n.length-2],n[n.length-1])}else for(var m=2;m+1<n.length;m+=2)t.lineTo(n[m],n[m+1]);break}t=i,l?t.stroke(o):t.stroke(),t.setLineDash&&t.setLineDash([])};Gt.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var r=e.pstyle("width").pfValue,a=0;a+1<n.length;a+=2){var i=[n[a+2]-n[a],n[a+3]-n[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),c=[i[1]/o,-i[0]/o],l=[c[0]*r/2,c[1]*r/2];t.beginPath(),t.moveTo(n[a]-l[0],n[a+1]-l[1]),t.lineTo(n[a]+l[0],n[a+1]+l[1]),t.lineTo(n[a+2],n[a+3]),t.closePath(),t.fill()}};Gt.drawArrowheads=function(e,t,n){var r=t._private.rscratch,a=r.edgeType==="haystack";a||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),a||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)};Gt.drawArrowhead=function(e,t,n,r,a,i,o){if(!(isNaN(r)||r==null||isNaN(a)||a==null||isNaN(i)||i==null)){var c=this,l=t.pstyle(n+"-arrow-shape").value;if(l!=="none"){var s=t.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",d=t.pstyle(n+"-arrow-fill").value,h=t.pstyle("width").pfValue,f=t.pstyle(n+"-arrow-width"),p=f.value==="match-line"?h:f.pfValue;f.units==="%"&&(p*=h);var g=t.pstyle("opacity").value;o===void 0&&(o=g);var y=e.globalCompositeOperation;(o!==1||d==="hollow")&&(e.globalCompositeOperation="destination-out",c.colorFillStyle(e,255,255,255,1),c.colorStrokeStyle(e,255,255,255,1),c.drawArrowShape(t,e,s,h,l,p,r,a,i),e.globalCompositeOperation=y);var b=t.pstyle(n+"-arrow-color").value;c.colorFillStyle(e,b[0],b[1],b[2],o),c.colorStrokeStyle(e,b[0],b[1],b[2],o),c.drawArrowShape(t,e,d,h,l,p,r,a,i)}}};Gt.drawArrowShape=function(e,t,n,r,a,i,o,c,l){var s=this,d=this.usePaths()&&a!=="triangle-cross",h=!1,f,p=t,g={x:o,y:c},y=e.pstyle("arrow-scale").value,b=this.getArrowWidth(r,y),v=s.arrowShapes[a];if(d){var m=s.arrowPathCache=s.arrowPathCache||[],x=an(a),w=m[x];w!=null?(f=t=w,h=!0):(f=t=new Path2D,m[x]=f)}h||(t.beginPath&&t.beginPath(),d?v.draw(t,1,0,{x:0,y:0},1):v.draw(t,b,l,g,r),t.closePath&&t.closePath()),t=p,d&&(t.translate(o,c),t.rotate(l),t.scale(b,b)),(n==="filled"||n==="both")&&(d?t.fill(f):t.fill()),(n==="hollow"||n==="both")&&(t.lineWidth=i/(d?b:1),t.lineJoin="miter",d?t.stroke(f):t.stroke()),d&&(t.scale(1/b,1/b),t.rotate(-l),t.translate(-o,-c))};var mo={};mo.safeDrawImage=function(e,t,n,r,a,i,o,c,l,s){if(!(a<=0||i<=0||l<=0||s<=0))try{e.drawImage(t,n,r,a,i,o,c,l,s)}catch(d){_e(d)}};mo.drawInscribedImage=function(e,t,n,r,a){var i=this,o=n.position(),c=o.x,l=o.y,s=n.cy().style(),d=s.getIndexedStyle.bind(s),h=d(n,"background-fit","value",r),f=d(n,"background-repeat","value",r),p=n.width(),g=n.height(),y=n.padding()*2,b=p+(d(n,"background-width-relative-to","value",r)==="inner"?0:y),v=g+(d(n,"background-height-relative-to","value",r)==="inner"?0:y),m=n._private.rscratch,x=d(n,"background-clip","value",r),w=x==="node",P=d(n,"background-image-opacity","value",r)*a,T=d(n,"background-image-smoothing","value",r),E=n.pstyle("corner-radius").value;E!=="auto"&&(E=n.pstyle("corner-radius").pfValue);var S=t.width||t.cachedW,A=t.height||t.cachedH;(S==null||A==null)&&(document.body.appendChild(t),S=t.cachedW=t.width||t.offsetWidth,A=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var B=S,k=A;if(d(n,"background-width","value",r)!=="auto"&&(d(n,"background-width","units",r)==="%"?B=d(n,"background-width","pfValue",r)*b:B=d(n,"background-width","pfValue",r)),d(n,"background-height","value",r)!=="auto"&&(d(n,"background-height","units",r)==="%"?k=d(n,"background-height","pfValue",r)*v:k=d(n,"background-height","pfValue",r)),!(B===0||k===0)){if(h==="contain"){var D=Math.min(b/B,v/k);B*=D,k*=D}else if(h==="cover"){var D=Math.max(b/B,v/k);B*=D,k*=D}var I=c-b/2,_=d(n,"background-position-x","units",r),R=d(n,"background-position-x","pfValue",r);_==="%"?I+=(b-B)*R:I+=R;var z=d(n,"background-offset-x","units",r),N=d(n,"background-offset-x","pfValue",r);z==="%"?I+=(b-B)*N:I+=N;var M=l-v/2,L=d(n,"background-position-y","units",r),q=d(n,"background-position-y","pfValue",r);L==="%"?M+=(v-k)*q:M+=q;var Y=d(n,"background-offset-y","units",r),W=d(n,"background-offset-y","pfValue",r);Y==="%"?M+=(v-k)*W:M+=W,m.pathCache&&(I-=c,M-=l,c=0,l=0);var K=e.globalAlpha;e.globalAlpha=P;var J=i.getImgSmoothing(e),ee=!1;if(T==="no"&&J?(i.setImgSmoothing(e,!1),ee=!0):T==="yes"&&!J&&(i.setImgSmoothing(e,!0),ee=!0),f==="no-repeat")w&&(e.save(),m.pathCache?e.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(n)].draw(e,c,l,b,v,E,m),e.clip())),i.safeDrawImage(e,t,0,0,S,A,I,M,B,k),w&&e.restore();else{var Z=e.createPattern(t,f);e.fillStyle=Z,i.nodeShapes[i.getNodeShape(n)].draw(e,c,l,b,v,E,m),e.translate(I,M),e.fill(),e.translate(-I,-M)}e.globalAlpha=K,ee&&i.setImgSmoothing(e,J)}};var In={};In.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),a=Math.ceil(Ui(n*r));t=Math.pow(2,a)}var i=e.pstyle("font-size").pfValue*t,o=e.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};In.drawElementText=function(e,t,n,r,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(r==null){if(i&&!o.eleTextBiggerThanMin(t))return}else if(r===!1)return;if(t.isNode()){var c=t.pstyle("label");if(!c||!c.value)return;var l=o.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var s=t.element()._private.rscratch.badLine,d=t.pstyle("label"),h=t.pstyle("source-label"),f=t.pstyle("target-label");if(s||(!d||!d.value)&&(!h||!h.value)&&(!f||!f.value))return;e.textAlign="center",e.textBaseline="bottom"}var p=!n,g;n&&(g=n,e.translate(-g.x1,-g.y1)),a==null?(o.drawText(e,t,null,p,i),t.isEdge()&&(o.drawText(e,t,"source",p,i),o.drawText(e,t,"target",p,i))):o.drawText(e,t,a,p,i),n&&e.translate(g.x1,g.y1)};In.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t};In.setupTextStyle=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t.pstyle("font-style").strValue,a=t.pstyle("font-size").pfValue+"px",i=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,c=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*c,s=t.pstyle("color").value,d=t.pstyle("text-outline-color").value;e.font=r+" "+o+" "+a+" "+i,e.lineJoin="round",this.colorFillStyle(e,s[0],s[1],s[2],c),this.colorStrokeStyle(e,d[0],d[1],d[2],l)};function ma(e,t,n,r,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.quadraticCurveTo(t+r,n,t+r,n+i),e.lineTo(t+r,n+a-i),e.quadraticCurveTo(t+r,n+a,t+r-i,n+a),e.lineTo(t+i,n+a),e.quadraticCurveTo(t,n+a,t,n+a-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath(),o?e.stroke():e.fill()}u(ma,"roundRect");In.getTextAngle=function(e,t){var n,r=e._private,a=r.rscratch,i=t?t+"-":"",o=e.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var c=At(a,"labelAngle",t);n=e.isEdge()?c:0}else o.strValue==="none"?n=0:n=o.pfValue;return n};In.drawText=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=t._private,o=i.rscratch,c=a?t.effectiveOpacity():1;if(!(a&&(c===0||t.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var l=At(o,"labelX",n),s=At(o,"labelY",n),d,h,f=this.getLabelText(t,n);if(f!=null&&f!==""&&!isNaN(l)&&!isNaN(s)){this.setupTextStyle(e,t,a);var p=n?n+"-":"",g=At(o,"labelWidth",n),y=At(o,"labelHeight",n),b=t.pstyle(p+"text-margin-x").pfValue,v=t.pstyle(p+"text-margin-y").pfValue,m=t.isEdge(),x=t.pstyle("text-halign").value,w=t.pstyle("text-valign").value;m&&(x="center",w="center"),l+=b,s+=v;var P;switch(r?P=this.getTextAngle(t,n):P=0,P!==0&&(d=l,h=s,e.translate(d,h),e.rotate(P),l=0,s=0),w){case"top":break;case"center":s+=y/2;break;case"bottom":s+=y;break}var T=t.pstyle("text-background-opacity").value,E=t.pstyle("text-border-opacity").value,S=t.pstyle("text-border-width").pfValue,A=t.pstyle("text-background-padding").pfValue,B=t.pstyle("text-background-shape").strValue,k=B.indexOf("round")===0,D=2;if(T>0||S>0&&E>0){var I=l-A;switch(x){case"left":I-=g;break;case"center":I-=g/2;break}var _=s-y-A,R=g+2*A,z=y+2*A;if(T>0){var N=e.fillStyle,M=t.pstyle("text-background-color").value;e.fillStyle="rgba("+M[0]+","+M[1]+","+M[2]+","+T*c+")",k?ma(e,I,_,R,z,D):e.fillRect(I,_,R,z),e.fillStyle=N}if(S>0&&E>0){var L=e.strokeStyle,q=e.lineWidth,Y=t.pstyle("text-border-color").value,W=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+Y[0]+","+Y[1]+","+Y[2]+","+E*c+")",e.lineWidth=S,e.setLineDash)switch(W){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=S/4,e.setLineDash([]);break;case"solid":e.setLineDash([]);break}if(k?ma(e,I,_,R,z,D,"stroke"):e.strokeRect(I,_,R,z),W==="double"){var K=S/2;k?ma(e,I+K,_+K,R-K*2,z-K*2,D,"stroke"):e.strokeRect(I+K,_+K,R-K*2,z-K*2)}e.setLineDash&&e.setLineDash([]),e.lineWidth=q,e.strokeStyle=L}}var J=2*t.pstyle("text-outline-width").pfValue;if(J>0&&(e.lineWidth=J),t.pstyle("text-wrap").value==="wrap"){var ee=At(o,"labelWrapCachedLines",n),Z=At(o,"labelLineHeight",n),Q=g/2,U=this.getLabelJustification(t);switch(U==="auto"||(x==="left"?U==="left"?l+=-g:U==="center"&&(l+=-Q):x==="center"?U==="left"?l+=-Q:U==="right"&&(l+=Q):x==="right"&&(U==="center"?l+=Q:U==="right"&&(l+=g))),w){case"top":s-=(ee.length-1)*Z;break;case"center":case"bottom":s-=(ee.length-1)*Z;break}for(var O=0;O<ee.length;O++)J>0&&e.strokeText(ee[O],l,s),e.fillText(ee[O],l,s),s+=Z}else J>0&&e.strokeText(f,l,s),e.fillText(f,l,s);P!==0&&(e.rotate(-P),e.translate(-d,-h))}}};var nr={};nr.drawNode=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,c,l,s=t._private,d=s.rscratch,h=t.position();if(!(!te(h.x)||!te(h.y))&&!(i&&!t.visible())){var f=i?t.effectiveOpacity():1,p=o.usePaths(),g,y=!1,b=t.padding();c=t.width()+2*b,l=t.height()+2*b;var v;n&&(v=n,e.translate(-v.x1,-v.y1));for(var m=t.pstyle("background-image"),x=m.value,w=new Array(x.length),P=new Array(x.length),T=0,E=0;E<x.length;E++){var S=x[E],A=w[E]=S!=null&&S!=="none";if(A){var B=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",E);T++,P[E]=o.getCachedImage(S,B,function(){s.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var k=t.pstyle("background-blacken").value,D=t.pstyle("border-width").pfValue,I=t.pstyle("background-opacity").value*f,_=t.pstyle("border-color").value,R=t.pstyle("border-style").value,z=t.pstyle("border-join").value,N=t.pstyle("border-cap").value,M=t.pstyle("border-position").value,L=t.pstyle("border-dash-pattern").pfValue,q=t.pstyle("border-dash-offset").pfValue,Y=t.pstyle("border-opacity").value*f,W=t.pstyle("outline-width").pfValue,K=t.pstyle("outline-color").value,J=t.pstyle("outline-style").value,ee=t.pstyle("outline-opacity").value*f,Z=t.pstyle("outline-offset").value,Q=t.pstyle("corner-radius").value;Q!=="auto"&&(Q=t.pstyle("corner-radius").pfValue);var U=u(function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I;o.eleFillStyle(e,t,V)},"setupShapeColor"),O=u(function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y;o.colorStrokeStyle(e,_[0],_[1],_[2],V)},"setupBorderColor"),X=u(function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ee;o.colorStrokeStyle(e,K[0],K[1],K[2],V)},"setupOutlineColor"),$=u(function(V,j,ne,G){var ae=o.nodePathCache=o.nodePathCache||[],fe=vl(ne==="polygon"?ne+","+G.join(","):ne,""+j,""+V,""+Q),ye=ae[fe],le,me=!1;return ye!=null?(le=ye,me=!0,d.pathCache=le):(le=new Path2D,ae[fe]=d.pathCache=le),{path:le,cacheHit:me}},"getPath"),ie=t.pstyle("shape").strValue,se=t.pstyle("shape-polygon-points").pfValue;if(p){e.translate(h.x,h.y);var ve=$(c,l,ie,se);g=ve.path,y=ve.cacheHit}var Pe=u(function(){if(!y){var V=h;p&&(V={x:0,y:0}),o.nodeShapes[o.getNodeShape(t)].draw(g||e,V.x,V.y,c,l,Q,d)}p?e.fill(g):e.fill()},"drawShape"),we=u(function(){for(var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ne=s.backgrounding,G=0,ae=0;ae<P.length;ae++){var fe=t.cy().style().getIndexedStyle(t,"background-image-containment","value",ae);if(j&&fe==="over"||!j&&fe==="inside"){G++;continue}w[ae]&&P[ae].complete&&!P[ae].error&&(G++,o.drawInscribedImage(e,P[ae],t,ae,V))}s.backgrounding=G!==T,ne!==s.backgrounding&&t.updateStyle(!1)},"drawImages"),Re=u(function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;o.hasPie(t)&&(o.drawPie(e,t,j),V&&(p||o.nodeShapes[o.getNodeShape(t)].draw(e,h.x,h.y,c,l,Q,d)))},"drawPie"),re=u(function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,j=(k>0?k:-k)*V,ne=k>0?0:255;k!==0&&(o.colorFillStyle(e,ne,ne,ne,j),p?e.fill(g):e.fill())},"darken"),de=u(function(){if(D>0){if(e.lineWidth=D,e.lineCap=N,e.lineJoin=z,e.setLineDash)switch(R){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(L),e.lineDashOffset=q;break;case"solid":case"double":e.setLineDash([]);break}if(M!=="center"){if(e.save(),e.lineWidth*=2,M==="inside")p?e.clip(g):e.clip();else{var V=new Path2D;V.rect(-c/2-D,-l/2-D,c+2*D,l+2*D),V.addPath(g),e.clip(V,"evenodd")}p?e.stroke(g):e.stroke(),e.restore()}else p?e.stroke(g):e.stroke();if(R==="double"){e.lineWidth=D/3;var j=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(g):e.stroke(),e.globalCompositeOperation=j}e.setLineDash&&e.setLineDash([])}},"drawBorder"),ue=u(function(){if(W>0){if(e.lineWidth=W,e.lineCap="butt",e.setLineDash)switch(J){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}var V=h;p&&(V={x:0,y:0});var j=o.getNodeShape(t),ne=D;M==="inside"&&(ne=0),M==="outside"&&(ne*=2);var G=(c+ne+(W+Z))/c,ae=(l+ne+(W+Z))/l,fe=c*G,ye=l*ae,le=o.nodeShapes[j].points,me;if(p){var be=$(fe,ye,j,le);me=be.path}if(j==="ellipse")o.drawEllipsePath(me||e,V.x,V.y,fe,ye);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(j)){var he=0,je=0,Xe=0;j==="round-diamond"?he=(ne+Z+W)*1.4:j==="round-heptagon"?(he=(ne+Z+W)*1.075,Xe=-(ne/2+Z+W)/35):j==="round-hexagon"?he=(ne+Z+W)*1.12:j==="round-pentagon"?(he=(ne+Z+W)*1.13,Xe=-(ne/2+Z+W)/15):j==="round-tag"?(he=(ne+Z+W)*1.12,je=(ne/2+W+Z)*.07):j==="round-triangle"&&(he=(ne+Z+W)*(Math.PI/2),Xe=-(ne+Z/2+W)/Math.PI),he!==0&&(G=(c+he)/c,fe=c*G,["round-hexagon","round-tag"].includes(j)||(ae=(l+he)/l,ye=l*ae)),Q=Q==="auto"?Dl(fe,ye):Q;for(var mt=fe/2,bt=ye/2,qe=Q+(ne+W+Z)/2,Ze=new Array(le.length/2),He=new Array(le.length/2),xt=0;xt<le.length/2;xt++)Ze[xt]={x:V.x+je+mt*le[xt*2],y:V.y+Xe+bt*le[xt*2+1]};var ct,Et,Ft,_t,Vt=Ze.length;for(Et=Ze[Vt-1],ct=0;ct<Vt;ct++)Ft=Ze[ct%Vt],_t=Ze[(ct+1)%Vt],He[ct]=Ua(Et,Ft,_t,qe),Et=Ft,Ft=_t;o.drawRoundPolygonPath(me||e,V.x+je,V.y+Xe,c*G,l*ae,le,He)}else if(["roundrectangle","round-rectangle"].includes(j))Q=Q==="auto"?Cn(fe,ye):Q,o.drawRoundRectanglePath(me||e,V.x,V.y,fe,ye,Q+(ne+W+Z)/2);else if(["cutrectangle","cut-rectangle"].includes(j))Q=Q==="auto"?Gi():Q,o.drawCutRectanglePath(me||e,V.x,V.y,fe,ye,null,Q+(ne+W+Z)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(j))Q=Q==="auto"?Cn(fe,ye):Q,o.drawBottomRoundRectanglePath(me||e,V.x,V.y,fe,ye,Q+(ne+W+Z)/2);else if(j==="barrel")o.drawBarrelPath(me||e,V.x,V.y,fe,ye);else if(j.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(j)){var jt=(ne+W+Z)/c;le=Ta(Sa(le,jt)),o.drawPolygonPath(me||e,V.x,V.y,c,l,le)}else{var at=(ne+W+Z)/c;le=Ta(Sa(le,-at)),o.drawPolygonPath(me||e,V.x,V.y,c,l,le)}if(p?e.stroke(me):e.stroke(),J==="double"){e.lineWidth=ne/3;var $e=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(me):e.stroke(),e.globalCompositeOperation=$e}e.setLineDash&&e.setLineDash([])}},"drawOutline"),xe=u(function(){a&&o.drawNodeOverlay(e,t,h,c,l)},"drawOverlay"),ge=u(function(){a&&o.drawNodeUnderlay(e,t,h,c,l)},"drawUnderlay"),Te=u(function(){o.drawElementText(e,t,null,r)},"drawText"),Se=t.pstyle("ghost").value==="yes";if(Se){var Ce=t.pstyle("ghost-offset-x").pfValue,C=t.pstyle("ghost-offset-y").pfValue,F=t.pstyle("ghost-opacity").value,H=F*f;e.translate(Ce,C),X(),ue(),U(F*I),Pe(),we(H,!0),O(F*Y),de(),Re(k!==0||D!==0),we(H,!1),re(H),e.translate(-Ce,-C)}p&&e.translate(-h.x,-h.y),ge(),p&&e.translate(h.x,h.y),X(),ue(),U(),Pe(),we(f,!0),O(),de(),Re(k!==0||D!==0),we(f,!1),re(),p&&e.translate(-h.x,-h.y),Te(),xe(),n&&e.translate(v.x1,v.y1)}};var fc=u(function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,r,a,i){var o=this;if(n.visible()){var c=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,s=n.pstyle("".concat(e,"-color")).value,d=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(r=r||n.position(),a==null||i==null){var f=n.padding();a=n.width()+2*f,i=n.height()+2*f}o.colorFillStyle(t,s[0],s[1],s[2],l),o.nodeShapes[d].draw(t,r.x,r.y,a+c*2,i+c*2,h),t.fill()}}}},"drawNodeOverlayUnderlay");nr.drawNodeOverlay=fc("overlay");nr.drawNodeUnderlay=fc("underlay");nr.hasPie=function(e){return e=e[0],e._private.hasPie};nr.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var a=t.cy().style(),i=t.pstyle("pie-size"),o=r.x,c=r.y,l=t.width(),s=t.height(),d=Math.min(l,s)/2,h=0,f=this.usePaths();f&&(o=0,c=0),i.units==="%"?d=d*i.pfValue:i.pfValue!==void 0&&(d=i.pfValue/2);for(var p=1;p<=a.pieBackgroundN;p++){var g=t.pstyle("pie-"+p+"-background-size").value,y=t.pstyle("pie-"+p+"-background-color").value,b=t.pstyle("pie-"+p+"-background-opacity").value*n,v=g/100;v+h>1&&(v=1-h);var m=1.5*Math.PI+2*Math.PI*h,x=2*Math.PI*v,w=m+x;g===0||h>=1||h+v>1||(e.beginPath(),e.moveTo(o,c),e.arc(o,c,d,m,w),e.closePath(),this.colorFillStyle(e,y[0],y[1],y[2],b),e.fill(),h+=v)}};var ht={},uy=100;ht.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=this.cy.window(),n=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/n};ht.paintCache=function(e){for(var t=this.paintCaches=this.paintCaches||[],n=!0,r,a=0;a<t.length;a++)if(r=t[a],r.context===e){n=!1;break}return n&&(r={context:e},t.push(r)),r};ht.createGradientStyleFor=function(e,t,n,r,a){var i,o=this.usePaths(),c=n.pstyle(t+"-gradient-stop-colors").value,l=n.pstyle(t+"-gradient-stop-positions").pfValue;if(r==="radial-gradient")if(n.isEdge()){var s=n.sourceEndpoint(),d=n.targetEndpoint(),h=n.midpoint(),f=En(s,h),p=En(d,h);i=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(f,p))}else{var g=o?{x:0,y:0}:n.position(),y=n.paddedWidth(),b=n.paddedHeight();i=e.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(y,b))}else if(n.isEdge()){var v=n.sourceEndpoint(),m=n.targetEndpoint();i=e.createLinearGradient(v.x,v.y,m.x,m.y)}else{var x=o?{x:0,y:0}:n.position(),w=n.paddedWidth(),P=n.paddedHeight(),T=w/2,E=P/2,S=n.pstyle("background-gradient-direction").value;switch(S){case"to-bottom":i=e.createLinearGradient(x.x,x.y-E,x.x,x.y+E);break;case"to-top":i=e.createLinearGradient(x.x,x.y+E,x.x,x.y-E);break;case"to-left":i=e.createLinearGradient(x.x+T,x.y,x.x-T,x.y);break;case"to-right":i=e.createLinearGradient(x.x-T,x.y,x.x+T,x.y);break;case"to-bottom-right":case"to-right-bottom":i=e.createLinearGradient(x.x-T,x.y-E,x.x+T,x.y+E);break;case"to-top-right":case"to-right-top":i=e.createLinearGradient(x.x-T,x.y+E,x.x+T,x.y-E);break;case"to-bottom-left":case"to-left-bottom":i=e.createLinearGradient(x.x+T,x.y-E,x.x-T,x.y+E);break;case"to-top-left":case"to-left-top":i=e.createLinearGradient(x.x+T,x.y+E,x.x-T,x.y-E);break}}if(!i)return null;for(var A=l.length===c.length,B=c.length,k=0;k<B;k++)i.addColorStop(A?l[k]:k/(B-1),"rgba("+c[k][0]+","+c[k][1]+","+c[k][2]+","+a+")");return i};ht.gradientFillStyle=function(e,t,n,r){var a=this.createGradientStyleFor(e,"background",t,n,r);if(!a)return null;e.fillStyle=a};ht.colorFillStyle=function(e,t,n,r,a){e.fillStyle="rgba("+t+","+n+","+r+","+a+")"};ht.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientFillStyle(e,t,r,n);else{var a=t.pstyle("background-color").value;this.colorFillStyle(e,a[0],a[1],a[2],n)}};ht.gradientStrokeStyle=function(e,t,n,r){var a=this.createGradientStyleFor(e,"line",t,n,r);if(!a)return null;e.strokeStyle=a};ht.colorStrokeStyle=function(e,t,n,r,a){e.strokeStyle="rgba("+t+","+n+","+r+","+a+")"};ht.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientStrokeStyle(e,t,r,n);else{var a=t.pstyle("line-color").value;this.colorStrokeStyle(e,a[0],a[1],a[2],n)}};ht.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),a=r[2],i=r[3],o=t.getPixelRatio(),c=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(o=c);var l=a*o,s=i*o,d;if(!(l===t.canvasWidth&&s===t.canvasHeight)){t.fontCaches=null;var h=n.canvasContainer;h.style.width=a+"px",h.style.height=i+"px";for(var f=0;f<t.CANVAS_LAYERS;f++)d=n.canvases[f],d.width=l,d.height=s,d.style.width=a+"px",d.style.height=i+"px";for(var f=0;f<t.BUFFER_COUNT;f++)d=n.bufferCanvases[f],d.width=l,d.height=s,d.style.width=a+"px",d.style.height=i+"px";t.textureMult=1,o<=1&&(d=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,d.width=l*t.textureMult,d.height=s*t.textureMult),t.canvasWidth=l,t.canvasHeight=s,t.pixelRatio=o}};ht.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})};ht.clearCanvas=function(){var e=this,t=e.data;function n(r){r.clearRect(0,0,e.canvasWidth,e.canvasHeight)}u(n,"clear"),n(t.contexts[e.NODE]),n(t.contexts[e.DRAG])};ht.render=function(e){var t=this;e=e||xl();var n=t.cy,r=e.forcedContext,a=e.drawAllLayers,i=e.drawOnlyNodeLayer,o=e.forcedZoom,c=e.forcedPan,l=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio,s=t.data,d=s.canvasNeedsRedraw,h=t.textureOnViewport&&!r&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),f=e.motionBlur!==void 0?e.motionBlur:t.motionBlur,p=t.motionBlurPxRatio,g=n.hasCompoundNodes(),y=t.hoverData.draggingEles,b=!!(t.hoverData.selecting||t.touchData.selecting);f=f&&!r&&t.motionBlurEnabled&&!b;var v=f;r||(t.prevPxRatio!==l&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=l),!r&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),f&&(t.mbFrames==null&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(v=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!h&&(d[t.NODE]=!0,d[t.SELECT_BOX]=!0);var m=n.style(),x=n.zoom(),w=o!==void 0?o:x,P=n.pan(),T={x:P.x,y:P.y},E={zoom:x,pan:{x:P.x,y:P.y}},S=t.prevViewport,A=S===void 0||E.zoom!==S.zoom||E.pan.x!==S.pan.x||E.pan.y!==S.pan.y;!A&&!(y&&!g)&&(t.motionBlurPxRatio=1),c&&(T=c),w*=l,T.x*=l,T.y*=l;var B=t.getCachedZSortedEles();function k(O,X,$,ie,se){var ve=O.globalCompositeOperation;O.globalCompositeOperation="destination-out",t.colorFillStyle(O,255,255,255,t.motionBlurTransparency),O.fillRect(X,$,ie,se),O.globalCompositeOperation=ve}u(k,"mbclear");function D(O,X){var $,ie,se,ve;!t.clearingMotionBlur&&(O===s.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]||O===s.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG])?($={x:P.x*p,y:P.y*p},ie=x*p,se=t.canvasWidth*p,ve=t.canvasHeight*p):($=T,ie=w,se=t.canvasWidth,ve=t.canvasHeight),O.setTransform(1,0,0,1,0,0),X==="motionBlur"?k(O,0,0,se,ve):!r&&(X===void 0||X)&&O.clearRect(0,0,se,ve),a||(O.translate($.x,$.y),O.scale(ie,ie)),c&&O.translate(c.x,c.y),o&&O.scale(o,o)}if(u(D,"setContextTransform"),h||(t.textureDrawLastFrame=!1),h){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=n.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var I=t.data.bufferContexts[t.TEXTURE_BUFFER];I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:I,drawOnlyNodeLayer:!0,forcedPxRatio:l*t.textureMult});var E=t.textureCache.viewport={zoom:n.zoom(),pan:n.pan(),width:t.canvasWidth,height:t.canvasHeight};E.mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}d[t.DRAG]=!1,d[t.NODE]=!1;var _=s.contexts[t.NODE],R=t.textureCache.texture,E=t.textureCache.viewport;_.setTransform(1,0,0,1,0,0),f?k(_,0,0,E.width,E.height):_.clearRect(0,0,E.width,E.height);var z=m.core("outside-texture-bg-color").value,N=m.core("outside-texture-bg-opacity").value;t.colorFillStyle(_,z[0],z[1],z[2],N),_.fillRect(0,0,E.width,E.height);var x=n.zoom();D(_,!1),_.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/l,E.height/E.zoom/l),_.drawImage(R,E.mpan.x,E.mpan.y,E.width/E.zoom/l,E.height/E.zoom/l)}else t.textureOnViewport&&!r&&(t.textureCache=null);var M=n.extent(),L=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),q=t.hideEdgesOnViewport&&L,Y=[];if(Y[t.NODE]=!d[t.NODE]&&f&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,Y[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),Y[t.DRAG]=!d[t.DRAG]&&f&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,Y[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),d[t.NODE]||a||i||Y[t.NODE]){var W=f&&!Y[t.NODE]&&p!==1,_=r||(W?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:s.contexts[t.NODE]),K=f&&!W?"motionBlur":void 0;D(_,K),q?t.drawCachedNodes(_,B.nondrag,l,M):t.drawLayeredElements(_,B.nondrag,l,M),t.debug&&t.drawDebugPoints(_,B.nondrag),!a&&!f&&(d[t.NODE]=!1)}if(!i&&(d[t.DRAG]||a||Y[t.DRAG])){var W=f&&!Y[t.DRAG]&&p!==1,_=r||(W?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:s.contexts[t.DRAG]);D(_,f&&!W?"motionBlur":void 0),q?t.drawCachedNodes(_,B.drag,l,M):t.drawCachedElements(_,B.drag,l,M),t.debug&&t.drawDebugPoints(_,B.drag),!a&&!f&&(d[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,D),f&&p!==1){var J=s.contexts[t.NODE],ee=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],Z=s.contexts[t.DRAG],Q=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],U=u(function(O,X,$){O.setTransform(1,0,0,1,0,0),$||!v?O.clearRect(0,0,t.canvasWidth,t.canvasHeight):k(O,0,0,t.canvasWidth,t.canvasHeight);var ie=p;O.drawImage(X,0,0,t.canvasWidth*ie,t.canvasHeight*ie,0,0,t.canvasWidth,t.canvasHeight)},"drawMotionBlur");(d[t.NODE]||Y[t.NODE])&&(U(J,ee,Y[t.NODE]),d[t.NODE]=!1),(d[t.DRAG]||Y[t.DRAG])&&(U(Z,Q,Y[t.DRAG]),d[t.DRAG]=!1)}t.prevViewport=E,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),f&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!h,t.mbFrames=0,d[t.NODE]=!0,d[t.DRAG]=!0,t.redraw()},uy)),r||n.emit("render")};var lr;ht.drawSelectionRectangle=function(e,t){var n=this,r=n.cy,a=n.data,i=r.style(),o=e.drawOnlyNodeLayer,c=e.drawAllLayers,l=a.canvasNeedsRedraw,s=e.forcedContext;if(n.showFps||!o&&l[n.SELECT_BOX]&&!c){var d=s||a.contexts[n.SELECT_BOX];if(t(d),n.selection[4]==1&&(n.hoverData.selecting||n.touchData.selecting)){var h=n.cy.zoom(),f=i.core("selection-box-border-width").value/h;d.lineWidth=f,d.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",d.fillRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]),f>0&&(d.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",d.strokeRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]))}if(a.bgActivePosistion&&!n.hoverData.selecting){var h=n.cy.zoom(),p=a.bgActivePosistion;d.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",d.beginPath(),d.arc(p.x,p.y,i.core("active-bg-size").pfValue/h,0,2*Math.PI),d.fill()}var g=n.lastRedrawTime;if(n.showFps&&g){g=Math.round(g);var y=Math.round(1e3/g),b="1 frame = "+g+" ms = "+y+" fps";if(d.setTransform(1,0,0,1,0,0),d.fillStyle="rgba(255, 0, 0, 0.75)",d.strokeStyle="rgba(255, 0, 0, 0.75)",d.font="30px Arial",!lr){var v=d.measureText(b);lr=v.actualBoundingBoxAscent}d.fillText(b,0,lr);var m=60;d.strokeRect(0,lr+10,250,20),d.fillRect(0,lr+10,250*Math.min(y/m,1),20)}c||(l[n.SELECT_BOX]=!1)}};function Ri(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(r));return r}u(Ri,"compileShader");function pc(e,t,n){var r=Ri(e,e.VERTEX_SHADER,t),a=Ri(e,e.FRAGMENT_SHADER,n),i=e.createProgram();if(e.attachShader(i,r),e.attachShader(i,a),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw new Error("Could not initialize shaders");return i}u(pc,"createProgram");function gc(e,t,n){n===void 0&&(n=t);var r=e.makeOffscreenCanvas(t,n),a=r.context=r.getContext("2d");return r.clear=function(){return a.clearRect(0,0,r.width,r.height)},r.clear(),r}u(gc,"createTextureCanvas");function Za(e){var t=e.pixelRatio,n=e.cy.zoom(),r=e.cy.pan();return{zoom:n*t,pan:{x:r.x*t,y:r.y*t}}}u(Za,"getEffectivePanZoom");function ba(e,t,n,r,a){var i=r*n+t.x,o=a*n+t.y;return o=Math.round(e.canvasHeight-o),[i,o]}u(ba,"modelToRenderedPosition");function vr(e,t,n){var r=e[0]/255,a=e[1]/255,i=e[2]/255,o=t,c=n||new Array(4);return c[0]=r*o,c[1]=a*o,c[2]=i*o,c[3]=o,c}u(vr,"toWebGLColor");function yr(e,t){var n=t||new Array(4);return n[0]=(e>>0&255)/255,n[1]=(e>>8&255)/255,n[2]=(e>>16&255)/255,n[3]=(e>>24&255)/255,n}u(yr,"indexToVec4");function vc(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}u(vc,"vec4ToIndex");function yc(e,t){var n=e.createTexture();return n.buffer=function(r){e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},n.deleteTexture=function(){e.deleteTexture(n)},n}u(yc,"createTexture");function bo(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}u(bo,"getTypeInfo");function xo(e,t,n){switch(t){case e.FLOAT:return new Float32Array(n);case e.INT:return new Int32Array(n)}}u(xo,"createTypedArray");function mc(e,t,n,r,a,i){switch(t){case e.FLOAT:return new Float32Array(n.buffer,i*r,a);case e.INT:return new Int32Array(n.buffer,i*r,a)}}u(mc,"createTypedArrayView");function bc(e,t,n,r){var a=bo(e,t),i=Ye(a,2),o=i[0],c=i[1],l=xo(e,c,r),s=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,l,e.STATIC_DRAW),c===e.FLOAT?e.vertexAttribPointer(n,o,c,!1,0,0):c===e.INT&&e.vertexAttribIPointer(n,o,c,0,0),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,null),s}u(bc,"createBufferStaticDraw");function pt(e,t,n,r){var a=bo(e,n),i=Ye(a,3),o=i[0],c=i[1],l=i[2],s=xo(e,c,t*o),d=o*l,h=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,t*d,e.DYNAMIC_DRAW),e.enableVertexAttribArray(r),c===e.FLOAT?e.vertexAttribPointer(r,o,c,!1,d,0):c===e.INT&&e.vertexAttribIPointer(r,o,c,d,0),e.vertexAttribDivisor(r,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var f=new Array(t),p=0;p<t;p++)f[p]=mc(e,c,s,d,o,p);return h.dataArray=s,h.stride=d,h.size=o,h.getView=function(g){return f[g]},h.setPoint=function(g,y,b){var v=f[g];v[0]=y,v[1]=b},h.bufferSubData=function(g){e.bindBuffer(e.ARRAY_BUFFER,h),g?e.bufferSubData(e.ARRAY_BUFFER,0,s,0,g*o):e.bufferSubData(e.ARRAY_BUFFER,0,s)},h}u(pt,"createBufferDynamicDraw");function xc(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(r,a){e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,a,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}u(xc,"createPickingFrameBuffer");var Ls=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function qn(){var e=new Ls(9);return Ls!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}u(qn,"create");function wo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}u(wo,"identity");function wc(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],d=t[7],h=t[8],f=n[0],p=n[1],g=n[2],y=n[3],b=n[4],v=n[5],m=n[6],x=n[7],w=n[8];return e[0]=f*r+p*o+g*s,e[1]=f*a+p*c+g*d,e[2]=f*i+p*l+g*h,e[3]=y*r+b*o+v*s,e[4]=y*a+b*c+v*d,e[5]=y*i+b*l+v*h,e[6]=m*r+x*o+w*s,e[7]=m*a+x*c+w*d,e[8]=m*i+x*l+w*h,e}u(wc,"multiply");function Ir(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],d=t[7],h=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=c,e[5]=l,e[6]=f*r+p*o+s,e[7]=f*a+p*c+d,e[8]=f*i+p*l+h,e}u(Ir,"translate");function Eo(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],d=t[7],h=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*o,e[1]=p*a+f*c,e[2]=p*i+f*l,e[3]=p*o-f*r,e[4]=p*c-f*a,e[5]=p*l-f*i,e[6]=s,e[7]=d,e[8]=h,e}u(Eo,"rotate");function $a(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}u($a,"scale");function Ec(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}u(Ec,"projection");var xr={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},ur=Je({getKey:null,drawElement:null,getBoundingBox:null,getRotation:null,getRotationPoint:null,getRotationOffset:null,isVisible:null,getPadding:null}),cy=function(){function e(t,n){Ht(this,e),this.debugID=Math.floor(Math.random()*1e4),this.r=t,this.atlasSize=n.webglTexSize,this.rows=n.webglTexRows,this.enableWrapping=n.enableWrapping,this.texHeight=Math.floor(this.atlasSize/this.rows),this.maxTexWidth=this.atlasSize,this.texture=null,this.canvas=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=n.createTextureCanvas(t,this.atlasSize,this.atlasSize),this.scratch=n.createTextureCanvas(t,this.atlasSize,this.texHeight,"scratch")}return u(e,"Atlas"),Ut(e,[{key:"getKeys",value:u(function(){return new Set(this.keyToLocation.keys())},"getKeys")},{key:"getScale",value:u(function(t){var n=t.w,r=t.h,a=this.texHeight,i=this.maxTexWidth,o=a/r,c=n*o,l=r*o;return c>i&&(o=i/n,c=n*o,l=r*o),{scale:o,texW:c,texH:l}},"getScale")},{key:"draw",value:u(function(t,n,r){var a=this,i=this.atlasSize,o=this.rows,c=this.texHeight,l=this.getScale(n),s=l.scale,d=l.texW,h=l.texH,f=[null,null],p=u(function(v,m){if(r&&m){var x=m.context,w=v.x,P=v.row,T=w,E=c*P;x.save(),x.translate(T,E),x.scale(s,s),r(x,n),x.restore()}},"drawAt"),g=u(function(){p(a.freePointer,a.canvas),f[0]={x:a.freePointer.x,y:a.freePointer.row*c,w:d,h},f[1]={x:a.freePointer.x+d,y:a.freePointer.row*c,w:0,h},a.freePointer.x+=d,a.freePointer.x==i&&(a.freePointer.x=0,a.freePointer.row++)},"drawNormal"),y=u(function(){var v=a.scratch,m=a.canvas;v.clear(),p({x:0,row:0},v);var x=i-a.freePointer.x,w=d-x,P=c;{var T=a.freePointer.x,E=a.freePointer.row*c,S=x;m.context.drawImage(v,0,0,S,P,T,E,S,P),f[0]={x:T,y:E,w:S,h}}{var A=x,B=(a.freePointer.row+1)*c,k=w;m&&m.context.drawImage(v,A,0,k,P,0,B,k,P),f[1]={x:0,y:B,w:k,h}}a.freePointer.x=w,a.freePointer.row++},"drawWrapped"),b=u(function(){a.freePointer.x=0,a.freePointer.row++},"moveToStartOfNextRow");if(this.freePointer.x+d<=i)g();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===i?(b(),g()):this.enableWrapping?y():(b(),g())}return this.keyToLocation.set(t,f),this.needsBuffer=!0,f},"draw")},{key:"getOffsets",value:u(function(t){return this.keyToLocation.get(t)},"getOffsets")},{key:"isEmpty",value:u(function(){return this.freePointer.x===0&&this.freePointer.row===0},"isEmpty")},{key:"canFit",value:u(function(t){var n=this.atlasSize,r=this.rows,a=this.getScale(t),i=a.texW;return this.freePointer.x+i>n?this.freePointer.row<r-1:!0},"canFit")},{key:"bufferIfNeeded",value:u(function(t){this.texture||(this.texture=yc(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1)},"bufferIfNeeded")},{key:"dispose",value:u(function(){this.texture&&(this.texture.deleteTexture(),this.texture=null,this.needsBuffer=!0)},"dispose")}]),e}(),dy=function(){function e(t,n){Ht(this,e),this.r=t,this.opts=n,this.keyToIds=new Map,this.idToKey=new Map,this.atlases=[],this.styleKeyToAtlas=new Map,this.styleKeyNeedsRedraw=new Set,this.forceGC=!1}return u(e,"AtlasCollection"),Ut(e,[{key:"getKeys",value:u(function(){return new Set(this.styleKeyToAtlas.keys())},"getKeys")},{key:"getIdsFor",value:u(function(t){var n=this.keyToIds.get(t);return n||(n=new Set,this.keyToIds.set(t,n)),n},"getIdsFor")},{key:"_createAtlas",value:u(function(){var t=this.r,n=this.opts;return new cy(t,n)},"_createAtlas")},{key:"_getScratchCanvas",value:u(function(){if(!this.scratch){var t=this.r,n=this.opts,r=n.webglTexSize,a=Math.floor(r/n.webglTexRows);this.scratch=n.createTextureCanvas(t,r,a,"scratch")}return this.scratch},"_getScratchCanvas")},{key:"draw",value:u(function(t,n,r,a){if(this.styleKeyNeedsRedraw.has(n)){this.styleKeyNeedsRedraw.delete(n),this.deleteKey(t,n);var i=this.styleKeyToAtlas.get(n);i&&(i.forceGC=!0),this.styleKeyToAtlas.delete(n)}var o=this.styleKeyToAtlas.get(n);return o||(o=this.atlases[this.atlases.length-1],(!o||!o.canFit(r))&&(o=this._createAtlas(),this.atlases.push(o)),o.draw(n,r,a),this.styleKeyToAtlas.set(n,o),this.getIdsFor(n).add(t),this.idToKey.set(t,n)),o},"draw")},{key:"getAtlas",value:u(function(t){return this.styleKeyToAtlas.get(t)},"getAtlas")},{key:"hasAtlas",value:u(function(t){return this.styleKeyToAtlas.has(t)},"hasAtlas")},{key:"deleteKey",value:u(function(t,n){this.idToKey.delete(t),this.getIdsFor(n).delete(t)},"deleteKey")},{key:"checkKeyIsInvalid",value:u(function(t,n){if(!this.idToKey.has(t))return!1;var r=this.idToKey.get(t);return r!=n?(this.deleteKey(t,r),!0):!1},"checkKeyIsInvalid")},{key:"_getKeysToCollect",value:u(function(){var t=new Set,n=vt(this.styleKeyToAtlas.keys()),r;try{for(n.s();!(r=n.n()).done;){var a=r.value;this.getIdsFor(a).size==0&&t.add(a)}}catch(i){n.e(i)}finally{n.f()}return t},"_getKeysToCollect")},{key:"gc",value:u(function(){var t=this,n=this.atlases.some(function(h){return h.forceGC}),r=this._getKeysToCollect();if(r.size===0&&!n){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,c=vt(this.atlases),l;try{var s=u(function(){var h=l.value,f=h.getKeys(),p=Cc(r,f);if(p.size===0&&!h.forceGC)return a.push(h),f.forEach(function(P){return i.set(P,h)}),"continue";o||(o=t._createAtlas(),a.push(o));var g=vt(f),y;try{for(g.s();!(y=g.n()).done;){var b=y.value;if(!p.has(b)){var v=h.getOffsets(b),m=Ye(v,2),x=m[0],w=m[1];o.canFit({w:x.w+w.w,h:x.h})||(o=t._createAtlas(),a.push(o)),t._copyTextureToNewAtlas(b,h,o),i.set(b,o)}}}catch(P){g.e(P)}finally{g.f()}},"_loop");for(c.s();!(l=c.n()).done;)var d=s()}catch(h){c.e(h)}finally{c.f()}this.atlases=a,this.styleKeyToAtlas=i},"gc")},{key:"_copyTextureToNewAtlas",value:u(function(t,n,r){var a=n.getOffsets(t),i=Ye(a,2),o=i[0],c=i[1];if(c.w===0)r.draw(t,o,function(h){h.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l.context.drawImage(n.canvas,c.x,c.y,c.w,c.h,o.w,0,c.w,c.h);var s=o.w+c.w,d=o.h;r.draw(t,{w:s,h:d},function(h){h.drawImage(l,0,0,s,d,0,0,s,d)})}},"_copyTextureToNewAtlas")},{key:"getCounts",value:u(function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}},"getCounts")}]),e}();function Cc(e,t){return e.intersection?e.intersection(t):new Set(ji(e).filter(function(n){return t.has(n)}))}u(Cc,"intersection");var hy=function(){function e(t,n){Ht(this,e),this.r=t;var r=n;this.globalOptions=r,this.maxAtlases=r.webglTexPerBatch,this.atlasSize=r.webglTexSize,this.renderTypes=new Map,this.maxAtlasesPerBatch=n.webglTexPerBatch,this.batchAtlases=[],this._cacheScratchCanvas(r)}return u(e,"AtlasManager"),Ut(e,[{key:"_cacheScratchCanvas",value:u(function(t){var n=-1,r=-1,a=null,i=t.createTextureCanvas;t.createTextureCanvas=function(o,c,l,s){return s?((!a||c!=n||l!=r)&&(n=c,r=l,a=i(o,c,l)),a):i(o,c,l)}},"_cacheScratchCanvas")},{key:"addRenderType",value:u(function(t,n){var r=new dy(this.r,this.globalOptions),a=n;this.renderTypes.set(t,pe({type:t,atlasCollection:r},a))},"addRenderType")},{key:"getRenderTypes",value:u(function(){return ji(this.renderTypes.values())},"getRenderTypes")},{key:"getRenderTypeOpts",value:u(function(t){return this.renderTypes.get(t)},"getRenderTypeOpts")},{key:"invalidate",value:u(function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.forceRedraw,a=r===void 0?!1:r,i=n.filterEle,o=i===void 0?function(){return!0}:i,c=n.filterType,l=c===void 0?function(){return!0}:c,s=!1,d=vt(t),h;try{for(d.s();!(h=d.n()).done;){var f=h.value;if(o(f)){var p=f.id(),g=vt(this.getRenderTypes()),y;try{for(g.s();!(y=g.n()).done;){var b=y.value;if(l(b.type)){var v=b.getKey(f);a?(b.atlasCollection.deleteKey(p,v),b.atlasCollection.styleKeyNeedsRedraw.add(v),s=!0):s|=b.atlasCollection.checkKeyIsInvalid(p,v)}}}catch(m){g.e(m)}finally{g.f()}}}}catch(m){d.e(m)}finally{d.f()}return s},"invalidate")},{key:"gc",value:u(function(){var t=vt(this.getRenderTypes()),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;r.atlasCollection.gc()}}catch(a){t.e(a)}finally{t.f()}},"gc")},{key:"isRenderable",value:u(function(t,n){var r=this.getRenderTypeOpts(n);return r&&r.isVisible(t)},"isRenderable")},{key:"startBatch",value:u(function(){this.batchAtlases=[]},"startBatch")},{key:"getAtlasCount",value:u(function(){return this.batchAtlases.length},"getAtlasCount")},{key:"getAtlases",value:u(function(){return this.batchAtlases},"getAtlases")},{key:"getOrCreateAtlas",value:u(function(t,n,r){var a=this.renderTypes.get(r),i=a.getKey(t),o=t.id();return a.atlasCollection.draw(o,i,n,function(c){a.drawElement(c,t,n,!0,!0)})},"getOrCreateAtlas")},{key:"getAtlasIndexForBatch",value:u(function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)return;this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n},"getAtlasIndexForBatch")},{key:"getIndexArray",value:u(function(){return Array.from({length:this.maxAtlases},function(t,n){return n})},"getIndexArray")},{key:"getAtlasInfo",value:u(function(t,n){var r=this.renderTypes.get(n),a=r.getBoundingBox(t),i=this.getOrCreateAtlas(t,a,n),o=this.getAtlasIndexForBatch(i);if(o!==void 0){var c=r.getKey(t),l=i.getOffsets(c),s=Ye(l,2),d=s[0],h=s[1];return{atlasID:o,tex:d,tex1:d,tex2:h,bb:a,type:n,styleKey:c}}},"getAtlasInfo")},{key:"canAddToCurrentBatch",value:u(function(t,n){if(this.batchAtlases.length===this.maxAtlasesPerBatch){var r=this.renderTypes.get(n),a=r.getKey(t),i=r.atlasCollection.getAtlas(a);return i&&this.batchAtlases.includes(i)}return!0},"canAddToCurrentBatch")},{key:"setTransformMatrix",value:u(function(t,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=n.bb,o=n.type,c=n.tex1,l=n.tex2,s=this.getRenderTypeOpts(o),d=s.getPadding?s.getPadding(r):0,h=c.w/(c.w+l.w);a||(h=1-h);var f=this.getAdjustedBB(i,d,a,h),p,g;wo(t);var y=s.getRotation?s.getRotation(r):0;if(y!==0){var b=s.getRotationPoint(r),v=b.x,m=b.y;Ir(t,t,[v,m]),Eo(t,t,y);var x=s.getRotationOffset(r);p=x.x+f.xOffset,g=x.y}else p=f.x1,g=f.y1;Ir(t,t,[p,g]),$a(t,t,[f.w,f.h])},"setTransformMatrix")},{key:"getTransformMatrix",value:u(function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=qn();return this.setTransformMatrix(a,t,n,r),a},"getTransformMatrix")},{key:"getAdjustedBB",value:u(function(t,n,r,a){var i=t.x1,o=t.y1,c=t.w,l=t.h;n&&(i-=n,o-=n,c+=2*n,l+=2*n);var s=0,d=c*a;return r&&a<1?c=d:!r&&a<1&&(s=c-d,i+=s,c=d),{x1:i,y1:o,w:c,h:l,xOffset:s}},"getAdjustedBB")},{key:"getDebugInfo",value:u(function(){var t=[],n=vt(this.renderTypes),r;try{for(n.s();!(r=n.n()).done;){var a=Ye(r.value,2),i=a[0],o=a[1],c=o.atlasCollection.getCounts(),l=c.keyCount,s=c.atlasCount;t.push({type:i,keyCount:l,atlasCount:s})}}catch(d){n.e(d)}finally{n.f()}return t},"getDebugInfo")}]),e}(),ci=0,Ns=1,Os=2,di=3,fy=function(){function e(t,n,r){Ht(this,e),this.r=t,this.gl=n,this.maxInstances=r.webglBatchSize,this.maxAtlases=r.webglTexPerBatch,this.atlasSize=r.webglTexSize,this.bgColor=r.bgColor,r.enableWrapping=!0,r.createTextureCanvas=gc,this.atlasManager=new hy(t,r),this.program=this.createShaderProgram(xr.SCREEN),this.pickingProgram=this.createShaderProgram(xr.PICKING),this.vao=this.createVAO(),this.debugInfo=[]}return u(e,"ElementDrawingWebGL"),Ut(e,[{key:"addTextureRenderType",value:u(function(t,n){this.atlasManager.addRenderType(t,n)},"addTextureRenderType")},{key:"invalidate",value:u(function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.type,a=this.atlasManager;return r?a.invalidate(t,{filterType:u(function(i){return i===r},"filterType"),forceRedraw:!0}):a.invalidate(t)},"invalidate")},{key:"gc",value:u(function(){this.atlasManager.gc()},"gc")},{key:"createShaderProgram",value:u(function(t){var n=this.gl,r=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; 

      // what are we rendering?
      in int aVertType;

      // for picking
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex1; // x/y/w/h of texture in atlas
      in vec4 aTex2; 

      // for any transforms that are needed
      in vec4 aScaleRotate1;  // vectors use fewer attributes than matrices
      in vec2 aTranslate1;
      in vec4 aScaleRotate2;
      in vec2 aTranslate2;

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in float aLineWidth;
      in vec4 aEdgeColor;

      out vec2 vTexCoord;
      out vec4 vEdgeColor;
      flat out int vAtlasId;
      flat out vec4 vIndex;
      flat out int vVertType;

      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition;

        if(aVertType == `.concat(ci,`) {
          float texX;
          float texY;
          float texW;
          float texH;
          mat3  texMatrix;

          int vid = gl_VertexID;
          if(vid <= 5) {
            texX = aTex1.x;
            texY = aTex1.y;
            texW = aTex1.z;
            texH = aTex1.w;
            texMatrix = mat3(
              vec3(aScaleRotate1.xy, 0.0),
              vec3(aScaleRotate2.zw, 0.0),
              vec3(aTranslate1,      1.0)
            );
          } else {
            texX = aTex2.x;
            texY = aTex2.y;
            texW = aTex2.z;
            texH = aTex2.w;
            texMatrix = mat3(
              vec3(aScaleRotate2.xy, 0.0),
              vec3(aScaleRotate2.zw, 0.0),
              vec3(aTranslate2,      1.0)
            );
          }

          if(vid == 1 || vid == 2 || vid == 4 || vid == 7 || vid == 8 || vid == 10) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5 || vid == 8 || vid == 10 || vid == 11) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * texMatrix * vec3(position, 1.0), 1.0);
        } 
        else if(aVertType == `).concat(Ns,` && vid < 6) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vEdgeColor = aEdgeColor;
        } 
        else if(aVertType == `).concat(Os,` && vid < 6) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0 = pointA;
          vec2 p1 = pointB;
          vec2 p2 = pointC;
          vec2 pos = position;
          if(position.x == 1.0) {
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth;

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vEdgeColor = aEdgeColor;
        } 
        else if(aVertType == `).concat(di,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2( 0.0,   0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          mat3 transform = mat3(
            vec3(aScaleRotate1.xy, 0.0),
            vec3(aScaleRotate1.zw, 0.0),
            vec3(aTranslate1,      1.0)
          );
          gl_Position = vec4(uPanZoomMatrix * transform * vec3(position, 1.0), 1.0);
          vEdgeColor = aEdgeColor;
        } else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vIndex = aIndex;
        vVertType = aVertType;
      }
    `),a=this.atlasManager.getIndexArray(),i=`#version 300 es
      precision highp float;

      // define texture unit for each node in the batch
      `.concat(a.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;

      in vec2 vTexCoord;
      in vec4 vEdgeColor;
      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;

      out vec4 outColor;

      void main(void) {
        if(vVertType == `).concat(ci,`) {
          `).concat(a.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } else if(vVertType == `).concat(di,`) {
          // blend arrow color with background (using premultiplied alpha)
          outColor.rgb = vEdgeColor.rgb + (uBGColor.rgb * (1.0 - vEdgeColor.a)); 
          outColor.a = 1.0; // make opaque, masks out line under arrow
        } else {
          outColor = vEdgeColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=pc(n,r,i);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex1=n.getAttribLocation(o,"aTex1"),o.aTex2=n.getAttribLocation(o,"aTex2"),o.aScaleRotate1=n.getAttribLocation(o,"aScaleRotate1"),o.aTranslate1=n.getAttribLocation(o,"aTranslate1"),o.aScaleRotate2=n.getAttribLocation(o,"aScaleRotate2"),o.aTranslate2=n.getAttribLocation(o,"aTranslate2"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aEdgeColor=n.getAttribLocation(o,"aEdgeColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uTextures=[];for(var c=0;c<this.atlasManager.maxAtlases;c++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(c)));return o},"createShaderProgram")},{key:"createVAO",value:u(function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1],n=[].concat(t,t);this.vertexCount=n.length/2;var r=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),bc(a,"vec2",i.aPosition,n),this.indexBuffer=pt(a,r,"vec4",i.aIndex),this.vertTypeBuffer=pt(a,r,"int",i.aVertType),this.atlasIdBuffer=pt(a,r,"int",i.aAtlasId),this.tex1Buffer=pt(a,r,"vec4",i.aTex1),this.tex2Buffer=pt(a,r,"vec4",i.aTex2),this.scaleRotate1Buffer=pt(a,r,"vec4",i.aScaleRotate1),this.translate1Buffer=pt(a,r,"vec2",i.aTranslate1),this.scaleRotate2Buffer=pt(a,r,"vec4",i.aScaleRotate2),this.translate2Buffer=pt(a,r,"vec2",i.aTranslate2),this.pointAPointBBuffer=pt(a,r,"vec4",i.aPointAPointB),this.pointCPointDBuffer=pt(a,r,"vec4",i.aPointCPointD),this.lineWidthBuffer=pt(a,r,"float",i.aLineWidth),this.edgeColorBuffer=pt(a,r,"vec4",i.aEdgeColor),a.bindVertexArray(null),o},"createVAO")},{key:"buffers",get:u(function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return t[n]})),this._buffers},"get")},{key:"startFrame",value:u(function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xr.SCREEN;this.panZoomMatrix=t,this.debugInfo=n,this.renderTarget=r,this.startBatch()},"startFrame")},{key:"startBatch",value:u(function(){this.instanceCount=0,this.atlasManager.startBatch()},"startBatch")},{key:"endFrame",value:u(function(){this.endBatch()},"endFrame")},{key:"getTempMatrix",value:u(function(){return this.tempMatrix=this.tempMatrix||qn()},"getTempMatrix")},{key:"drawTexture",value:u(function(t,n,r){var a=this.atlasManager;if(a.isRenderable(t,r)){a.canAddToCurrentBatch(t,r)||this.endBatch();var i=this.instanceCount;this.vertTypeBuffer.getView(i)[0]=ci;var o=this.indexBuffer.getView(i);yr(n,o);var c=a.getAtlasInfo(t,r,c),l=c.atlasID,s=c.tex1,d=c.tex2,h=this.atlasIdBuffer.getView(i);h[0]=l;var f=this.tex1Buffer.getView(i);f[0]=s.x,f[1]=s.y,f[2]=s.w,f[3]=s.h;var p=this.tex2Buffer.getView(i);p[0]=d.x,p[1]=d.y,p[2]=d.w,p[3]=d.h;for(var g=this.getTempMatrix(),y=0,b=[1,2];y<b.length;y++){var v=b[y];a.setTransformMatrix(g,c,t,v===1);var m=this["scaleRotate".concat(v,"Buffer")].getView(i);m[0]=g[0],m[1]=g[1],m[2]=g[3],m[3]=g[4];var x=this["translate".concat(v,"Buffer")].getView(i);x[0]=g[6],x[1]=g[7]}this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},"drawTexture")},{key:"drawEdgeArrow",value:u(function(t,n,r){var a=t._private.rscratch,i,o,c;if(r==="source"?(i=a.arrowStartX,o=a.arrowStartY,c=a.srcArrowAngle):(i=a.arrowEndX,o=a.arrowEndY,c=a.tgtArrowAngle),!(isNaN(i)||i==null||isNaN(o)||o==null||isNaN(c)||c==null)){var l=t.pstyle(r+"-arrow-shape").value;if(l!=="none"){var s=t.pstyle(r+"-arrow-color").value,d=t.pstyle("opacity").value,h=t.pstyle("line-opacity").value,f=d*h,p=t.pstyle("width").pfValue,g=t.pstyle("arrow-scale").value,y=this.r.getArrowWidth(p,g),b=this.getTempMatrix();wo(b),Ir(b,b,[i,o]),$a(b,b,[y,y]),Eo(b,b,c);var v=this.instanceCount;this.vertTypeBuffer.getView(v)[0]=di;var m=this.indexBuffer.getView(v);yr(n,m);var x=this.edgeColorBuffer.getView(v);vr(s,f,x);var w=this.scaleRotate1Buffer.getView(v);w[0]=b[0],w[1]=b[1],w[2]=b[3],w[3]=b[4];var P=this.translate1Buffer.getView(v);P[0]=b[6],P[1]=b[7],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},"drawEdgeArrow")},{key:"drawEdgeLine",value:u(function(t,n){var r=t.pstyle("opacity").value,a=t.pstyle("line-opacity").value,i=t.pstyle("width").pfValue,o=t.pstyle("line-color").value,c=r*a,l=this.getEdgePoints(t);if(l.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),l.length==4){var s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=Ns;var d=this.indexBuffer.getView(s);yr(n,d);var h=this.edgeColorBuffer.getView(s);vr(o,c,h);var f=this.lineWidthBuffer.getView(s);f[0]=i;var p=this.pointAPointBBuffer.getView(s);p[0]=l[0],p[1]=l[1],p[2]=l[2],p[3]=l[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var g=0;g<l.length-2;g+=2){var y=this.instanceCount;this.vertTypeBuffer.getView(y)[0]=Os;var b=this.indexBuffer.getView(y);yr(n,b);var v=this.edgeColorBuffer.getView(y);vr(o,c,v);var m=this.lineWidthBuffer.getView(y);m[0]=i;var x=l[g-2],w=l[g-1],P=l[g],T=l[g+1],E=l[g+2],S=l[g+3],A=l[g+4],B=l[g+5];g==0&&(x=2*P-E+.001,w=2*T-S+.001),g==l.length-4&&(A=2*E-P+.001,B=2*S-T+.001);var k=this.pointAPointBBuffer.getView(y);k[0]=x,k[1]=w,k[2]=P,k[3]=T;var D=this.pointCPointDBuffer.getView(y);D[0]=E,D[1]=S,D[2]=A,D[3]=B,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},"drawEdgeLine")},{key:"getEdgePoints",value:u(function(t){var n=t._private.rscratch,r=n.allpts;if(r.length==4)return r;var a=this.getNumSegments(t);return this.getCurveSegmentPoints(r,a)},"getEdgePoints")},{key:"getNumSegments",value:u(function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)},"getNumSegments")},{key:"getCurveSegmentPoints",value:u(function(t,n){if(t.length==4)return t;for(var r=Array((n+1)*2),a=0;a<=n;a++)if(a==0)r[0]=t[0],r[1]=t[1];else if(a==n)r[a*2]=t[t.length-2],r[a*2+1]=t[t.length-1];else{var i=a/n;this.setCurvePoint(t,i,r,a*2)}return r},"getCurveSegmentPoints")},{key:"setCurvePoint",value:u(function(t,n,r,a){if(t.length<=2)r[a]=t[0],r[a+1]=t[1];else{for(var i=Array(t.length-2),o=0;o<i.length;o+=2){var c=(1-n)*t[o]+n*t[o+2],l=(1-n)*t[o+1]+n*t[o+3];i[o]=c,i[o+1]=l}return this.setCurvePoint(i,n,r,a)}},"setCurvePoint")},{key:"endBatch",value:u(function(){var t=this.gl,n=this.vao,r=this.vertexCount,a=this.instanceCount;if(a!==0){var i=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(i),t.bindVertexArray(n);var o=vt(this.buffers),c;try{for(o.s();!(c=o.n()).done;){var l=c.value;l.bufferSubData(a)}}catch(p){o.e(p)}finally{o.f()}for(var s=this.atlasManager.getAtlases(),d=0;d<s.length;d++)s[d].bufferIfNeeded(t);for(var h=0;h<s.length;h++)t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,s[h].texture),t.uniform1i(i.uTextures[h],h);t.uniformMatrix3fv(i.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(i.uAtlasSize,this.atlasManager.atlasSize);var f=vr(this.bgColor,1);t.uniform4fv(i.uBGColor,f),t.drawArraysInstanced(t.TRIANGLES,0,r,a),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debugInfo&&this.debugInfo.push({count:a,atlasCount:s.length}),this.startBatch()}},"endBatch")},{key:"getDebugInfo",value:u(function(){return this.debugInfo},"getDebugInfo")},{key:"getAtlasDebugInfo",value:u(function(){return this.atlasManager.getDebugInfo()},"getAtlasDebugInfo")}]),e}();function Li(e,t){return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(t,")")}u(Li,"fillStyle");var py=function(){function e(t){Ht(this,e),this.r=t}return u(e,"OverlayUnderlayRenderer"),Ut(e,[{key:"getStyleKey",value:u(function(t,n){var r=this.getStyle(t,n),a=r.shape,i=r.opacity,o=r.color;if(!a)return null;var c=n.width(),l=n.height(),s=Li(o,i);return an("".concat(a,"-").concat(c,"-").concat(l,"-").concat(s))},"getStyleKey")},{key:"isVisible",value:u(function(t,n){var r=n.pstyle("".concat(t,"-opacity")).value;return r>0},"isVisible")},{key:"getStyle",value:u(function(t,n){var r=n.pstyle("".concat(t,"-opacity")).value,a=n.pstyle("".concat(t,"-color")).value,i=n.pstyle("".concat(t,"-shape")).value;return{opacity:r,color:a,shape:i}},"getStyle")},{key:"getPadding",value:u(function(t,n){return n.pstyle("".concat(t,"-padding")).pfValue},"getPadding")},{key:"draw",value:u(function(t,n,r,a){if(this.isVisible(t,r)){var i=this.r,o=a.w,c=a.h,l=o/2,s=c/2,d=this.getStyle(t,r),h=d.shape,f=d.color,p=d.opacity;n.save(),n.fillStyle=Li(f,p),h==="round-rectangle"||h==="roundrectangle"?i.drawRoundRectanglePath(n,l,s,o,c,"auto"):h==="ellipse"&&i.drawEllipsePath(n,l,s,o,c),n.fill(),n.restore()}},"draw")}]),e}();function Tc(e){var t=e&&e.style&&e.style.backgroundColor||"white";return $s(t)}u(Tc,"getBGColor");var Sc={};Sc.initWebgl=function(e,t){var n=this,r=n.data.contexts[n.WEBGL],a=e.cy.container();e.bgColor=Tc(a),e.webglTexSize=Math.min(e.webglTexSize,r.getParameter(r.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),n.webglDebug=e.webglDebug,n.webglDebugShowAtlases=e.webglDebugShowAtlases,console.log("max texture units",r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),console.log("max texture size",r.getParameter(r.MAX_TEXTURE_SIZE)),console.log("webgl options",e),n.pickingFrameBuffer=xc(r),n.pickingFrameBuffer.needsDraw=!0;var i=u(function(s){return n.getTextAngle(s,null)},"getLabelRotation"),o=u(function(s){var d=s.pstyle("label");return d&&d.value},"isLabelVisible");n.eleDrawing=new fy(n,r,e);var c=new py(n);n.eleDrawing.addTextureRenderType("node-body",ur({getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement,isVisible:u(function(s){return s.visible()},"isVisible")})),n.eleDrawing.addTextureRenderType("node-label",ur({getKey:t.getLabelKey,getBoundingBox:t.getLabelBox,drawElement:t.drawLabel,getRotation:i,getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:o})),n.eleDrawing.addTextureRenderType("node-overlay",ur({getBoundingBox:t.getElementBox,getKey:u(function(s){return c.getStyleKey("overlay",s)},"getKey"),drawElement:u(function(s,d,h){return c.draw("overlay",s,d,h)},"drawElement"),isVisible:u(function(s){return c.isVisible("overlay",s)},"isVisible"),getPadding:u(function(s){return c.getPadding("overlay",s)},"getPadding")})),n.eleDrawing.addTextureRenderType("node-underlay",ur({getBoundingBox:t.getElementBox,getKey:u(function(s){return c.getStyleKey("underlay",s)},"getKey"),drawElement:u(function(s,d,h){return c.draw("underlay",s,d,h)},"drawElement"),isVisible:u(function(s){return c.isVisible("underlay",s)},"isVisible"),getPadding:u(function(s){return c.getPadding("underlay",s)},"getPadding")})),n.eleDrawing.addTextureRenderType("edge-label",ur({getKey:t.getLabelKey,getBoundingBox:t.getLabelBox,drawElement:t.drawLabel,getRotation:i,getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:o}));var l=Nr(function(){console.log("garbage collect flag set"),n.data.gc=!0},1e4);n.onUpdateEleCalcs(function(s,d){var h=!1;d&&d.length>0&&(h|=n.eleDrawing.invalidate(d)),h&&l()}),Pc(n)};function Pc(e){{var t=e.render;e.render=function(i){i=i||{};var o=e.cy;e.webgl&&(o.zoom()>ic?(Dc(e),t.call(e,i)):(kc(e),To(e,i,xr.SCREEN)))}}{var n=e.matchCanvasSize;e.matchCanvasSize=function(i){n.call(e,i),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0}}e.findNearestElements=function(i,o,c,l){return Rc(e,i,o)};{var r=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){r.call(e),e.pickingFrameBuffer.needsDraw=!0}}{var a=e.notify;e.notify=function(i,o){a.call(e,i,o),i==="viewport"||i==="bounds"?e.pickingFrameBuffer.needsDraw=!0:i==="background"&&e.eleDrawing.invalidate(o,{type:"node-body"})}}}u(Pc,"overrideCanvasRendererFunctions");function Dc(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}u(Dc,"clearWebgl");function kc(e){var t=u(function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.canvasWidth,e.canvasHeight),n.restore()},"clear");t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}u(kc,"clearCanvas");function Ac(e){var t=e.canvasWidth,n=e.canvasHeight,r=Za(e),a=r.pan,i=r.zoom,o=qn();Ir(o,o,[a.x,a.y]),$a(o,o,[i,i]);var c=qn();Ec(c,t,n);var l=qn();return wc(l,c,o),l}u(Ac,"createPanZoomMatrix");function Co(e,t){var n=e.canvasWidth,r=e.canvasHeight,a=Za(e),i=a.pan,o=a.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n,r),t.translate(i.x,i.y),t.scale(o,o)}u(Co,"setContextTransform");function Bc(e,t){e.drawSelectionRectangle(t,function(n){return Co(e,n)})}u(Bc,"drawSelectionRectangle");function _c(e){var t=e.data.contexts[e.NODE];t.save(),Co(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}u(_c,"drawAxes");function Ic(e){var t=u(function(r,a,i){for(var o=r.atlasManager.getRenderTypeOpts(a),c=e.data.contexts[e.NODE],l=.125,s=o.atlasCollection.atlases,d=0;d<s.length;d++){var h=s[d],f=h.canvas,p=f.width,g=f.height,y=p*d,b=f.height*i;c.save(),c.scale(l,l),c.drawImage(f,y,b),c.strokeStyle="black",c.rect(y,b,p,g),c.stroke(),c.restore()}},"draw"),n=0;t(e.eleDrawing,"node-body",n++),t(e.eleDrawing,"node-label",n++)}u(Ic,"drawAtlases");function Mc(e,t,n,r,a){var i,o,c,l,s=Za(e),d=s.pan,h=s.zoom;if(r===void 0||a===void 0){var f=ba(e,d,h,t,n),p=Ye(f,2),g=p[0],y=p[1],b=6;i=g-b/2,o=y-b/2,c=b,l=b}else{var v=ba(e,d,h,t,n),m=Ye(v,2),x=m[0],w=m[1],P=ba(e,d,h,r,a),T=Ye(P,2),E=T[0],S=T[1];i=x,o=S,c=Math.abs(E-x),l=Math.abs(S-w)}if(c===0||l===0)return[];var A=e.data.contexts[e.WEBGL];A.bindFramebuffer(A.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(A.viewport(0,0,A.canvas.width,A.canvas.height),To(e,null,xr.PICKING),e.pickingFrameBuffer.needsDraw=!1);var B=c*l,k=new Uint8Array(B*4);A.readPixels(i,o,c,l,A.RGBA,A.UNSIGNED_BYTE,k),A.bindFramebuffer(A.FRAMEBUFFER,null);for(var D=new Set,I=0;I<B;I++){var _=k.slice(I*4,I*4+4),R=vc(_)-1;R>=0&&D.add(R)}return D}u(Mc,"getPickingIndexes");function Rc(e,t,n){var r=Mc(e,t,n),a=e.getCachedZSortedEles(),i,o,c=vt(r),l;try{for(c.s();!(l=c.n()).done;){var s=l.value,d=a[s];if(!i&&d.isNode()&&(i=d),!o&&d.isEdge()&&(o=d),i&&o)break}}catch(h){c.e(h)}finally{c.f()}return[i,o].filter(Boolean)}u(Rc,"findNearestElementsWebgl");function To(e,t,n){var r,a;e.webglDebug&&(a=[],r=performance.now());var i=e.eleDrawing,o=0;if(n.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&Bc(e,t),e.data.canvasNeedsRedraw[e.NODE]||n.picking){var c=u(function(k,D){D+=1,k.isNode()?(i.drawTexture(k,D,"node-underlay"),i.drawTexture(k,D,"node-body"),i.drawTexture(k,D,"node-label"),i.drawTexture(k,D,"node-overlay")):(i.drawEdgeLine(k,D),i.drawEdgeArrow(k,D,"source"),i.drawEdgeArrow(k,D,"target"),i.drawTexture(k,D,"edge-label"))},"draw"),l=e.data.contexts[e.WEBGL];n.screen?(l.clearColor(0,0,0,0),l.enable(l.BLEND),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA)):l.disable(l.BLEND),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),l.viewport(0,0,l.canvas.width,l.canvas.height);var s=Ac(e),d=e.getCachedZSortedEles();if(o=d.length,i.startFrame(s,a,n),n.screen){for(var h=0;h<d.nondrag.length;h++)c(d.nondrag[h],h);for(var f=0;f<d.drag.length;f++)c(d.drag[f],-1)}else if(n.picking)for(var p=0;p<d.length;p++)c(d[p],p);i.endFrame(),e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,i.gc()),n.screen&&e.webglDebugShowAtlases&&(_c(e),Ic(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var g=performance.now(),y=!0,b=0,v=0,m=vt(a),x;try{for(m.s();!(x=m.n()).done;){var w=x.value;b++,v+=w.count}}catch(k){m.e(k)}finally{m.f()}var P=Math.ceil(g-r),T="".concat(o," elements, ").concat(v," rectangles, ").concat(b," batches");if(y)console.log("WebGL (".concat(n.name,") - ").concat(T));else{console.log("WebGL render (".concat(n.name,") - frame time ").concat(P,"ms")),console.log("  ".concat(T)),console.log("Texture Atlases Used:");var E=i.getAtlasDebugInfo(),S=vt(E),A;try{for(S.s();!(A=S.n()).done;){var B=A.value;console.log("  ".concat(B.type,": ").concat(B.keyCount," keys, ").concat(B.atlasCount," atlases"))}}catch(k){S.e(k)}finally{S.f()}console.log("")}}}u(To,"renderWebgl");var dn={};dn.drawPolygonPath=function(e,t,n,r,a,i){var o=r/2,c=a/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*i[0],n+c*i[1]);for(var l=1;l<i.length/2;l++)e.lineTo(t+o*i[l*2],n+c*i[l*2+1]);e.closePath()};dn.drawRoundPolygonPath=function(e,t,n,r,a,i,o){o.forEach(function(c){return go(e,c)}),e.closePath()};dn.drawRoundRectanglePath=function(e,t,n,r,a,i){var o=r/2,c=a/2,l=i==="auto"?Cn(r,a):Math.min(i,c,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-c),e.arcTo(t+o,n-c,t+o,n,l),e.arcTo(t+o,n+c,t,n+c,l),e.arcTo(t-o,n+c,t-o,n,l),e.arcTo(t-o,n-c,t,n-c,l),e.lineTo(t,n-c),e.closePath()};dn.drawBottomRoundRectanglePath=function(e,t,n,r,a,i){var o=r/2,c=a/2,l=i==="auto"?Cn(r,a):i;e.beginPath&&e.beginPath(),e.moveTo(t,n-c),e.lineTo(t+o,n-c),e.lineTo(t+o,n),e.arcTo(t+o,n+c,t,n+c,l),e.arcTo(t-o,n+c,t-o,n,l),e.lineTo(t-o,n-c),e.lineTo(t,n-c),e.closePath()};dn.drawCutRectanglePath=function(e,t,n,r,a,i,o){var c=r/2,l=a/2,s=o==="auto"?Gi():o;e.beginPath&&e.beginPath(),e.moveTo(t-c+s,n-l),e.lineTo(t+c-s,n-l),e.lineTo(t+c,n-l+s),e.lineTo(t+c,n+l-s),e.lineTo(t+c-s,n+l),e.lineTo(t-c+s,n+l),e.lineTo(t-c,n+l-s),e.lineTo(t-c,n-l+s),e.closePath()};dn.drawBarrelPath=function(e,t,n,r,a){var i=r/2,o=a/2,c=t-i,l=t+i,s=n-o,d=n+o,h=pi(r,a),f=h.widthOffset,p=h.heightOffset,g=h.ctrlPtOffsetPct*f;e.beginPath&&e.beginPath(),e.moveTo(c,s+p),e.lineTo(c,d-p),e.quadraticCurveTo(c+g,d,c+f,d),e.lineTo(l-f,d),e.quadraticCurveTo(l-g,d,l,d-p),e.lineTo(l,s+p),e.quadraticCurveTo(l-g,s,l-f,s),e.lineTo(c+f,s),e.quadraticCurveTo(c+g,s,c,s+p),e.closePath()};var zs=Math.sin(0),Fs=Math.cos(0),Ni={},Oi={},Lc=Math.PI/40;for(fn=0*Math.PI;fn<2*Math.PI;fn+=Lc)Ni[fn]=Math.sin(fn),Oi[fn]=Math.cos(fn);var fn;dn.drawEllipsePath=function(e,t,n,r,a){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,a/2,0,0,2*Math.PI);else for(var i,o,c=r/2,l=a/2,s=0*Math.PI;s<2*Math.PI;s+=Lc)i=t-c*Ni[s]*zs+c*Oi[s]*Fs,o=n+l*Oi[s]*zs+l*Ni[s]*Fs,s===0?e.moveTo(i,o):e.lineTo(i,o);e.closePath()};var Ur={};Ur.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]};Ur.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements(),r=n.boundingBox(),a=this.findContainerClientCoords(),i=e.full?Math.ceil(r.w):a[2],o=e.full?Math.ceil(r.h):a[3],c=te(e.maxWidth)||te(e.maxHeight),l=this.getPixelRatio(),s=1;if(e.scale!==void 0)i*=e.scale,o*=e.scale,s=e.scale;else if(c){var d=1/0,h=1/0;te(e.maxWidth)&&(d=s*e.maxWidth/i),te(e.maxHeight)&&(h=s*e.maxHeight/o),s=Math.min(d,h),i*=s,o*=s}c||(i*=l,o*=l,s*=l);var f=document.createElement("canvas");f.width=i,f.height=o,f.style.width=i+"px",f.style.height=o+"px";var p=f.getContext("2d");if(i>0&&o>0){p.clearRect(0,0,i,o),p.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(e.full)p.translate(-r.x1*s,-r.y1*s),p.scale(s,s),this.drawElements(p,g),p.scale(1/s,1/s),p.translate(r.x1*s,r.y1*s);else{var y=t.pan(),b={x:y.x*s,y:y.y*s};s*=t.zoom(),p.translate(b.x,b.y),p.scale(s,s),this.drawElements(p,g),p.scale(1/s,1/s),p.translate(-b.x,-b.y)}e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.rect(0,0,i,o),p.fill())}return f};function Nc(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),a=new Uint8Array(r),i=0;i<n.length;i++)a[i]=n.charCodeAt(i);return new Blob([r],{type:t})}u(Nc,"b64ToBlob");function zi(e){var t=e.indexOf(",");return e.substr(t+1)}u(zi,"b64UriToB64");function So(e,t,n){var r=u(function(){return t.toDataURL(n,e.quality)},"getB64Uri");switch(e.output){case"blob-promise":return new Qn(function(a,i){try{t.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(o){i(o)}});case"blob":return Nc(zi(r()),n);case"base64":return zi(r());case"base64uri":default:return r()}}u(So,"output");Ur.png=function(e){return So(e,this.bufferCanvasImage(e),"image/png")};Ur.jpg=function(e){return So(e,this.bufferCanvasImage(e),"image/jpeg")};var Oc={};Oc.nodeShapeImpl=function(e,t,n,r,a,i,o,c){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,a,i);case"polygon":return this.drawPolygonPath(t,n,r,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(t,n,r,a,i,o,c);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,a,i,c);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,a,i,o,c);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,a,i,c);case"barrel":return this.drawBarrelPath(t,n,r,a,i)}};var gy=Po,Ee=Po.prototype;Ee.CANVAS_LAYERS=3;Ee.SELECT_BOX=0;Ee.DRAG=1;Ee.NODE=2;Ee.WEBGL=3;Ee.CANVAS_TYPES=["2d","2d","2d","webgl2"];Ee.BUFFER_COUNT=3;Ee.TEXTURE_BUFFER=0;Ee.MOTIONBLUR_BUFFER_NODE=1;Ee.MOTIONBLUR_BUFFER_DRAG=2;function Po(e){var t=this,n=t.cy.window(),r=n.document;e.webgl&&(Ee.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(Ee.CANVAS_LAYERS),contexts:new Array(Ee.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ee.CANVAS_LAYERS),bufferCanvases:new Array(Ee.BUFFER_COUNT),bufferContexts:new Array(Ee.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";t.data.canvasContainer=r.createElement("div");var o=t.data.canvasContainer.style;t.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var c=e.cy.container();c.appendChild(t.data.canvasContainer),c.style[a]=i;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};sd()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var s=0;s<Ee.CANVAS_LAYERS;s++){var d=t.data.canvases[s]=r.createElement("canvas"),h=Ee.CANVAS_TYPES[s];t.data.contexts[s]=d.getContext(h),t.data.contexts[s]||ze("Could not create canvas of type "+h),Object.keys(l).forEach(function(O){d.style[O]=l[O]}),d.style.position="absolute",d.setAttribute("data-id","layer"+s),d.style.zIndex=String(Ee.CANVAS_LAYERS-s),t.data.canvasContainer.appendChild(d),t.data.canvasNeedsRedraw[s]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[Ee.NODE].setAttribute("data-id","layer"+Ee.NODE+"-node"),t.data.canvases[Ee.SELECT_BOX].setAttribute("data-id","layer"+Ee.SELECT_BOX+"-selectbox"),t.data.canvases[Ee.DRAG].setAttribute("data-id","layer"+Ee.DRAG+"-drag"),t.data.canvases[Ee.WEBGL]&&t.data.canvases[Ee.WEBGL].setAttribute("data-id","layer"+Ee.WEBGL+"-webgl");for(var s=0;s<Ee.BUFFER_COUNT;s++)t.data.bufferCanvases[s]=r.createElement("canvas"),t.data.bufferContexts[s]=t.data.bufferCanvases[s].getContext("2d"),t.data.bufferCanvases[s].style.position="absolute",t.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),t.data.bufferCanvases[s].style.zIndex=String(-s-1),t.data.bufferCanvases[s].style.visibility="hidden";t.pathsEnabled=!0;var f=yt(),p=u(function(O){return{x:(O.x1+O.x2)/2,y:(O.y1+O.y2)/2}},"getBoxCenter"),g=u(function(O){return{x:-O.w/2,y:-O.h/2}},"getCenterOffset"),y=u(function(O){var X=O[0]._private,$=X.oldBackgroundTimestamp===X.backgroundTimestamp;return!$},"backgroundTimestampHasChanged"),b=u(function(O){return O[0]._private.nodeKey},"getStyleKey"),v=u(function(O){return O[0]._private.labelStyleKey},"getLabelKey"),m=u(function(O){return O[0]._private.sourceLabelStyleKey},"getSourceLabelKey"),x=u(function(O){return O[0]._private.targetLabelStyleKey},"getTargetLabelKey"),w=u(function(O,X,$,ie,se){return t.drawElement(O,X,$,!1,!1,se)},"drawElement"),P=u(function(O,X,$,ie,se){return t.drawElementText(O,X,$,ie,"main",se)},"drawLabel"),T=u(function(O,X,$,ie,se){return t.drawElementText(O,X,$,ie,"source",se)},"drawSourceLabel"),E=u(function(O,X,$,ie,se){return t.drawElementText(O,X,$,ie,"target",se)},"drawTargetLabel"),S=u(function(O){return O.boundingBox(),O[0]._private.bodyBounds},"getElementBox"),A=u(function(O){return O.boundingBox(),O[0]._private.labelBounds.main||f},"getLabelBox"),B=u(function(O){return O.boundingBox(),O[0]._private.labelBounds.source||f},"getSourceLabelBox"),k=u(function(O){return O.boundingBox(),O[0]._private.labelBounds.target||f},"getTargetLabelBox"),D=u(function(O,X){return X},"isLabelVisibleAtScale"),I=u(function(O){return p(S(O))},"getElementRotationPoint"),_=u(function(O,X,$){var ie=O?O+"-":"";return{x:X.x+$.pstyle(ie+"text-margin-x").pfValue,y:X.y+$.pstyle(ie+"text-margin-y").pfValue}},"addTextMargin"),R=u(function(O,X,$){var ie=O[0]._private.rscratch;return{x:ie[X],y:ie[$]}},"getRsPt"),z=u(function(O){return _("",R(O,"labelX","labelY"),O)},"getLabelRotationPoint"),N=u(function(O){return _("source",R(O,"sourceLabelX","sourceLabelY"),O)},"getSourceLabelRotationPoint"),M=u(function(O){return _("target",R(O,"targetLabelX","targetLabelY"),O)},"getTargetLabelRotationPoint"),L=u(function(O){return g(S(O))},"getElementRotationOffset"),q=u(function(O){return g(B(O))},"getSourceLabelRotationOffset"),Y=u(function(O){return g(k(O))},"getTargetLabelRotationOffset"),W=u(function(O){var X=A(O),$=g(A(O));if(O.isNode()){switch(O.pstyle("text-halign").value){case"left":$.x=-X.w-(X.leftPad||0);break;case"right":$.x=-(X.rightPad||0);break}switch(O.pstyle("text-valign").value){case"top":$.y=-X.h-(X.topPad||0);break;case"bottom":$.y=-(X.botPad||0);break}}return $},"getLabelRotationOffset"),K=t.data.eleTxrCache=new gr(t,{getKey:b,doesEleInvalidateKey:y,drawElement:w,getBoundingBox:S,getRotationPoint:I,getRotationOffset:L,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),J=t.data.lblTxrCache=new gr(t,{getKey:v,drawElement:P,getBoundingBox:A,getRotationPoint:z,getRotationOffset:W,isVisible:D}),ee=t.data.slbTxrCache=new gr(t,{getKey:m,drawElement:T,getBoundingBox:B,getRotationPoint:N,getRotationOffset:q,isVisible:D}),Z=t.data.tlbTxrCache=new gr(t,{getKey:x,drawElement:E,getBoundingBox:k,getRotationPoint:M,getRotationOffset:Y,isVisible:D}),Q=t.data.lyrTxrCache=new oc(t);t.onUpdateEleCalcs(u(function(O,X){K.invalidateElements(X),J.invalidateElements(X),ee.invalidateElements(X),Z.invalidateElements(X),Q.invalidateElements(X);for(var $=0;$<X.length;$++){var ie=X[$]._private;ie.oldBackgroundTimestamp=ie.backgroundTimestamp}},"invalidateTextureCaches"));var U=u(function(O){for(var X=0;X<O.length;X++)Q.enqueueElementRefinement(O[X].ele)},"refineInLayers");K.onDequeue(U),J.onDequeue(U),ee.onDequeue(U),Z.onDequeue(U),e.webgl&&t.initWebgl(e,{getStyleKey:b,getLabelKey:v,drawElement:w,drawLabel:P,getElementBox:S,getLabelBox:A,getElementRotationPoint:I,getElementRotationOffset:L,getLabelRotationPoint:z,getLabelRotationOffset:W})}u(Po,"CanvasRenderer");Ee.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[Ee.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[Ee.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[Ee.SELECT_BOX]=t;break;case"gc":n.data.gc=!0;break}};var vy=typeof Path2D<"u";Ee.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=!!e};Ee.usePaths=function(){return vy&&this.pathsEnabled};Ee.setImgSmoothing=function(e,t){e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)};Ee.getImgSmoothing=function(e){return e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled};Ee.makeOffscreenCanvas=function(e,t){var n;if((typeof OffscreenCanvas>"u"?"undefined":We(OffscreenCanvas))!=="undefined")n=new OffscreenCanvas(e,t);else{var r=this.cy.window(),a=r.document;n=a.createElement("canvas"),n.width=e,n.height=t}return n};[sc,zt,Gt,mo,In,nr,ht,Sc,dn,Ur,Oc].forEach(function(e){pe(Ee,e)});var yy=[{name:"null",impl:fo},{name:"base",impl:rc},{name:"canvas",impl:gy}],my=[{type:"layout",extensions:Pv},{type:"renderer",extensions:yy}],zc={},Fc={};function Do(e,t,n){var r=n,a=u(function(E){_e("Can not register `"+t+"` for `"+e+"` since `"+E+"` already exists in the prototype and can not be overridden")},"overrideErr");if(e==="core"){if(_r.prototype[t])return a(t);_r.prototype[t]=n}else if(e==="collection"){if(nt.prototype[t])return a(t);nt.prototype[t]=n}else if(e==="layout"){for(var i=u(function(E){this.options=E,n.call(this,E),ke(this._private)||(this._private={}),this._private.cy=E.cy,this._private.listeners=[],this.createEmitter()},"Layout"),o=i.prototype=Object.create(n.prototype),c=[],l=0;l<c.length;l++){var s=c[l];o[s]=o[s]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var d=n.prototype.stop;o.stop=function(){var E=this.options;if(E&&E.animate){var S=this.animations;if(S)for(var A=0;A<S.length;A++)S[A].stop()}return d?d.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=u(function(E){return E._private.cy},"getCy"),f={addEventFields:u(function(E,S){S.layout=E,S.cy=h(E),S.target=E},"addEventFields"),bubble:u(function(){return!0},"bubble"),parent:u(function(E){return h(E)},"parent")};pe(o,{createEmitter:u(function(){return this._private.emitter=new Vr(f,this),this},"createEmitter"),emitter:u(function(){return this._private.emitter},"emitter"),on:u(function(E,S){return this.emitter().on(E,S),this},"on"),one:u(function(E,S){return this.emitter().one(E,S),this},"one"),once:u(function(E,S){return this.emitter().one(E,S),this},"once"),removeListener:u(function(E,S){return this.emitter().removeListener(E,S),this},"removeListener"),removeAllListeners:u(function(){return this.emitter().removeAllListeners(),this},"removeAllListeners"),emit:u(function(E,S){return this.emitter().emit(E,S),this},"emit")}),Be.eventAliasesOn(o),r=i}else if(e==="renderer"&&t!=="null"&&t!=="base"){var p=ko("renderer","base"),g=p.prototype,y=n,b=n.prototype,v=u(function(){p.apply(this,arguments),y.apply(this,arguments)},"Renderer"),m=v.prototype;for(var x in g){var w=g[x],P=b[x]!=null;if(P)return a(x);m[x]=w}for(var T in b)m[T]=b[T];g.clientFunctions.forEach(function(E){m[E]=m[E]||function(){ze("Renderer does not implement `renderer."+E+"()` on its prototype")}}),r=v}else if(e==="__proto__"||e==="constructor"||e==="prototype")return ze(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return Qs({map:zc,keys:[e,t],value:r})}u(Do,"setExtension");function ko(e,t){return Js({map:zc,keys:[e,t]})}u(ko,"getExtension");function Vc(e,t,n,r,a){return Qs({map:Fc,keys:[e,t,n,r],value:a})}u(Vc,"setModule");function jc(e,t,n,r){return Js({map:Fc,keys:[e,t,n,r]})}u(jc,"getModule");var Fi=u(function(){if(arguments.length===2)return ko.apply(null,arguments);if(arguments.length===3)return Do.apply(null,arguments);if(arguments.length===4)return jc.apply(null,arguments);if(arguments.length===5)return Vc.apply(null,arguments);ze("Invalid extension access syntax")},"extension");_r.prototype.extension=Fi;my.forEach(function(e){e.extensions.forEach(function(t){Do(e.type,t.name,t.impl)})});var Yc=u(function e(){if(!(this instanceof e))return new e;this.length=0},"Stylesheet"),Pn=Yc.prototype;Pn.instanceString=function(){return"stylesheet"};Pn.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this};Pn.css=function(e,t){var n=this.length-1;if(ce(e))this[n].properties.push({name:e,value:t});else if(ke(e))for(var r=e,a=Object.keys(r),i=0;i<a.length;i++){var o=a[i],c=r[o];if(c!=null){var l=it.properties[o]||it.properties[Ma(o)];if(l!=null){var s=l.name,d=c;this[n].properties.push({name:s,value:d})}}}return this};Pn.style=Pn.css;Pn.generateStyle=function(e){var t=new it(e);return this.appendToStyle(t)};Pn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,a=n.properties;e.selector(r);for(var i=0;i<a.length;i++){var o=a[i];e.css(o.name,o.value)}}return e};var by="3.31.0",Zn=u(function(e){if(e===void 0&&(e={}),ke(e))return new _r(e);if(ce(e))return Fi.apply(Fi,arguments)},"cytoscape");Zn.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(Zn),e.apply(null,t),this};Zn.warnings=function(e){return ml(e)};Zn.version=by;Zn.stylesheet=Zn.Stylesheet=Yc;/*! Bundled license information:

cytoscape/dist/cytoscape.esm.mjs:
  (*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  *)
  (*!
  Event object based on jQuery events, MIT license
  
  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  *)
  (*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
  (*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
*/export{Zn as G};
