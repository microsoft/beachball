<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>publish | beachball</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="The Sunniest Semantic Version Bumper">
    
    <link rel="preload" href="/beachball/assets/css/0.styles.b61d1a79.css" as="style"><link rel="preload" href="/beachball/assets/js/app.1312e204.js" as="script"><link rel="preload" href="/beachball/assets/js/2.b968aa13.js" as="script"><link rel="preload" href="/beachball/assets/js/12.c644a5ed.js" as="script"><link rel="prefetch" href="/beachball/assets/js/10.432fa992.js"><link rel="prefetch" href="/beachball/assets/js/11.1181cadd.js"><link rel="prefetch" href="/beachball/assets/js/13.6c68804c.js"><link rel="prefetch" href="/beachball/assets/js/14.f99609d0.js"><link rel="prefetch" href="/beachball/assets/js/15.6d21f1f3.js"><link rel="prefetch" href="/beachball/assets/js/16.bc5eaa79.js"><link rel="prefetch" href="/beachball/assets/js/17.7d369d6f.js"><link rel="prefetch" href="/beachball/assets/js/18.f73c426f.js"><link rel="prefetch" href="/beachball/assets/js/19.df6299bc.js"><link rel="prefetch" href="/beachball/assets/js/20.25db017c.js"><link rel="prefetch" href="/beachball/assets/js/21.5df8fa18.js"><link rel="prefetch" href="/beachball/assets/js/3.23c8b818.js"><link rel="prefetch" href="/beachball/assets/js/4.5f66677b.js"><link rel="prefetch" href="/beachball/assets/js/5.69eddd6e.js"><link rel="prefetch" href="/beachball/assets/js/6.88d03338.js"><link rel="prefetch" href="/beachball/assets/js/7.0c6511fb.js"><link rel="prefetch" href="/beachball/assets/js/8.0780af24.js"><link rel="prefetch" href="/beachball/assets/js/9.859bc5f0.js">
    <link rel="stylesheet" href="/beachball/assets/css/0.styles.b61d1a79.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/beachball/" class="home-link router-link-active"><!----> <span class="site-name">beachball</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/beachball/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/beachball/overview/getting-started.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="https://github.com/microsoft/beachball" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/beachball/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/beachball/overview/getting-started.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="https://github.com/microsoft/beachball" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/beachball/overview/installation.html" class="sidebar-link">Installation</a></li><li><a href="/beachball/overview/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/beachball/overview/configuration.html" class="sidebar-link">Configuration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Concepts</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/beachball/concepts/bump-algorithm.html" class="sidebar-link">Bump Algorithm</a></li><li><a href="/beachball/concepts/change-files.html" class="sidebar-link">Change Files</a></li><li><a href="/beachball/concepts/ci-integration.html" class="sidebar-link">CI Integration</a></li><li><a href="/beachball/concepts/groups.html" class="sidebar-link">Version Groups</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Command Line Args</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/beachball/cli/options.html" class="sidebar-link">Common Options</a></li><li><a href="/beachball/cli/bump.html" class="sidebar-link">bump</a></li><li><a href="/beachball/cli/change.html" class="sidebar-link">change</a></li><li><a href="/beachball/cli/check.html" class="sidebar-link">check</a></li><li><a href="/beachball/cli/publish.html" aria-current="page" class="active sidebar-link">publish</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/beachball/cli/sync.html" class="sidebar-link">sync</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="publish"><a href="#publish" class="header-anchor">#</a> <code>publish</code></h1> <p>Publishing automates all the bumping and synchronizing of package versions in the git remote as well as the npm registry.</p> <h3 id="options"><a href="#options" class="header-anchor">#</a> Options</h3> <p>See the <a href="./options">options page</a>.</p> <h3 id="algorithm"><a href="#algorithm" class="header-anchor">#</a> Algorithm</h3> <p>The <code>publish</code> command is designed to run steps in an order that minimizes the chances of mid-publish failure by doing validation upfront.</p> <p><code>beachball publish</code> performs the following steps:</p> <ol><li>Validate that options and change files are valid</li> <li>Bump and publish to npm (unless disabled):
<ol><li>Bump the package versions locally</li> <li>Generate the changelog files (unless disabled)</li> <li>Delete change files locally (unless disabled)</li> <li>Validate that nothing to be published depends on a private package</li> <li>Publish packages to npm in topological order based on the dependency graph (to reduce the chances that if there's a failure partway through, a published package might require unpublished versions)</li></ol></li> <li>Bump and push to git (unless bumping or pushing is disabled):
<ol><li>Revert any previous changes (from the publish step)</li> <li>Merge the latest changes from the remote branch to avoid merge conflicts (unless fetching is disabled)</li> <li>Bump the versions locally</li> <li>Generate the changelog files (unless disabled)</li> <li>Delete change files locally (unless disabled)</li> <li>Commit the changes</li> <li>Create git tags for new package versions (unless disabled)</li> <li>Push the changes and tags</li></ol></li></ol> <p>It might be surprising that <code>beachball publish</code> does so many steps, especially the step about reverting changes! In most version bumping systems that automate syncing the git repo and npm registry, they assume that the source code is still fresh once it's time to push changes back to the git repository. This is rarely the case for large repos with many developers. So, <code>beachball</code> fetches the latest changes before pushing back to the target branch to avoid merge conflicts.</p> <h3 id="example-ci-workflow"><a href="#example-ci-workflow" class="header-anchor">#</a> Example CI workflow</h3> <p>See the <a href="../concepts/ci-integration">CI integration page</a> details and examples for how to run <code>beachball publish</code> in CI.</p> <h3 id="recovering-from-failed-publish"><a href="#recovering-from-failed-publish" class="header-anchor">#</a> Recovering from failed publish</h3> <p>If the <code>publish</code> command fails partway through, after some versions have been published to the registry, you'll need to run <a href="./sync"><code>beachball sync</code></a> and commit the changes.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/beachball/cli/check.html" class="prev">
        check
      </a></span> <span class="next"><a href="/beachball/cli/sync.html">
        sync
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/beachball/assets/js/app.1312e204.js" defer></script><script src="/beachball/assets/js/2.b968aa13.js" defer></script><script src="/beachball/assets/js/12.c644a5ed.js" defer></script>
  </body>
</html>
